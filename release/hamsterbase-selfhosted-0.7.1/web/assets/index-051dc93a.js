function wN(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const EN="复制成功",CN="取消",xN="没有打开的网页",kN="未选择远程",IN="取消",RN="重新连接",MN="保存",TN="停止同步",LN="同步",AN="排序方式",ON={"add_time_filter_label.date_added":"添加时间","add_time_filter_left_operand.date_added":"添加时间","add_time_filter_left_operator.after":"晚于","add_time_filter_left_operator.before":"早于","add_time_filter_right_operands.last_month":"上月","add_time_filter_right_operands.last_week":"上周","add_time_filter_right_operands.this_month":"本月","add_time_filter_right_operands.this_week":"本周","add_time_filter_right_operands.today":"今天","add_time_filter_right_operands.yesterday":"昨天","annotate_count_filter_operator.annotate_count":"批注数","api_token.placeholder":"输入一个标签以便识别该令牌","ContextKey.multipleSelectViewVisible":"多选组件可见",copy_success:EN,"error.E0001":"网页解析失败","error.E0002":"不支持的版本","error.E0003":"不支持的文件夹","error.E0004":"服务器连接失败","errorcode_004.connect_refused":"连接失败",filter_cancel:CN,"filter_limit.limit":"限制","filter_limit.webpages":"网页","filter_match.all":"全部","filter_match.any":"任一","filter_match.filter":"规则","filter_match.match":"匹配","filter_operator.is":"是","filter_operator.is_less_than":"少于","filter_operator.is_more_than":"大于","filter_operator.is_not":"不是","filter_widget.placeholder":"过滤","filter.filter":"过滤","form_validate.required":"请输入 {0}","form.Entrypoint":"地址","form.name":"名称","form.token":"令牌","highlight_empty.sub_title":"通过选择一些文本并点击高亮按钮来创建一个批注。","highlight_empty.title":"没有批注","highlight_list.copy_note_success":"复制笔记成功","highlight_list.copy_text_success":"复制文本成功","highlight_list.copy_url_success":"复制链接成功","highlight_tool.add_highlight":"高亮","highlight_tool.cancel":"取消","highlight_tool.copy_text":"复制文本","highlight_tool.delete_highlight":"删除高亮","highlight_tool.edit_note":"编辑笔记","highlight_tool.save":"保存","highlight_tool.take_note":"记笔记","highlight.action.copyNote":"复制笔记","highlight.action.copyText":"复制高亮文本","highlight.action.copyUrl":"复制高亮链接","highlight.action.delete":"删除","highlight.action.EditNote":"编辑笔记","highlight.menu":"菜单","homepage.redirect_lang":"zh-CN","host_filter_label.host":"域名","host_filter_left_operand.host":"域名","host_filter_operator.is":"是","host_filter_operator.is_either_of":"属于","host_filter_operator.is_not":"不是","info_empty.sub_title":"选择网页以查看其详细信息","info_empty.title":"未选择网页","label_filter_label.any_label":"任何标签","label_filter_label.label":"标签","label_filter_label.labels_count":"{0} 个标签","label_filter_left_operand.label":"标签","label_filter_operator.does_not_include":"不包含","label_filter_operator.exclude_if_all":"不包含任何","label_filter_operator.exclude_if_any_of":"不包含任一","label_filter_operator.has":"有","label_filter_operator.includes":"包含","label_filter_operator.includes_all_of":"包含全部","label_filter_operator.includes_any_of":"包含任一","label_filter_operator.not_has":"没有","left_panel_title.settings":"设置","left_sidebar_menu_group.library":"库","left_sidebar_menu_group.views":"视图","left_sidebar_menu.all":"全部","left_sidebar_menu.unread":"未读","left_sidebar_menu.upload":"上传","left_sidebar_menu.views_action_create_view":"创建视图","legal.credits":"Credits","legal.eula":"用户协议","legal.privacy_policy":"隐私政策","license.agree_ok":"好的","license.agree_part_1":"我已经阅读并同意","license.agree_part_2":"和","like_filter_left_operand.page":"页面","like_filter_operator.is":"是","like_filter_operator.is_not":"不是","like_filter.like":"喜欢","link_duplicate_filter_left_operand.link":"链接","link_duplicate_filter_operator.is":"是","link_duplicate_filter_operator.is_not":"不是","link_duplicate_filter_right_operand.duplicate":"重复","link_duplicate_filter.link_duplicate":"链接重复","login.password_incorrect":"密码错误","menu_developer.clear_cache":"清除缓存","menu_developer.crash_dump":"打开崩溃记录文件夹","menu_developer.developer":"开发者","menu_developer.toggle_dev_tools":"切换开发者工具","menu_edit.copy":"复制","menu_edit.cut":"剪切","menu_edit.edit":"编辑","menu_edit.paste":"粘贴","menu_edit.select_all":"全选","menu_help.changelog":"更新日志","menu_help.contact_hamsterbase":"联系 hamsterbase","menu_help.developer_document":"开发文档","menu_help.github_issue":"GitHub 反馈","menu_help.guide":"帮助文档","menu_help.help":"帮助","menu_product.quit":"退出 {0}","menu_view.force_reload":"强制刷新","menu_view.reload":"刷新","menu_view.toggle_fullscreen":"切换全屏","menu_view.view":"视图",no_open_webpage:xN,not_selected:kN,"prompt_button.cancel":"取消","prompt_button.save":"保存","prompt.close":"关闭","prompt.limit":"限制","prompt.limit_count":"限制数量","prompt.limit.invalid":"限制无效","read_status_filter_left_operand.page":"页面","read_status_filter_operator.is":"是","read_status_filter_operator.is_not":"不是","read_status_filter_right_operand.read":"已读","read_status_filter.read_status":"阅读状态",remote_cancel:IN,"remote_entrypoint.not_found":"请输入远程服务器地址",remote_reconnect:RN,remote_save:MN,remote_stop_sync:TN,remote_sync:LN,"remote_token.not_found":"请输入远程令牌","remote.not_found":"未找到远程","remotes_editor.placeholder_entrypoint":"地址","remotes_editor.placeholder_name":"客户端名字","remotes_editor.placeholder_token":"密钥","remotes_panel.add":"添加","remotes_panel.delete":"删除","remotes_prompt.name":"名称","remotes_prompt.title":"添加远程","search_input.placeholder":"搜索","search.not_found":"未找到","settings_about.guide":"使用指南","settings_about.guide_subtitle":"访问 HamsterBase 用户指南","settings_about.language":"语言","settings_about.language_subtitle":"选择您的语言","settings_about.open":"打开","settings_api.api_server":"API 服务器","settings_api.copy":"拷贝","settings_api.create_token":"创建密钥","settings_api.delete":"删除","settings_api.personal_api_tokens":"个人 API 密钥","settings_api.personal_api_tokens_subtile":"您可以使用这些密钥来访问您的应用程序","settings_api.port":"端口","settings_api.port_input_disabled_title":"请停止 API 服务器以后再修改端口。","settings_api.port_subtitle":"API 服务器端口","settings_api.server_error":"API 服务器启动失败","settings_api.server_status_running":"API 服务器当前地址为 {0}","settings_api.server_status_stop":"API 服务器已关闭","settings_api.start_server":"开启 API 服务器","settings_api.stop_server":"关闭 API 服务器","settings_appearance.auto":"自动","settings_appearance.dark":"深色","settings_appearance.light":"浅色","settings_appearance.theme":"主题","settings_appearance.theme_subtitle":"选择您的主题","settings_tab.about":"关于","settings_tab.api":"API","settings_tab.appearance":"外观","settings_tab.remotes":"远程","startup.create_workspace_button":"创建","startup.create_workspace_description":"选择一个空的文件夹作为知识库","startup.create_workspace_title":"创建知识库","startup.errors.not_empty":"请选择一个空文件夹","startup.errors.not_valid":"这不是一个正确的 hamsterbase 仓库","startup.open_workspace_action":"打开","startup.open_workspace_description":"打开一个已经创建的知识库","startup.open_workspace_title":"打开知识库","title_duplicate_filter_left_operand.title":"标题","title_duplicate_filter_operator.is":"是","title_duplicate_filter_operator.is_not":"不是","title_duplicate_filter_right_operand.duplicate":"重复","title_duplicate_filter.title_duplicate":"标题重复","upload_panel.browser_extension":"hamsterbase 是否有官方浏览器扩展？","upload_panel.browser_extension_description":"是的。hamsterbase 浏览器扩展支持直接在浏览器中进行注释，同时还支持保存快照。","upload_panel.drop_zone":"托放网页文件到这里 或者","upload_panel.drop_zone_browser":"浏览","upload_panel.drop_zone_description":"支持的格式: HTML, MHT, Webarchive","upload_panel.faq_link":"查看更多","upload_panel.import_webpage_description":"本文介绍 hamsterbase 的手动导入、自动导入功能。手动导入适合少量快照的场景，自动导入适合用于导入大量快照。","upload_panel.import_webpage_title":"如何导入网页快照？","upload_panel.save_webpage_description":"HTML / MHT (mhtml) / WebArchive 是三种常用的网页快照格式, 让你可以在离线情况下访问网页完整的内容。 本文将介绍如何在浏览器里将网页保存为快照。","upload_panel.save_webpage_title":"如何保存网页快照？","upload_panel.singlefile_description":"Singlefile 是一个开源浏览器插件，支持 Safari, Chrome, Edge 和 Firefox.  他可以帮助你把完整的网页保存为单个 HTML 文件。本文介绍了如何在 singlefile 中连接  Hamsterbase.  连接后你可以使用 singlefile 一键保存当前正在浏览的网页。","upload_panel.singlefile_title":"singlefile 如何连接 hamsterbase？","upload_panel.title":"导入网页","upload_status.added":"已添加","upload_status.error":"错误","upload_status.parsed":"已解析","upload_status.parsing":"解析中","upload_status.uploaded":"已上传","upload_status.uploading":"上传中","view_action.save":"保存","view_prompt.create_title":"创建视图","view_prompt.create_view":"创建视图","view_prompt.description":"描述","view_prompt.edit_title":"编辑视图","view_prompt.title":"标题",view_sort_by:AN,"view_sort.add_time_asc":"添加时间: 从远到近","view_sort.add_time_desc":"添加时间: 从近到远","view_sort.annotate_count_asc":"批注数量: 从少到多","view_sort.annotate_count_desc":"批注数量: 从多到少","view_sort.title_asc":"标题排序: 从 A 到 Z","view_sort.title_desc":"标题排序: 从 Z 到 A","webpage_detail.add_label":"添加标签","webpage_detail.added":"添加时间","webpage_detail.format":"文件格式","webpage_detail.labels":"标签","webpage_detail.link":"链接","webpage_detail.read":"已读","webpage_detail.read_status":"阅读状态","webpage_detail.size":"文件大小","webpage_detail.title":"标题","webpage_detail.unread":"未读","webpage_preview_action.close":"关闭网页预览","webpage_preview_action.filter":"筛选","webpage_preview_action.next":"下一个网页","webpage_preview_action.previous":"上一个网页","webpages_layout.column":"列","webpages_layout.delete_webpage":"删除网页","webpages_layout.like":"赞","webpages_layout.list":"列表","webpages_layout.mark_read":"标记为已读","webpages_layout.mark_unread":"标记为未读","webpages_menu.clear_filter":"清空筛选","webpages_menu.create_view":"创建视图","webpages_menu.disable_limit":"禁用限制","webpages_menu.edit_limit":"编辑限制","webpages_menu.edit_view":"编辑视图","webpages_menu.enable_limit":"限制网页数量","webpages_menu.open_in_browser":"在浏览器中打开","webpages_menu.rss":"打开 RSS 订阅","webpages_menu.sort_by":"排序方式","webpages.go_upload":"上传","webpages.no_data":"无网页","webpages.toolbar.info":"信息","webpages.toolbar.more":"更多","webpages.toolbar.notes":"笔记","webserver.invalid_port":"端口格式错误","webserver.portInUse":"端口已经被使用"},PN=localStorage.getItem("hamsterbase-locale")??navigator.language,_1={"en-US":["en-US","en"],"zh-CN":["zh-CN","zh"]};let a0="en-US";Object.keys(_1).forEach(e=>{_1[e].includes(PN)&&(a0=e)});globalThis.language=a0;a0==="zh-CN"&&(globalThis.i18nMessages=ON);var Mg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function NN(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(t,i);return new o}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var D_={exports:{}};(function(e,t){(function(n,r){r(t)})(Mg,function(n){var r=function(){return r=Object.assign||function(f){for(var m,S=1,I=arguments.length;S<I;S++){m=arguments[S];for(var A in m)Object.prototype.hasOwnProperty.call(m,A)&&(f[A]=m[A])}return f},r.apply(this,arguments)};function i(u,f,m,S){function I(A){return A instanceof m?A:new m(function(P){P(A)})}return new(m||(m=Promise))(function(A,P){function $(se){try{q(S.next(se))}catch(de){P(de)}}function ne(se){try{q(S.throw(se))}catch(de){P(de)}}function q(se){se.done?A(se.value):I(se.value).then($,ne)}q((S=S.apply(u,f||[])).next())})}function o(u,f){var m={label:0,sent:function(){if(A[0]&1)throw A[1];return A[1]},trys:[],ops:[]},S,I,A,P;return P={next:$(0),throw:$(1),return:$(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function $(q){return function(se){return ne([q,se])}}function ne(q){if(S)throw new TypeError("Generator is already executing.");for(;m;)try{if(S=1,I&&(A=q[0]&2?I.return:q[0]?I.throw||((A=I.return)&&A.call(I),0):I.next)&&!(A=A.call(I,q[1])).done)return A;switch(I=0,A&&(q=[q[0]&2,A.value]),q[0]){case 0:case 1:A=q;break;case 4:return m.label++,{value:q[1],done:!1};case 5:m.label++,I=q[1],q=[0];continue;case 7:q=m.ops.pop(),m.trys.pop();continue;default:if(A=m.trys,!(A=A.length>0&&A[A.length-1])&&(q[0]===6||q[0]===2)){m=0;continue}if(q[0]===3&&(!A||q[1]>A[0]&&q[1]<A[3])){m.label=q[1];break}if(q[0]===6&&m.label<A[1]){m.label=A[1],A=q;break}if(A&&m.label<A[2]){m.label=A[2],m.ops.push(q);break}A[2]&&m.ops.pop(),m.trys.pop();continue}q=f.call(u,m)}catch(se){q=[6,se],I=0}finally{S=A=0}if(q[0]&5)throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}}function s(u){var f=typeof Symbol=="function"&&Symbol.iterator,m=f&&u[f],S=0;if(m)return m.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&S>=u.length&&(u=void 0),{value:u&&u[S++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(u,f){var m=typeof Symbol=="function"&&u[Symbol.iterator];if(!m)return u;var S=m.call(u),I,A=[],P;try{for(;(f===void 0||f-- >0)&&!(I=S.next()).done;)A.push(I.value)}catch($){P={error:$}}finally{try{I&&!I.done&&(m=S.return)&&m.call(S)}finally{if(P)throw P.error}}return A}function l(u,f,m){if(m||arguments.length===2)for(var S=0,I=f.length,A;S<I;S++)(A||!(S in f))&&(A||(A=Array.prototype.slice.call(f,0,S)),A[S]=f[S]);return u.concat(A||Array.prototype.slice.call(f))}var c;(function(u){u.UI_GET_DATA="ui-get-data",u.UI_SUBSCRIBE_TO_CHANGES="ui-subscribe-to-changes",u.UI_UNSUBSCRIBE_FROM_CHANGES="ui-unsubscribe-from-changes",u.UI_CHANGE_SETTINGS="ui-change-settings",u.UI_SET_THEME="ui-set-theme",u.UI_SET_SHORTCUT="ui-set-shortcut",u.UI_TOGGLE_ACTIVE_TAB="ui-toggle-active-tab",u.UI_MARK_NEWS_AS_READ="ui-mark-news-as-read",u.UI_MARK_NEWS_AS_DISPLAYED="ui-mark-news-as-displayed",u.UI_LOAD_CONFIG="ui-load-config",u.UI_APPLY_DEV_DYNAMIC_THEME_FIXES="ui-apply-dev-dynamic-theme-fixes",u.UI_RESET_DEV_DYNAMIC_THEME_FIXES="ui-reset-dev-dynamic-theme-fixes",u.UI_APPLY_DEV_INVERSION_FIXES="ui-apply-dev-inversion-fixes",u.UI_RESET_DEV_INVERSION_FIXES="ui-reset-dev-inversion-fixes",u.UI_APPLY_DEV_STATIC_THEMES="ui-apply-dev-static-themes",u.UI_RESET_DEV_STATIC_THEMES="ui-reset-dev-static-themes",u.UI_SAVE_FILE="ui-save-file",u.UI_REQUEST_EXPORT_CSS="ui-request-export-css",u.UI_COLOR_SCHEME_CHANGE="ui-color-scheme-change",u.BG_CHANGES="bg-changes",u.BG_ADD_CSS_FILTER="bg-add-css-filter",u.BG_ADD_STATIC_THEME="bg-add-static-theme",u.BG_ADD_SVG_FILTER="bg-add-svg-filter",u.BG_ADD_DYNAMIC_THEME="bg-add-dynamic-theme",u.BG_EXPORT_CSS="bg-export-css",u.BG_UNSUPPORTED_SENDER="bg-unsupported-sender",u.BG_CLEAN_UP="bg-clean-up",u.BG_RELOAD="bg-reload",u.BG_FETCH_RESPONSE="bg-fetch-response",u.BG_UI_UPDATE="bg-ui-update",u.BG_CSS_UPDATE="bg-css-update",u.CS_COLOR_SCHEME_CHANGE="cs-color-scheme-change",u.CS_FRAME_CONNECT="cs-frame-connect",u.CS_FRAME_FORGET="cs-frame-forget",u.CS_FRAME_FREEZE="cs-frame-freeze",u.CS_FRAME_RESUME="cs-frame-resume",u.CS_EXPORT_CSS_RESPONSE="cs-export-css-response",u.CS_FETCH="cs-fetch",u.CS_DARK_THEME_DETECTED="cs-dark-theme-detected",u.CS_DARK_THEME_NOT_DETECTED="cs-dark-theme-not-detected",u.CS_LOG="cs-log"})(c||(c={}));var d=typeof navigator<"u",h=d?navigator.userAgentData&&Array.isArray(navigator.userAgentData.brands)?navigator.userAgentData.brands.map(function(u){return"".concat(u.brand.toLowerCase()," ").concat(u.version)}).join(" "):navigator.userAgent.toLowerCase():"some useragent",p=d?navigator.userAgentData&&typeof navigator.userAgentData.platform=="string"?navigator.userAgentData.platform.toLowerCase():navigator.platform.toLowerCase():"some platform",g=h.includes("chrome")||h.includes("chromium"),b=h.includes("thunderbird"),k=h.includes("firefox")||h.includes("librewolf")||b;h.includes("vivaldi"),h.includes("yabrowser"),h.includes("opr")||h.includes("opera"),h.includes("edg");var y=h.includes("safari")&&!g,_=p.startsWith("win"),w=p.startsWith("mac");d&&navigator.userAgentData?navigator.userAgentData.mobile:h.includes("mobile");var x=typeof ShadowRoot=="function",C=typeof MediaQueryList=="function"&&typeof MediaQueryList.prototype.addEventListener=="function";(function(){var u=h.match(/chrom(?:e|ium)(?:\/| )([^ ]+)/);return u&&u[1]?u[1]:""})(),function(){var u=h.match(/(?:firefox|librewolf)(?:\/| )([^ ]+)/);return u&&u[1]?u[1]:""}();var F=function(){try{return document.querySelector(":defined"),!0}catch{return!1}}(),M=function(){if(typeof document>"u")return!1;var u=document.createElement("div");return u.setAttribute("style","color-scheme: dark"),u.style&&u.style.colorScheme==="dark"}();function L(u,f,m){return i(this,void 0,void 0,function(){var S;return o(this,function(I){switch(I.label){case 0:return[4,fetch(u,{cache:"force-cache",credentials:"omit",referrer:m})];case 1:if(S=I.sent(),k&&f==="text/css"&&u.startsWith("moz-extension://")&&u.endsWith(".css"))return[2,S];if(f&&!S.headers.get("Content-Type").startsWith(f))throw new Error("Mime type mismatch when loading ".concat(u));if(!S.ok)throw new Error("Unable to load ".concat(u," ").concat(S.status," ").concat(S.statusText));return[2,S]}})})}function N(u,f){return i(this,void 0,void 0,function(){var m;return o(this,function(S){switch(S.label){case 0:return[4,L(u,f)];case 1:return m=S.sent(),[4,V(m)];case 2:return[2,S.sent()]}})})}function V(u){return i(this,void 0,void 0,function(){var f,m;return o(this,function(S){switch(S.label){case 0:return[4,u.blob()];case 1:return f=S.sent(),[4,new Promise(function(I){var A=new FileReader;A.onloadend=function(){return I(A.result)},A.readAsDataURL(f)})];case 2:return m=S.sent(),[2,m]}})})}var Y=function(u){return i(void 0,void 0,void 0,function(){return o(this,function(f){return[2,Promise.reject(new Error(["Embedded Dark Reader cannot access a cross-origin resource",u,"Overview your URLs and CORS policies or use","`DarkReader.setFetchMethod(fetch: (url) => Promise<Response>))`.","See if using `DarkReader.setFetchMethod(window.fetch)`","before `DarkReader.enable()` works."].join(" ")))]})})},J=Y;function H(u){u?J=u:J=Y}function D(u){return i(this,void 0,void 0,function(){return o(this,function(f){switch(f.label){case 0:return[4,J(u)];case 1:return[2,f.sent()]}})})}window.chrome||(window.chrome={}),chrome.runtime||(chrome.runtime={});var T=new Set;function W(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return i(this,void 0,void 0,function(){var m,S,I,A,P,$,ne;return o(this,function(q){switch(q.label){case 0:if(!(u[0]&&u[0].type===c.CS_FETCH))return[3,8];m=u[0].id,q.label=1;case 1:return q.trys.push([1,7,,8]),S=u[0].data,I=S.url,A=S.responseType,[4,D(I)];case 2:return P=q.sent(),A!=="data-url"?[3,4]:[4,V(P)];case 3:return $=q.sent(),[3,6];case 4:return[4,P.text()];case 5:$=q.sent(),q.label=6;case 6:return T.forEach(function(se){return se({type:c.BG_FETCH_RESPONSE,data:$,error:null,id:m})}),[3,8];case 7:return ne=q.sent(),console.error(ne),T.forEach(function(se){return se({type:c.BG_FETCH_RESPONSE,data:null,error:ne,id:m})}),[3,8];case 8:return[2]}})})}function B(u){T.add(u)}if(typeof chrome.runtime.sendMessage=="function"){var G=chrome.runtime.sendMessage;chrome.runtime.sendMessage=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];W.apply(void 0,l([],a(u),!1)),G.apply(chrome.runtime,u)}}else chrome.runtime.sendMessage=W;if(chrome.runtime.onMessage||(chrome.runtime.onMessage={}),typeof chrome.runtime.onMessage.addListener=="function"){var te=chrome.runtime.onMessage.addListener;chrome.runtime.onMessage.addListener=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];B(u[0]),te.apply(chrome.runtime.onMessage,u)}}else chrome.runtime.onMessage.addListener=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return B(u[0])};var re={cssFilter:"cssFilter",svgFilter:"svgFilter",staticTheme:"staticTheme",dynamicTheme:"dynamicTheme"},ae={darkScheme:{background:"#181a1b",text:"#e8e6e3"},lightScheme:{background:"#dcdad7",text:"#181a1b"}},K={mode:1,brightness:100,contrast:100,grayscale:0,sepia:0,useFont:!1,fontFamily:w?"Helvetica Neue":_?"Segoe UI":"Open Sans",textStroke:0,engine:re.dynamicTheme,stylesheet:"",darkSchemeBackgroundColor:ae.darkScheme.background,darkSchemeTextColor:ae.darkScheme.text,lightSchemeBackgroundColor:ae.lightScheme.background,lightSchemeTextColor:ae.lightScheme.text,scrollbarColor:w?"":"auto",selectionColor:"auto",styleSystemControls:!M,lightColorScheme:"Default",darkColorScheme:"Default",immediateModify:!1};function R(u){return u.length!=null}function O(u,f){var m,S;if(R(u))for(var I=0,A=u.length;I<A;I++)f(u[I]);else try{for(var P=s(u),$=P.next();!$.done;$=P.next()){var ne=$.value;f(ne)}}catch(q){m={error:q}}finally{try{$&&!$.done&&(S=P.return)&&S.call(P)}finally{if(m)throw m.error}}}function j(u,f){O(f,function(m){return u.push(m)})}function Z(u){for(var f=[],m=0,S=u.length;m<S;m++)f.push(u[m]);return f}function le(){}function ee(){}function ie(u){var f=!1,m=null,S,I=function(){for(var P=[],$=0;$<arguments.length;$++)P[$]=arguments[$];S=P,m?f=!0:(u.apply(void 0,l([],a(S),!1)),m=requestAnimationFrame(function(){m=null,f&&(u.apply(void 0,l([],a(S),!1)),f=!1)}))},A=function(){cancelAnimationFrame(m),f=!1,m=null};return Object.assign(I,{cancel:A})}function fe(){var u=[],f=null;function m(){for(var A;A=u.shift();)A();f=null}function S(A){u.push(A),f||(f=requestAnimationFrame(m))}function I(){u.splice(0),cancelAnimationFrame(f),f=null}return{add:S,cancel:I}}function ge(u){var f=0;return u.seconds&&(f+=u.seconds*1e3),u.minutes&&(f+=u.minutes*60*1e3),u.hours&&(f+=u.hours*60*60*1e3),u.days&&(f+=u.days*24*60*60*1e3),f}function we(u){u&&u.parentNode&&u.parentNode.removeChild(u)}function Ne(u,f,m){m===void 0&&(m=Function.prototype);var S=10,I=ge({seconds:2}),A=ge({seconds:10}),P=u.previousSibling,$=u.parentNode;if(!$)throw new Error("Unable to watch for node position: parent element not found");if(f==="prev-sibling"&&!P)throw new Error("Unable to watch for node position: there is no previous sibling");var ne=0,q=null,se=null,de=ie(function(){if(!se){ne++;var pe=Date.now();if(q==null)q=pe;else if(ne>=S){if(pe-q<A){se=setTimeout(function(){q=null,ne=0,se=null,de()},I);return}q=pe,ne=1}if(f==="parent"&&P&&P.parentNode!==$){tt();return}if(f==="prev-sibling"){if(P.parentNode==null){tt();return}P.parentNode!==$&&me(P.parentNode)}$.insertBefore(u,P?P.nextSibling:$.firstChild),Me.takeRecords(),m&&m()}}),Me=new MutationObserver(function(){(f==="parent"&&u.parentNode!==$||f==="prev-sibling"&&u.previousSibling!==P)&&de()}),Ie=function(){Me.observe($,{childList:!0})},tt=function(){clearTimeout(se),Me.disconnect(),de.cancel()},ue=function(){Me.takeRecords()},me=function(pe){$=pe,tt(),Ie()};return Ie(),{run:Ie,stop:tt,skip:ue}}function be(u,f){if(u!=null)for(var m=document.createTreeWalker(u,NodeFilter.SHOW_ELEMENT,{acceptNode:function(I){return I.shadowRoot==null?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}}),S=u.shadowRoot?m.currentNode:m.nextNode();S!=null;S=m.nextNode())S.classList.contains("surfingkeys_hints_host")||(f(S),be(S.shadowRoot,f))}var Ye=function(){return document.readyState==="complete"||document.readyState==="interactive"};function Pe(u){Ye=u}var $e=new Set;function it(u){Ye()?u():$e.add(u)}function ht(u){$e.delete(u)}function at(){return document.readyState==="complete"}var Le=new Set;function st(u){at()?u():Le.add(u)}function nt(){Le.clear()}if(!Ye()){var Xe=function(){Ye()&&($e.forEach(function(u){return u()}),$e.clear(),at()&&(document.removeEventListener("readystatechange",Xe),Le.forEach(function(u){return u()}),Le.clear()))};document.addEventListener("readystatechange",Xe)}var ze=1e3;function rt(u){if(u.length>ze)return!0;for(var f=0,m=0;m<u.length;m++)if(f+=u[m].addedNodes.length,f>ze)return!0;return!1}function et(u){var f=new Set,m=new Set,S=new Set;u.forEach(function(P){O(P.addedNodes,function($){$ instanceof Element&&$.isConnected&&f.add($)}),O(P.removedNodes,function($){$ instanceof Element&&($.isConnected?(S.add($),f.delete($)):m.add($))})});var I=[],A=[];return f.forEach(function(P){f.has(P.parentElement)&&I.push(P)}),m.forEach(function(P){m.has(P.parentElement)&&A.push(P)}),I.forEach(function(P){return f.delete(P)}),A.forEach(function(P){return m.delete(P)}),{additions:f,moves:S,deletions:m}}var pt=new Map,wt=new WeakMap;function Mt(u,f){var m,S,I;if(pt.has(u))m=pt.get(u),S=wt.get(m);else{var A=!1,P=!1;m=new MutationObserver(function($){if(rt($))!A||Ye()?S.forEach(function(q){var se=q.onHugeMutations;return se(u)}):P||(I=function(){return S.forEach(function(q){var se=q.onHugeMutations;return se(u)})},it(I),P=!0),A=!0;else{var ne=et($);S.forEach(function(q){var se=q.onMinorMutations;return se(ne)})}}),m.observe(u,{childList:!0,subtree:!0}),pt.set(u,m),S=new Set,wt.set(m,S)}return S.add(f),{disconnect:function(){S.delete(f),I&&ht(I),S.size===0&&(m.disconnect(),wt.delete(m),pt.delete(u))}}}var yt,sn=new Map;function $n(u){return yt||(yt=document.createElement("a")),yt.href=u,yt.href}function qe(u,f){f===void 0&&(f=null);var m="".concat(u).concat(f?";".concat(f):"");if(sn.has(m))return sn.get(m);if(f){var S=new URL(u,$n(f));return sn.set(m,S),S}var I=new URL($n(u));return sn.set(u,I),I}function Qe(u,f){if(f.match(/^data\\?\:/))return f;if(/^\/\//.test(f))return"".concat(location.protocol).concat(f);var m=qe(u),S=qe(f,m.href);return S.href}function bt(u){if(u.startsWith("data:"))return!0;var f=qe(u);return f.protocol!==location.protocol||f.hostname!==location.hostname||f.port!==location.port?!1:f.pathname===location.pathname}function Ht(u,f,m){O(u,function(S){if(S.selectorText)f(S);else if(S.href)try{Ht(S.styleSheet.cssRules,f,m)}catch{m&&m()}else if(S.media){var I=Array.from(S.media),A=I.some(function($){return $.startsWith("screen")||$.startsWith("all")||$.startsWith("(")}),P=I.some(function($){return $.startsWith("print")||$.startsWith("speech")});(A||!P)&&Ht(S.cssRules,f,m)}else S.conditionText?CSS.supports(S.conditionText)&&Ht(S.cssRules,f,m):void 0})}var Ot=["background","border","border-color","border-bottom","border-left","border-right","border-top","outline","outline-color"],mn=y?Ot.map(function(u){var f=new RegExp("".concat(u,":\\s*(.*?)\\s*;"));return[u,f]}):null;function Vt(u,f){O(u,function(S){var I=u.getPropertyValue(S).trim();I&&f(S,I)});var m=u.cssText;m.includes("var(")&&(y?mn.forEach(function(S){var I=a(S,2),A=I[0],P=I[1],$=m.match(P);if($&&$[1]){var ne=$[1].trim();f(A,ne)}}):Ot.forEach(function(S){var I=u.getPropertyValue(S);I&&I.includes("var(")&&f(S,I)}))}var vn=/url\((('.*?')|(".*?")|([^\)]*?))\)/g,qt=/@import\s*(url\()?(('.+?')|(".+?")|([^\)]*?))\)? ?(screen)?;?/gi;function _n(u){return u.trim().replace(/^url\((.*)\)$/,"$1").trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1").replace(/(?:\\(.))/g,"$1")}function Pt(u){var f=qe(u);return"".concat(f.origin).concat(f.pathname.replace(/\?.*$/,"").replace(/(\/)([^\/]+)$/i,"$1"))}function zr(u,f){return u.replace(vn,function(m){var S=_n(m);try{return'url("'.concat(Qe(f,S),'")')}catch{return m}})}var ar=/\/\*[\s\S]*?\*\//g;function qn(u){return u.replace(ar,"")}var ye=/@font-face\s*{[^}]*}/g;function xe(u){return u.replace(ye,"")}function ve(u){for(var f=[],m=[],S,I=0,A=u.length;I<A;I++){var P=u[I];if(!(!P||P===" ")){if(Je.has(P)){for(var $=Je.get(P);m.length;){var ne=Je.get(m[0]);if(!ne)break;if($.lessOrEqualThan(ne))f.push(m.shift());else break}m.unshift(P)}else!S||Je.has(S)?f.push(P):f[f.length-1]+=P;S=P}}f.push.apply(f,l([],a(m),!1));for(var q=[],I=0,A=f.length;I<A;I++){var $=Je.get(f[I]);if($){var se=q.splice(0,2);q.push($.exec(se[1],se[0]))}else q.unshift(parseFloat(f[I]))}return q[0]}var Ge=function(){function u(f,m){this.precendce=f,this.execMethod=m}return u.prototype.exec=function(f,m){return this.execMethod(f,m)},u.prototype.lessOrEqualThan=function(f){return this.precendce<=f.precendce},u}(),Je=new Map([["+",new Ge(1,function(u,f){return u+f})],["-",new Ge(1,function(u,f){return u-f})],["*",new Ge(2,function(u,f){return u*f})],["/",new Ge(2,function(u,f){return u/f})]]);function dt(u,f,m){m===void 0&&(m=0);for(var S=[],I;I=u.exec(f);)S.push(I[m]);return S}function an(u){function f(se){return se.replace(/^\s+/,"")}function m(se){return se===0?"":" ".repeat(4*se)}if(u.length<5e4)for(var S=/[^{}]+{\s*}/;S.test(u);)u=u.replace(S,"");for(var I=u.replace(/\s{2,}/g," ").replace(/\{/g,`{
`).replace(/\}/g,`
}
`).replace(/\;(?![^\(|\"]*(\)|\"))/g,`;
`).replace(/\,(?![^\(|\"]*(\)|\"))/g,`,
`).replace(/\n\s*\n/g,`
`).split(`
`),A=0,P=[],$=0,ne=I.length;$<ne;$++){var q="".concat(I[$],`
`);q.includes("{")?P.push(m(A++)+f(q)):q.includes("}")?P.push(m(--A)+f(q)):P.push(m(A)+f(q))}return P.join("").trim()}function yn(u,f){f===void 0&&(f=0);for(var m=u.length,S=0,I=-1,A=f;A<m;A++)if(S===0){var P=u.indexOf("(",A);if(P<0)break;I=P,S++,A=P}else{var $=u.indexOf(")",A);if($<0)break;var P=u.indexOf("(",A);if(P<0||$<P){if(S--,S===0)return{start:I,end:$+1};A=$}else S++,A=P}return null}var mr=new Map,Ut=new Map;function Nt(u){if(u=u.trim(),Ut.has(u))return Ut.get(u);u.includes("calc(")&&(u=ti(u));var f=vt(u);return f&&Ut.set(u,f),f}function Br(u){if(mr.has(u))return mr.get(u);var f=Nt(u);if(!f)return null;var m=Qn(f);return mr.set(u,m),m}function Li(){mr.clear(),Ut.clear()}function Jr(u){var f=u.h,m=u.s,S=u.l,I=u.a,A=I===void 0?1:I;if(m===0){var P=a([S,S,S].map(function(pe){return Math.round(pe*255)}),3),$=P[0],ne=P[1],q=P[2];return{r:$,g:q,b:ne,a:A}}var se=(1-Math.abs(2*S-1))*m,de=se*(1-Math.abs(f/60%2-1)),Me=S-se/2,Ie=a((f<60?[se,de,0]:f<120?[de,se,0]:f<180?[0,se,de]:f<240?[0,de,se]:f<300?[de,0,se]:[se,0,de]).map(function(pe){return Math.round((pe+Me)*255)}),3),tt=Ie[0],ue=Ie[1],me=Ie[2];return{r:tt,g:ue,b:me,a:A}}function Qn(u){var f=u.r,m=u.g,S=u.b,I=u.a,A=I===void 0?1:I,P=f/255,$=m/255,ne=S/255,q=Math.max(P,$,ne),se=Math.min(P,$,ne),de=q-se,Me=(q+se)/2;if(de===0)return{h:0,s:0,l:Me,a:A};var Ie=(q===P?($-ne)/de%6:q===$?(ne-P)/de+2:(P-$)/de+4)*60;Ie<0&&(Ie+=360);var tt=de/(1-Math.abs(2*Me-1));return{h:Ie,s:tt,l:Me,a:A}}function Yt(u,f){f===void 0&&(f=0);var m=u.toFixed(f);if(f===0)return m;var S=m.indexOf(".");if(S>=0){var I=m.match(/0+$/);if(I)return I.index===S+1?m.substring(0,S):m.substring(0,I.index)}return m}function _i(u){var f=u.r,m=u.g,S=u.b,I=u.a;return I!=null&&I<1?"rgba(".concat(Yt(f),", ").concat(Yt(m),", ").concat(Yt(S),", ").concat(Yt(I,2),")"):"rgb(".concat(Yt(f),", ").concat(Yt(m),", ").concat(Yt(S),")")}function X(u){var f=u.r,m=u.g,S=u.b,I=u.a;return"#".concat((I!=null&&I<1?[f,m,S,Math.round(I*255)]:[f,m,S]).map(function(A){return"".concat(A<16?"0":"").concat(A.toString(16))}).join(""))}function oe(u){var f=u.h,m=u.s,S=u.l,I=u.a;return I!=null&&I<1?"hsla(".concat(Yt(f),", ").concat(Yt(m*100),"%, ").concat(Yt(S*100),"%, ").concat(Yt(I,2),")"):"hsl(".concat(Yt(f),", ").concat(Yt(m*100),"%, ").concat(Yt(S*100),"%)")}var Se=/^rgba?\([^\(\)]+\)$/,Be=/^hsla?\([^\(\)]+\)$/,Wt=/^#[0-9a-f]+$/i;function vt(u){var f=u.trim().toLowerCase();return f.match(Se)?Qt(f):f.match(Be)?On(f):f.match(Wt)?vr(f):ni.has(f)?Hr(f):Xi.has(f)?ei(f):u==="transparent"?{r:0,g:0,b:0,a:0}:null}function tn(u){var f=[],m=0,S=!1,I=u.indexOf("(");u=u.substring(I+1,u.length-1);for(var A=0;A<u.length;A++){var P=u[A];P>="0"&&P<="9"||P==="."||P==="+"||P==="-"?S=!0:S&&(P===" "||P===",")?(f.push(u.substring(m,A)),S=!1,m=A+1):S||(m=A+1)}return S&&f.push(u.substring(m,u.length)),f}function fn(u,f,m){var S=tn(u),I=Object.entries(m),A=S.map(function(P){return P.trim()}).map(function(P,$){var ne,q=I.find(function(se){var de=a(se,1),Me=de[0];return P.endsWith(Me)});return q?ne=parseFloat(P.substring(0,P.length-q[0].length))/q[1]*f[$]:ne=parseFloat(P),f[$]>1?Math.round(ne):ne});return A}var An=[255,255,255,1],jt={"%":100};function Qt(u){var f=a(fn(u,An,jt),4),m=f[0],S=f[1],I=f[2],A=f[3],P=A===void 0?1:A;return{r:m,g:S,b:I,a:P}}var hn=[360,1,1,1],lr={"%":100,deg:360,rad:2*Math.PI,turn:1};function On(u){var f=a(fn(u,hn,lr),4),m=f[0],S=f[1],I=f[2],A=f[3],P=A===void 0?1:A;return Jr({h:m,s:S,l:I,a:P})}function vr(u){var f=u.substring(1);switch(f.length){case 3:case 4:{var m=a([0,1,2].map(function(ne){return parseInt("".concat(f[ne]).concat(f[ne]),16)}),3),S=m[0],I=m[1],A=m[2],P=f.length===3?1:parseInt("".concat(f[3]).concat(f[3]),16)/255;return{r:S,g:I,b:A,a:P}}case 6:case 8:{var $=a([0,2,4].map(function(Me){return parseInt(f.substring(Me,Me+2),16)}),3),S=$[0],I=$[1],A=$[2],P=f.length===6?1:parseInt(f.substring(6,8),16)/255;return{r:S,g:I,b:A,a:P}}}return null}function Hr(u){var f=ni.get(u);return{r:f>>16&255,g:f>>8&255,b:f>>0&255,a:1}}function ei(u){var f=Xi.get(u);return{r:f>>16&255,g:f>>8&255,b:f>>0&255,a:1}}function ti(u){for(var f=0,m=function($,ne,q){u=u.substring(0,$)+q+u.substring(ne)};(f=u.indexOf("calc("))!==-1;){var S=yn(u,f);if(!S)break;var I=u.slice(S.start+1,S.end-1),A=I.includes("%");I=I.split("%").join("");var P=Math.round(ve(I));m(S.start-4,S.end,P+(A?"%":""))}return u}var ni=new Map(Object.entries({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074})),Xi=new Map(Object.entries({ActiveBorder:3906044,ActiveCaption:0,AppWorkspace:11184810,Background:6513614,ButtonFace:16777215,ButtonHighlight:15329769,ButtonShadow:10461343,ButtonText:0,CaptionText:0,GrayText:8355711,Highlight:11720703,HighlightText:0,InactiveBorder:16777215,InactiveCaption:16777215,InactiveCaptionText:0,InfoBackground:16514245,InfoText:0,Menu:16185078,MenuText:16777215,Scrollbar:11184810,ThreeDDarkShadow:0,ThreeDFace:12632256,ThreeDHighlight:16777215,ThreeDLightShadow:16777215,ThreeDShadow:0,Window:15527148,WindowFrame:11184810,WindowText:0,"-webkit-focus-ring-color":15046400}).map(function(u){var f=a(u,2),m=f[0],S=f[1];return[m.toLowerCase(),S]}));function Uo(u,f,m){return(.2126*u+.7152*f+.0722*m)/255}function cr(u,f,m,S,I){return(u-f)*(I-S)/(m-f)+S}function Ae(u,f,m){return Math.min(m,Math.max(f,u))}function Re(u,f){for(var m=[],S=0,I=u.length;S<I;S++){m[S]=[];for(var A=0,P=f[0].length;A<P;A++){for(var $=0,ne=0,q=u[0].length;ne<q;ne++)$+=u[S][ne]*f[ne][A];m[S][A]=$}}return m}function bn(u){var f=Tt.identity();return u.sepia!==0&&(f=Re(f,Tt.sepia(u.sepia/100))),u.grayscale!==0&&(f=Re(f,Tt.grayscale(u.grayscale/100))),u.contrast!==100&&(f=Re(f,Tt.contrast(u.contrast/100))),u.brightness!==100&&(f=Re(f,Tt.brightness(u.brightness/100))),u.mode===1&&(f=Re(f,Tt.invertNHue())),f}function ln(u,f){var m=a(u,3),S=m[0],I=m[1],A=m[2],P=[[S/255],[I/255],[A/255],[1],[1]],$=Re(f,P);return[0,1,2].map(function(ne){return Ae(Math.round($[ne][0]*255),0,255)})}var Tt={identity:function(){return[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]]},invertNHue:function(){return[[.333,-.667,-.667,0,1],[-.667,.333,-.667,0,1],[-.667,-.667,.333,0,1],[0,0,0,1,0],[0,0,0,0,1]]},brightness:function(u){return[[u,0,0,0,0],[0,u,0,0,0],[0,0,u,0,0],[0,0,0,1,0],[0,0,0,0,1]]},contrast:function(u){var f=(1-u)/2;return[[u,0,0,0,f],[0,u,0,0,f],[0,0,u,0,f],[0,0,0,1,0],[0,0,0,0,1]]},sepia:function(u){return[[.393+.607*(1-u),.769-.769*(1-u),.189-.189*(1-u),0,0],[.349-.349*(1-u),.686+.314*(1-u),.168-.168*(1-u),0,0],[.272-.272*(1-u),.534-.534*(1-u),.131+.869*(1-u),0,0],[0,0,0,1,0],[0,0,0,0,1]]},grayscale:function(u){return[[.2126+.7874*(1-u),.7152-.7152*(1-u),.0722-.0722*(1-u),0,0],[.2126-.2126*(1-u),.7152+.2848*(1-u),.0722-.0722*(1-u),0,0],[.2126-.2126*(1-u),.7152-.7152*(1-u),.0722+.9278*(1-u),0,0],[0,0,0,1,0],[0,0,0,0,1]]}};function Dt(u){var f=u.mode===1,m=f?"darkSchemeBackgroundColor":"lightSchemeBackgroundColor";return u[m]}function Xt(u){var f=u.mode===1,m=f?"darkSchemeTextColor":"lightSchemeTextColor";return u[m]}var Wn=new Map;function Xn(){Wn.clear()}var jr=["r","g","b","a"],ur=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function Kr(u,f){var m="";return jr.forEach(function(S){m+="".concat(u[S],";")}),ur.forEach(function(S){m+="".concat(f[S],";")}),m}function Zi(u,f,m,S,I){var A;Wn.has(m)?A=Wn.get(m):(A=new Map,Wn.set(m,A));var P=Kr(u,f);if(A.has(P))return A.get(P);var $=Qn(u),ne=S==null?null:Br(S),q=I==null?null:Br(I),se=m($,ne,q),de=Jr(se),Me=de.r,Ie=de.g,tt=de.b,ue=de.a,me=bn(f),pe=a(ln([Me,Ie,tt],me),3),Ve=pe[0],Ue=pe[1],gt=pe[2],Rt=ue===1?X({r:Ve,g:Ue,b:gt}):_i({r:Ve,g:Ue,b:gt,a:ue});return A.set(P,Rt),Rt}function vo(u){return u}function gs(u,f){return Zi(u,f,vo)}function _o(u,f){var m=Dt(f),S=Xt(f);return Zi(u,f,ms,S,m)}function ms(u,f,m){var S=u.h,I=u.s,A=u.l,P=u.a,$=A<.5,ne;if($)ne=A<.2||I<.12;else{var q=S>200&&S<280;ne=I<.24||A>.8&&q}var se=S,de=A;ne&&($?(se=f.h,de=f.s):(se=m.h,de=m.s));var Me=cr(A,0,1,f.l,m.l);return{h:se,s:de,l:Me,a:P}}var Ca=.4;function Ze(u,f){var m=u.h,S=u.s,I=u.l,A=u.a,P=I<.5,$=m>200&&m<280,ne=S<.12||I>.8&&$;if(P){var q=cr(I,0,.5,0,Ca);if(ne){var se=f.h,de=f.s;return{h:se,s:de,l:q,a:A}}return{h:m,s:S,l:q,a:A}}var Me=cr(I,.5,1,Ca,f.l);if(ne){var Ie=f.h,de=f.s;return{h:Ie,s:de,l:Me,a:A}}var tt=m,ue=m>60&&m<180;if(ue){var me=m>120;me?tt=cr(m,120,180,135,180):tt=cr(m,60,120,60,105)}return tt>40&&tt<80&&(Me*=.75),{h:tt,s:S,l:Me,a:A}}function We(u,f){if(f.mode===0)return _o(u,f);var m=Dt(f);return Zi(u,r(r({},f),{mode:0}),Ze,m)}var $t=.55;function Zt(u){return cr(u,205,245,205,220)}function Kt(u,f){var m=u.h,S=u.s,I=u.l,A=u.a,P=I>.5,$=I<.2||S<.24,ne=!$&&m>205&&m<245;if(P){var q=cr(I,.5,1,$t,f.l);if($){var se=f.h,de=f.s;return{h:se,s:de,l:q,a:A}}var Me=m;return ne&&(Me=Zt(m)),{h:Me,s:S,l:q,a:A}}if($){var Ie=f.h,de=f.s,tt=cr(I,0,.5,f.l,$t);return{h:Ie,s:de,l:tt,a:A}}var ue=m,me;return ne?(ue=Zt(m),me=cr(I,0,.5,f.l,Math.min(1,$t+.05))):me=cr(I,0,.5,f.l,$t),{h:ue,s:S,l:me,a:A}}function Er(u,f){if(f.mode===0)return _o(u,f);var m=Xt(f);return Zi(u,r(r({},f),{mode:0}),Kt,m)}function vs(u,f,m){var S=u.h,I=u.s,A=u.l,P=u.a,$=A<.5,ne=A<.2||I<.24,q=S,se=I;ne&&($?(q=f.h,se=f.s):(q=m.h,se=m.s));var de=cr(A,0,1,.5,.2);return{h:q,s:se,l:de,a:P}}function yi(u,f){if(f.mode===0)return _o(u,f);var m=Xt(f),S=Dt(f);return Zi(u,r(r({},f),{mode:0}),vs,m,S)}function _s(u,f){return We(u,f)}function ys(u,f){return We(u,f)}function YO(u){var f=[];return f.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*="vjs-"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*="mu-"], .glyphicon, .icon) {'),u.useFont&&u.fontFamily&&f.push("  font-family: ".concat(u.fontFamily," !important;")),u.textStroke>0&&(f.push("  -webkit-text-stroke: ".concat(u.textStroke,"px !important;")),f.push("  text-stroke: ".concat(u.textStroke,"px !important;"))),f.push("}"),f.join(`
`)}var Im;(function(u){u[u.light=0]="light",u[u.dark=1]="dark"})(Im||(Im={}));function Tw(u){var f=[];return u.mode===Im.dark&&f.push("invert(100%) hue-rotate(180deg)"),u.brightness!==100&&f.push("brightness(".concat(u.brightness,"%)")),u.contrast!==100&&f.push("contrast(".concat(u.contrast,"%)")),u.grayscale!==0&&f.push("grayscale(".concat(u.grayscale,"%)")),u.sepia!==0&&f.push("sepia(".concat(u.sepia,"%)")),f.length===0?null:f.join(" ")}function qO(u){return u.slice(0,4).map(function(f){return f.map(function(m){return m.toFixed(3)}).join(" ")}).join(" ")}function QO(u){return qO(bn(u))}var XO=0,Rm=new Map,Mm=new Map;function Lw(u){return i(this,void 0,void 0,function(){return o(this,function(f){return[2,new Promise(function(m,S){var I=++XO;Rm.set(I,m),Mm.set(I,S),chrome.runtime.sendMessage({type:c.CS_FETCH,data:u,id:I})})]})})}chrome.runtime.onMessage.addListener(function(u){var f=u.type,m=u.data,S=u.error,I=u.id;if(f===c.BG_FETCH_RESPONSE){var A=Rm.get(I),P=Mm.get(I);Rm.delete(I),Mm.delete(I),S?P&&P(S):A&&A(m)}});var ZO=function(){function u(){this.queue=[],this.timerId=null,this.frameDuration=1e3/60}return u.prototype.addToQueue=function(f){this.queue.push(f),this.startQueue()},u.prototype.stopQueue=function(){this.timerId!==null&&(cancelAnimationFrame(this.timerId),this.timerId=null),this.queue=[]},u.prototype.startQueue=function(){var f=this;this.timerId||(this.timerId=requestAnimationFrame(function(){f.timerId=null;for(var m=Date.now(),S;S=f.queue.shift();)if(S(),Date.now()-m>=f.frameDuration){f.startQueue();break}}))},u}(),Tm=new ZO;function JO(u){return i(this,void 0,void 0,function(){var f=this;return o(this,function(m){return[2,new Promise(function(S,I){return i(f,void 0,void 0,function(){var A,P,$,ne;return o(this,function(q){switch(q.label){case 0:return u.startsWith("data:")?(A=u,[3,4]):[3,1];case 1:return q.trys.push([1,3,,4]),[4,eP(u)];case 2:return A=q.sent(),[3,4];case 3:return P=q.sent(),I(P),[2];case 4:return q.trys.push([4,6,,7]),[4,tP(A)];case 5:return $=q.sent(),Tm.addToQueue(function(){S(r({src:u,dataURL:A,width:$.naturalWidth,height:$.naturalHeight},oP($)))}),[3,7];case 6:return ne=q.sent(),I(ne),[3,7];case 7:return[2]}})})})]})})}function eP(u){return i(this,void 0,void 0,function(){var f;return o(this,function(m){switch(m.label){case 0:return f=new URL(u),f.origin!==location.origin?[3,2]:[4,N(u)];case 1:return[2,m.sent()];case 2:return[4,Lw({url:u,responseType:"data-url"})];case 3:return[2,m.sent()]}})})}function tP(u){return i(this,void 0,void 0,function(){return o(this,function(f){return[2,new Promise(function(m,S){var I=new Image;I.onload=function(){return m(I)},I.onerror=function(){return S("Unable to load image ".concat(u))},I.src=u})]})})}var Lm=32*32,fl,hl;function nP(){var u=Lm,f=Lm;fl=document.createElement("canvas"),fl.width=u,fl.height=f,hl=fl.getContext("2d"),hl.imageSmoothingEnabled=!1}function rP(){fl=null,hl=null}var iP=5*1024*1024;function oP(u){fl||nP();var f=u.naturalWidth,m=u.naturalHeight;if(m===0||f===0)return"logWarn(Image is empty ".concat(u.currentSrc,")"),null;var S=f*m*4;if(S>iP)return{isDark:!1,isLight:!1,isTransparent:!1,isLarge:!1,isTooLarge:!0};var I=f*m,A=Math.min(1,Math.sqrt(Lm/I)),P=Math.ceil(f*A),$=Math.ceil(m*A);hl.clearRect(0,0,P,$),hl.drawImage(u,0,0,f,m,0,0,P,$);var ne=hl.getImageData(0,0,P,$),q=ne.data,se=.05,de=.4,Me=.7,Ie=0,tt=0,ue=0,me,pe,Ve,Ue,gt,Rt,lt,He;for(Ve=0;Ve<$;Ve++)for(pe=0;pe<P;pe++)me=4*(Ve*P+pe),Ue=q[me+0],gt=q[me+1],Rt=q[me+2],lt=q[me+3],lt/255<se?Ie++:(He=Uo(Ue,gt,Rt),He<de&&tt++,He>Me&&ue++);var Bn=P*$,ir=Bn-Ie,xn=.7,ii=.7,oi=.1,mu=800*600;return{isDark:tt/ir>=xn,isLight:ue/ir>=ii,isTransparent:Ie/Bn>=oi,isLarge:I>=mu,isTooLarge:!1}}function Am(u,f){var m=u.dataURL,S=u.width,I=u.height,A=QO(f),P=['<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'.concat(S,'" height="').concat(I,'">'),"<defs>",'<filter id="darkreader-image-filter">','<feColorMatrix type="matrix" values="'.concat(A,'" />'),"</filter>","</defs>",'<image width="'.concat(S,'" height="').concat(I,'" filter="url(#darkreader-image-filter)" xlink:href="').concat(m,'" />'),"</svg>"].join("");return"data:image/svg+xml;base64,".concat(btoa(P))}function sP(){Tm&&Tm.stopQueue(),rP()}var Aw=8,Om="conic-",aP=Om.length,lP="radial-",cP="linear-";function uP(u){for(var f=[],m=0,S=Om.length,I=function(){var P;if([cP,lP,Om].find(function(de){if(m-de.length>=0){var Me=u.substring(m-de.length,m);if(Me===de)return u.slice(m-de.length-10,m-de.length-1)==="repeating"?(P="repeating-".concat(de,"gradient"),!0):u.slice(m-de.length-8,m-de.length-1)==="-webkit"?(P="-webkit-".concat(de,"gradient"),!0):(P="".concat(de,"gradient"),!0)}}),!P)return"break";var $=yn(u,m+Aw),ne=$.start,q=$.end,se=u.substring(ne+1,q-1);S=q+1+aP,f.push({typeGradient:P,match:se,offset:P.length+2,index:m-P.length+Aw,hasComma:!0})};(m=u.indexOf("gradient",S))!==-1;){var A=I();if(A==="break")break}return f.length&&(f[f.length-1].hasComma=!1),f}function iu(u,f){return!!(u&&u.getPropertyPriority(f))}function Ow(u,f,m,S,I,A){if(u.startsWith("--")){var P=_P(S,u,f,m,I,A);if(P)return{property:u,value:P,important:iu(m.style,u),sourceValue:f}}else if(f.includes("var(")){var P=yP(S,u,f);if(P)return{property:u,value:P,important:iu(m.style,u),sourceValue:f}}else{if(u==="color-scheme")return null;if(u.includes("color")&&u!=="-webkit-print-color-adjust"||u==="fill"||u==="stroke"||u==="stop-color"){var P=gP(u,f,m);if(P)return{property:u,value:P,important:iu(m.style,u),sourceValue:f}}else if(u==="background-image"||u==="list-style-image"){var P=Dw(f,m,I,A);if(P)return{property:u,value:P,important:iu(m.style,u),sourceValue:f}}else if(u.includes("shadow")){var P=vP(f);if(P)return{property:u,value:P,important:iu(m.style,u),sourceValue:f}}}return null}function Pw(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return u.filter(Boolean).join(", ")}function dP(u,f,m){var S=[];f||(S.push("html {"),S.push("    background-color: ".concat(We({r:255,g:255,b:255},u)," !important;")),S.push("}")),M&&(S.push("html {"),S.push("    color-scheme: ".concat(u.mode===1?"dark":"dark light"," !important;")),S.push("}"));var I=Pw(f?"":"html, body",m?"input, textarea, select, button, dialog":"");return I&&(S.push("".concat(I," {")),S.push("    background-color: ".concat(We({r:255,g:255,b:255},u),";")),S.push("}")),S.push("".concat(Pw("html, body",m?"input, textarea, select, button":"")," {")),S.push("    border-color: ".concat(yi({r:76,g:76,b:76},u),";")),S.push("    color: ".concat(Er({r:0,g:0,b:0},u),";")),S.push("}"),S.push("a {"),S.push("    color: ".concat(Er({r:0,g:64,b:255},u),";")),S.push("}"),S.push("table {"),S.push("    border-color: ".concat(yi({r:128,g:128,b:128},u),";")),S.push("}"),S.push("::placeholder {"),S.push("    color: ".concat(Er({r:169,g:169,b:169},u),";")),S.push("}"),S.push("input:-webkit-autofill,"),S.push("textarea:-webkit-autofill,"),S.push("select:-webkit-autofill {"),S.push("    background-color: ".concat(We({r:250,g:255,b:189},u)," !important;")),S.push("    color: ".concat(Er({r:0,g:0,b:0},u)," !important;")),S.push("}"),u.scrollbarColor&&S.push(hP(u)),u.selectionColor&&S.push(fP(u)),S.join(`
`)}function Nw(u){var f,m;if(u.selectionColor==="auto")f=We({r:0,g:96,b:212},r(r({},u),{grayscale:0})),m=Er({r:255,g:255,b:255},r(r({},u),{grayscale:0}));else{var S=Nt(u.selectionColor),I=Qn(S);f=u.selectionColor,I.l<.5?m="#FFF":m="#000"}return{backgroundColorSelection:f,foregroundColorSelection:m}}function fP(u){var f=[],m=Nw(u),S=m.backgroundColorSelection,I=m.foregroundColorSelection;return["::selection","::-moz-selection"].forEach(function(A){f.push("".concat(A," {")),f.push("    background-color: ".concat(S," !important;")),f.push("    color: ".concat(I," !important;")),f.push("}")}),f.join(`
`)}function hP(u){var f=[],m,S,I,A,P,$;if(u.scrollbarColor==="auto")m=We({r:241,g:241,b:241},u),S=Er({r:96,g:96,b:96},u),I=We({r:176,g:176,b:176},u),A=We({r:144,g:144,b:144},u),P=We({r:96,g:96,b:96},u),$=We({r:255,g:255,b:255},u);else{var ne=Nt(u.scrollbarColor),q=Qn(ne),se=q.l>.5,de=function(Ie){return r(r({},q),{l:Ae(q.l+Ie,0,1)})},Me=function(Ie){return r(r({},q),{l:Ae(q.l-Ie,0,1)})};m=oe(Me(.4)),S=oe(se?Me(.4):de(.4)),I=oe(q),A=oe(de(.1)),P=oe(de(.2))}return f.push("::-webkit-scrollbar {"),f.push("    background-color: ".concat(m,";")),f.push("    color: ".concat(S,";")),f.push("}"),f.push("::-webkit-scrollbar-thumb {"),f.push("    background-color: ".concat(I,";")),f.push("}"),f.push("::-webkit-scrollbar-thumb:hover {"),f.push("    background-color: ".concat(A,";")),f.push("}"),f.push("::-webkit-scrollbar-thumb:active {"),f.push("    background-color: ".concat(P,";")),f.push("}"),f.push("::-webkit-scrollbar-corner {"),f.push("    background-color: ".concat($,";")),f.push("}"),k&&(f.push("* {"),f.push("    scrollbar-color: ".concat(I," ").concat(m,";")),f.push("}")),f.join(`
`)}function Pm(u,f){var m=f.strict,S=[],I=["microsoft.com","docs.microsoft.com"].includes(location.hostname);return S.push("html, body, ".concat(m?"body :not(iframe)".concat(I?':not(div[style^="position:absolute;top:0;left:-"]':""):"body > :not(iframe)"," {")),S.push("    background-color: ".concat(We({r:255,g:255,b:255},u)," !important;")),S.push("    border-color: ".concat(yi({r:64,g:64,b:64},u)," !important;")),S.push("    color: ".concat(Er({r:0,g:0,b:0},u)," !important;")),S.push("}"),S.join(`
`)}var pP=new Set(["inherit","transparent","initial","currentcolor","none","unset"]);function gP(u,f,m){if(pP.has(f.toLowerCase()))return f;var S=Nt(f);return S?u.includes("background")?m.style.webkitMaskImage&&m.style.webkitMaskImage!=="none"||m.style.webkitMask&&!m.style.webkitMask.startsWith("none")||m.style.mask&&m.style.mask!=="none"||m.style.getPropertyValue("mask-image")&&m.style.getPropertyValue("mask-image")!=="none"?function(I){return Er(S,I)}:function(I){return We(S,I)}:u.includes("border")||u.includes("outline")?function(I){return yi(S,I)}:function(I){return Er(S,I)}:null}var Df=new Map,$o=new Map;function mP(u,f){if(!u||f.length===0)return!1;if(f.some(function(P){return P==="*"}))return!0;for(var m=u.split(/,\s*/g),S=function(P){var $=f[P];if(m.some(function(ne){return ne===$}))return{value:!0}},I=0;I<f.length;I++){var A=S(I);if(typeof A=="object")return A.value}return!1}function Dw(u,f,m,S){var I=this;try{var A=uP(u),P=dt(vn,u);if(P.length===0&&A.length===0)return u;var $=function(ue){var me=0;return ue.map(function(pe){var Ve=u.indexOf(pe,me);return me=Ve+pe.length,{match:pe,index:Ve}})},ne=A.map(function(ue){return r({type:"gradient"},ue)}).concat($(P).map(function(ue){return r({type:"url",offset:0},ue)})).sort(function(ue,me){return ue.index>me.index?1:-1}),q=function(ue){var me=ue.typeGradient,pe=ue.match,Ve=ue.hasComma,Ue=/([^\(\),]+(\([^\(\)]*(\([^\(\)]*\)*[^\(\)]*)?\))?([^\(\), ]|( (?!calc)))*),?/g,gt=/^(from|color-stop|to)\(([^\(\)]*?,\s*)?(.*?)\)$/,Rt=dt(Ue,pe,1).map(function(lt){lt=lt.trim();var He=Nt(lt);if(He)return function(xn){return ys(He,xn)};var Bn=lt.lastIndexOf(" ");if(He=Nt(lt.substring(0,Bn)),He)return function(xn){return"".concat(ys(He,xn)," ").concat(lt.substring(Bn+1))};var ir=lt.match(gt);return ir&&(He=Nt(ir[3]),He)?function(xn){return"".concat(ir[1],"(").concat(ir[2]?"".concat(ir[2],", "):"").concat(ys(He,xn),")")}:function(){return lt}});return function(lt){return"".concat(me,"(").concat(Rt.map(function(He){return He(lt)}).join(", "),")").concat(Ve?", ":"")}},se=function(ue){var me;if(mP(f.selectorText,m))return null;var pe=_n(ue),Ve=pe.length===0,Ue=f.parentStyleSheet,gt=Ue&&Ue.href?Pt(Ue.href):((me=Ue.ownerNode)===null||me===void 0?void 0:me.baseURI)||location.origin;pe=Qe(gt,pe);var Rt='url("'.concat(pe,'")');return function(lt){return i(I,void 0,void 0,function(){var He,Bn,ir,xn;return o(this,function(ii){switch(ii.label){case 0:return Ve?[2,"url('')"]:Df.has(pe)?(He=Df.get(pe),[3,7]):[3,1];case 1:return ii.trys.push([1,6,,7]),$o.has(pe)?(Bn=$o.get(pe),[4,new Promise(function(oi){return Bn.push(oi)})]):[3,3];case 2:return He=ii.sent(),He?[3,5]:[2,null];case 3:return $o.set(pe,[]),[4,JO(pe)];case 4:He=ii.sent(),Df.set(pe,He),$o.get(pe).forEach(function(oi){return oi(He)}),$o.delete(pe),ii.label=5;case 5:return S()?[2,null]:[3,7];case 6:return ir=ii.sent(),$o.has(pe)&&($o.get(pe).forEach(function(oi){return oi(null)}),$o.delete(pe)),[2,Rt];case 7:return xn=de(He,lt)||Rt,[2,xn]}})})}},de=function(ue,me){var pe=ue.isDark,Ve=ue.isLight,Ue=ue.isTransparent,gt=ue.isLarge,Rt=ue.isTooLarge,lt=ue.width,He;if(Rt)He='url("'.concat(ue.src,'")');else if(pe&&Ue&&me.mode===1&&!gt&&lt>2){"Inverting dark image ".concat(ue.src);var Bn=Am(ue,r(r({},me),{sepia:Ae(me.sepia+10,0,100)}));He='url("'.concat(Bn,'")')}else if(Ve&&!Ue&&me.mode===1)if(gt)He="none";else{"Dimming light image ".concat(ue.src);var ir=Am(ue,me);He='url("'.concat(ir,'")')}else if(me.mode===0&&Ve&&!gt){"Applying filter to image ".concat(ue.src);var xn=Am(ue,r(r({},me),{brightness:Ae(me.brightness-10,5,200),sepia:Ae(me.sepia+10,0,100)}));He='url("'.concat(xn,'")')}else He=null;return He},Me=[],Ie=0,tt=!1;return ne.forEach(function(ue,me){var pe=ue.type,Ve=ue.match,Ue=ue.index,gt=ue.typeGradient,Rt=ue.hasComma,lt=ue.offset,He=Ue,Bn=Ie,ir=He+Ve.length+lt;Ie=ir,Bn!==He&&(tt?Me.push(function(){var xn=u.substring(Bn,He);return xn[0]===","&&(xn=xn.substring(1)),xn}):Me.push(function(){return u.substring(Bn,He)})),tt=Rt||!1,pe==="url"?Me.push(se(Ve)):pe==="gradient"&&Me.push(q({match:Ve,index:Ue,typeGradient:gt,hasComma:Rt,offset:lt})),me===ne.length-1&&Me.push(function(){return u.substring(ir)})}),function(ue){var me=Me.filter(Boolean).map(function(Ve){return Ve(ue)});if(me.some(function(Ve){return Ve instanceof Promise}))return Promise.all(me).then(function(Ve){return Ve.filter(Boolean).join("")});var pe=me.join("");return pe.endsWith(", initial")?pe.slice(0,-9):pe}}catch{return null}}function Fw(u){try{var f=0,m=dt(/(^|\s)(?!calc)([a-z]+\(.+?\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/ig,u,2),S=0,I=m.map(function(A,P){var $=f,ne=u.indexOf(A,f),q=ne+A.length;f=q;var se=Nt(A);return se?function(de){return"".concat(u.substring($,ne)).concat(_s(se,de)).concat(P===m.length-1?u.substring(q):"")}:(S++,function(){return u.substring($,q)})});return function(A){var P=I.map(function($){return $(A)}).join("");return{matchesLength:m.length,unparseableMatchesLength:S,result:P}}}catch{return null}}function vP(u){var f=Fw(u);return f?function(m){return f(m).result}:null}function _P(u,f,m,S,I,A){return u.getModifierForVariable({varName:f,sourceValue:m,rule:S,ignoredImgSelectors:I,isCancelled:A})}function yP(u,f,m){return u.getModifierForVarDependant(f,m)}function bP(){Xn(),Df.clear(),sP(),$o.clear()}var Ji=1<<0,pl=1<<1,gl=1<<2,ou=1<<3,SP=function(){function u(){this.varTypes=new Map,this.rulesQueue=[],this.definedVars=new Set,this.varRefs=new Map,this.unknownColorVars=new Set,this.unknownBgVars=new Set,this.undefinedVars=new Set,this.initialVarTypes=new Map,this.changedTypeVars=new Set,this.typeChangeSubscriptions=new Map,this.unstableVarValues=new Map}return u.prototype.clear=function(){this.varTypes.clear(),this.rulesQueue.splice(0),this.definedVars.clear(),this.varRefs.clear(),this.unknownColorVars.clear(),this.unknownBgVars.clear(),this.undefinedVars.clear(),this.initialVarTypes.clear(),this.changedTypeVars.clear(),this.typeChangeSubscriptions.clear(),this.unstableVarValues.clear()},u.prototype.isVarType=function(f,m){return this.varTypes.has(f)&&(this.varTypes.get(f)&m)>0},u.prototype.addRulesForMatching=function(f){this.rulesQueue.push(f)},u.prototype.matchVariablesAndDependants=function(){var f=this;this.changedTypeVars.clear(),this.initialVarTypes=new Map(this.varTypes),this.collectRootVariables(),this.collectVariablesAndVarDep(this.rulesQueue),this.rulesQueue.splice(0),this.collectRootVarDependants(),this.varRefs.forEach(function(m,S){m.forEach(function(I){f.varTypes.has(S)&&f.resolveVariableType(I,f.varTypes.get(S))})}),this.unknownColorVars.forEach(function(m){f.unknownBgVars.has(m)?(f.unknownColorVars.delete(m),f.unknownBgVars.delete(m),f.resolveVariableType(m,Ji)):f.isVarType(m,Ji|pl|gl)?f.unknownColorVars.delete(m):f.undefinedVars.add(m)}),this.unknownBgVars.forEach(function(m){var S=f.findVarRef(m,function(I){return f.unknownColorVars.has(I)||f.isVarType(I,pl|gl)})!=null;S?f.itarateVarRefs(m,function(I){f.resolveVariableType(I,Ji)}):f.isVarType(m,Ji|ou)?f.unknownBgVars.delete(m):f.undefinedVars.add(m)}),this.changedTypeVars.forEach(function(m){f.typeChangeSubscriptions.has(m)&&f.typeChangeSubscriptions.get(m).forEach(function(S){S()})}),this.changedTypeVars.clear()},u.prototype.getModifierForVariable=function(f){var m=this;return function(S){var I=f.varName,A=f.sourceValue,P=f.rule,$=f.ignoredImgSelectors,ne=f.isCancelled,q=function(){var Ie=[],tt=function(Ve,Ue,gt){if(m.isVarType(I,Ve)){var Rt=Ue(I),lt;if(xa(A))if(Ww(A)){var He=Vm(A,m.unstableVarValues);He||(He=Ve===Ji?"#ffffff":"#000000"),lt=gt(He,S)}else lt=bs(A,function(Bn){return Ue(Bn)},function(Bn){return gt(Bn,S)});else lt=gt(A,S);Ie.push({property:Rt,value:lt})}};if(tt(Ji,su,ml),tt(pl,Nm,Vf),tt(gl,Dm,Uf),m.isVarType(I,ou)){var ue=$w(I),me=A;xa(A)&&(me=bs(A,function(Ve){return su(Ve)},function(Ve){return ml(Ve,S)}));var pe=Dw(me,P,$,ne);me=typeof pe=="function"?pe(S):pe,Ie.push({property:ue,value:me})}return Ie},se=new Set,de=function(Ie){var tt=function(){var ue=q();Ie(ue)};se.add(tt),m.subscribeForVarTypeChange(I,tt)},Me=function(){se.forEach(function(Ie){m.unsubscribeFromVariableTypeChanges(I,Ie)})};return{declarations:q(),onTypeChange:{addListener:de,removeListeners:Me}}}},u.prototype.getModifierForVarDependant=function(f,m){var S=this;if(m.match(/^\s*(rgb|hsl)a?\(/)){var I=f.startsWith("background"),A=f==="color"||f==="caret-color";return function(P){var $=Vm(m,S.unstableVarValues);$||($=I?"#ffffff":"#000000");var ne=I?ml:A?Vf:Uf;return ne($,P)}}return f==="background-color"?function(P){return bs(m,function($){return su($)},function($){return ml($,P)})}:f==="color"||f==="caret-color"?function(P){return bs(m,function($){return Nm($)},function($){return Vf($,P)})}:f==="background"||f==="background-image"||f==="box-shadow"?function(P){var $=new Set,ne=function(){var se=bs(m,function(Ie){return S.isVarType(Ie,Ji)?su(Ie):S.isVarType(Ie,ou)?$w(Ie):($.add(Ie),Ie)},function(Ie){return ml(Ie,P)});if(f==="box-shadow"){var de=Fw(se),Me=de(P);if(Me.unparseableMatchesLength!==Me.matchesLength)return Me.result}return se},q=ne();return $.size>0?new Promise(function(se){var de=$.values().next().value,Me=function(){S.unsubscribeFromVariableTypeChanges(de,Me);var Ie=ne();se(Ie)};S.subscribeForVarTypeChange(de,Me)}):q}:f.startsWith("border")||f.startsWith("outline")?function(P){return bs(m,function($){return Dm($)},function($){return Uf($,P)})}:null},u.prototype.subscribeForVarTypeChange=function(f,m){this.typeChangeSubscriptions.has(f)||this.typeChangeSubscriptions.set(f,new Set);var S=this.typeChangeSubscriptions.get(f);S.has(m)||S.add(m)},u.prototype.unsubscribeFromVariableTypeChanges=function(f,m){this.typeChangeSubscriptions.has(f)&&this.typeChangeSubscriptions.get(f).delete(m)},u.prototype.collectVariablesAndVarDep=function(f){var m=this;f.forEach(function(S){Ht(S,function(I){I.style&&Vt(I.style,function(A,P){Ff(A)&&m.inspectVariable(A,P),xa(P)&&m.inspectVarDependant(A,P)})})})},u.prototype.collectRootVariables=function(){var f=this;Vt(document.documentElement.style,function(m,S){Ff(m)&&f.inspectVariable(m,S)})},u.prototype.inspectVariable=function(f,m){if(this.unstableVarValues.set(f,m),xa(m)&&Ww(m)&&(this.unknownColorVars.add(f),this.definedVars.add(f)),!this.definedVars.has(f)){this.definedVars.add(f);var S=Nt(m);S?this.unknownColorVars.add(f):(m.includes("url(")||m.includes("linear-gradient(")||m.includes("radial-gradient("))&&this.resolveVariableType(f,ou)}},u.prototype.resolveVariableType=function(f,m){var S=this.initialVarTypes.get(f)||0,I=this.varTypes.get(f)||0,A=I|m;this.varTypes.set(f,A),(A!==S||this.undefinedVars.has(f))&&(this.changedTypeVars.add(f),this.undefinedVars.delete(f)),this.unknownColorVars.delete(f),this.unknownBgVars.delete(f)},u.prototype.collectRootVarDependants=function(){var f=this;Vt(document.documentElement.style,function(m,S){xa(S)&&f.inspectVarDependant(m,S)})},u.prototype.inspectVarDependant=function(f,m){var S=this;Ff(f)?this.iterateVarDeps(m,function(I){S.varRefs.has(f)||S.varRefs.set(f,new Set),S.varRefs.get(f).add(I)}):f==="background-color"||f==="box-shadow"?this.iterateVarDeps(m,function(I){return S.resolveVariableType(I,Ji)}):f==="color"||f==="caret-color"?this.iterateVarDeps(m,function(I){return S.resolveVariableType(I,pl)}):f.startsWith("border")||f.startsWith("outline")?this.iterateVarDeps(m,function(I){return S.resolveVariableType(I,gl)}):(f==="background"||f==="background-image")&&this.iterateVarDeps(m,function(I){if(!S.isVarType(I,Ji|ou)){var A=S.findVarRef(I,function(P){return S.unknownColorVars.has(P)||S.isVarType(P,pl|gl)})!=null;S.itarateVarRefs(I,function(P){A?S.resolveVariableType(P,Ji):S.unknownBgVars.add(P)})}})},u.prototype.iterateVarDeps=function(f,m){var S=new Set;CP(f,function(I){return S.add(I)}),S.forEach(function(I){return m(I)})},u.prototype.findVarRef=function(f,m,S){var I,A;if(S===void 0&&(S=new Set),S.has(f))return null;S.add(f);var P=m(f);if(P)return f;var $=this.varRefs.get(f);if(!$||$.size===0)return null;try{for(var ne=s($),q=ne.next();!q.done;q=ne.next()){var se=q.value,de=this.findVarRef(se,m,S);if(de)return de}}catch(Me){I={error:Me}}finally{try{q&&!q.done&&(A=ne.return)&&A.call(ne)}finally{if(I)throw I.error}}return null},u.prototype.itarateVarRefs=function(f,m){this.findVarRef(f,function(S){return m(S),!1})},u.prototype.setOnRootVariableChange=function(f){this.onRootVariableDefined=f},u.prototype.putRootVars=function(f,m){var S,I,A=this,P=f.sheet;P.cssRules.length>0&&P.deleteRule(0);var $=new Map;Vt(document.documentElement.style,function(ue,me){Ff(ue)&&(A.isVarType(ue,Ji)&&$.set(su(ue),ml(me,m)),A.isVarType(ue,pl)&&$.set(Nm(ue),Vf(me,m)),A.isVarType(ue,gl)&&$.set(Dm(ue),Uf(me,m)),A.subscribeForVarTypeChange(ue,A.onRootVariableDefined))});var ne=[];ne.push(":root {");try{for(var q=s($),se=q.next();!se.done;se=q.next()){var de=a(se.value,2),Me=de[0],Ie=de[1];ne.push("    ".concat(Me,": ").concat(Ie,";"))}}catch(ue){S={error:ue}}finally{try{se&&!se.done&&(I=q.return)&&I.call(q)}finally{if(S)throw S.error}}ne.push("}");var tt=ne.join(`
`);P.insertRule(tt)},u}(),ri=new SP;function wP(u,f){f===void 0&&(f=0);var m=u.indexOf("var(",f);if(m>=0){var S=yn(u,m+3);return S?{start:m,end:S.end}:null}}function EP(u){for(var f=[],m=0,S;S=wP(u,m);){var I=S.start,A=S.end;f.push({start:I,end:A,value:u.substring(I,A)}),m=S.end+1}return f}function Vw(u,f){var m=EP(u),S=m.length;if(S===0)return u;var I=u.length,A=m.map(function(se){return f(se.value)}),P=[];P.push(u.substring(0,m[0].start));for(var $=0;$<S;$++){P.push(A[$]);var ne=m[$].end,q=$<S-1?m[$+1].start:I;P.push(u.substring(ne,q))}return P.join("")}function Uw(u){var f=u.indexOf(","),m,S;return f>=0?(m=u.substring(4,f).trim(),S=u.substring(f+1,u.length-1).trim()):(m=u.substring(4,u.length-1).trim(),S=""),{name:m,fallback:S}}function bs(u,f,m){var S=function(I){var A=Uw(I),P=A.name,$=A.fallback,ne=f(P);if(!$)return"var(".concat(ne,")");var q;return xa($)?q=bs($,f,m):m?q=m($):q=$,"var(".concat(ne,", ").concat(q,")")};return Vw(u,S)}function CP(u,f){bs(u,function(m){return f(m),m})}function su(u){return"--darkreader-bg".concat(u)}function Nm(u){return"--darkreader-text".concat(u)}function Dm(u){return"--darkreader-border".concat(u)}function $w(u){return"--darkreader-bgimg".concat(u)}function Ff(u){return u.startsWith("--")}function xa(u){return u.includes("var(")}function Ww(u){return u.match(/^\s*(rgb|hsl)a?\(/)}var xP=/^\d{1,3}, ?\d{1,3}, ?\d{1,3}$/;function kP(u){if(xP.test(u)){var f=u.split(","),m="rgb(";return f.forEach(function(S){m+="".concat(S.trim(),", ")}),m=m.substring(0,m.length-2),m+=")",{isRaw:!0,color:m}}return{isRaw:!1,color:u}}function Fm(u,f,m){var S=kP(u),I=S.isRaw,A=S.color,P=Nt(A);if(P){var $=m(P,f);if(I){var ne=Nt($);return ne?"".concat(ne.r,", ").concat(ne.g,", ").concat(ne.b):$}return $}return A}function ml(u,f){return Fm(u,f,We)}function Vf(u,f){return Fm(u,f,Er)}function Uf(u,f){return Fm(u,f,yi)}function Vm(u,f,m){m===void 0&&(m=new Set);var S=!1,I=function(P){var $=Uw(P),ne=$.name,q=$.fallback;if(m.has(ne))return S=!0,null;m.add(ne);var se=f.get(ne)||q,de=null;return se&&(xa(se)?de=Vm(se,f,m):de=se),de||(S=!0,null)},A=Vw(u,I);return S?null:A}var vl={"background-color":{customProp:"--darkreader-inline-bgcolor",cssProp:"background-color",dataAttr:"data-darkreader-inline-bgcolor"},"background-image":{customProp:"--darkreader-inline-bgimage",cssProp:"background-image",dataAttr:"data-darkreader-inline-bgimage"},"border-color":{customProp:"--darkreader-inline-border",cssProp:"border-color",dataAttr:"data-darkreader-inline-border"},"border-bottom-color":{customProp:"--darkreader-inline-border-bottom",cssProp:"border-bottom-color",dataAttr:"data-darkreader-inline-border-bottom"},"border-left-color":{customProp:"--darkreader-inline-border-left",cssProp:"border-left-color",dataAttr:"data-darkreader-inline-border-left"},"border-right-color":{customProp:"--darkreader-inline-border-right",cssProp:"border-right-color",dataAttr:"data-darkreader-inline-border-right"},"border-top-color":{customProp:"--darkreader-inline-border-top",cssProp:"border-top-color",dataAttr:"data-darkreader-inline-border-top"},"box-shadow":{customProp:"--darkreader-inline-boxshadow",cssProp:"box-shadow",dataAttr:"data-darkreader-inline-boxshadow"},color:{customProp:"--darkreader-inline-color",cssProp:"color",dataAttr:"data-darkreader-inline-color"},fill:{customProp:"--darkreader-inline-fill",cssProp:"fill",dataAttr:"data-darkreader-inline-fill"},stroke:{customProp:"--darkreader-inline-stroke",cssProp:"stroke",dataAttr:"data-darkreader-inline-stroke"},"outline-color":{customProp:"--darkreader-inline-outline",cssProp:"outline-color",dataAttr:"data-darkreader-inline-outline"},"stop-color":{customProp:"--darkreader-inline-stopcolor",cssProp:"stop-color",dataAttr:"data-darkreader-inline-stopcolor"}},Um=Object.values(vl),$m={};Um.forEach(function(u){var f=u.cssProp,m=u.customProp;return $m[m]=f});var $f=["style","fill","stop-color","stroke","bgcolor","color"],au=$f.map(function(u){return"[".concat(u,"]")}).join(", ");function zw(){return Um.map(function(u){var f=u.dataAttr,m=u.customProp,S=u.cssProp;return["[".concat(f,"] {"),"  ".concat(S,": var(").concat(m,") !important;"),"}"].join(`
`)}).join(`
`)}function IP(u){var f=[];return u instanceof Element&&u.matches(au)&&f.push(u),(u instanceof Element||x&&u instanceof ShadowRoot||u instanceof Document)&&j(f,u.querySelectorAll(au)),f}var lu=new Map,Wf=new Map;function RP(u,f){Wm(document,u,f),be(document.documentElement,function(m){Wm(m.shadowRoot,u,f)})}function Wm(u,f,m){lu.has(u)&&(lu.get(u).disconnect(),Wf.get(u).disconnect());var S=new WeakSet;function I(ue){IP(ue).forEach(function(me){S.has(me)||(S.add(me),f(me))}),be(ue,function(me){S.has(ue)||(S.add(ue),m(me.shadowRoot),Wm(me.shadowRoot,f,m))})}var A=Mt(u,{onMinorMutations:function(ue){var me=ue.additions;me.forEach(function(pe){return I(pe)})},onHugeMutations:function(){I(u)}});lu.set(u,A);var P=0,$=null,ne=ge({seconds:10}),q=ge({seconds:2}),se=50,de=[],Me=null,Ie=ie(function(ue){ue.forEach(function(me){$f.includes(me.attributeName)&&f(me.target)})}),tt=new MutationObserver(function(ue){if(Me){de.push.apply(de,l([],a(ue),!1));return}P++;var me=Date.now();if($==null)$=me;else if(P>=se){if(me-$<ne){Me=setTimeout(function(){$=null,P=0,Me=null;var pe=de;de=[],Ie(pe)},q),de.push.apply(de,l([],a(ue),!1));return}$=me,P=1}Ie(ue)});tt.observe(u,{attributes:!0,attributeFilter:$f.concat(Um.map(function(ue){var me=ue.dataAttr;return me})),subtree:!0}),Wf.set(u,tt)}function MP(){lu.forEach(function(u){return u.disconnect()}),Wf.forEach(function(u){return u.disconnect()}),lu.clear(),Wf.clear()}var Bw=new WeakMap,TP=["brightness","contrast","grayscale","sepia","mode"];function Hw(u,f){return $f.map(function(m){return"".concat(m,'="').concat(u.getAttribute(m),'"')}).concat(TP.map(function(m){return"".concat(m,'="').concat(f[m],'"')})).join(" ")}function LP(u,f){for(var m=0,S=f.length;m<S;m++){var I=f[m];if(u.matches(I))return!0}return!1}function zm(u,f,m,S){var I=Hw(u,f);if(I===Bw.get(u))return;var A=new Set(Object.keys(vl));function P(de,Me,Ie){var tt=de.startsWith("--"),ue=tt?{}:vl[de],me=ue.customProp,pe=ue.dataAttr,Ve=Ow(Me,Ie,{style:u.style},ri,S,null);if(Ve){var Ue=Ve.value;if(typeof Ue=="function"&&(Ue=Ue(f)),tt&&typeof Ue=="object"){var gt=Ue;gt.declarations.forEach(function(Rt){var lt=Rt.property,He=Rt.value;!(He instanceof Promise)&&u.style.setProperty(lt,He)})}else u.style.setProperty(me,Ue),u.hasAttribute(pe)||u.setAttribute(pe,""),A.delete(de)}}if(m.length>0&&LP(u,m)){A.forEach(function(de){u.removeAttribute(vl[de].dataAttr)});return}if(u.hasAttribute("bgcolor")){var $=u.getAttribute("bgcolor");($.match(/^[0-9a-f]{3}$/i)||$.match(/^[0-9a-f]{6}$/i))&&($="#".concat($)),P("background-color","background-color",$)}if(u.hasAttribute("color")&&u.rel!=="mask-icon"){var $=u.getAttribute("color");($.match(/^[0-9a-f]{3}$/i)||$.match(/^[0-9a-f]{6}$/i))&&($="#".concat($)),P("color","color",$)}if(u instanceof SVGElement){if(u.hasAttribute("fill")){var ne=32,q=u.getAttribute("fill");if(q!=="none")if(u instanceof SVGTextElement)P("fill","color",q);else{var se=function(){var de=u.getBoundingClientRect(),Me=de.width,Ie=de.height,tt=Me>ne||Ie>ne;P("fill",tt?"background-color":"color",q)};at()?se():st(se)}}u.hasAttribute("stop-color")&&P("stop-color","background-color",u.getAttribute("stop-color"))}if(u.hasAttribute("stroke")){var $=u.getAttribute("stroke");P("stroke",u instanceof SVGLineElement||u instanceof SVGTextElement?"border-color":"color",$)}u.style&&Vt(u.style,function(de,Me){if(!(de==="background-image"&&Me.includes("url")))if(vl.hasOwnProperty(de)||de.startsWith("--")&&!$m[de])P(de,de,Me);else{var Ie=$m[de];if(Ie&&!u.style.getPropertyValue(Ie)&&!u.hasAttribute(Ie)){if(Ie==="background-color"&&u.hasAttribute("bgcolor"))return;u.style.setProperty(de,"")}}}),u.style&&u instanceof SVGTextElement&&u.style.fill&&P("fill","color",u.style.getPropertyValue("fill")),O(A,function(de){u.removeAttribute(vl[de].dataAttr)}),Bw.set(u,Hw(u,f))}var jw="theme-color",Kw='meta[name="'.concat(jw,'"]'),cu=null,Wo=null;function Gw(u,f){cu=cu||u.content;var m=Nt(cu);m&&(u.content=We(m,f))}function AP(u){var f=document.querySelector(Kw);f?Gw(f,u):(Wo&&Wo.disconnect(),Wo=new MutationObserver(function(m){e:for(var S=0;S<m.length;S++)for(var I=m[S].addedNodes,A=0;A<I.length;A++){var P=I[A];if(P instanceof HTMLMetaElement&&P.name===jw){Wo.disconnect(),Wo=null,Gw(P,u);break e}}}),Wo.observe(document.head,{childList:!0}))}function OP(){Wo&&(Wo.disconnect(),Wo=null);var u=document.querySelector(Kw);u&&cu&&(u.content=cu)}var PP=["mode","brightness","contrast","grayscale","sepia","darkSchemeBackgroundColor","darkSchemeTextColor","lightSchemeBackgroundColor","lightSchemeTextColor"];function NP(u){var f="";return PP.forEach(function(m){f+="".concat(m,":").concat(u[m],";")}),f}var DP=fe();function Yw(){var u=0,f=new Set,m=new Map,S=new Set,I=null,A=!1,P=!1;function $(){return A&&!P}function ne(q){var se=q.sourceCSSRules,de=q.theme,Me=q.ignoreImageAnalysis,Ie=q.force,tt=q.prepareSheet,ue=q.isAsyncCancelled,me=m.size===0,pe=new Set(m.keys()),Ve=NP(de),Ue=Ve!==I;A&&(P=!0);var gt=[];if(Ht(se,function(kt){var nn=kt.cssText,Pn=!1;if(pe.delete(nn),kt.parentRule instanceof CSSMediaRule&&(nn+=";".concat(kt.parentRule.media.mediaText)),f.has(nn)||(f.add(nn),Pn=!0),Pn)me=!0;else{gt.push(m.get(nn));return}var cn=[];kt.style&&Vt(kt.style,function(kn,to){var bi=Ow(kn,to,kt,ri,Me,ue);bi&&cn.push(bi)});var un=null;if(cn.length>0){var or=kt.parentRule;un={selector:kt.selectorText,declarations:cn,parentRule:or},gt.push(un)}m.set(nn,un)},function(){A=!0}),pe.forEach(function(kt){f.delete(kt),m.delete(kt)}),I=Ve,!Ie&&!me&&!Ue)return;u++;function Rt(kt,nn,Pn){var cn=Pn.selector,un=Pn.declarations,or=function(bi){var Pi=bi.property,Gr=bi.value,si=bi.important,Pr=bi.sourceValue;return"".concat(Pi,": ").concat(Gr??Pr).concat(si?" !important":"",";")},kn="";un.forEach(function(bi){kn+="".concat(or(bi)," ")});var to="".concat(cn," { ").concat(kn," }");kt.insertRule(to,nn)}var lt=new Map,He=new Map,Bn=0,ir=0,xn={rule:null,rules:[],isGroup:!0},ii=new WeakMap;function oi(kt){if(kt==null)return xn;if(ii.has(kt))return ii.get(kt);var nn={rule:kt,rules:[],isGroup:!0};ii.set(kt,nn);var Pn=oi(kt.parentRule);return Pn.rules.push(nn),nn}S.forEach(function(kt){return kt()}),S.clear(),gt.filter(function(kt){return kt}).forEach(function(kt){var nn=kt.selector,Pn=kt.declarations,cn=kt.parentRule,un=oi(cn),or={selector:nn,declarations:[],isGroup:!1},kn=or.declarations;un.rules.push(or);function to(Pi,Gr,si,Pr){var Ni=++Bn,Si={property:Pi,value:null,important:si,asyncKey:Ni,sourceValue:Pr};kn.push(Si);var Ra=u;Gr.then(function(ct){!ct||ue()||Ra!==u||(Si.value=ct,DP.add(function(){ue()||Ra!==u||Jm(Ni)}))})}function bi(Pi,Gr,si,Pr){var Ni=Gr,Si=Ni.declarations,Ra=Ni.onTypeChange,ct=++ir,ai=u,Cr=kn.length,dr=[];if(Si.length===0){var wi={property:Pi,value:Pr,important:si,sourceValue:Pr,varKey:ct};kn.push(wi),dr=[wi]}Si.forEach(function(Yr){if(Yr.value instanceof Promise)to(Yr.property,Yr.value,si,Pr);else{var Nr={property:Yr.property,value:Yr.value,important:si,sourceValue:Pr,varKey:ct};kn.push(Nr),dr.push(Nr)}}),Ra.addListener(function(Yr){if(!(ue()||ai!==u)){var Nr=Yr.map(function(v1){return{property:v1.property,value:v1.value,important:si,sourceValue:Pr,varKey:ct}}),fr=kn.indexOf(dr[0],Cr);kn.splice.apply(kn,l([fr,dr.length],a(Nr),!1)),dr=Nr,vu(ct)}}),S.add(function(){return Ra.removeListeners()})}Pn.forEach(function(Pi){var Gr=Pi.property,si=Pi.value,Pr=Pi.important,Ni=Pi.sourceValue;if(typeof si=="function"){var Si=si(de);Si instanceof Promise?to(Gr,Si,Pr,Ni):Gr.startsWith("--")?bi(Gr,Si,Pr,Ni):kn.push({property:Gr,value:Si,important:Pr,sourceValue:Ni})}else kn.push({property:Gr,value:si,important:Pr,sourceValue:Ni})})});var mu=tt();function Yf(){function kt(Pn,cn){var un=Pn.rule;if(un instanceof CSSMediaRule){var or=un.media,kn=cn.cssRules.length;return cn.insertRule("@media ".concat(or.mediaText," {}"),kn),cn.cssRules[kn]}return cn}function nn(Pn,cn,un){Pn.rules.forEach(function(or){if(or.isGroup){var kn=kt(or,cn);nn(or,kn,un)}else un(or,cn)})}nn(xn,mu,function(Pn,cn){var un=cn.cssRules.length;Pn.declarations.forEach(function(or){var kn=or.asyncKey,to=or.varKey;kn!=null&&lt.set(kn,{rule:Pn,target:cn,index:un}),to!=null&&He.set(to,{rule:Pn,target:cn,index:un})}),Rt(cn,un,Pn)})}function Jm(kt){var nn=lt.get(kt),Pn=nn.rule,cn=nn.target,un=nn.index;cn.deleteRule(un),Rt(cn,un,Pn),lt.delete(kt)}function vu(kt){var nn=He.get(kt),Pn=nn.rule,cn=nn.target,un=nn.index;cn.deleteRule(un),Rt(cn,un,Pn)}Yf()}return{modifySheet:ne,shouldRebuildStyle:$}}var FP='style, link[rel*="stylesheet" i]:not([disabled])';function VP(u){if(!u.href)return!1;try{var f=new URL(u.href);return f.hostname==="fonts.googleapis.com"}catch{return"Couldn't construct ".concat(u.href," as URL"),!1}}function qw(u){return(u instanceof HTMLStyleElement||u instanceof SVGStyleElement||u instanceof HTMLLinkElement&&u.rel&&u.rel.toLowerCase().includes("stylesheet")&&u.href&&!u.disabled&&(k?!u.href.startsWith("moz-extension://"):!0)&&!VP(u))&&!u.classList.contains("darkreader")&&u.media.toLowerCase()!=="print"&&!u.classList.contains("stylus")}function Ss(u,f,m){return f===void 0&&(f=[]),m===void 0&&(m=!0),qw(u)?f.push(u):(u instanceof Element||x&&u instanceof ShadowRoot||u===document)&&(O(u.querySelectorAll(FP),function(S){return Ss(S,f,!1)}),m&&be(u,function(S){return Ss(S.shadowRoot,f,!1)})),f}var Qw=new WeakSet,Xw=new WeakSet,zf=!1;document.addEventListener("__darkreader__inlineScriptsAllowed",function(){zf=!0});var UP=0,_l=new Map;function $P(){_l.clear()}function WP(u,f){for(var m=f.update,S=f.loadingStart,I=f.loadingEnd,A=[],P=u;(P=P.nextElementSibling)&&P.matches(".darkreader");)A.push(P);var $=A.find(function(ct){return ct.matches(".darkreader--cors")&&!Xw.has(ct)})||null,ne=A.find(function(ct){return ct.matches(".darkreader--sync")&&!Qw.has(ct)})||null,q=null,se=null,de=!1,Me=!0,Ie=Yw(),tt=new MutationObserver(function(){m()}),ue={attributes:!0,childList:!0,subtree:!0,characterData:!0};function me(){return u instanceof HTMLStyleElement&&u.textContent.trim().match(qt)}function pe(ct,ai){var Cr=!1;if(ct){var dr=void 0;e:for(var wi=0,Yr=ct.length;wi<Yr;wi++)if(dr=ct[wi],dr.href)if(ai){if(dr.href.startsWith("http")&&!dr.href.startsWith(location.origin)){Cr=!0;break e}}else{Cr=!0;break e}}return Cr}function Ve(){if($)return $.sheet.cssRules;if(me())return null;var ct=Yf();return u instanceof HTMLLinkElement&&!bt(u.href)&&pe(ct,!1)||pe(ct,!0)?null:ct}function Ue(){$?(u.nextSibling!==$&&u.parentNode.insertBefore($,u.nextSibling),$.nextSibling!==ne&&u.parentNode.insertBefore(ne,$.nextSibling)):u.nextSibling!==ne&&u.parentNode.insertBefore(ne,u.nextSibling)}function gt(){ne=u instanceof SVGStyleElement?document.createElementNS("http://www.w3.org/2000/svg","style"):document.createElement("style"),ne.classList.add("darkreader"),ne.classList.add("darkreader--sync"),ne.media="screen",u.title&&(ne.title=u.title),Qw.add(ne)}var Rt=!1,lt=!1,He=++UP;function Bn(){return i(this,void 0,void 0,function(){var ct,ai,Cr,dr,wi,Yr,Nr;return o(this,function(fr){switch(fr.label){case 0:if(!(u instanceof HTMLLinkElement))return[3,7];if(Cr=a(oi(),2),dr=Cr[0],wi=Cr[1],!(!dr&&!wi&&!y||y&&!u.sheet||mu(wi)))return[3,5];fr.label=1;case 1:return fr.trys.push([1,3,,4]),[4,zP(u,He)];case 2:return fr.sent(),[3,4];case 3:return fr.sent(),lt=!0,[3,4];case 4:if(de)return[2,null];Nr=a(oi(),2),dr=Nr[0],wi=Nr[1],fr.label=5;case 5:return dr&&!pe(dr,!1)?[2,dr]:[4,Zw(u.href)];case 6:return ct=fr.sent(),ai=Pt(u.href),de?[2,null]:[3,8];case 7:if(me())ct=u.textContent.trim(),ai=Pt(location.href);else return[2,null];fr.label=8;case 8:if(!ct)return[3,13];fr.label=9;case 9:return fr.trys.push([9,11,,12]),[4,Jw(ct,ai)];case 10:return Yr=fr.sent(),$=HP(u,Yr),[3,12];case 11:return fr.sent(),[3,12];case 12:if($)return q=Ne($,"prev-sibling"),[2,$.sheet.cssRules];fr.label=13;case 13:return[2,null]}})})}function ir(ct){var ai=Ve();return ai?{rules:ai}:(ct.secondRound||Rt||lt||(Rt=!0,S(),Bn().then(function(Cr){Rt=!1,I(),Cr&&m()}).catch(function(Cr){Rt=!1,I()})),null)}var xn=!1;function ii(ct,ai){var Cr=Ve();if(!Cr)return;de=!1;function dr(Nr){for(var fr=Nr.cssRules.length-1;fr>=0;fr--)Nr.deleteRule(fr)}function wi(){ne||gt(),se&&se.stop(),Ue(),ne.sheet==null&&(ne.textContent="");var Nr=ne.sheet;return dr(Nr),se?se.run():se=Ne(ne,"prev-sibling",function(){xn=!0,Yr()}),ne.sheet}function Yr(){var Nr=xn;xn=!1,Ie.modifySheet({prepareSheet:wi,sourceCSSRules:Cr,theme:ct,ignoreImageAnalysis:ai,force:Nr,isAsyncCancelled:function(){return de}}),Me=ne.sheet.cssRules.length===0,Ie.shouldRebuildStyle()&&st(function(){return m()})}Yr()}function oi(){try{return u.sheet==null?[null,null]:[u.sheet.cssRules,null]}catch(ct){return[null,ct]}}function mu(ct){return ct&&ct.message&&ct.message.includes("loading")}function Yf(){var ct=a(oi(),2),ai=ct[0],Cr=ct[1];return Cr?null:ai}function Jm(){to(),!b&&!(zf&&u.sheet)&&cn()}var vu=null,kt=null;function nn(){var ct=Yf();return ct?ct.length:null}function Pn(){return nn()!==vu}function cn(){vu=nn(),un();var ct=function(){if(Pn()&&(vu=nn(),m()),zf&&u.sheet){un();return}kt=requestAnimationFrame(ct)};ct()}function un(){cancelAnimationFrame(kt)}var or=!1;function kn(){if(zf=!0,un(),or)return;function ct(){or=!1,!de&&m()}or=!0,typeof queueMicrotask=="function"?queueMicrotask(ct):requestAnimationFrame(ct)}function to(){u.addEventListener("__darkreader__updateSheet",kn)}function bi(){u.removeEventListener("__darkreader__updateSheet",kn)}function Pi(){bi(),un()}function Gr(){tt.disconnect(),de=!0,q&&q.stop(),se&&se.stop(),Pi()}function si(){if(Gr(),we($),we(ne),I(),_l.has(He)){var ct=_l.get(He);_l.delete(He),ct&&ct()}}function Pr(){tt.observe(u,ue),u instanceof HTMLStyleElement&&Jm()}var Ni=10,Si=0;function Ra(){ne&&(Si++,!(Si>Ni)&&(Ue(),q&&q.skip(),se&&se.skip(),Me||(xn=!0,m())))}return{details:ir,render:ii,pause:Gr,destroy:si,watch:Pr,restore:Ra}}function zP(u,f){return i(this,void 0,void 0,function(){return o(this,function(m){return[2,new Promise(function(S,I){var A=function(){u.removeEventListener("load",P),u.removeEventListener("error",$),_l.delete(f)},P=function(){A(),S()},$=function(){A(),I("Linkelement ".concat(f," couldn't be loaded. ").concat(u.href))};_l.set(f,function(){A(),I()}),u.addEventListener("load",P),u.addEventListener("error",$),u.href||$()})]})})}function BP(u){return _n(u.substring(7).trim().replace(/;$/,"").replace(/screen$/,""))}function Zw(u){return i(this,void 0,void 0,function(){return o(this,function(f){switch(f.label){case 0:return u.startsWith("data:")?[4,fetch(u)]:[3,3];case 1:return[4,f.sent().text()];case 2:return[2,f.sent()];case 3:return[4,Lw({url:u,responseType:"text",mimeType:"text/css",origin:window.location.origin})];case 4:return[2,f.sent()]}})})}function Jw(u,f,m){return m===void 0&&(m=new Map),i(this,void 0,void 0,function(){var S,I,A,P,$,ne,q,se,de,Me;return o(this,function(Ie){switch(Ie.label){case 0:u=qn(u),u=xe(u),u=zr(u,f),S=dt(qt,u),Ie.label=1;case 1:Ie.trys.push([1,10,11,12]),I=s(S),A=I.next(),Ie.label=2;case 2:return A.done?[3,9]:(P=A.value,$=BP(P),ne=Qe(f,$),q=void 0,m.has(ne)?(q=m.get(ne),[3,7]):[3,3]);case 3:return Ie.trys.push([3,6,,7]),[4,Zw(ne)];case 4:return q=Ie.sent(),m.set(ne,q),[4,Jw(q,Pt(ne),m)];case 5:return q=Ie.sent(),[3,7];case 6:return Ie.sent(),q="",[3,7];case 7:u=u.split(P).join(q),Ie.label=8;case 8:return A=I.next(),[3,2];case 9:return[3,12];case 10:return se=Ie.sent(),de={error:se},[3,12];case 11:try{A&&!A.done&&(Me=I.return)&&Me.call(I)}finally{if(de)throw de.error}return[7];case 12:return u=u.trim(),[2,u]}})})}function HP(u,f){if(!f)return null;var m=document.createElement("style");return m.classList.add("darkreader"),m.classList.add("darkreader--cors"),m.media="screen",m.textContent=f,u.parentNode.insertBefore(m,u.nextSibling),m.sheet.disabled=!0,Xw.add(m),m}var Bf=[],Bm,ka=new Map,Hf;function jf(u){F&&O(u.querySelectorAll(":not(:defined)"),function(f){var m=f.tagName.toLowerCase();if(!m.includes("-")){var S=f.getAttribute("is");if(S)m=S;else return}ka.has(m)||(ka.set(m,new Set),jP(m).then(function(){if(Hf){var I=ka.get(m);ka.delete(m),Hf(Array.from(I))}})),ka.get(m).add(f)})}var Hm=!1;document.addEventListener("__darkreader__inlineScriptsAllowed",function(){Hm=!0});var jm=new Map;function e1(u){if(Hm=!0,jm.has(u.detail.tag)){var f=jm.get(u.detail.tag);f()}}function jP(u){return i(this,void 0,void 0,function(){return o(this,function(f){return[2,new Promise(function(m){if(window.customElements&&typeof customElements.whenDefined=="function")customElements.whenDefined(u).then(function(){return m()});else if(Hm)jm.set(u,m),document.dispatchEvent(new CustomEvent("__darkreader__addUndefinedResolver",{detail:{tag:u}}));else{var S=function(){var I=ka.get(u);I&&I.size>0&&(I.values().next().value.matches(":defined")?m():requestAnimationFrame(S))};requestAnimationFrame(S)}})]})})}function KP(u){Hf=u}function GP(){Hf=null,ka.clear(),document.removeEventListener("__darkreader__isDefined",e1)}function YP(u,f,m){t1();var S=new Set(u),I=new WeakMap,A=new WeakMap;function P(ue){I.set(ue,ue.previousElementSibling),A.set(ue,ue.nextElementSibling)}function $(ue){I.delete(ue),A.delete(ue)}function ne(ue){return ue.previousElementSibling!==I.get(ue)||ue.nextElementSibling!==A.get(ue)}u.forEach(P);function q(ue){var me=ue.createdStyles,pe=ue.removedStyles,Ve=ue.movedStyles;me.forEach(function(Ue){return P(Ue)}),Ve.forEach(function(Ue){return P(Ue)}),pe.forEach(function(Ue){return $(Ue)}),me.forEach(function(Ue){return S.add(Ue)}),pe.forEach(function(Ue){return S.delete(Ue)}),me.size+pe.size+Ve.size>0&&f({created:Array.from(me),removed:Array.from(pe),moved:Array.from(Ve),updated:[]})}function se(ue){var me=ue.additions,pe=ue.moves,Ve=ue.deletions,Ue=new Set,gt=new Set,Rt=new Set;me.forEach(function(lt){return Ss(lt).forEach(function(He){return Ue.add(He)})}),Ve.forEach(function(lt){return Ss(lt).forEach(function(He){return gt.add(He)})}),pe.forEach(function(lt){return Ss(lt).forEach(function(He){return Rt.add(He)})}),q({createdStyles:Ue,removedStyles:gt,movedStyles:Rt}),me.forEach(function(lt){be(lt,tt),jf(lt)})}function de(ue){var me=new Set(Ss(ue)),pe=new Set,Ve=new Set,Ue=new Set;me.forEach(function(gt){S.has(gt)||pe.add(gt)}),S.forEach(function(gt){me.has(gt)||Ve.add(gt)}),me.forEach(function(gt){!pe.has(gt)&&!Ve.has(gt)&&ne(gt)&&Ue.add(gt)}),q({createdStyles:pe,removedStyles:Ve,movedStyles:Ue}),be(ue,tt),jf(ue)}function Me(ue){var me=new Set,pe=new Set;ue.forEach(function(Ve){var Ue=Ve.target;Ue.isConnected&&(qw(Ue)?me.add(Ue):Ue instanceof HTMLLinkElement&&Ue.disabled&&pe.add(Ue))}),me.size+pe.size>0&&f({updated:Array.from(me),created:[],removed:Array.from(pe),moved:[]})}function Ie(ue){var me=Mt(ue,{onMinorMutations:se,onHugeMutations:de}),pe=new MutationObserver(Me);pe.observe(ue,{attributes:!0,attributeFilter:["rel","disabled","media","href"],subtree:!0}),Bf.push(me,pe),Bm.add(ue)}function tt(ue){var me=ue.shadowRoot;me==null||Bm.has(me)||(Ie(me),m(me))}Ie(document),be(document.documentElement,tt),KP(function(ue){var me=[];ue.forEach(function(pe){return j(me,Ss(pe.shadowRoot))}),f({created:me,updated:[],removed:[],moved:[]}),ue.forEach(function(pe){var Ve=pe.shadowRoot;Ve!=null&&(tt(pe),be(Ve,tt),jf(Ve))})}),document.addEventListener("__darkreader__isDefined",e1),jf(document)}function qP(){Bf.forEach(function(u){return u.disconnect()}),Bf.splice(0,Bf.length),Bm=new WeakSet}function t1(){qP(),GP()}function QP(u){return(u<16?"0":"")+u.toString(16)}function XP(){if("randomUUID"in crypto){var u=crypto.randomUUID();return u.substring(0,8)+u.substring(9,13)+u.substring(14,18)+u.substring(19,23)+u.substring(24)}return Array.from(crypto.getRandomValues(new Uint8Array(16))).map(function(f){return QP(f)}).join("")}var n1=new WeakMap,Kf=new WeakSet;function ZP(u){var f=!1;function m(A,P){var $=l([],a(u.adoptedStyleSheets),!1),ne=$.indexOf(A),q=$.indexOf(P);ne!==q-1&&(q>=0&&$.splice(q,1),$.splice(ne+1,0,P),u.adoptedStyleSheets=$)}function S(){f=!0;var A=l([],a(u.adoptedStyleSheets),!1);u.adoptedStyleSheets.forEach(function(P){if(Kf.has(P)){var $=A.indexOf(P);$>=0&&A.splice($,1),n1.delete(P),Kf.delete(P)}}),u.adoptedStyleSheets=A}function I(A,P){u.adoptedStyleSheets.forEach(function($){if(Kf.has($))return;var ne=$.rules,q=new CSSStyleSheet;function se(){for(var Me=q.cssRules.length-1;Me>=0;Me--)q.deleteRule(Me);return m($,q),n1.set($,q),Kf.add(q),q}var de=Yw();de.modifySheet({prepareSheet:se,sourceCSSRules:ne,theme:A,ignoreImageAnalysis:P,force:!1,isAsyncCancelled:function(){return f}})})}return{render:I,destroy:S}}function JP(u){document.dispatchEvent(new CustomEvent("__darkreader__inlineScriptsAllowed"));var f=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"addRule"),m=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"insertRule"),S=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"deleteRule"),I=Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype,"removeRule"),A=u?Object.getOwnPropertyDescriptor(Document.prototype,"styleSheets"):null,P=["baidu.com","baike.baidu.com","ditu.baidu.com","map.baidu.com","maps.baidu.com","haokan.baidu.com","pan.baidu.com","passport.baidu.com","tieba.baidu.com","www.baidu.com"].includes(location.hostname),$=P?Object.getOwnPropertyDescriptor(Element.prototype,"getElementsByTagName"):null,ne=function(){Object.defineProperty(CSSStyleSheet.prototype,"addRule",f),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",m),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",S),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",I),document.removeEventListener("__darkreader__cleanUp",ne),document.removeEventListener("__darkreader__addUndefinedResolver",q),u&&Object.defineProperty(Document.prototype,"styleSheets",A),P&&Object.defineProperty(Element.prototype,"getElementsByTagName",$)},q=function(pe){customElements.whenDefined(pe.detail.tag).then(function(){document.dispatchEvent(new CustomEvent("__darkreader__isDefined",{detail:{tag:pe.detail.tag}}))})};document.addEventListener("__darkreader__cleanUp",ne),document.addEventListener("__darkreader__addUndefinedResolver",q);var se=new Event("__darkreader__updateSheet");function de(pe,Ve,Ue){return f.value.call(this,pe,Ve,Ue),this.ownerNode&&!this.ownerNode.classList.contains("darkreader")&&this.ownerNode.dispatchEvent(se),-1}function Me(pe,Ve){var Ue=m.value.call(this,pe,Ve);return this.ownerNode&&!this.ownerNode.classList.contains("darkreader")&&this.ownerNode.dispatchEvent(se),Ue}function Ie(pe){S.value.call(this,pe),this.ownerNode&&!this.ownerNode.classList.contains("darkreader")&&this.ownerNode.dispatchEvent(se)}function tt(pe){I.value.call(this,pe),this.ownerNode&&!this.ownerNode.classList.contains("darkreader")&&this.ownerNode.dispatchEvent(se)}function ue(){var pe=this,Ve=function(){var Rt=A.get.call(pe),lt=l([],a(Rt),!1).filter(function(He){return!He.ownerNode.classList.contains("darkreader")});return lt.item=function(He){return lt[He]},Object.setPrototypeOf(lt,StyleSheetList.prototype)},Ue=Ve(),gt={get:function(Rt,lt){return Ve()[lt]}};return Ue=new Proxy(Ue,gt),Ue}function me(pe){var Ve=this;if(pe!=="style")return $.value.call(this,pe);var Ue=function(){var lt=$.value.call(Ve,pe);return Object.setPrototypeOf(l([],a(lt),!1).filter(function(He){return!He.classList.contains("darkreader")}),NodeList.prototype)},gt=Ue(),Rt={get:function(lt,He){return Ue()[Number(He)||He]}};return gt=new Proxy(gt,Rt),gt}Object.defineProperty(CSSStyleSheet.prototype,"addRule",Object.assign({},f,{value:de})),Object.defineProperty(CSSStyleSheet.prototype,"insertRule",Object.assign({},m,{value:Me})),Object.defineProperty(CSSStyleSheet.prototype,"deleteRule",Object.assign({},S,{value:Ie})),Object.defineProperty(CSSStyleSheet.prototype,"removeRule",Object.assign({},I,{value:tt})),u&&Object.defineProperty(Document.prototype,"styleSheets",Object.assign({},A,{get:ue})),P&&Object.defineProperty(Element.prototype,"getElementsByTagName",Object.assign({},$,{value:me}))}var r1=XP(),Ai=new Map,Gf=[],St=null,zn=null,i1=null,eo=null,uu=null;function Oi(u,f){f===void 0&&(f=document.head||document);var m=f.querySelector(".".concat(u));return m||(m=document.createElement("style"),m.classList.add("darkreader"),m.classList.add(u),m.media="screen",m.textContent=""),m}function eN(u,f){f===void 0&&(f=document.head||document);var m=f.querySelector(".".concat(u));return m||(m=document.createElement("script"),m.classList.add("darkreader"),m.classList.add(u)),m}var du=new Map;function Ia(u,f){du.has(f)&&du.get(f).stop(),du.set(f,Ne(u,"parent"))}function tN(){O(du.values(),function(u){return u.stop()}),du.clear()}function nN(){var u=Oi("darkreader--fallback",document);u.textContent=Pm(St,{strict:!0}),document.head.insertBefore(u,document.head.firstChild),Ia(u,"fallback");var f=Oi("darkreader--user-agent");f.textContent=dP(St,i1,St.styleSystemControls),document.head.insertBefore(f,u.nextSibling),Ia(f,"user-agent");var m=Oi("darkreader--text");St.useFont||St.textStroke>0?m.textContent=YO(St):m.textContent="",document.head.insertBefore(m,u.nextSibling),Ia(m,"text");var S=Oi("darkreader--invert");zn&&Array.isArray(zn.invert)&&zn.invert.length>0?S.textContent=["".concat(zn.invert.join(", ")," {"),"    filter: ".concat(Tw(r(r({},St),{contrast:St.mode===0?St.contrast:Ae(St.contrast-10,0,100)}))," !important;"),"}"].join(`
`):S.textContent="",document.head.insertBefore(S,m.nextSibling),Ia(S,"invert");var I=Oi("darkreader--inline");I.textContent=zw(),document.head.insertBefore(I,S.nextSibling),Ia(I,"inline");var A=Oi("darkreader--override");A.textContent=zn&&zn.css?o1(zn.css):"",document.head.appendChild(A),Ia(A,"override");var P=Oi("darkreader--variables"),$=Nw(St),ne=St.darkSchemeBackgroundColor,q=St.darkSchemeTextColor,se=St.lightSchemeBackgroundColor,de=St.lightSchemeTextColor,Me=St.mode,Ie=Me===0?se:ne,tt=Me===0?de:q;Ie=We(Nt(Ie),St),tt=Er(Nt(tt),St),P.textContent=[":root {","   --darkreader-neutral-background: ".concat(Ie,";"),"   --darkreader-neutral-text: ".concat(tt,";"),"   --darkreader-selection-background: ".concat($.backgroundColorSelection,";"),"   --darkreader-selection-text: ".concat($.foregroundColorSelection,";"),"}"].join(`
`),document.head.insertBefore(P,I.nextSibling),Ia(P,"variables");var ue=Oi("darkreader--root-vars");document.head.insertBefore(ue,P.nextSibling);var me=!(zn&&zn.disableStyleSheetsProxy);{var pe=eN("darkreader--proxy");pe.append("(".concat(JP,")(").concat(me,")")),document.head.insertBefore(pe,ue.nextSibling),pe.remove()}}var Km=new Set;function Gm(u){var f=Oi("darkreader--inline",u);f.textContent=zw(),u.insertBefore(f,u.firstChild);var m=Oi("darkreader--override",u);m.textContent=zn&&zn.css?o1(zn.css):"",u.insertBefore(m,f.nextSibling);var S=Oi("darkreader--invert",u);zn&&Array.isArray(zn.invert)&&zn.invert.length>0?S.textContent=["".concat(zn.invert.join(", ")," {"),"    filter: ".concat(Tw(r(r({},St),{contrast:St.mode===0?St.contrast:Ae(St.contrast-10,0,100)}))," !important;"),"}"].join(`
`):S.textContent="",u.insertBefore(S,m.nextSibling),Km.add(u)}function o1(u){return u.replace(/\${(.+?)}/g,function(f,m){var S=Nt(m);return S?gs(S,St):m})}function Ym(){var u=document.querySelector(".darkreader--fallback");u&&(u.textContent="")}function rN(){l1();var u=Ss(document),f=u.filter(function(S){return!Ai.has(S)}).map(function(S){return s1(S)});f.map(function(S){return S.details({secondRound:!1})}).filter(function(S){return S&&S.rules.length>0}).forEach(function(S){ri.addRulesForMatching(S.rules)}),ri.matchVariablesAndDependants(),ri.setOnRootVariableChange(function(){ri.putRootVars(document.head.querySelector(".darkreader--root-vars"),St)}),ri.putRootVars(document.head.querySelector(".darkreader--root-vars"),St),Ai.forEach(function(S){return S.render(St,eo)}),ws.size===0&&Ym(),f.forEach(function(S){return S.watch()});var m=Z(document.querySelectorAll(au));be(document.documentElement,function(S){Gm(S.shadowRoot);var I=S.shadowRoot.querySelectorAll(au);I.length>0&&j(m,I)}),m.forEach(function(S){return zm(S,St,uu,eo)}),h1(document)}var iN=0,ws=new Set;function s1(u){var f=++iN;function m(){if(!Ye()||!u1){ws.add(f),"Current amount of styles loading: ".concat(ws.size);var P=document.querySelector(".darkreader--fallback");P.textContent||(P.textContent=Pm(St,{strict:!1}))}}function S(){ws.delete(f),"Removed loadingStyle ".concat(f,", now awaiting: ").concat(ws.size),ws.size===0&&Ye()&&Ym()}function I(){var P=A.details({secondRound:!0});P&&(ri.addRulesForMatching(P.rules),ri.matchVariablesAndDependants(),A.render(St,eo))}var A=WP(u,{update:I,loadingStart:m,loadingEnd:S});return Ai.set(u,A),A}function a1(u){var f=Ai.get(u);f&&(f.destroy(),Ai.delete(u))}var oN=ie(function(u){Ai.forEach(function(f){return f.render(St,eo)}),Gf.forEach(function(f){return f.render(St,eo)}),u&&u()}),l1=function(){oN.cancel()};function c1(){if(ws.size===0){Ym();return}}var fu=null,u1=!document.hidden;function sN(u){var f=!!fu;fu=function(){document.hidden||(d1(),u(),u1=!0)},f||document.addEventListener("visibilitychange",fu)}function d1(){document.removeEventListener("visibilitychange",fu),fu=null}function f1(){nN();function u(){rN(),aN()}document.hidden&&!St.immediateModify?sN(u):u(),AP(St)}function h1(u){try{if(Array.isArray(u.adoptedStyleSheets)&&u.adoptedStyleSheets.length>0){var f=ZP(u);Gf.push(f),f.render(St,eo)}}catch{}}function aN(){var u=Array.from(Ai.keys());YP(u,function(f){var m=f.created,S=f.updated,I=f.removed,A=f.moved,P=I,$=m.concat(S).concat(A).filter(function(se){return!Ai.has(se)}),ne=A.filter(function(se){return Ai.has(se)});P.forEach(function(se){return a1(se)});var q=$.map(function(se){return s1(se)});q.map(function(se){return se.details({secondRound:!1})}).filter(function(se){return se&&se.rules.length>0}).forEach(function(se){ri.addRulesForMatching(se.rules)}),ri.matchVariablesAndDependants(),q.forEach(function(se){return se.render(St,eo)}),q.forEach(function(se){return se.watch()}),ne.forEach(function(se){return Ai.get(se).restore()})},function(f){Gm(f),h1(f)}),RP(function(f){if(zm(f,St,uu,eo),f===document.documentElement){var m=f.getAttribute("style")||"";m.includes("--")&&(ri.matchVariablesAndDependants(),ri.putRootVars(document.head.querySelector(".darkreader--root-vars"),St))}},function(f){Gm(f);var m=f.querySelectorAll(au);m.length>0&&O(m,function(S){return zm(S,St,uu,eo)})}),it(c1)}function lN(){Ai.forEach(function(u){return u.pause()}),tN(),t1(),MP(),ht(c1),nt()}var hu;function cN(){hu=new MutationObserver(function(){document.querySelector('meta[name="darkreader-lock"]')&&(hu.disconnect(),qm())}),hu.observe(document.head,{childList:!0,subtree:!0})}function uN(){var u=document.createElement("meta");u.name="darkreader",u.content=r1,document.head.appendChild(u)}function p1(){if(document.querySelector('meta[name="darkreader-lock"]'))return!0;var u=document.querySelector('meta[name="darkreader"]');return u?u.content!==r1:(uN(),cN(),!1)}function dN(u,f,m){if(St=u,zn=f,zn?(eo=Array.isArray(zn.ignoreImageAnalysis)?zn.ignoreImageAnalysis:[],uu=Array.isArray(zn.ignoreInlineStyle)?zn.ignoreInlineStyle:[]):(eo=[],uu=[]),St.immediateModify&&Pe(function(){return!0}),i1=m,document.head){if(p1())return;document.documentElement.setAttribute("data-darkreader-mode","dynamic"),document.documentElement.setAttribute("data-darkreader-scheme",St.mode?"dark":"dimmed"),f1()}else{if(!k){var S=Oi("darkreader--fallback");document.documentElement.appendChild(S),S.textContent=Pm(St,{strict:!0})}var I=new MutationObserver(function(){if(document.head){if(I.disconnect(),p1()){qm();return}f1()}});I.observe(document,{childList:!0,subtree:!0})}}function fN(){document.dispatchEvent(new CustomEvent("__darkreader__cleanUp")),we(document.head.querySelector(".darkreader--proxy"))}function qm(){document.documentElement.removeAttribute("data-darkreader-mode"),document.documentElement.removeAttribute("data-darkreader-scheme"),hN(),we(document.querySelector(".darkreader--fallback")),document.head&&(OP(),we(document.head.querySelector(".darkreader--user-agent")),we(document.head.querySelector(".darkreader--text")),we(document.head.querySelector(".darkreader--invert")),we(document.head.querySelector(".darkreader--inline")),we(document.head.querySelector(".darkreader--override")),we(document.head.querySelector(".darkreader--variables")),we(document.head.querySelector(".darkreader--root-vars")),we(document.head.querySelector('meta[name="darkreader"]')),fN()),Km.forEach(function(u){we(u.querySelector(".darkreader--inline")),we(u.querySelector(".darkreader--override"))}),Km.clear(),O(Ai.keys(),function(u){return a1(u)}),ws.clear(),$P(),O(document.querySelectorAll(".darkreader"),we),Gf.forEach(function(u){u.destroy()}),Gf.splice(0),hu&&hu.disconnect()}function hN(){ri.clear(),sn.clear(),d1(),l1(),lN(),bP(),Li()}var g1=/url\(\"(blob\:.*?)\"\)/g;function pN(u){return i(this,void 0,void 0,function(){var f,m;return o(this,function(S){switch(S.label){case 0:return f=[],dt(g1,u,1).forEach(function(I){var A=N(I);f.push(A)}),[4,Promise.all(f)];case 1:return m=S.sent(),[2,u.replace(g1,function(){return'url("'.concat(m.shift(),'")')})]}})})}var gN=`/*
                        _______
                       /       \\
                      .==.    .==.
                     ((  ))==((  ))
                    / "=="    "=="\\
                   /____|| || ||___\\
       ________     ____    ________  ___    ___
       |  ___  \\   /    \\   |  ___  \\ |  |  /  /
       |  |  \\  \\ /  /\\  \\  |  |  \\  \\|  |_/  /
       |  |   )  /  /__\\  \\ |  |__/  /|  ___  \\
       |  |__/  /  ______  \\|  ____  \\|  |  \\  \\
_______|_______/__/ ____ \\__\\__|___\\__\\__|___\\__\\____
|  ___  \\ |  ____/ /    \\   |  ___  \\ |  ____|  ___  \\
|  |  \\  \\|  |___ /  /\\  \\  |  |  \\  \\|  |___|  |  \\  \\
|  |__/  /|  ____/  /__\\  \\ |  |   )  |  ____|  |__/  /
|  ____  \\|  |__/  ______  \\|  |__/  /|  |___|  ____  \\
|__|   \\__\\____/__/      \\__\\_______/ |______|__|   \\__\\
                https://darkreader.org
*/

/*! Dark reader generated CSS | Licensed under MIT https://github.com/darkreader/darkreader/blob/main/LICENSE */
`;function mN(){return i(this,void 0,void 0,function(){function u(P,$){var ne=document.querySelector(P);ne&&ne.textContent&&(f.push("/* ".concat($," */")),f.push(ne.textContent),f.push(""))}var f,m,S,I,A;return o(this,function(P){switch(P.label){case 0:return f=[gN],u(".darkreader--fallback","Fallback Style"),u(".darkreader--user-agent","User-Agent Style"),u(".darkreader--text","Text Style"),u(".darkreader--invert","Invert Style"),u(".darkreader--variables","Variables Style"),m=[],document.querySelectorAll(".darkreader--sync").forEach(function($){O($.sheet.cssRules,function(ne){ne&&ne.cssText&&m.push(ne.cssText)})}),m.length?(S=an(m.join(`
`)),f.push("/* Modified CSS */"),A=(I=f).push,[4,pN(S)]):[3,2];case 1:A.apply(I,[P.sent()]),f.push(""),P.label=2;case 2:return u(".darkreader--override","Override Style"),[2,f.join(`
`)]}})})}var Qm=!1,vN=function(){try{return window.self!==window.top}catch(u){return console.warn(u),!0}}();function m1(u,f){u===void 0&&(u={}),f===void 0&&(f=null);var m=r(r({},K),u);if(m.engine!==re.dynamicTheme)throw new Error("Theme engine is not supported.");dN(m,f,vN),Qm=!0}function _N(){return Qm}function Xm(){qm(),Qm=!1}var pu=matchMedia("(prefers-color-scheme: dark)"),Zm={themeOptions:null,fixes:null};function gu(){pu.matches?m1(Zm.themeOptions,Zm.fixes):Xm()}function yN(u,f){u===void 0&&(u={}),f===void 0&&(f=null),u?(Zm={themeOptions:u,fixes:f},gu(),C?pu.addEventListener("change",gu):pu.addListener(gu)):(C?pu.removeEventListener("change",gu):pu.removeListener(gu),Xm())}function bN(){return i(this,void 0,void 0,function(){return o(this,function(u){switch(u.label){case 0:return[4,mN()];case 1:return[2,u.sent()]}})})}var SN=H;n.auto=yN,n.disable=Xm,n.enable=m1,n.exportGeneratedCSS=bN,n.isEnabled=_N,n.setFetchMethod=SN,Object.defineProperty(n,"__esModule",{value:!0})})})(D_,D_.exports);var qf=D_.exports;class DN{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout(()=>{throw t.stack?new Error(`${t.message}

${t.stack}`):t},0)}}addListener(t){return this.listeners.push(t),()=>{this._removeListener(t)}}emit(t){this.listeners.forEach(n=>{n(t)})}_removeListener(t){this.listeners.splice(this.listeners.indexOf(t),1)}setUnexpectedErrorHandler(t){this.unexpectedErrorHandler=t}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(t){this.unexpectedErrorHandler(t),this.emit(t)}onUnexpectedExternalError(t){this.unexpectedErrorHandler(t)}}const FN=new DN;function VN(e){UN(e)||FN.onUnexpectedError(e)}const vp="Canceled";function UN(e){return e instanceof Error&&e.name===vp&&e.message===vp}class Qf extends Error{constructor(){super(vp),this.name=this.message}}function l0(){const e=new Error(vp);return e.name=e.message,e}function Kk(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function $N(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}function WN(e,t,n=(r,i)=>r===i){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function zN(e){return e.filter(t=>!!t)}function Gk(e,t){if(!t)return e.filter((r,i)=>e.indexOf(r)===i);const n=Object.create(null);return e.filter(r=>{const i=t(r);return n[i]?!1:(n[i]=!0,!0)})}function BN(e){return[].concat(...e)}var na;(e=>{function t(w){return w&&typeof w=="object"&&typeof w[Symbol.iterator]=="function"}e.is=t;const n=Object.freeze([]);function r(){return n}e.empty=r;function*i(w){yield w}e.single=i;function o(w){return w||n}e.from=o;function s(w){return!w||w[Symbol.iterator]().next().done===!0}e.isEmpty=s;function a(w){return w[Symbol.iterator]().next().value}e.first=a;function l(w,x){for(const C of w)if(x(C))return!0;return!1}e.some=l;function c(w,x){for(const C of w)if(x(C))return C}e.find=c;function*d(w,x){for(const C of w)x(C)&&(yield C)}e.filter=d;function*h(w,x){for(const C of w)yield x(C)}e.map=h;function*p(...w){for(const x of w)for(const C of x)yield C}e.concat=p;function*g(w){for(const x of w)for(const C of x)yield C}e.concatNested=g;function b(w,x,C){let F=C;for(const M of w)F=x(F,M);return F}e.reduce=b;function*k(w,x,C=w.length){for(x<0&&(x+=w.length),C<0?C+=w.length:C>w.length&&(C=w.length);x<C;x++)yield w[x]}e.slice=k;function y(w,x=Number.POSITIVE_INFINITY){const C=[];if(x===0)return[C,w];const F=w[Symbol.iterator]();for(let M=0;M<x;M++){const L=F.next();if(L.done)return[C,e.empty()];C.push(L.value)}return[C,{[Symbol.iterator](){return F}}]}e.consume=y;function _(w,x,C=(F,M)=>F===M){const F=w[Symbol.iterator](),M=x[Symbol.iterator]();for(;;){const L=F.next(),N=M.next();if(L.done!==N.done)return!1;if(L.done)return!0;if(!C(L.value,N.value))return!1}}e.equals=_})(na||(na={}));function HN(e){}class jN extends Error{constructor(t){super(`Encountered errors while disposing of store. Errors: [${t.join(", ")}]`),this.errors=t}}function Tg(e){if(na.is(e)){let t=[];for(const n of e)if(n)try{n.dispose()}catch(r){t.push(r)}if(t.length===1)throw t[0];if(t.length>1)throw new jN(t);return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function Yk(...e){return e.forEach(HN),rf(()=>Tg(e))}function rf(e){return{dispose:()=>{e()}}}const qk=class{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}clear(){try{Tg(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?qk.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}};let of=qk;of.DISABLE_DISPOSED_WARNING=!1;class cs{constructor(){this._store=new of}dispose(){this._store.dispose()}_register(t){if(t===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(t)}}cs.None=Object.freeze({dispose(){}});class KN{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){var n;this._isDisposed||t===this._value||((n=this._value)==null||n.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){var t;this._isDisposed=!0,(t=this._value)==null||t.dispose(),this._value=void 0}}const _p=class{constructor(e){this.element=e,this.next=_p.Undefined,this.prev=_p.Undefined}};let er=_p;er.Undefined=new _p(void 0);class yp{constructor(){this._first=er.Undefined,this._last=er.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===er.Undefined}clear(){this._first=er.Undefined,this._last=er.Undefined,this._size=0}unshift(t){return this._insert(t,!1)}push(t){return this._insert(t,!0)}_insert(t,n){const r=new er(t);if(this._first===er.Undefined)this._first=r,this._last=r;else if(n){const o=this._last;this._last=r,r.prev=o,o.next=r}else{const o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(r))}}shift(){if(this._first===er.Undefined)return;const t=this._first.element;return this._remove(this._first),t}pop(){if(this._last===er.Undefined)return;const t=this._last.element;return this._remove(this._last),t}_remove(t){if(t.prev!==er.Undefined&&t.next!==er.Undefined){const n=t.prev;n.next=t.next,t.next.prev=n}else t.prev===er.Undefined&&t.next===er.Undefined?(this._first=er.Undefined,this._last=er.Undefined):t.next===er.Undefined?(this._last=this._last.prev,this._last.next=er.Undefined):t.prev===er.Undefined&&(this._first=this._first.next,this._first.prev=er.Undefined);this._size-=1}*[Symbol.iterator](){let t=this._first;for(;t!==er.Undefined;)yield t.element,t=t.next}}const Hh="en";let bp=!1,Sp=!1,jh=!1,Qk=!1,Xk=!1,Zk=!1,Xf,Kh=Hh,GN,Ls;const hi=typeof self=="object"?self:typeof global=="object"?global:{};let Dn;typeof process<"u"?Dn=process:typeof hi.vscode<"u"&&(Dn=hi.vscode.process);var Hk;const Jk=typeof((Hk=Dn==null?void 0:Dn.versions)==null?void 0:Hk.electron)=="string"&&Dn.type==="renderer",YN=Jk&&(Dn==null?void 0:Dn.sandboxed);(()=>{if(YN)return"bypassHeatCheck";const e=Dn==null?void 0:Dn.env.ENABLE_VSCODE_BROWSER_CODE_LOADING;if(typeof e=="string")return e==="none"||e==="code"||e==="bypassHeatCheck"||e==="bypassHeatCheckAndEagerCompile"?e:"bypassHeatCheck"})();if(typeof navigator=="object"&&!Jk)Ls=navigator.userAgent,bp=Ls.indexOf("Windows")>=0,Sp=Ls.indexOf("Macintosh")>=0,Zk=(Ls.indexOf("Macintosh")>=0||Ls.indexOf("iPad")>=0||Ls.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,jh=Ls.indexOf("Linux")>=0,Xk=!0,Xf=navigator.language,Kh=Xf;else if(typeof Dn=="object"){bp=Dn.platform==="win32",Sp=Dn.platform==="darwin",jh=Dn.platform==="linux",jh&&Dn.env.SNAP&&Dn.env.SNAP_REVISION,Xf=Hh,Kh=Hh;const e=Dn.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];Xf=t.locale,Kh=n||Hh,GN=t._translationsConfigFile}catch{}Qk=!0}else console.error("Unable to resolve platform.");const ra=bp,rs=Sp,eI=jh,ev=Qk,sf=Xk,qN=Ls,Es=Kh;var y1;(e=>{function t(){return Es}e.value=t;function n(){return Es.length===2?Es==="en":Es.length>=3?Es[0]==="e"&&Es[1]==="n"&&Es[2]==="-":!1}e.isDefaultVariant=n;function r(){return Es==="en"}e.isDefault=r})(y1||(y1={}));const b1=function(){if(hi.setImmediate)return hi.setImmediate.bind(hi);if(typeof hi.postMessage=="function"&&!hi.importScripts){let n=[];hi.addEventListener("message",i=>{if(i.data&&i.data.vscodeSetImmediateId)for(let o=0,s=n.length;o<s;o++){const a=n[o];if(a.id===i.data.vscodeSetImmediateId){n.splice(o,1),a.callback();return}}});let r=0;return i=>{const o=++r;n.push({id:o,callback:i}),hi.postMessage({vscodeSetImmediateId:o},"*")}}if(typeof(Dn==null?void 0:Dn.nextTick)=="function")return Dn.nextTick.bind(Dn);const t=Promise.resolve();return n=>t.then(n)}();var zi=(e=>(e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux",e))(zi||{});const lo=Sp||Zk?2:bp?1:3,QN=hi.performance&&typeof hi.performance.now=="function";class c0{static create(t=!0){return new c0(t)}constructor(t){this._highResolution=QN&&t,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}_now(){return this._highResolution?hi.performance.now():Date.now()}}var ia;(e=>{e.None=()=>cs.None;function t(x){return(C,F=null,M)=>{let L=!1,N;return N=x(V=>{if(!L)return N?N.dispose():L=!0,C.call(F,V)},null,M),L&&N.dispose(),N}}e.once=t;function n(x,C){return l((F,M=null,L)=>x(N=>F.call(M,C(N)),null,L))}e.map=n;function r(x,C){return l((F,M=null,L)=>x(N=>{C(N),F.call(M,N)},null,L))}e.forEach=r;function i(x,C){return l((F,M=null,L)=>x(N=>C(N)&&F.call(M,N),null,L))}e.filter=i;function o(x){return x}e.signal=o;function s(...x){return(C,F=null,M)=>Yk(...x.map(L=>L(N=>C.call(F,N),null,M)))}e.any=s;function a(x,C,F){let M=F;return n(x,L=>(M=C(M,L),M))}e.reduce=a;function l(x){let C;const F=new Oe({onFirstListenerAdd(){C=x(F.fire,F)},onLastListenerRemove(){C.dispose()}});return F.event}e.snapshot=l;function c(x,C,F=100,M=!1,L){let N,V,Y,J=0;const H=new Oe({leakWarningThreshold:L,onFirstListenerAdd(){N=x(D=>{J++,V=C(V,D),M&&!Y&&(H.fire(V),V=void 0),clearTimeout(Y),Y=setTimeout(()=>{const T=V;V=void 0,Y=void 0,(!M||J>1)&&H.fire(T),J=0},F)})},onLastListenerRemove(){N.dispose()}});return H.event}e.debounce=c;function d(x){const C=new Date().getTime();return n(t(x),F=>new Date().getTime()-C)}e.stopwatch=d;function h(x){let C=!0,F;return i(x,M=>{const L=C||M!==F;return C=!1,F=M,L})}e.latch=h;function p(x,C=!1,F=[]){let M=F.slice(),L=x(Y=>{M?M.push(Y):V.fire(Y)});const N=()=>{M&&M.forEach(Y=>V.fire(Y)),M=null},V=new Oe({onFirstListenerAdd(){L||(L=x(Y=>V.fire(Y)))},onFirstListenerDidAdd(){M&&(C?setTimeout(N):N())},onLastListenerRemove(){L&&L.dispose(),L=null}});return V.event}e.buffer=p;class g{constructor(C){this.event=C}map(C){return new g(n(this.event,C))}forEach(C){return new g(r(this.event,C))}filter(C){return new g(i(this.event,C))}reduce(C,F){return new g(a(this.event,C,F))}latch(){return new g(h(this.event))}debounce(C,F=100,M=!1,L){return new g(c(this.event,C,F,M,L))}on(C,F,M){return this.event(C,F,M)}once(C,F,M){return t(this.event)(C,F,M)}}function b(x){return new g(x)}e.chain=b;function k(x,C,F=M=>M){const M=(...Y)=>V.fire(F(...Y)),L=()=>x.on(C,M),N=()=>x.removeListener(C,M),V=new Oe({onFirstListenerAdd:L,onLastListenerRemove:N});return V.event}e.fromNodeEventEmitter=k;function y(x,C,F=M=>M){const M=(...Y)=>V.fire(F(...Y)),L=()=>x.addEventListener(C,M),N=()=>x.removeEventListener(C,M),V=new Oe({onFirstListenerAdd:L,onLastListenerRemove:N});return V.event}e.fromDOMEventEmitter=y;function _(x){const C=new Oe;let F=!1;return x.then(void 0,()=>null).then(()=>{F?C.fire(void 0):setTimeout(()=>C.fire(void 0),0)}),F=!0,C.event}e.fromPromise=_;function w(x){return new Promise(C=>t(x)(C))}e.toPromise=w})(ia||(ia={}));const tI=class{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${tI._idPool++}`}start(e){this._stopWatch=new c0(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}};let nI=tI;nI._idPool=0;const rI=class{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=void 0,this._perfMon=(t=this._options)!=null&&t._profName?new nI(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,n)=>{var a;this._listeners||(this._listeners=new yp);const r=this._listeners.isEmpty();r&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const i=this._listeners.push(t?[e,t]:e);r&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const o=(a=this._leakageMon)==null?void 0:a.check(this._listeners.size);let s;return s={dispose:()=>{o&&o(),s.dispose=rI._noop,this._disposed||(i(),this._options&&this._options.onLastListenerRemove&&(this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)))}},n instanceof of?n.add(s):Array.isArray(n)&&n.push(s),s}),this._event}fire(e){var t,n;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new yp);for(let r of this._listeners)this._deliveryQueue.push([r,e]);for((t=this._perfMon)==null||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[r,i]=this._deliveryQueue.shift();try{typeof r=="function"?r.call(void 0,i):r[0].call(r[1],i)}catch(o){VN(o)}}(n=this._perfMon)==null||n.stop()}}dispose(){var e,t,n;(e=this._listeners)==null||e.clear(),(t=this._deliveryQueue)==null||t.clear(),(n=this._leakageMon)==null||n.dispose(),this._disposed=!0}};let Oe=rI;Oe._noop=function(){};class XN extends Oe{constructor(t){super(t),this._isPaused=0,this._eventQueue=new yp,this._mergeFn=t==null?void 0:t.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){const t=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(t))}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(t){this._listeners&&(this._isPaused!==0?this._eventQueue.push(t):super.fire(t))}}const iI=Object.freeze(function(e,t){const n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}});var Id;(e=>{function t(n){return n===e.None||n===e.Cancelled||n instanceof Gh?!0:!n||typeof n!="object"?!1:typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ia.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:iI})})(Id||(Id={}));class Gh{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?iI:(this._emitter||(this._emitter=new Oe),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class oI{constructor(t){this._token=void 0,this._parentListener=void 0,this._parentListener=t&&t.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Gh),this._token}cancel(){this._token?this._token instanceof Gh&&this._token.cancel():this._token=Id.Cancelled}dispose(t=!1){t&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof Gh&&this._token.dispose():this._token=Id.None}}var Ke=(e=>(e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.LineFeed=10]="LineFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.DoubleQuote=34]="DoubleQuote",e[e.Hash=35]="Hash",e[e.DollarSign=36]="DollarSign",e[e.PercentSign=37]="PercentSign",e[e.Ampersand=38]="Ampersand",e[e.SingleQuote=39]="SingleQuote",e[e.OpenParen=40]="OpenParen",e[e.CloseParen=41]="CloseParen",e[e.Asterisk=42]="Asterisk",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit1=49]="Digit1",e[e.Digit2=50]="Digit2",e[e.Digit3=51]="Digit3",e[e.Digit4=52]="Digit4",e[e.Digit5=53]="Digit5",e[e.Digit6=54]="Digit6",e[e.Digit7=55]="Digit7",e[e.Digit8=56]="Digit8",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.Semicolon=59]="Semicolon",e[e.LessThan=60]="LessThan",e[e.Equals=61]="Equals",e[e.GreaterThan=62]="GreaterThan",e[e.QuestionMark=63]="QuestionMark",e[e.AtSign=64]="AtSign",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.OpenSquareBracket=91]="OpenSquareBracket",e[e.Backslash=92]="Backslash",e[e.CloseSquareBracket=93]="CloseSquareBracket",e[e.Caret=94]="Caret",e[e.Underline=95]="Underline",e[e.BackTick=96]="BackTick",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace",e[e.Tilde=126]="Tilde",e[e.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",e[e.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",e[e.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",e[e.U_Combining_Tilde=771]="U_Combining_Tilde",e[e.U_Combining_Macron=772]="U_Combining_Macron",e[e.U_Combining_Overline=773]="U_Combining_Overline",e[e.U_Combining_Breve=774]="U_Combining_Breve",e[e.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",e[e.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",e[e.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",e[e.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",e[e.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",e[e.U_Combining_Caron=780]="U_Combining_Caron",e[e.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",e[e.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",e[e.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",e[e.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",e[e.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",e[e.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",e[e.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",e[e.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",e[e.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",e[e.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",e[e.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",e[e.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",e[e.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",e[e.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",e[e.U_Combining_Horn=795]="U_Combining_Horn",e[e.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",e[e.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",e[e.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",e[e.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",e[e.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",e[e.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",e[e.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",e[e.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",e[e.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",e[e.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",e[e.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",e[e.U_Combining_Cedilla=807]="U_Combining_Cedilla",e[e.U_Combining_Ogonek=808]="U_Combining_Ogonek",e[e.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",e[e.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",e[e.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",e[e.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",e[e.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",e[e.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",e[e.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",e[e.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",e[e.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",e[e.U_Combining_Low_Line=818]="U_Combining_Low_Line",e[e.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",e[e.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",e[e.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",e[e.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",e[e.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",e[e.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",e[e.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",e[e.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",e[e.U_Combining_Square_Below=827]="U_Combining_Square_Below",e[e.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",e[e.U_Combining_X_Above=829]="U_Combining_X_Above",e[e.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",e[e.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",e[e.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",e[e.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",e[e.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",e[e.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",e[e.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",e[e.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",e[e.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",e[e.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",e[e.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",e[e.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",e[e.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",e[e.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",e[e.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",e[e.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",e[e.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",e[e.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",e[e.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",e[e.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",e[e.U_Combining_Fermata=850]="U_Combining_Fermata",e[e.U_Combining_X_Below=851]="U_Combining_X_Below",e[e.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",e[e.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",e[e.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",e[e.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",e[e.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",e[e.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",e[e.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",e[e.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",e[e.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",e[e.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",e[e.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",e[e.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",e[e.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",e[e.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",e[e.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",e[e.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",e[e.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",e[e.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",e[e.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",e[e.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",e[e.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",e[e.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",e[e.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",e[e.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",e[e.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",e[e.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",e[e.LINE_SEPARATOR=8232]="LINE_SEPARATOR",e[e.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",e[e.NEXT_LINE=133]="NEXT_LINE",e[e.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",e[e.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",e[e.U_DIAERESIS=168]="U_DIAERESIS",e[e.U_MACRON=175]="U_MACRON",e[e.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",e[e.U_CEDILLA=184]="U_CEDILLA",e[e.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",e[e.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",e[e.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",e[e.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",e[e.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",e[e.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",e[e.U_BREVE=728]="U_BREVE",e[e.U_DOT_ABOVE=729]="U_DOT_ABOVE",e[e.U_RING_ABOVE=730]="U_RING_ABOVE",e[e.U_OGONEK=731]="U_OGONEK",e[e.U_SMALL_TILDE=732]="U_SMALL_TILDE",e[e.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",e[e.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",e[e.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",e[e.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",e[e.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",e[e.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",e[e.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",e[e.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",e[e.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",e[e.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",e[e.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",e[e.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",e[e.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",e[e.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",e[e.U_GREEK_TONOS=900]="U_GREEK_TONOS",e[e.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",e[e.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",e[e.U_GREEK_PSILI=8127]="U_GREEK_PSILI",e[e.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",e[e.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",e[e.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",e[e.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",e[e.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",e[e.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",e[e.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",e[e.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",e[e.U_GREEK_VARIA=8175]="U_GREEK_VARIA",e[e.U_GREEK_OXIA=8189]="U_GREEK_OXIA",e[e.U_GREEK_DASIA=8190]="U_GREEK_DASIA",e[e.U_OVERLINE=8254]="U_OVERLINE",e[e.UTF8_BOM=65279]="UTF8_BOM",e))(Ke||{});function ZN(e){return!e||typeof e!="string"?!0:e.trim().length===0}function F_(e,t){return e<t?-1:e>t?1:0}function u0(e,t,n=0,r=e.length,i=0,o=t.length){for(;n<r&&i<o;n++,i++){let l=e.charCodeAt(n),c=t.charCodeAt(i);if(l<c)return-1;if(l>c)return 1}const s=r-n,a=o-i;return s<a?-1:s>a?1:0}function S1(e,t){return d0(e,t,0,e.length,0,t.length)}function d0(e,t,n=0,r=e.length,i=0,o=t.length){for(;n<r&&i<o;n++,i++){let l=e.charCodeAt(n),c=t.charCodeAt(i);if(l===c)continue;const d=l-c;if(!(d===32&&Rd(c))&&!(d===-32&&Rd(l)))return V_(l)&&V_(c)?d:u0(e.toLowerCase(),t.toLowerCase(),n,r,i,o)}const s=r-n,a=o-i;return s<a?-1:s>a?1:0}function V_(e){return e>=Ke.a&&e<=Ke.z}function Rd(e){return e>=Ke.A&&e<=Ke.Z}function w1(e){return V_(e)||Rd(e)}function JN(e,t){return e.length===t.length&&sI(e,t)}function sI(e,t,n=e.length){for(let r=0;r<n;r++){const i=e.charCodeAt(r),o=t.charCodeAt(r);if(i!==o){if(w1(i)&&w1(o)){const s=Math.abs(i-o);if(s!==0&&s!==32)return!1}else if(String.fromCharCode(i).toLowerCase()!==String.fromCharCode(o).toLowerCase())return!1}}return!0}function eD(e,t){const n=t.length;return t.length>e.length?!1:sI(e,t,n)}String.fromCharCode(Ke.UTF8_BOM);let Ba;if(typeof process<"u")Ba={get platform(){return process.platform},get env(){return process.env},cwd(){return{}.VSCODE_CWD||process.cwd()},nextTick(e){return process.nextTick(e)}};else if(typeof hi.vscode<"u"){const e=hi.vscode.process;Ba={get platform(){return e.platform},get env(){return e.env},cwd(){return e.cwd()},nextTick(t){return b1(t)}}}else Ba={get platform(){return ra?"win32":rs?"darwin":"linux"},nextTick(e){return b1(e)},get env(){return Object.create(null)},cwd(){return"/"}};const U_=Ba.cwd,tD=Ba.env,Ri=Ba.platform;Ba.nextTick;const nD=65,rD=97,iD=90,oD=122,Bs=46,yr=47,ci=92,Cs=58,sD=63;class aI extends Error{constructor(t,n,r){let i;typeof n=="string"&&n.indexOf("not ")===0?(i="must not be",n=n.replace(/^not /,"")):i="must be";const o=t.indexOf(".")!==-1?"property":"argument";let s=`The "${t}" ${o} ${i} of type ${n}`;s+=`. Received type ${typeof r}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}}function Hn(e,t){if(typeof e!="string")throw new aI(t,"string",e)}function Et(e){return e===yr||e===ci}function $_(e){return e===yr}function xs(e){return e>=nD&&e<=iD||e>=rD&&e<=oD}function wp(e,t,n,r){let i="",o=0,s=-1,a=0,l=0;for(let c=0;c<=e.length;++c){if(c<e.length)l=e.charCodeAt(c);else{if(r(l))break;l=yr}if(r(l)){if(!(s===c-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Bs||i.charCodeAt(i.length-2)!==Bs){if(i.length>2){const d=i.lastIndexOf(n);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(n)),s=c,a=0;continue}else if(i.length!==0){i="",o=0,s=c,a=0;continue}}t&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${e.slice(s+1,c)}`:i=e.slice(s+1,c),o=c-s-1;s=c,a=0}else l===Bs&&a!==-1?++a:a=-1}return i}function lI(e,t){if(t===null||typeof t!="object")throw new aI("pathObject","Object",t);const n=t.dir||t.root,r=t.base||`${t.name||""}${t.ext||""}`;return n?n===t.root?`${n}${r}`:`${n}${e}${r}`:r}const nr={resolve(...e){let t="",n="",r=!1;for(let i=e.length-1;i>=-1;i--){let o;if(i>=0){if(o=e[i],Hn(o,"path"),o.length===0)continue}else t.length===0?o=U_():(o=tD[`=${t}`]||U_(),(o===void 0||o.slice(0,2).toLowerCase()!==t.toLowerCase()&&o.charCodeAt(2)===ci)&&(o=`${t}\\`));const s=o.length;let a=0,l="",c=!1;const d=o.charCodeAt(0);if(s===1)Et(d)&&(a=1,c=!0);else if(Et(d))if(c=!0,Et(o.charCodeAt(1))){let h=2,p=h;for(;h<s&&!Et(o.charCodeAt(h));)h++;if(h<s&&h!==p){const g=o.slice(p,h);for(p=h;h<s&&Et(o.charCodeAt(h));)h++;if(h<s&&h!==p){for(p=h;h<s&&!Et(o.charCodeAt(h));)h++;(h===s||h!==p)&&(l=`\\\\${g}\\${o.slice(p,h)}`,a=h)}}}else a=1;else xs(d)&&o.charCodeAt(1)===Cs&&(l=o.slice(0,2),a=2,s>2&&Et(o.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(t.length>0){if(l.toLowerCase()!==t.toLowerCase())continue}else t=l;if(r){if(t.length>0)break}else if(n=`${o.slice(a)}\\${n}`,r=c,c&&t.length>0)break}return n=wp(n,!r,"\\",Et),r?`${t}\\${n}`:`${t}${n}`||"."},normalize(e){Hn(e,"path");const t=e.length;if(t===0)return".";let n=0,r,i=!1;const o=e.charCodeAt(0);if(t===1)return $_(o)?"\\":e;if(Et(o))if(i=!0,Et(e.charCodeAt(1))){let a=2,l=a;for(;a<t&&!Et(e.charCodeAt(a));)a++;if(a<t&&a!==l){const c=e.slice(l,a);for(l=a;a<t&&Et(e.charCodeAt(a));)a++;if(a<t&&a!==l){for(l=a;a<t&&!Et(e.charCodeAt(a));)a++;if(a===t)return`\\\\${c}\\${e.slice(l)}\\`;a!==l&&(r=`\\\\${c}\\${e.slice(l,a)}`,n=a)}}}else n=1;else xs(o)&&e.charCodeAt(1)===Cs&&(r=e.slice(0,2),n=2,t>2&&Et(e.charCodeAt(2))&&(i=!0,n=3));let s=n<t?wp(e.slice(n),!i,"\\",Et):"";return s.length===0&&!i&&(s="."),s.length>0&&Et(e.charCodeAt(t-1))&&(s+="\\"),r===void 0?i?`\\${s}`:s:i?`${r}\\${s}`:`${r}${s}`},isAbsolute(e){Hn(e,"path");const t=e.length;if(t===0)return!1;const n=e.charCodeAt(0);return Et(n)||t>2&&xs(n)&&e.charCodeAt(1)===Cs&&Et(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,n;for(let o=0;o<e.length;++o){const s=e[o];Hn(s,"path"),s.length>0&&(t===void 0?t=n=s:t+=`\\${s}`)}if(t===void 0)return".";let r=!0,i=0;if(typeof n=="string"&&Et(n.charCodeAt(0))){++i;const o=n.length;o>1&&Et(n.charCodeAt(1))&&(++i,o>2&&(Et(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<t.length&&Et(t.charCodeAt(i));)i++;i>=2&&(t=`\\${t.slice(i)}`)}return nr.normalize(t)},relative(e,t){if(Hn(e,"from"),Hn(t,"to"),e===t)return"";const n=nr.resolve(e),r=nr.resolve(t);if(n===r||(e=n.toLowerCase(),t=r.toLowerCase(),e===t))return"";let i=0;for(;i<e.length&&e.charCodeAt(i)===ci;)i++;let o=e.length;for(;o-1>i&&e.charCodeAt(o-1)===ci;)o--;const s=o-i;let a=0;for(;a<t.length&&t.charCodeAt(a)===ci;)a++;let l=t.length;for(;l-1>a&&t.charCodeAt(l-1)===ci;)l--;const c=l-a,d=s<c?s:c;let h=-1,p=0;for(;p<d;p++){const b=e.charCodeAt(i+p);if(b!==t.charCodeAt(a+p))break;b===ci&&(h=p)}if(p!==d){if(h===-1)return r}else{if(c>d){if(t.charCodeAt(a+p)===ci)return r.slice(a+p+1);if(p===2)return r.slice(a+p)}s>d&&(e.charCodeAt(i+p)===ci?h=p:p===2&&(h=3)),h===-1&&(h=0)}let g="";for(p=i+h+1;p<=o;++p)(p===o||e.charCodeAt(p)===ci)&&(g+=g.length===0?"..":"\\..");return a+=h,g.length>0?`${g}${r.slice(a,l)}`:(r.charCodeAt(a)===ci&&++a,r.slice(a,l))},toNamespacedPath(e){if(typeof e!="string")return e;if(e.length===0)return"";const t=nr.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===ci){if(t.charCodeAt(1)===ci){const n=t.charCodeAt(2);if(n!==sD&&n!==Bs)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(xs(t.charCodeAt(0))&&t.charCodeAt(1)===Cs&&t.charCodeAt(2)===ci)return`\\\\?\\${t}`;return e},dirname(e){Hn(e,"path");const t=e.length;if(t===0)return".";let n=-1,r=0;const i=e.charCodeAt(0);if(t===1)return Et(i)?e:".";if(Et(i)){if(n=r=1,Et(e.charCodeAt(1))){let a=2,l=a;for(;a<t&&!Et(e.charCodeAt(a));)a++;if(a<t&&a!==l){for(l=a;a<t&&Et(e.charCodeAt(a));)a++;if(a<t&&a!==l){for(l=a;a<t&&!Et(e.charCodeAt(a));)a++;if(a===t)return e;a!==l&&(n=r=a+1)}}}}else xs(i)&&e.charCodeAt(1)===Cs&&(n=t>2&&Et(e.charCodeAt(2))?3:2,r=n);let o=-1,s=!0;for(let a=t-1;a>=r;--a)if(Et(e.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(n===-1)return".";o=n}return e.slice(0,o)},basename(e,t){t!==void 0&&Hn(t,"ext"),Hn(e,"path");let n=0,r=-1,i=!0,o;if(e.length>=2&&xs(e.charCodeAt(0))&&e.charCodeAt(1)===Cs&&(n=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,a=-1;for(o=e.length-1;o>=n;--o){const l=e.charCodeAt(o);if(Et(l)){if(!i){n=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===t.charCodeAt(s)?--s===-1&&(r=o):(s=-1,r=a))}return n===r?r=a:r===-1&&(r=e.length),e.slice(n,r)}for(o=e.length-1;o>=n;--o)if(Et(e.charCodeAt(o))){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":e.slice(n,r)},extname(e){Hn(e,"path");let t=0,n=-1,r=0,i=-1,o=!0,s=0;e.length>=2&&e.charCodeAt(1)===Cs&&xs(e.charCodeAt(0))&&(t=r=2);for(let a=e.length-1;a>=t;--a){const l=e.charCodeAt(a);if(Et(l)){if(!o){r=a+1;break}continue}i===-1&&(o=!1,i=a+1),l===Bs?n===-1?n=a:s!==1&&(s=1):n!==-1&&(s=-1)}return n===-1||i===-1||s===0||s===1&&n===i-1&&n===r+1?"":e.slice(n,i)},format:lI.bind(null,"\\"),parse(e){Hn(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const n=e.length;let r=0,i=e.charCodeAt(0);if(n===1)return Et(i)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Et(i)){if(r=1,Et(e.charCodeAt(1))){let h=2,p=h;for(;h<n&&!Et(e.charCodeAt(h));)h++;if(h<n&&h!==p){for(p=h;h<n&&Et(e.charCodeAt(h));)h++;if(h<n&&h!==p){for(p=h;h<n&&!Et(e.charCodeAt(h));)h++;h===n?r=h:h!==p&&(r=h+1)}}}}else if(xs(i)&&e.charCodeAt(1)===Cs){if(n<=2)return t.root=t.dir=e,t;if(r=2,Et(e.charCodeAt(2))){if(n===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let o=-1,s=r,a=-1,l=!0,c=e.length-1,d=0;for(;c>=r;--c){if(i=e.charCodeAt(c),Et(i)){if(!l){s=c+1;break}continue}a===-1&&(l=!1,a=c+1),i===Bs?o===-1?o=c:d!==1&&(d=1):o!==-1&&(d=-1)}return a!==-1&&(o===-1||d===0||d===1&&o===a-1&&o===s+1?t.base=t.name=e.slice(s,a):(t.name=e.slice(s,o),t.base=e.slice(s,a),t.ext=e.slice(o,a))),s>0&&s!==r?t.dir=e.slice(0,s-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},dn={resolve(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const i=r>=0?e[r]:U_();Hn(i,"path"),i.length!==0&&(t=`${i}/${t}`,n=i.charCodeAt(0)===yr)}return t=wp(t,!n,"/",$_),n?`/${t}`:t.length>0?t:"."},normalize(e){if(Hn(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===yr,n=e.charCodeAt(e.length-1)===yr;return e=wp(e,!t,"/",$_),e.length===0?t?"/":n?"./":".":(n&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Hn(e,"path"),e.length>0&&e.charCodeAt(0)===yr},join(...e){if(e.length===0)return".";let t;for(let n=0;n<e.length;++n){const r=e[n];Hn(r,"path"),r.length>0&&(t===void 0?t=r:t+=`/${r}`)}return t===void 0?".":dn.normalize(t)},relative(e,t){if(Hn(e,"from"),Hn(t,"to"),e===t||(e=dn.resolve(e),t=dn.resolve(t),e===t))return"";const n=1,r=e.length,i=r-n,o=1,s=t.length-o,a=i<s?i:s;let l=-1,c=0;for(;c<a;c++){const h=e.charCodeAt(n+c);if(h!==t.charCodeAt(o+c))break;h===yr&&(l=c)}if(c===a)if(s>a){if(t.charCodeAt(o+c)===yr)return t.slice(o+c+1);if(c===0)return t.slice(o+c)}else i>a&&(e.charCodeAt(n+c)===yr?l=c:c===0&&(l=0));let d="";for(c=n+l+1;c<=r;++c)(c===r||e.charCodeAt(c)===yr)&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(o+l)}`},toNamespacedPath(e){return e},dirname(e){if(Hn(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===yr;let n=-1,r=!0;for(let i=e.length-1;i>=1;--i)if(e.charCodeAt(i)===yr){if(!r){n=i;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)},basename(e,t){t!==void 0&&Hn(t,"ext"),Hn(e,"path");let n=0,r=-1,i=!0,o;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,a=-1;for(o=e.length-1;o>=0;--o){const l=e.charCodeAt(o);if(l===yr){if(!i){n=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===t.charCodeAt(s)?--s===-1&&(r=o):(s=-1,r=a))}return n===r?r=a:r===-1&&(r=e.length),e.slice(n,r)}for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===yr){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":e.slice(n,r)},extname(e){Hn(e,"path");let t=-1,n=0,r=-1,i=!0,o=0;for(let s=e.length-1;s>=0;--s){const a=e.charCodeAt(s);if(a===yr){if(!i){n=s+1;break}continue}r===-1&&(i=!1,r=s+1),a===Bs?t===-1?t=s:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||r===-1||o===0||o===1&&t===r-1&&t===n+1?"":e.slice(t,r)},format:lI.bind(null,"/"),parse(e){Hn(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const n=e.charCodeAt(0)===yr;let r;n?(t.root="/",r=1):r=0;let i=-1,o=0,s=-1,a=!0,l=e.length-1,c=0;for(;l>=r;--l){const d=e.charCodeAt(l);if(d===yr){if(!a){o=l+1;break}continue}s===-1&&(a=!1,s=l+1),d===Bs?i===-1?i=l:c!==1&&(c=1):i!==-1&&(c=-1)}if(s!==-1){const d=o===0&&n?1:o;i===-1||c===0||c===1&&i===s-1&&i===o+1?t.base=t.name=e.slice(d,s):(t.name=e.slice(d,i),t.base=e.slice(d,s),t.ext=e.slice(i,s))}return o>0?t.dir=e.slice(0,o-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};dn.win32=nr.win32=nr;dn.posix=nr.posix=dn;const aD=Ri==="win32"?nr.normalize:dn.normalize;Ri==="win32"?nr.isAbsolute:dn.isAbsolute;Ri==="win32"?nr.join:dn.join;const lD=Ri==="win32"?nr.resolve:dn.resolve,cD=Ri==="win32"?nr.relative:dn.relative,uD=Ri==="win32"?nr.dirname:dn.dirname;Ri==="win32"?nr.basename:dn.basename;Ri==="win32"?nr.extname:dn.extname;Ri==="win32"?nr.format:dn.format;Ri==="win32"?nr.parse:dn.parse;Ri==="win32"?nr.toNamespacedPath:dn.toNamespacedPath;const Yh=Ri==="win32"?nr.sep:dn.sep;Ri==="win32"?nr.delimiter:dn.delimiter;function cI(e){return typeof e=="string"}function W_(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function z_(e){return typeof e>"u"}function td(e){return z_(e)||e===null}function dD(e){return typeof e=="function"}function fD(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++)hD(e[r],t[r])}function hD(e,t){if(cI(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(dD(t)){try{if(e instanceof t)return}catch{}if(!td(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function ks(e){return e===Ke.Slash||e===Ke.Backslash}function E1(e){return e.replace(/[\\/]/g,dn.sep)}function C1(e,t=dn.sep){if(!e)return"";const n=e.length,r=e.charCodeAt(0);if(ks(r)){if(ks(e.charCodeAt(1))&&!ks(e.charCodeAt(2))){let o=3;const s=o;for(;o<n&&!ks(e.charCodeAt(o));o++);if(s!==o&&!ks(e.charCodeAt(o+1))){for(o+=1;o<n;o++)if(ks(e.charCodeAt(o)))return e.slice(0,o+1).replace(/[\\/]/g,t)}}return t}if(pD(r)&&e.charCodeAt(1)===Ke.Colon)return ks(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let i=e.indexOf("://");if(i!==-1){for(i+=3;i<n;i++)if(ks(e.charCodeAt(i)))return e.slice(0,i+1)}return""}function x1(e,t,n,r=Yh){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(n){if(!eD(e,t))return!1;if(t.length===e.length)return!0;let o=t.length;return t.charAt(t.length-1)===r&&o--,e.charAt(o)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function pD(e){return e>=Ke.A&&e<=Ke.Z||e>=Ke.a&&e<=Ke.z}const gD=/^\w[\w\d+.-]*$/,mD=/^\//,vD=/^\/\//;function _D(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!gD.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!mD.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(vD.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function yD(e,t){return!e&&!t?"file":e}function bD(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==uo&&(t=uo+t):t=uo;break}return t}const pn="",uo="/",SD=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Lr{static isUri(t){return t instanceof Lr?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,n,r,i,o,s=!1){typeof t=="object"?(this.scheme=t.scheme||pn,this.authority=t.authority||pn,this.path=t.path||pn,this.query=t.query||pn,this.fragment=t.fragment||pn):(this.scheme=yD(t,s),this.authority=n||pn,this.path=bD(this.scheme,r||pn),this.query=i||pn,this.fragment=o||pn,_D(this,s))}get fsPath(){return Ep(this,!1)}with(t){if(!t)return this;let{scheme:n,authority:r,path:i,query:o,fragment:s}=t;return n===void 0?n=this.scheme:n===null&&(n=pn),r===void 0?r=this.authority:r===null&&(r=pn),i===void 0?i=this.path:i===null&&(i=pn),o===void 0?o=this.query:o===null&&(o=pn),s===void 0?s=this.fragment:s===null&&(s=pn),n===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new yl(n,r,i,o,s)}static parse(t,n=!1){const r=SD.exec(t);return r?new yl(r[2]||pn,Zf(r[4]||pn),Zf(r[5]||pn),Zf(r[7]||pn),Zf(r[9]||pn),n):new yl(pn,pn,pn,pn,pn)}static file(t){let n=pn;if(ra&&(t=t.replace(/\\/g,uo)),t[0]===uo&&t[1]===uo){const r=t.indexOf(uo,2);r===-1?(n=t.substring(2),t=uo):(n=t.substring(2,r),t=t.substring(r)||uo)}return new yl("file",n,t,pn,pn)}static from(t){return new yl(t.scheme,t.authority,t.path,t.query,t.fragment)}static joinPath(t,...n){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return ra&&t.scheme==="file"?r=Lr.file(nr.join(Ep(t,!0),...n)).path:r=dn.join(t.path,...n),t.with({path:r})}toString(t=!1){return B_(this,t)}toJSON(){return this}static revive(t){if(!t||t instanceof Lr)return t;const n=new yl(t);return n._formatted=t.external,n._fsPath=t._sep===uI?t.fsPath:null,n}}const uI=ra?1:void 0;class yl extends Lr{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Ep(this,!1)),this._fsPath}toString(t=!1){return t?B_(this,!0):(this._formatted||(this._formatted=B_(this,!1)),this._formatted)}toJSON(){const t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=uI),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t}}const dI={[Ke.Colon]:"%3A",[Ke.Slash]:"%2F",[Ke.QuestionMark]:"%3F",[Ke.Hash]:"%23",[Ke.OpenSquareBracket]:"%5B",[Ke.CloseSquareBracket]:"%5D",[Ke.AtSign]:"%40",[Ke.ExclamationMark]:"%21",[Ke.DollarSign]:"%24",[Ke.Ampersand]:"%26",[Ke.SingleQuote]:"%27",[Ke.OpenParen]:"%28",[Ke.CloseParen]:"%29",[Ke.Asterisk]:"%2A",[Ke.Plus]:"%2B",[Ke.Comma]:"%2C",[Ke.Semicolon]:"%3B",[Ke.Equals]:"%3D",[Ke.Space]:"%20"};function k1(e,t){let n,r=-1;for(let i=0;i<e.length;i++){const o=e.charCodeAt(i);if(o>=Ke.a&&o<=Ke.z||o>=Ke.A&&o<=Ke.Z||o>=Ke.Digit0&&o<=Ke.Digit9||o===Ke.Dash||o===Ke.Period||o===Ke.Underline||o===Ke.Tilde||t&&o===Ke.Slash)r!==-1&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),n!==void 0&&(n+=e.charAt(i));else{n===void 0&&(n=e.substr(0,i));const s=dI[o];s!==void 0?(r!==-1&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),n+=s):r===-1&&(r=i)}}return r!==-1&&(n+=encodeURIComponent(e.substring(r))),n!==void 0?n:e}function wD(e){let t;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r===Ke.Hash||r===Ke.QuestionMark?(t===void 0&&(t=e.substr(0,n)),t+=dI[r]):t!==void 0&&(t+=e[n])}return t!==void 0?t:e}function Ep(e,t){let n;return e.authority&&e.path.length>1&&e.scheme==="file"?n=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===Ke.Slash&&(e.path.charCodeAt(1)>=Ke.A&&e.path.charCodeAt(1)<=Ke.Z||e.path.charCodeAt(1)>=Ke.a&&e.path.charCodeAt(1)<=Ke.z)&&e.path.charCodeAt(2)===Ke.Colon?t?n=e.path.substr(1):n=e.path[1].toLowerCase()+e.path.substr(2):n=e.path,ra&&(n=n.replace(/\//g,"\\")),n}function B_(e,t){const n=t?wD:k1;let r="",{scheme:i,authority:o,path:s,query:a,fragment:l}=e;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=uo,r+=uo),o){let c=o.indexOf("@");if(c!==-1){const d=o.substr(0,c);o=o.substr(c+1),c=d.indexOf(":"),c===-1?r+=n(d,!1):(r+=n(d.substr(0,c),!1),r+=":",r+=n(d.substr(c+1),!1)),r+="@"}o=o.toLowerCase(),c=o.indexOf(":"),c===-1?r+=n(o,!1):(r+=n(o.substr(0,c),!1),r+=o.substr(c))}if(s){if(s.length>=3&&s.charCodeAt(0)===Ke.Slash&&s.charCodeAt(2)===Ke.Colon){const c=s.charCodeAt(1);c>=Ke.A&&c<=Ke.Z&&(s=`/${String.fromCharCode(c+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===Ke.Colon){const c=s.charCodeAt(0);c>=Ke.A&&c<=Ke.Z&&(s=`${String.fromCharCode(c+32)}:${s.substr(2)}`)}r+=n(s,!0)}return a&&(r+="?",r+=n(a,!1)),l&&(r+="#",r+=t?l:k1(l,!1)),r}function fI(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+fI(e.substr(3)):e}}const I1=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Zf(e){return e.match(I1)?e.replace(I1,t=>fI(t)):e}var wo;(e=>{e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.userData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebook="vscode-notebook",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.vscodeWebviewResource="vscode-webview-resource",e.extension="extension",e.vscodeFileResource="vscode-file"})(wo||(wo={}));class ED{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(t){this._preferredWebSchema=t}setDelegate(t){this._delegate=t}set(t,n,r){this._hosts[t]=n,this._ports[t]=r}setConnectionToken(t,n){this._connectionTokens[t]=n}rewrite(t){if(this._delegate)return this._delegate(t);const n=t.authority;let r=this._hosts[n];r&&r.indexOf(":")!==-1&&(r=`[${r}]`);const i=this._ports[n],o=this._connectionTokens[n];let s=`path=${encodeURIComponent(t.path)}`;return typeof o=="string"&&(s+=`&tkn=${encodeURIComponent(o)}`),Lr.from({scheme:sf?this._preferredWebSchema:wo.vscodeRemoteResource,authority:`${r}:${i}`,path:"/vscode-remote-resource",query:s})}}const CD=new ED;function zo(e){return Ep(e,!0)}class xD{constructor(t){this._ignorePathCasing=t}compare(t,n,r=!1){return t===n?0:F_(this.getComparisonKey(t,r),this.getComparisonKey(n,r))}isEqual(t,n,r=!1){return t===n?!0:!t||!n?!1:this.getComparisonKey(t,r)===this.getComparisonKey(n,r)}getComparisonKey(t,n=!1){return t.with({path:this._ignorePathCasing(t)?t.path.toLowerCase():void 0,fragment:n?null:void 0}).toString()}ignorePathCasing(t){return this._ignorePathCasing(t)}isEqualOrParent(t,n,r=!1){if(t.scheme===n.scheme){if(t.scheme===wo.file)return x1(zo(t),zo(n),this._ignorePathCasing(t))&&t.query===n.query&&(r||t.fragment===n.fragment);if(R1(t.authority,n.authority))return x1(t.path,n.path,this._ignorePathCasing(t),"/")&&t.query===n.query&&(r||t.fragment===n.fragment)}return!1}joinPath(t,...n){return Lr.joinPath(t,...n)}basenameOrAuthority(t){return kD(t)||t.authority}basename(t){return dn.basename(t.path)}extname(t){return dn.extname(t.path)}dirname(t){if(t.path.length===0)return t;let n;return t.scheme===wo.file?n=Lr.file(uD(zo(t))).path:(n=dn.dirname(t.path),t.authority&&n.length&&n.charCodeAt(0)!==Ke.Slash&&(console.error(`dirname("${t.toString})) resulted in a relative path`),n="/")),t.with({path:n})}normalizePath(t){if(!t.path.length)return t;let n;return t.scheme===wo.file?n=Lr.file(aD(zo(t))).path:n=dn.normalize(t.path),t.with({path:n})}relativePath(t,n){if(t.scheme!==n.scheme||!R1(t.authority,n.authority))return;if(t.scheme===wo.file){const o=cD(zo(t),zo(n));return ra?E1(o):o}let r=t.path||"/",i=n.path||"/";if(this._ignorePathCasing(t)){let o=0;for(const s=Math.min(r.length,i.length);o<s&&!(r.charCodeAt(o)!==i.charCodeAt(o)&&r.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);r=i.substr(0,o)+r.substr(o)}return dn.relative(r,i)}resolvePath(t,n){if(t.scheme===wo.file){const r=Lr.file(lD(zo(t),n));return t.with({authority:r.authority,path:r.path})}return n.indexOf("/")===-1&&(n=E1(n),/^[a-zA-Z]:(\/|$)/.test(n)&&(n=`/${n}`)),t.with({path:dn.resolve(t.path,n)})}isAbsolutePath(t){return!!t.path&&t.path[0]==="/"}isEqualAuthority(t,n){return t===n||JN(t,n)}hasTrailingPathSeparator(t,n=Yh){if(t.scheme===wo.file){const i=zo(t);return i.length>C1(i).length&&i[i.length-1]===n}const r=t.path;return r.length>1&&r.charCodeAt(r.length-1)===Ke.Slash&&!/^[a-zA-Z]:(\/$|\\$)/.test(t.fsPath)}removeTrailingPathSeparator(t,n=Yh){return M1(t,n)?t.with({path:t.path.substr(0,t.path.length-1)}):t}addTrailingPathSeparator(t,n=Yh){let r=!1;if(t.scheme===wo.file){const i=zo(t);r=i!==void 0&&i.length===C1(i).length&&i[i.length-1]===n}else{n="/";const i=t.path;r=i.length===1&&i.charCodeAt(i.length-1)===Ke.Slash}return!r&&!M1(t,n)?t.with({path:`${t.path}/`}):t}}const Gt=new xD(()=>!1);Gt.isEqual.bind(Gt);Gt.isEqualOrParent.bind(Gt);Gt.getComparisonKey.bind(Gt);Gt.basenameOrAuthority.bind(Gt);const kD=Gt.basename.bind(Gt);Gt.extname.bind(Gt);Gt.dirname.bind(Gt);Gt.joinPath.bind(Gt);Gt.normalizePath.bind(Gt);Gt.relativePath.bind(Gt);Gt.resolvePath.bind(Gt);Gt.isAbsolutePath.bind(Gt);const R1=Gt.isEqualAuthority.bind(Gt),M1=Gt.hasTrailingPathSeparator.bind(Gt);Gt.removeTrailingPathSeparator.bind(Gt);Gt.addTrailingPathSeparator.bind(Gt);var T1;(e=>{e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(n){const r=new Map;n.path.substring(n.path.indexOf(";")+1,n.path.lastIndexOf(";")).split(";").forEach(s=>{const[a,l]=s.split(":");a&&l&&r.set(a,l)});const o=n.path.substring(0,n.path.indexOf(";"));return o&&r.set(e.META_DATA_MIME,o),r}e.parseMetaData=t})(T1||(T1={}));function H_(e){const t=new oI,n=e(t.token),r=new Promise((i,o)=>{t.token.onCancellationRequested(()=>{o(l0())}),Promise.resolve(n).then(s=>{t.dispose(),i(s)},s=>{t.dispose(),o(s)})});return new class{cancel(){t.cancel()}then(i,o){return r.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return r.finally(i)}}}function hI(e,t){return t?new Promise((n,r)=>{const i=setTimeout(n,e);t.onCancellationRequested(()=>{clearTimeout(i),r(l0())})}):H_(n=>hI(e,n))}class ID{constructor(t,n){this._token=-1,typeof t=="function"&&typeof n=="number"&&this.setIfNotSet(t,n)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(t,n){this.cancel(),this._token=setTimeout(()=>{this._token=-1,t()},n)}setIfNotSet(t,n){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,t()},n))}}class RD{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(t,n){this.cancel(),this._token=setInterval(()=>{t()},n)}}class MD{constructor(t,n){this.timeoutToken=-1,this.runner=t,this.timeout=n,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(t=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,t)}get delay(){return this.timeout}set delay(t){this.timeout=t}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}let j_;(function(){if(typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"){const e=Object.freeze({didTimeout:!0,timeRemaining(){return 15}});j_=t=>{const n=setTimeout(()=>t(e));let r=!1;return{dispose(){r||(r=!0,clearTimeout(n))}}}}else j_=(e,t)=>{const n=requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let r=!1;return{dispose(){r||(r=!0,cancelIdleCallback(n))}}}})();class TD{constructor(t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=j_(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}class LD{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((t,n)=>{this.completeCallback=t,this.errorCallback=n})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(t){return new Promise(n=>{this.completeCallback(t),this.resolved=!0,n()})}error(t){return new Promise(n=>{this.errorCallback(t),this.rejected=!0,n()})}cancel(){new Promise(t=>{this.errorCallback(l0()),this.rejected=!0,t()})}}var L1;(e=>{async function t(o){return typeof Promise.allSettled=="function"?n(o):r(o)}e.allSettled=t;async function n(o){return Promise.allSettled(o)}async function r(o){return Promise.all(o.map(s=>s.then(a=>({status:"fulfilled",value:a}),a=>({status:"rejected",reason:a}))))}async function i(o){let s;const a=await Promise.all(o.map(l=>l.then(c=>c,c=>{s||(s=c)})));if(typeof s<"u")throw s;return a}e.settled=i})(L1||(L1={}));const Jf=typeof Buffer<"u";let tv,nv;class wn{static alloc(t){return Jf?new wn(Buffer.allocUnsafe(t)):new wn(new Uint8Array(t))}static wrap(t){return Jf&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new wn(t)}static fromString(t,n){return!((n==null?void 0:n.dontUseNodeBuffer)||!1)&&Jf?new wn(Buffer.from(t)):(tv||(tv=new TextEncoder),new wn(tv.encode(t)))}static fromByteArray(t){const n=wn.alloc(t.length);for(let r=0,i=t.length;r<i;r++)n.buffer[r]=t[r];return n}static concat(t,n){if(typeof n>"u"){n=0;for(let o=0,s=t.length;o<s;o++)n+=t[o].byteLength}const r=wn.alloc(n);let i=0;for(let o=0,s=t.length;o<s;o++){const a=t[o];r.set(a,i),i+=a.byteLength}return r}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=wn.alloc(this.byteLength);return t.set(this),t}toString(){return Jf?this.buffer.toString():(nv||(nv=new TextDecoder),nv.decode(this.buffer))}slice(t,n){return new wn(this.buffer.subarray(t,n))}set(t,n){if(t instanceof wn)this.buffer.set(t.buffer,n);else if(t instanceof Uint8Array)this.buffer.set(t,n);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),n);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n);else throw new Error("Unkown argument 'array'")}readUInt32BE(t){return AD(this.buffer,t)}writeUInt32BE(t,n){OD(this.buffer,t,n)}readUInt32LE(t){return PD(this.buffer,t)}writeUInt32LE(t,n){ND(this.buffer,t,n)}readUInt8(t){return DD(this.buffer,t)}writeUInt8(t,n){FD(this.buffer,t,n)}}function AD(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function OD(e,t,n){e[n+3]=t,t=t>>>8,e[n+2]=t,t=t>>>8,e[n+1]=t,t=t>>>8,e[n]=t}function PD(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function ND(e,t,n){e[n+0]=t&255,t=t>>>8,e[n+1]=t&255,t=t>>>8,e[n+2]=t&255,t=t>>>8,e[n+3]=t&255}function DD(e,t){return e[t]}function FD(e,t,n){e[n]=t}function pI(e){return(t,n,r)=>{let i=null,o=null;if(typeof r.value=="function"?(i="value",o=r.value):typeof r.get=="function"&&(i="get",o=r.get),!o)throw new Error("not supported");r[i]=e(o,n)}}function VD(e,t,n){let r=null,i=null;if(typeof n.value=="function"?(r="value",i=n.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof n.get=="function"&&(r="get",i=n.get),!i)throw new Error("not supported");const o=`$memoize$${t}`;n[r]=function(...s){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,s)}),this[o]}}function UD(e,t,n){return pI((r,i)=>{const o=`$debounce$${i}`,s=`$debounce$result$${i}`;return function(...a){this[s]||(this[s]=n?n():void 0),clearTimeout(this[o]),t&&(this[s]=t(this[s],...a),a=[this[s]]),this[o]=setTimeout(()=>{r.apply(this,a),this[s]=n?n():void 0},e)}})}function gI(e,t,n){return pI((r,i)=>{const o=`$throttle$timer$${i}`,s=`$throttle$result$${i}`,a=`$throttle$lastRun$${i}`,l=`$throttle$pending$${i}`;return function(...c){if(this[s]||(this[s]=n?n():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[s]=t(this[s],...c)),this[l])return;const d=this[a]+e;d<=Date.now()?(this[a]=Date.now(),r.apply(this,[this[s]]),this[s]=n?n():void 0):(this[l]=!0,this[o]=setTimeout(()=>{this[l]=!1,this[a]=Date.now(),r.apply(this,[this[s]]),this[s]=n?n():void 0},d-Date.now()))}})}var qh=(e=>(e[e.Uri=1]="Uri",e[e.Regexp=2]="Regexp",e[e.ScmResource=3]="ScmResource",e[e.ScmResourceGroup=4]="ScmResourceGroup",e[e.ScmProvider=5]="ScmProvider",e[e.CommentController=6]="CommentController",e[e.CommentThread=7]="CommentThread",e[e.CommentThreadReply=8]="CommentThreadReply",e[e.CommentNode=9]="CommentNode",e[e.CommentThreadNode=10]="CommentThreadNode",e[e.TimelineActionContext=11]="TimelineActionContext",e[e.NotebookCellActionContext=12]="NotebookCellActionContext",e[e.TestItemContext=13]="TestItemContext",e[e.Date=14]="Date",e))(qh||{});function Cp(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case qh.Uri:return Lr.revive(e);case qh.Regexp:return new RegExp(e.source,e.flags);case qh.Date:return new Date(e.source)}if(e instanceof wn||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let n=0;n<e.length;++n)e[n]=Cp(e[n],t+1);else for(const n in e)Object.hasOwnProperty.call(e,n)&&(e[n]=Cp(e[n],t+1))}return e}var $D=Object.defineProperty,WD=Object.getOwnPropertyDescriptor,zD=(e,t,n,r)=>{for(var i=r>1?void 0:r?WD(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&$D(t,n,i),i};function Kl(e){switch(e){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}function xp(e){switch(e){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}class mI{constructor(t){this.buffer=t,this.pos=0}read(t){const n=this.buffer.slice(this.pos,this.pos+t);return this.pos+=n.byteLength,n}}class f0{constructor(){this.buffers=[]}get buffer(){return wn.concat(this.buffers)}write(t){this.buffers.push(t)}}function _u(e){const t=wn.alloc(4);return t.writeUInt32BE(e,0),t}function yu(e){return e.read(4).readUInt32BE(0)}function bl(e){const t=wn.alloc(1);return t.writeUInt8(e,0),t}const Sl={Undefined:bl(0),String:bl(1),Buffer:bl(2),VSBuffer:bl(3),Array:bl(4),Object:bl(5)},BD=typeof Buffer<"u";function Sc(e,t){if(typeof t>"u")e.write(Sl.Undefined);else if(typeof t=="string"){const n=wn.fromString(t);e.write(Sl.String),e.write(_u(n.byteLength)),e.write(n)}else if(BD&&Buffer.isBuffer(t)){const n=wn.wrap(t);e.write(Sl.Buffer),e.write(_u(n.byteLength)),e.write(n)}else if(t instanceof wn)e.write(Sl.VSBuffer),e.write(_u(t.byteLength)),e.write(t);else if(Array.isArray(t)){e.write(Sl.Array),e.write(_u(t.length));for(const n of t)Sc(e,n)}else{const n=wn.fromString(JSON.stringify(t));e.write(Sl.Object),e.write(_u(n.byteLength)),e.write(n)}}function Md(e){switch(e.read(1).readUInt8(0)){case 0:return;case 1:return e.read(yu(e)).toString();case 2:return e.read(yu(e)).buffer;case 3:return e.read(yu(e));case 4:{const n=yu(e),r=[];for(let i=0;i<n;i++)r.push(Md(e));return r}case 5:return JSON.parse(e.read(yu(e)).toString())}}class HD{constructor(t,n,r=null,i=1e3){this.protocol=t,this.ctx=n,this.logger=r,this.timeoutDelay=i,this.channels=new Map,this.activeRequests=new Map,this.pendingRequests=new Map,this.protocolListener=this.protocol.onMessage(o=>{this.onRawMessage(o)}),this.sendResponse({type:200})}registerChannel(t,n){this.channels.set(t,n),setTimeout(()=>this.flushPendingRequests(t),0)}sendResponse(t){var n,r;switch(t.type){case 200:{const i=this.send([t.type]);(n=this.logger)==null||n.logOutgoing(i,0,1,xp(t.type));return}case 201:case 202:case 204:case 203:{const i=this.send([t.type,t.id],t.data);(r=this.logger)==null||r.logOutgoing(i,t.id,1,xp(t.type),t.data);return}}}send(t,n=void 0){const r=new f0;return Sc(r,t),Sc(r,n),this.sendBuffer(r.buffer)}sendBuffer(t){try{return this.protocol.send(t),t.byteLength}catch{return 0}}onRawMessage(t){var s,a,l,c;const n=new mI(t),r=Md(n),i=Md(n),o=r[0];switch(o){case 100:return(s=this.logger)==null||s.logIncoming(t.byteLength,r[1],1,`${Kl(o)}: ${r[2]}.${r[3]}`,i),this.onPromise({type:o,id:r[1],channelName:r[2],name:r[3],arg:i});case 102:return(a=this.logger)==null||a.logIncoming(t.byteLength,r[1],1,`${Kl(o)}: ${r[2]}.${r[3]}`,i),this.onEventListen({type:o,id:r[1],channelName:r[2],name:r[3],arg:i});case 101:return(l=this.logger)==null||l.logIncoming(t.byteLength,r[1],1,`${Kl(o)}`),this.disposeActiveRequest({type:o,id:r[1]});case 103:return(c=this.logger)==null||c.logIncoming(t.byteLength,r[1],1,`${Kl(o)}`),this.disposeActiveRequest({type:o,id:r[1]})}}onPromise(t){const n=this.channels.get(t.channelName);if(!n){this.collectPendingRequest(t);return}const r=new oI;let i;try{i=n.call(this.ctx,t.name,t.arg,r.token)}catch(a){i=Promise.reject(a)}const o=t.id;i.then(a=>{this.sendResponse({id:o,data:a,type:201}),this.activeRequests.delete(t.id)},a=>{a instanceof Error?this.sendResponse({id:o,data:{message:a.message,name:a.name,stack:a.stack?a.stack.split?a.stack.split(`
`):a.stack:void 0},type:202}):this.sendResponse({id:o,data:a,type:203}),this.activeRequests.delete(t.id)});const s=rf(()=>r.cancel());this.activeRequests.set(t.id,s)}onEventListen(t){const n=this.channels.get(t.channelName);if(!n){this.collectPendingRequest(t);return}const r=t.id,o=n.listen(this.ctx,t.name,t.arg)(s=>this.sendResponse({id:r,data:s,type:204}));this.activeRequests.set(t.id,o)}disposeActiveRequest(t){const n=this.activeRequests.get(t.id);n&&(n.dispose(),this.activeRequests.delete(t.id))}collectPendingRequest(t){let n=this.pendingRequests.get(t.channelName);n||(n=[],this.pendingRequests.set(t.channelName,n));const r=setTimeout(()=>{console.error(`Unknown channel: ${t.channelName}`),t.type===100&&this.sendResponse({id:t.id,data:{name:"Unknown channel",message:`Channel name '${t.channelName}' timed out after ${this.timeoutDelay}ms`,stack:void 0},type:202})},this.timeoutDelay);n.push({request:t,timeoutTimer:r})}flushPendingRequests(t){const n=this.pendingRequests.get(t);if(n){for(const r of n)switch(clearTimeout(r.timeoutTimer),r.request.type){case 100:this.onPromise(r.request);break;case 102:this.onEventListen(r.request);break}this.pendingRequests.delete(t)}}dispose(){this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),Tg(this.activeRequests.values()),this.activeRequests.clear()}}class vI{constructor(t,n=null){this.protocol=t,this.isDisposed=!1,this.state=0,this.activeRequests=new Set,this.handlers=new Map,this.lastRequestId=0,this._onDidInitialize=new Oe,this.onDidInitialize=this._onDidInitialize.event,this.protocolListener=this.protocol.onMessage(r=>this.onBuffer(r)),this.logger=n}getChannel(t){const n=this;return{call(r,i,o){return n.isDisposed?Promise.reject(new Qf):n.requestPromise(t,r,i,o)},listen(r,i){return n.isDisposed?ia.None:n.requestEvent(t,r,i)}}}requestPromise(t,n,r,i=Id.None){const o=this.lastRequestId++,a={id:o,type:100,channelName:t,name:n,arg:r};if(i.isCancellationRequested)return Promise.reject(new Qf);let l;return new Promise((d,h)=>{if(i.isCancellationRequested)return h(new Qf);const p=()=>{const y=_=>{switch(_.type){case 201:this.handlers.delete(o),d(_.data);break;case 202:{this.handlers.delete(o);const w=new Error(_.data.message);w.stack=_.data.stack,w.name=_.data.name,h(w);break}case 203:this.handlers.delete(o),h(_.data);break}};this.handlers.set(o,y),this.sendRequest(a)};let g=null;this.state===1?p():(g=H_(y=>this.whenInitialized()),g.then(()=>{g=null,p()}));const b=()=>{g?(g.cancel(),g=null):this.sendRequest({id:o,type:101}),h(new Qf)},k=i.onCancellationRequested(b);l=Yk(rf(b),k),this.activeRequests.add(l)}).finally(()=>{this.activeRequests.delete(l)})}requestEvent(t,n,r){const i=this.lastRequestId++,s={id:i,type:102,channelName:t,name:n,arg:r};let a=null;const l=new Oe({onFirstListenerAdd:()=>{a=H_(d=>this.whenInitialized()),a.then(()=>{a=null,this.activeRequests.add(l),this.sendRequest(s)})},onLastListenerRemove:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(l),this.sendRequest({id:i,type:103}))}}),c=d=>l.fire(d.data);return this.handlers.set(i,c),l.event}sendRequest(t){var n,r;switch(t.type){case 100:case 102:{const i=this.send([t.type,t.id,t.channelName,t.name],t.arg);(n=this.logger)==null||n.logOutgoing(i,t.id,0,`${Kl(t.type)}: ${t.channelName}.${t.name}`,t.arg);return}case 101:case 103:{const i=this.send([t.type,t.id]);(r=this.logger)==null||r.logOutgoing(i,t.id,0,Kl(t.type));return}}}send(t,n=void 0){const r=new f0;return Sc(r,t),Sc(r,n),this.sendBuffer(r.buffer)}sendBuffer(t){try{return this.protocol.send(t),t.byteLength}catch{return 0}}onBuffer(t){var s,a;const n=new mI(t),r=Md(n),i=Md(n),o=r[0];switch(o){case 200:return(s=this.logger)==null||s.logIncoming(t.byteLength,0,0,xp(o)),this.onResponse({type:r[0]});case 201:case 202:case 204:case 203:return(a=this.logger)==null||a.logIncoming(t.byteLength,r[1],0,xp(o),i),this.onResponse({type:r[0],id:r[1],data:i})}}onResponse(t){if(t.type===200){this.state=1,this._onDidInitialize.fire();return}const n=this.handlers.get(t.id);n==null||n(t)}get onDidInitializePromise(){return ia.toPromise(this.onDidInitialize)}whenInitialized(){return this.state===1?Promise.resolve():this.onDidInitializePromise}dispose(){this.isDisposed=!0,this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),Tg(this.activeRequests.values()),this.activeRequests.clear()}}zD([VD],vI.prototype,"onDidInitializePromise",1);class jD{constructor(t,n,r=null){const i=new f0;Sc(i,n),t.send(i.buffer),this.channelClient=new vI(t,r),this.channelServer=new HD(t,n,r)}getChannel(t){return this.channelClient.getChannel(t)}registerChannel(t,n){this.channelServer.registerChannel(t,n)}dispose(){this.channelClient.dispose(),this.channelServer.dispose()}}var Gl;(e=>{function t(o,s){const a=o,l=s&&s.disableMarshalling,c=new Map;for(const d in a)r(d)&&c.set(d,ia.buffer(a[d],!0));return new class{listen(d,h,p){const g=c.get(h);if(g)return g;if(i(h)){const b=a[h];if(typeof b=="function")return b.call(a,p)}throw new Error(`Event not found: ${h}`)}call(d,h,p){const g=a[h];if(typeof g=="function"){if(!l&&Array.isArray(p))for(let b=0;b<p.length;b++)p[b]=Cp(p[b]);return g.apply(a,p)}throw new Error(`Method not found: ${h}`)}}}e.fromService=t;function n(o,s){const a=s&&s.disableMarshalling;return new Proxy({},{get(l,c){var d;if(typeof c=="string")return(d=s==null?void 0:s.properties)!=null&&d.has(c)?s.properties.get(c):i(c)?function(h){return o.listen(c,h)}:r(c)?o.listen(c):async function(...h){let p;s&&!td(s.context)?p=[s.context,...h]:p=h;const g=await o.call(c,p);return a?g:Cp(g)};throw new Error(`Property not found: ${String(c)}`)}})}e.toService=n;function r(o){return o[0]==="o"&&o[1]==="n"&&Rd(o.charCodeAt(2))}function i(o){return/^onDynamic/.test(o)&&Rd(o.charCodeAt(9))}})(Gl||(Gl={}));var Ho=(e=>(e.Created="created",e.Read="read",e.Write="write",e.Open="open",e.Error="error",e.Close="close",e.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",e.NodeEndReceived="nodeEndReceived",e.NodeEndSent="nodeEndSent",e.NodeDrainBegin="nodeDrainBegin",e.NodeDrainEnd="nodeDrainEnd",e.zlibInflateError="zlibInflateError",e.zlibInflateData="zlibInflateData",e.zlibInflateInitialWrite="zlibInflateInitialWrite",e.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",e.zlibInflateWrite="zlibInflateWrite",e.zlibInflateFlushFired="zlibInflateFlushFired",e.zlibDeflateError="zlibDeflateError",e.zlibDeflateData="zlibDeflateData",e.zlibDeflateWrite="zlibDeflateWrite",e.zlibDeflateFlushFired="zlibDeflateFlushFired",e.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",e.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",e.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",e.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",e.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",e.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",e.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",e.ProtocolHeaderRead="protocolHeaderRead",e.ProtocolMessageRead="protocolMessageRead",e.ProtocolHeaderWrite="protocolHeaderWrite",e.ProtocolMessageWrite="protocolMessageWrite",e.ProtocolWrite="protocolWrite",e))(Ho||{}),kp;(e=>{e.enableDiagnostics=!1,e.records=[];const t=new WeakMap;let n=0;function r(o,s){if(!t.has(o)){const a=String(++n);t.set(o,a)}return t.get(o)}function i(o,s,a,l){if(!e.enableDiagnostics)return;const c=r(o);if(l instanceof wn||l instanceof Uint8Array||l instanceof ArrayBuffer||ArrayBuffer.isView(l)){const d=wn.alloc(l.byteLength);d.set(l),e.records.push({timestamp:Date.now(),id:c,label:s,type:a,buff:d})}else e.records.push({timestamp:Date.now(),id:c,label:s,type:a,data:l})}e.traceSocketEvent=i})(kp||(kp={}));var _I=(e=>(e[e.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",e[e.WebSocketCloseEvent=1]="WebSocketCloseEvent",e))(_I||{});let rv=null;function KD(){return rv||(rv=wn.alloc(0)),rv}class GD{get byteLength(){return this._totalLength}constructor(){this._chunks=[],this._totalLength=0}acceptChunk(t){this._chunks.push(t),this._totalLength+=t.byteLength}read(t){return this._read(t,!0)}peek(t){return this._read(t,!1)}_read(t,n){if(t===0)return KD();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){const s=this._chunks[0];return n&&(this._chunks.shift(),this._totalLength-=t),s}if(this._chunks[0].byteLength>t){const s=this._chunks[0].slice(0,t);return n&&(this._chunks[0]=this._chunks[0].slice(t),this._totalLength-=t),s}const r=wn.alloc(t);let i=0,o=0;for(;t>0;){const s=this._chunks[o];if(s.byteLength>t){const a=s.slice(0,t);r.set(a,i),i+=t,n&&(this._chunks[o]=s.slice(t),this._totalLength-=t),t-=t}else r.set(s,i),i+=s.byteLength,n?(this._chunks.shift(),this._totalLength-=s.byteLength):o++,t-=s.byteLength}return r}}function yI(e){switch(e){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}class bI{constructor(t,n,r,i){this.type=t,this.id=n,this.ack=r,this.data=i,this.writtenTime=0}get size(){return this.data.byteLength}}class YD extends cs{constructor(t){super(),this._onMessage=this._register(new Oe),this.onMessage=this._onMessage.event,this._state={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this._socket=t,this._isDisposed=!1,this._incomingData=new GD,this._register(this._socket.onData(n=>this.acceptChunk(n))),this.lastReadTime=Date.now()}acceptChunk(t){if(!(!t||t.byteLength===0))for(this.lastReadTime=Date.now(),this._incomingData.acceptChunk(t);this._incomingData.byteLength>=this._state.readLen;){const n=this._incomingData.read(this._state.readLen);if(this._state.readHead)this._state.readHead=!1,this._state.readLen=n.readUInt32BE(9),this._state.messageType=n.readUInt8(0),this._state.id=n.readUInt32BE(1),this._state.ack=n.readUInt32BE(5),this._socket.traceSocketEvent("protocolHeaderRead",{messageType:yI(this._state.messageType),id:this._state.id,ack:this._state.ack,messageSize:this._state.readLen});else{const r=this._state.messageType,i=this._state.id,o=this._state.ack;if(this._state.readHead=!0,this._state.readLen=13,this._state.messageType=0,this._state.id=0,this._state.ack=0,this._socket.traceSocketEvent("protocolMessageRead",n),this._onMessage.fire(new bI(r,i,o,n)),this._isDisposed)break}}}readEntireBuffer(){return this._incomingData.read(this._incomingData.byteLength)}dispose(){this._isDisposed=!0,super.dispose()}}class qD{constructor(t){this._writeNowTimeout=null,this._isDisposed=!1,this._isPaused=!1,this._socket=t,this._data=[],this._totalLength=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this._isDisposed=!0}drain(){return this.flush(),this._socket.drain()}flush(){this._writeNow()}pause(){this._isPaused=!0}resume(){this._isPaused=!1,this._scheduleWriting()}write(t){if(this._isDisposed)return;t.writtenTime=Date.now(),this.lastWriteTime=Date.now();const n=wn.alloc(13);n.writeUInt8(t.type,0),n.writeUInt32BE(t.id,1),n.writeUInt32BE(t.ack,5),n.writeUInt32BE(t.data.byteLength,9),this._socket.traceSocketEvent("protocolHeaderWrite",{messageType:yI(t.type),id:t.id,ack:t.ack,messageSize:t.data.byteLength}),this._socket.traceSocketEvent("protocolMessageWrite",t.data),this._writeSoon(n,t.data)}_bufferAdd(t,n){const r=this._totalLength===0;return this._data.push(t,n),this._totalLength+=t.byteLength+n.byteLength,r}_bufferTake(){const t=wn.concat(this._data,this._totalLength);return this._data.length=0,this._totalLength=0,t}_writeSoon(t,n){this._bufferAdd(t,n)&&this._scheduleWriting()}_scheduleWriting(){this._writeNowTimeout||(this._writeNowTimeout=setTimeout(()=>{this._writeNowTimeout=null,this._writeNow()}))}_writeNow(){if(this._totalLength===0||this._isPaused)return;const t=this._bufferTake();this._socket.traceSocketEvent("protocolWrite",{byteLength:t.byteLength}),this._socket.write(t)}}class QD extends cs{constructor(t){super(),this._onMessage=new Oe,this.onMessage=this._onMessage.event,this._onDidDispose=new Oe,this.onDidDispose=this._onDidDispose.event,this._socket=t,this._socketWriter=this._register(new qD(this._socket)),this._socketReader=this._register(new YD(this._socket)),this._register(this._socketReader.onMessage(n=>{n.type===1&&this._onMessage.fire(n.data)})),this._register(this._socket.onClose(()=>this._onDidDispose.fire()))}drain(){return this._socketWriter.drain()}getSocket(){return this._socket}sendDisconnect(){}send(t){this._socketWriter.write(new bI(1,0,0,t))}}var ho;(e=>{e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(n){return n[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(ho||(ho={}));const Or=en("instantiationService");function XD(e,t,n){t[ho.DI_TARGET]===t?t[ho.DI_DEPENDENCIES].push({id:e,index:n}):(t[ho.DI_DEPENDENCIES]=[{id:e,index:n}],t[ho.DI_TARGET]=t)}function en(e){if(ho.serviceIds.has(e))return ho.serviceIds.get(e);const t=function(n,r,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");XD(t,n,i)};return t.toString=()=>e,ho.serviceIds.set(e,t),t}var nd=(e=>(e[e.stop=0]="stop",e[e.running=1]="running",e[e.error=2]="error",e))(nd||{}),Td=(e=>(e[e.selfhosted=0]="selfhosted",e[e.desktop=1]="desktop",e))(Td||{});const SI=en("IAPIServerService");class ZD extends cs{constructor(){super()}async writeText(t){try{return await navigator.clipboard.writeText(t)}catch(o){console.error(o)}const n=document.activeElement,r=document.createElement("textarea");r.setAttribute("aria-hidden","true");const i=document.body.appendChild(r);i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=t,i.focus(),i.select(),document.execCommand("copy"),n instanceof HTMLElement&&n.focus(),document.body.removeChild(i)}}const qa=en("clipboardService"),us=en("commandService"),il=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Oe,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if(typeof e=="string"){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.description){const s=[];for(let l of e.description.args)s.push(l.constraint);const a=e.handler;e.handler=function(l,...c){return fD(c,s),a(l,...c)}}const{id:n}=e;let r=this._commands.get(n);r||(r=new yp,this._commands.set(n,r));let i=r.unshift(e),o=rf(()=>{i();const s=this._commands.get(n);s!=null&&s.isEmpty()&&this._commands.delete(n)});return this._onDidRegisterCommand.fire(n),o}registerCommandAlias(e,t){return il.registerCommand(e,(n,...r)=>n.get(us).executeCommand(t,...r))}getCommand(e){const t=this._commands.get(e);if(!(!t||t.isEmpty()))return na.first(t)}getCommands(){const e=new Map;for(const t of this._commands.keys()){const n=this.getCommand(t);n&&e.set(t,n)}return e}};function iv(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}class JD{constructor(){this.data=new Map}add(t,n){iv(cI(t)),iv(W_(n)),iv(!this.data.has(t),"There is already an extension with this id"),this.data.set(t,n)}knows(t){return this.data.has(t)}as(t){return this.data.get(t)||null}}const Uc=new JD,wI={JSONContribution:"base.contributions.json"};function eF(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}class tF{constructor(){this._onDidChangeSchema=new Oe,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(t,n){this.schemasById[eF(t)]=n,this._onDidChangeSchema.fire(t)}notifySchemaChanged(t){this._onDidChangeSchema.fire(t)}getSchemaContributions(){return{schemas:this.schemasById}}}const nF=new tF;Uc.add(wI.JSONContribution,nF);const h0={Configuration:"base.contributions.configuration"},bu="vscode://schemas/settings/resourceLanguage",ov=Uc.as(wI.JSONContribution);class rF{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new Oe,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new Oe,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.defaultValues={},this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:"Default Language Configuration Overrides",properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!1,errorMessage:"Unknown editor configuration setting",allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.excludedConfigurationProperties={},ov.registerSchema(bu,this.resourceLanguageSettingsSchema)}registerConfiguration(t,n=!0){this.registerConfigurations([t],n)}registerConfigurations(t,n=!0){const r=[];t.forEach(i=>{r.push(...this.validateAndRegisterProperties(i,n)),this.configurationContributors.push(i),this.registerJSONConfiguration(i)}),ov.registerSchema(bu,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(r)}deregisterConfigurations(t){const n=[],r=i=>{if(i.properties)for(const o in i.properties)n.push(o),delete this.configurationProperties[o],this.removeFromSchema(o,i.properties[o]);i.allOf&&i.allOf.forEach(o=>r(o))};for(const i of t){r(i);const o=this.configurationContributors.indexOf(i);o!==-1&&this.configurationContributors.splice(o,1)}ov.registerSchema(bu,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}registerDefaultConfigurations(t){const n=[],r=[];for(const i of t)for(const o in i)if(n.push(o),oc.test(o)){this.defaultValues[o]={...this.defaultValues[o]||{},...i[o]};const s={type:"object",default:this.defaultValues[o],description:"Configure settings to be overridden for {0} language.",$ref:bu};r.push(p0(o)),this.configurationProperties[o]=s,this.defaultLanguageConfigurationOverridesNode.properties[o]=s}else{this.defaultValues[o]=i[o];const s=this.configurationProperties[o];s&&(this.updatePropertyDefaultValue(o,s),this.updateSchema(o,s))}this.registerOverrideIdentifiers(r),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}deregisterDefaultConfigurations(t){const n=[];for(const r of t)for(const i in r)if(n.push(i),delete this.defaultValues[i],oc.test(i))delete this.configurationProperties[i],delete this.defaultLanguageConfigurationOverridesNode.properties[i];else{const o=this.configurationProperties[i];o&&(this.updatePropertyDefaultValue(i,o),this.updateSchema(i,o))}this.updateOverridePropertyPatternKey(),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire(n)}notifyConfigurationSchemaUpdated(...t){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(t){for(const n of t)this.overrideIdentifiers.add(n);this.updateOverridePropertyPatternKey()}validateAndRegisterProperties(t,n=!0,r=3){r=td(t.scope)?r:t.scope;let i=[],o=t.properties;if(o)for(let a in o){if(n&&sF(a)){delete o[a];continue}const l=o[a];if(this.updatePropertyDefaultValue(a,l),oc.test(a)?l.scope=void 0:(l.scope=td(l.scope)?r:l.scope,l.requireTrustedTarget=td(l.requireTrustedTarget)?!1:l.requireTrustedTarget),o[a].hasOwnProperty("included")&&!o[a].included){this.excludedConfigurationProperties[a]=o[a],delete o[a];continue}else this.configurationProperties[a]=o[a];!o[a].deprecationMessage&&o[a].markdownDeprecationMessage&&(o[a].deprecationMessage=o[a].markdownDeprecationMessage),i.push(a)}let s=t.allOf;if(s)for(let a of s)i.push(...this.validateAndRegisterProperties(a,n,r));return i}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}registerJSONConfiguration(t){const n=r=>{let i=r.properties;if(i)for(const s in i)this.updateSchema(s,i[s]);let o=r.allOf;o&&o.forEach(n)};n(t)}updateSchema(t,n){switch(n.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[t]=n;break}}removeFromSchema(t,n){switch(n.scope){}}updateOverridePropertyPatternKey(){for(const t of this.overrideIdentifiers.values()){const n=`[${t}]`,r={type:"object",description:"Configure editor settings to be overridden for a language.",errorMessage:"This setting does not support per-language configuration.",$ref:bu};this.updatePropertyDefaultValue(n,r)}this._onDidSchemaChange.fire()}updatePropertyDefaultValue(t,n){let r=this.defaultValues[t];z_(r)&&(r=n.default),z_(r)&&(r=oF(n.type)),n.default=r}}const iF="\\[.*\\]$",oc=new RegExp(iF);function p0(e){return e.substring(1,e.length-1)}function oF(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const EI=new rF;Uc.add(h0.Configuration,EI);function sF(e){return e.trim()?oc.test(e)?"config.property.languageDefault":EI.getConfigurationProperties()[e]!==void 0?"Cannot register {0}. This property is already registered.":null:"Cannot register an empty property"}function Ul(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(n=>{e[n]&&typeof e[n]=="object"?t[n]=Ul(e[n]):t[n]=e[n]}),t}function aF(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const n=t.shift();Object.freeze(n);for(const r in n)if(lF.call(n,r)){const i=n[r];typeof i=="object"&&!Object.isFrozen(i)&&t.push(i)}}return e}const lF=Object.prototype.hasOwnProperty;function Ha(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let n,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!Ha(e[n],t[n]))return!1}else{const i=[];for(r in e)i.push(r);i.sort();const o=[];for(r in t)o.push(r);if(o.sort(),!Ha(i,o))return!1;for(n=0;n<i.length;n++)if(!Ha(e[i[n]],t[i[n]]))return!1}return!0}function A1(e,t){const n=Object.create(null);return!e||!t||Object.keys(t).forEach(i=>{const o=e[i],s=t[i];Ha(o,s)||(n[i]=s)}),n}const CI=en("configurationService");function O1(e){return e&&typeof e=="object"&&(!e.overrideIdentifier||typeof e.overrideIdentifier=="string")&&(!e.resource||e.resource instanceof Lr)}var g0=(e=>(e[e.USER=1]="USER",e[e.USER_LOCAL=2]="USER_LOCAL",e[e.USER_REMOTE=3]="USER_REMOTE",e[e.WORKSPACE=4]="WORKSPACE",e[e.WORKSPACE_FOLDER=5]="WORKSPACE_FOLDER",e[e.DEFAULT=6]="DEFAULT",e[e.MEMORY=7]="MEMORY",e))(g0||{});function Ip(e,t,n){function r(s,a){let l=s;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const i=t.split("."),o=r(e,i);return typeof o>"u"?n:o}function m0(e,t,n,r){const i=t.split("."),o=i.pop();let s=e;for(let a=0;a<i.length;a++){let l=i[a],c=s[l];switch(typeof c){case"undefined":c=s[l]=Object.create(null);break;case"object":break;default:r(`Ignoring ${t} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}s=c}if(typeof s=="object"&&s!==null)try{s[o]=n}catch{r(`Ignoring ${t} as ${i.join(".")} is ${JSON.stringify(s)}`)}else r(`Ignoring ${t} as ${i.join(".")} is ${JSON.stringify(s)}`)}function cF(e,t){const n=t.split(".");xI(e,n)}function xI(e,t){const n=t.shift();if(t.length===0){delete e[n];return}if(Object.keys(e).indexOf(n)!==-1){const r=e[n];typeof r=="object"&&!Array.isArray(r)&&(xI(r,t),Object.keys(r).length===0&&delete e[n])}}function uF(){const e=Uc.as(h0.Configuration).getConfigurationProperties();return Object.keys(e)}function dF(){const e=Object.create(null),t=Uc.as(h0.Configuration).getConfigurationProperties();for(let n in t){let r=t[n].default;m0(e,n,r,i=>console.error(`Conflict in default settings: ${i}`))}return e}function sv(e){return e.substring(1,e.length-1)}function kI(e,t){const n=Object.create(null);for(let r in e)m0(n,r,e[r],t);return n}function $l(e,t){const n=t?e?t.keys.filter(c=>e.keys.indexOf(c)===-1):[...t.keys]:[],r=e?t?e.keys.filter(c=>t.keys.indexOf(c)===-1):[...e.keys]:[],i=[];if(t&&e){for(const c of e.keys)if(t.keys.indexOf(c)!==-1){const d=Ip(e.contents,c),h=Ip(t.contents,c);Ha(d,h)||i.push(c)}}const o=[],s=c=>{const d={};for(const h of c)for(const p of h.identifiers)d[fF(p)]=h;return d},a=t?s(t.overrides):{},l=e?s(e.overrides):{};if(Object.keys(a).length)for(const c of n){const d=a[c];d&&o.push([sv(c),d.keys])}if(Object.keys(l).length)for(const c of r){const d=l[c];d&&o.push([sv(c),d.keys])}if(Object.keys(a).length&&Object.keys(l).length)for(const c of i){const d=l[c],h=a[c];if(d&&h){const p=$l({contents:d.contents,keys:d.keys,overrides:[]},{contents:h.contents,keys:h.keys,overrides:[]});o.push([sv(c),[...p.added,...p.removed,...p.updated]])}}return{added:n,removed:r,updated:i,overrides:o}}function fF(e){return`[${e}]`}var P1;class hF{constructor(){this._value="",this._pos=0}reset(t){return this._value=t,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(t){const n=t.charCodeAt(0),r=this._value.charCodeAt(this._pos);return n-r}value(){return this._value[this._pos]}}class pF{constructor(t=!0){this._caseSensitive=t}reset(t){return this._value=t,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let t=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===Ke.Period)if(t)this._from++;else break;else t=!1;return this}cmp(t){return this._caseSensitive?u0(t,this._value,0,t.length,this._from,this._to):d0(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class II{constructor(t=!0,n=!0){this._splitOnBackslash=t,this._caseSensitive=n}reset(t){return this._value=t.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let t=!0;for(;this._to<this._value.length;this._to++){const n=this._value.charCodeAt(this._to);if(n===Ke.Slash||this._splitOnBackslash&&n===Ke.Backslash)if(t)this._from++;else break;else t=!1}return this}cmp(t){return this._caseSensitive?u0(t,this._value,0,t.length,this._from,this._to):d0(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class gF{constructor(t){this._ignorePathCasing=t,this._states=[],this._stateIdx=0}reset(t){return this._value=t,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new II(!1,!this._ignorePathCasing(t)),this._pathIterator.reset(t.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(t){if(this._states[this._stateIdx]===1)return S1(t,this._value.scheme);if(this._states[this._stateIdx]===2)return S1(t,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(t);if(this._states[this._stateIdx]===4)return F_(t,this._value.query);if(this._states[this._stateIdx]===5)return F_(t,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class eh{isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class Yl{static forUris(t=()=>!1){return new Yl(new gF(t))}static forPaths(){return new Yl(new II)}static forStrings(){return new Yl(new hF)}static forConfigKeys(){return new Yl(new pF)}constructor(t){this._iter=t}clear(){this._root=void 0}set(t,n){const r=this._iter.reset(t);let i;for(this._root||(this._root=new eh,this._root.segment=r.value()),i=this._root;;){const s=r.cmp(i.segment);if(s>0)i.left||(i.left=new eh,i.left.segment=r.value()),i=i.left;else if(s<0)i.right||(i.right=new eh,i.right.segment=r.value()),i=i.right;else if(r.hasNext())r.next(),i.mid||(i.mid=new eh,i.mid.segment=r.value()),i=i.mid;else break}const o=i.value;return i.value=n,i.key=t,o}get(t){var n;return(n=this._getNode(t))==null?void 0:n.value}_getNode(t){const n=this._iter.reset(t);let r=this._root;for(;r;){const i=n.cmp(r.segment);if(i>0)r=r.left;else if(i<0)r=r.right;else if(n.hasNext())n.next(),r=r.mid;else break}return r}has(t){const n=this._getNode(t);return!((n==null?void 0:n.value)===void 0&&(n==null?void 0:n.mid)===void 0)}delete(t){return this._delete(t,!1)}deleteSuperstr(t){return this._delete(t,!0)}_delete(t,n){const r=this._iter.reset(t),i=[];let o=this._root;for(;o;){const s=r.cmp(o.segment);if(s>0)i.push([1,o]),o=o.left;else if(s<0)i.push([-1,o]),o=o.right;else if(r.hasNext())r.next(),i.push([0,o]),o=o.mid;else{for(n?(o.left=void 0,o.mid=void 0,o.right=void 0):o.value=void 0;i.length>0&&o.isEmpty();){let[a,l]=i.pop();switch(a){case 1:l.left=void 0;break;case 0:l.mid=void 0;break;case-1:l.right=void 0;break}o=l}break}}}findSubstr(t){const n=this._iter.reset(t);let r=this._root,i;for(;r;){const o=n.cmp(r.segment);if(o>0)r=r.left;else if(o<0)r=r.right;else if(n.hasNext())n.next(),i=r.value||i,r=r.mid;else break}return r&&r.value||i}findSuperstr(t){const n=this._iter.reset(t);let r=this._root;for(;r;){const i=n.cmp(r.segment);if(i>0)r=r.left;else if(i<0)r=r.right;else if(n.hasNext())n.next(),r=r.mid;else return r.mid?this._entries(r.mid):void 0}}forEach(t){for(const[n,r]of this)t(r,n)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(t){t&&(yield*this._entries(t.left),t.value&&(yield[t.key,t.value]),yield*this._entries(t.mid),yield*this._entries(t.right))}}const Qh=class{constructor(e,t){this[P1]="ResourceMap",e instanceof Qh?(this.map=new Map(e.map),this.toKey=t??Qh.defaultToKey):(this.map=new Map,this.toKey=e??Qh.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),t),this}get(e){return this.map.get(this.toKey(e))}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,r]of this.map)e(r,Lr.parse(n),this)}values(){return this.map.values()}*keys(){for(let e of this.map.keys())yield Lr.parse(e)}*entries(){for(let e of this.map.entries())yield[Lr.parse(e[0]),e[1]]}*[(P1=Symbol.toStringTag,Symbol.iterator)](){for(let e of this.map)yield[Lr.parse(e[0]),e[1]]}};let Wl=Qh;Wl.defaultToKey=e=>e.toString();let af=qN||"";const Wr=new Map;Wr.set("false",!1);Wr.set("true",!0);Wr.set("isMac",rs);Wr.set("isLinux",eI);Wr.set("isWindows",ra);Wr.set("isWeb",sf);Wr.set("isMacNative",rs&&!sf);Wr.set("isEdge",af.indexOf("Edg/")>=0);Wr.set("isFirefox",af.indexOf("Firefox")>=0);Wr.set("isChrome",af.indexOf("Chrome")>=0);Wr.set("isSafari",af.indexOf("Safari")>=0);Wr.set("isIPad",af.indexOf("iPad")>=0);const mF=Object.prototype.hasOwnProperty;var K_=(e=>(e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals",e))(K_||{});class Lt{static false(){return ds.INSTANCE}static true(){return fs.INSTANCE}static has(t){return oa.create(t)}static equals(t,n){return Ld.create(t,n)}static notEquals(t,n){return Ad.create(t,n)}static regex(t,n){return Tp.create(t,n)}static in(t,n){return Rp.create(t,n)}static not(t){return Qa.create(t)}static and(...t){return Na.create(t)}static or(...t){return Hs.create(t)}static greater(t,n){return Od.create(t,n)}static less(t,n){return Pd.create(t,n)}static deserialize(t,n=!1){if(t)return this._deserializeOrExpression(t,n)}static _deserializeOrExpression(t,n){let r=t.split("||");return Hs.create(r.map(i=>this._deserializeAndExpression(i,n)))}static _deserializeAndExpression(t,n){let r=t.split("&&");return Na.create(r.map(i=>this._deserializeOne(i,n)))}static _deserializeOne(t,n){if(t=t.trim(),t.indexOf("!=")>=0){let r=t.split("!=");return Ad.create(r[0].trim(),this._deserializeValue(r[1],n))}if(t.indexOf("==")>=0){let r=t.split("==");return Ld.create(r[0].trim(),this._deserializeValue(r[1],n))}if(t.indexOf("=~")>=0){let r=t.split("=~");return Tp.create(r[0].trim(),this._deserializeRegexValue(r[1],n))}if(t.indexOf(" in ")>=0){let r=t.split(" in ");return Rp.create(r[0].trim(),r[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(t)){const r=t.split(">=");return Lg.create(r[0].trim(),r[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(t)){const r=t.split(">");return Od.create(r[0].trim(),r[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(t)){const r=t.split("<=");return Ag.create(r[0].trim(),r[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(t)){const r=t.split("<");return Pd.create(r[0].trim(),r[1].trim())}return/^\!\s*/.test(t)?Qa.create(t.substr(1).trim()):oa.create(t)}static _deserializeValue(t,n){if(t=t.trim(),t==="true")return!0;if(t==="false")return!1;let r=/^'([^']*)'$/.exec(t);return r?r[1].trim():t}static _deserializeRegexValue(t,n){if(ZN(t)){if(n)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let r=t.indexOf("/"),i=t.lastIndexOf("/");if(r===i||r<0){if(n)throw new Error(`bad regexp-value '${t}', missing /-enclosure`);return console.warn(`bad regexp-value '${t}', missing /-enclosure`),null}let o=t.slice(r+1,i),s=t[i+1]==="i"?"i":"";try{return new RegExp(o,s)}catch(a){if(n)throw new Error(`bad regexp-value '${t}', parse error: ${a}`);return console.warn(`bad regexp-value '${t}', parse error: ${a}`),null}}}function rd(e,t){return e.cmp(t)}const RI=class{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return fs.INSTANCE}};let ds=RI;ds.INSTANCE=new RI;const MI=class{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return ds.INSTANCE}};let fs=MI;fs.INSTANCE=new MI;class oa{constructor(t){this.key=t,this.type=2}static create(t){const n=Wr.get(t);return typeof n=="boolean"?n?fs.INSTANCE:ds.INSTANCE:new oa(t)}cmp(t){return t.type!==this.type?this.type-t.type:TI(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return Qa.create(this.key)}}class Ld{constructor(t,n){this.key=t,this.value=n,this.type=4}static create(t,n){if(typeof n=="boolean")return n?oa.create(t):Qa.create(t);const r=Wr.get(t);return typeof r=="boolean"?n===(r?"true":"false")?fs.INSTANCE:ds.INSTANCE:new Ld(t,n)}cmp(t){return t.type!==this.type?this.type-t.type:ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type?this.key===t.key&&this.value===t.value:!1}evaluate(t){return t.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(t){return t.mapEquals(this.key,this.value)}negate(){return Ad.create(this.key,this.value)}}class Rp{constructor(t,n){this.key=t,this.valueKey=n,this.type=10}static create(t,n){return new Rp(t,n)}cmp(t){return t.type!==this.type?this.type-t.type:ol(this.key,this.valueKey,t.key,t.valueKey)}equals(t){return t.type===this.type?this.key===t.key&&this.valueKey===t.valueKey:!1}evaluate(t){const n=t.getValue(this.valueKey),r=t.getValue(this.key);return Array.isArray(n)?n.indexOf(r)>=0:typeof r=="string"&&typeof n=="object"&&n!==null?mF.call(n,r):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(t){return t.mapIn(this.key,this.valueKey)}negate(){return Mp.create(this)}}class Mp{constructor(t){this._actual=t,this.type=11}static create(t){return new Mp(t)}cmp(t){return t.type!==this.type?this.type-t.type:this._actual.cmp(t._actual)}equals(t){return t.type===this.type?this._actual.equals(t._actual):!1}evaluate(t){return!this._actual.evaluate(t)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(t){return new Mp(this._actual.map(t))}negate(){return this._actual}}class Ad{constructor(t,n){this.key=t,this.value=n,this.type=5}static create(t,n){if(typeof n=="boolean")return n?Qa.create(t):oa.create(t);const r=Wr.get(t);return typeof r=="boolean"?n===(r?"true":"false")?ds.INSTANCE:fs.INSTANCE:new Ad(t,n)}cmp(t){return t.type!==this.type?this.type-t.type:ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type?this.key===t.key&&this.value===t.value:!1}evaluate(t){return t.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(t){return t.mapNotEquals(this.key,this.value)}negate(){return Ld.create(this.key,this.value)}}class Qa{constructor(t){this.key=t,this.type=3}static create(t){const n=Wr.get(t);return typeof n=="boolean"?n?ds.INSTANCE:fs.INSTANCE:new Qa(t)}cmp(t){return t.type!==this.type?this.type-t.type:TI(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}evaluate(t){return!t.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(t){return t.mapNot(this.key)}negate(){return oa.create(this.key)}}class Od{constructor(t,n){this.key=t,this.value=n,this.type=12}static create(t,n){return new Od(t,n)}cmp(t){return t.type!==this.type?this.type-t.type:ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type?this.key===t.key&&this.value===t.value:!1}evaluate(t){return parseFloat(t.getValue(this.key))>parseFloat(this.value)}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(t){return t.mapGreater(this.key,this.value)}negate(){return Ag.create(this.key,this.value)}}class Lg{constructor(t,n){this.key=t,this.value=n,this.type=13}static create(t,n){return new Lg(t,n)}cmp(t){return t.type!==this.type?this.type-t.type:ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type?this.key===t.key&&this.value===t.value:!1}evaluate(t){return parseFloat(t.getValue(this.key))>=parseFloat(this.value)}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(t){return t.mapGreaterEquals(this.key,this.value)}negate(){return Pd.create(this.key,this.value)}}class Pd{constructor(t,n){this.key=t,this.value=n,this.type=14}static create(t,n){return new Pd(t,n)}cmp(t){return t.type!==this.type?this.type-t.type:ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type?this.key===t.key&&this.value===t.value:!1}evaluate(t){return parseFloat(t.getValue(this.key))<parseFloat(this.value)}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(t){return t.mapSmaller(this.key,this.value)}negate(){return Lg.create(this.key,this.value)}}class Ag{constructor(t,n){this.key=t,this.value=n,this.type=15}static create(t,n){return new Ag(t,n)}cmp(t){return t.type!==this.type?this.type-t.type:ol(this.key,this.value,t.key,t.value)}equals(t){return t.type===this.type?this.key===t.key&&this.value===t.value:!1}evaluate(t){return parseFloat(t.getValue(this.key))<=parseFloat(this.value)}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(t){return t.mapSmallerEquals(this.key,this.value)}negate(){return Od.create(this.key,this.value)}}class Tp{constructor(t,n){this.key=t,this.regexp=n,this.type=7}static create(t,n){return new Tp(t,n)}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.key<t.key)return-1;if(this.key>t.key)return 1;const n=this.regexp?this.regexp.source:"",r=t.regexp?t.regexp.source:"";return n<r?-1:n>r?1:0}equals(t){if(t.type===this.type){const n=this.regexp?this.regexp.source:"",r=t.regexp?t.regexp.source:"";return this.key===t.key&&n===r}return!1}evaluate(t){let n=t.getValue(this.key);return this.regexp?this.regexp.test(n):!1}serialize(){const t=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${t}`}keys(){return[this.key]}map(t){return t.mapRegex(this.key,this.regexp)}negate(){return Lp.create(this)}}class Lp{constructor(t){this._actual=t,this.type=8}static create(t){return new Lp(t)}cmp(t){return t.type!==this.type?this.type-t.type:this._actual.cmp(t._actual)}equals(t){return t.type===this.type?this._actual.equals(t._actual):!1}evaluate(t){return!this._actual.evaluate(t)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(t){return new Lp(this._actual.map(t))}negate(){return this._actual}}class Na{constructor(t){this.expr=t,this.type=6}static create(t){return Na._normalizeArr(t)}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let n=0,r=this.expr.length;n<r;n++){const i=rd(this.expr[n],t.expr[n]);if(i!==0)return i}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let n=0,r=this.expr.length;n<r;n++)if(!this.expr[n].equals(t.expr[n]))return!1;return!0}return!1}evaluate(t){for(let n=0,r=this.expr.length;n<r;n++)if(!this.expr[n].evaluate(t))return!1;return!0}static _normalizeArr(t){const n=[];let r=!1;for(const i of t)if(i){if(i.type===1){r=!0;continue}if(i.type===0)return ds.INSTANCE;if(i.type===6){n.push(...i.expr);continue}n.push(i)}if(n.length===0&&r)return fs.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];for(n.sort(rd);n.length>1;){const i=n[n.length-1];if(i.type!==9)break;n.pop();const o=n.pop(),s=Hs.create(i.expr.map(a=>Na.create([a,o])));s&&(n.push(s),n.sort(rd))}return n.length===1?n[0]:new Na(n)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(let n of this.expr)t.push(...n.keys());return t}map(t){return new Na(this.expr.map(n=>n.map(t)))}negate(){let t=[];for(let n of this.expr)t.push(n.negate());return Hs.create(t)}}class Hs{constructor(t){this.expr=t,this.type=9}static create(t){const n=Hs._normalizeArr(t);if(n.length!==0)return n.length===1?n[0]:new Hs(n)}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let n=0,r=this.expr.length;n<r;n++){const i=rd(this.expr[n],t.expr[n]);if(i!==0)return i}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let n=0,r=this.expr.length;n<r;n++)if(!this.expr[n].equals(t.expr[n]))return!1;return!0}return!1}evaluate(t){for(let n=0,r=this.expr.length;n<r;n++)if(this.expr[n].evaluate(t))return!0;return!1}static _normalizeArr(t){let n=[],r=!1;if(t){for(let i=0,o=t.length;i<o;i++){const s=t[i];if(s){if(s.type===0){r=!0;continue}if(s.type===1)return[fs.INSTANCE];if(s.type===9){n=n.concat(s.expr);continue}n.push(s)}}if(n.length===0&&r)return[ds.INSTANCE];n.sort(rd)}return n}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(let n of this.expr)t.push(...n.keys());return t}map(t){return new Hs(this.expr.map(n=>n.map(t)))}negate(){let t=[];for(let r of this.expr)t.push(r.negate());const n=r=>r.type===9?r.expr:[r];for(;t.length>1;){const r=t.shift(),i=t.shift(),o=[];for(const s of n(r))for(const a of n(i))o.push(Lt.and(s,a));t.unshift(Lt.or(...o))}return t[0]}}const Xh=class extends oa{constructor(e,t,n){super(e),this.key=e,this._defaultValue=t,typeof n=="object"?Xh._info.push({...n,key:e}):n!==!0&&Xh._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}static all(){return Xh._info.values()}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return Lt.not(this.key)}isEqualTo(e){return Lt.equals(this.key,e)}notEqualsTo(e){return Lt.notEquals(this.key,e)}};let At=Xh;At._info=[];const Fo=en("contextKeyService"),vF="setContext";function TI(e,t){return e<t?-1:e>t?1:0}function ol(e,t,n,r){return e<n?-1:e>n?1:t<r?-1:t>r?1:0}class ja{constructor(t,n,r){this._log=r,this._defaultKeybindings=t,this._defaultBoundCommands=new Map;for(let i=0,o=t.length;i<o;i++){const s=t[i].command;s&&this._defaultBoundCommands.set(s,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=ja.combine(t,n);for(let i=0,o=this._keybindings.length;i<o;i++){let s=this._keybindings[i];s.keypressParts.length!==0&&(s.when&&s.when.type===K_.False||this._addKeyPress(s.keypressParts[0],s))}}static _isTargetedForRemoval(t,n,r,i,o){return!(t.command!==i||n&&t.keypressParts[0]!==n||r&&t.keypressParts[1]!==r||o&&(!t.when||!o.equals(t.when)))}static combine(t,n){t=t.slice(0);let r=[];for(const i of n){if(!i.command||i.command.length===0||i.command.charAt(0)!=="-"){r.push(i);continue}const o=i.command.substr(1),s=i.keypressParts[0],a=i.keypressParts[1],l=i.when;for(let c=t.length-1;c>=0;c--)this._isTargetedForRemoval(t[c],s,a,o,l)&&t.splice(c,1)}return t.concat(r)}_addKeyPress(t,n){const r=this._map.get(t);if(typeof r>"u"){this._map.set(t,[n]),this._addToLookupMap(n);return}for(let i=r.length-1;i>=0;i--){let o=r[i];if(o.command===n.command)continue;const s=o.keypressParts.length>1,a=n.keypressParts.length>1;s&&a&&o.keypressParts[1]!==n.keypressParts[1]||ja.whenIsEntirelyIncluded(o.when,n.when)&&this._removeFromLookupMap(o)}r.push(n),this._addToLookupMap(n)}_addToLookupMap(t){if(!t.command)return;let n=this._lookupMap.get(t.command);typeof n>"u"?(n=[t],this._lookupMap.set(t.command,n)):n.push(t)}_removeFromLookupMap(t){if(!t.command)return;let n=this._lookupMap.get(t.command);if(!(typeof n>"u")){for(let r=0,i=n.length;r<i;r++)if(n[r]===t){n.splice(r,1);return}}}static whenIsEntirelyIncluded(t,n){return n?t?this._implies(t,n):!1:!0}static _implies(t,n){const r=t.negate(),i=s=>s.type===K_.Or?s.expr:[s];let o=i(r).concat(i(n));for(let s=0;s<o.length;s++){const l=o[s].negate();for(let c=s+1;c<o.length;c++){const d=o[c];if(l.equals(d))return!0}}return!1}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(t){let n=this._lookupMap.get(t);if(typeof n>"u"||n.length===0)return[];let r=[],i=0;for(let o=n.length-1;o>=0;o--)r[i++]=n[o];return r}lookupPrimaryKeybinding(t){let n=this._lookupMap.get(t);return typeof n>"u"||n.length===0?null:n[n.length-1]}resolve(t,n,r){this._log(`| Resolving ${r}${n?` chorded from ${n}`:""}`);let i=null;if(n!==null){const s=this._map.get(n);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;i=[];for(let a=0,l=s.length;a<l;a++){let c=s[a];c.keypressParts[1]===r&&i.push(c)}}else{const s=this._map.get(r);if(typeof s>"u")return this._log("\\ No keybinding entries."),null;i=s}let o=this._findCommand(t,i);return o?n===null&&o.keypressParts.length>1&&o.keypressParts[1]!==null?(this._log(`\\ From ${i.length} keybinding entries, matched chord, when: ${N1(o.when)}, source: ${D1(o)}.`),{enterChord:!0,leaveChord:!1,commandId:null,commandArgs:null,bubble:!1}):(this._log(`\\ From ${i.length} keybinding entries, matched ${o.command}, when: ${N1(o.when)}, source: ${D1(o)}.`),{enterChord:!1,leaveChord:o.keypressParts.length>1,commandId:o.command,commandArgs:o.commandArgs,bubble:o.bubble}):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),null)}_findCommand(t,n){for(let r=n.length-1;r>=0;r--){let i=n[r];if(ja.contextMatchesRules(t,i.when))return i}return null}static contextMatchesRules(t,n){return n?n.evaluate(t):!0}}function N1(e){return e?`${e.serialize()}`:"no when condition"}function D1(e){return e.extensionId?e.isBuiltinExtension?`built-in extension ${e.extensionId}`:`user extension ${e.extensionId}`:e.isDefault?"built-in":"user"}var _F=Object.defineProperty,yF=Object.getOwnPropertyDescriptor,bF=(e,t,n,r)=>{for(var i=r>1?void 0:r?yF(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&_F(t,n,i),i},SF=(e,t)=>(n,r)=>t(n,r,e);const id="outline-data-keybinding-context";let v0=class{constructor(t,n){this._id=t,this._parent=n,this._value=Object.create(null),this._value._contextId=t}setValue(t,n){return this._value[t]!==n?(this._value[t]=n,!0):!1}removeValue(t){return t in this._value?(delete this._value[t],!0):!1}getValue(t){const n=this._value[t];return typeof n>"u"&&this._parent?this._parent.getValue(t):n}updateParent(t){this._parent=t}collectAllValues(){let t=this._parent?this._parent.collectAllValues():Object.create(null);return t={...t,...this._value},delete t._contextId,t}};const LI=class extends v0{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}};let Nd=LI;Nd.INSTANCE=new LI;const G_=class extends v0{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=Yl.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(r=>{if(r.source===g0.DEFAULT){const i=Array.from(na.map(this._values,([o])=>o));this._values.clear(),n.fire(new Y_(i))}else{const i=[];for(const o of r.affectedKeys){const s=`config.${o}`,a=this._values.findSuperstr(s);a!==void 0&&(i.push(...na.map(a,([l])=>l)),this._values.deleteSuperstr(s)),this._values.has(s)&&(i.push(s),this._values.delete(s))}n.fire(new Y_(i))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(G_._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(G_._keyPrefix.length),n=this._configurationService.getValue(t);let r;switch(typeof n){case"number":case"boolean":case"string":r=n;break;default:Array.isArray(n)?r=JSON.stringify(n):r=n}return this._values.set(e,r),r}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}collectAllValues(){const e=Object.create(null);return this._values.forEach((t,n)=>e[n]=t),{...e,...super.collectAllValues()}}};let AI=G_;AI._keyPrefix="config.";class wF{constructor(t,n,r){this._service=t,this._key=n,this._defaultValue=r,this.reset()}set(t){this._service.setContext(this._key,t)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class F1{constructor(t){this.key=t}affectsSome(t){return t.has(this.key)}}class Y_{constructor(t){this.keys=t}affectsSome(t){for(const n of this.keys)if(t.has(n))return!0;return!1}}class EF{constructor(t){this.events=t}affectsSome(t){for(const n of this.events)if(n.affectsSome(t))return!0;return!1}}class OI{constructor(t){this._onDidChangeContext=new XN({merge:n=>new EF(n)}),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=t}get contextId(){return this._myContextId}createKey(t,n){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new wF(this,t,n)}bufferChangeEvents(t){this._onDidChangeContext.pause();try{t()}finally{this._onDidChangeContext.resume()}}createScoped(t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new CF(this,t)}createOverlay(t=na.empty()){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new _0(this,t)}contextMatchesRules(t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const n=this.getContextValuesContainer(this._myContextId),r=ja.contextMatchesRules(n,t);return console.log("context",n),console.groupEnd(),r}getContextKeyValue(t){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(t)}setContext(t,n){if(this._isDisposed)return;const r=this.getContextValuesContainer(this._myContextId);r&&r.setValue(t,n)&&this._onDidChangeContext.fire(new F1(t))}removeContext(t){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(t)&&this._onDidChangeContext.fire(new F1(t))}getContext(t){return this._isDisposed?Nd.INSTANCE:this.getContextValuesContainer(xF(t))}}let q_=class extends OI{constructor(e){super(0),this._contexts=new Map,this._toDispose=new of,this._lastContextId=0;const t=new AI(this._myContextId,e,this._onDidChangeContext);this._contexts.set(this._myContextId,t),this._toDispose.add(t)}dispose(){this._onDidChangeContext.dispose(),this._isDisposed=!0,this._toDispose.dispose()}getContextValuesContainer(e){return this._isDisposed?Nd.INSTANCE:this._contexts.get(e)||Nd.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");let t=++this._lastContextId;return this._contexts.set(t,new v0(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}updateParent(e){throw new Error("Cannot update parent of root ContextKeyService")}};q_=bF([SF(0,CI)],q_);class CF extends OI{constructor(t,n){if(super(t.createChildContext()),this._parentChangeListener=new KN,this._parent=t,this._updateParentChangeListener(),this._domNode=n,this._domNode.hasAttribute(id)){let r="";this._domNode.classList&&(r=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${r?`: ${r}`:""}`)}this._domNode.setAttribute(id,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(this._onDidChangeContext.fire,this._onDidChangeContext)}dispose(){this._isDisposed||(this._onDidChangeContext.dispose(),this._parent.disposeContext(this._myContextId),this._parentChangeListener.dispose(),this._domNode.removeAttribute(id),this._isDisposed=!0)}getContextValuesContainer(t){return this._isDisposed?Nd.INSTANCE:this._parent.getContextValuesContainer(t)}createChildContext(t=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(t)}disposeContext(t){this._isDisposed||this._parent.disposeContext(t)}updateParent(t){const n=this._parent.getContextValuesContainer(this._myContextId),r=n.collectAllValues();this._parent=t,this._updateParentChangeListener();const i=this._parent.getContextValuesContainer(this._parent.contextId);n.updateParent(i);const o=n.collectAllValues(),s={...A1(r,o),...A1(o,r)},a=Object.keys(s);this._onDidChangeContext.fire(new Y_(a))}}class V1{constructor(t,n){this.parent=t,this.overlay=n}getValue(t){return this.overlay.has(t)?this.overlay.get(t):this.parent.getValue(t)}}class _0{constructor(t,n){this.parent=t,this.overlay=new Map(n)}get contextId(){return this.parent.contextId}get onDidChangeContext(){return this.parent.onDidChangeContext}bufferChangeEvents(t){this.parent.bufferChangeEvents(t)}createKey(){throw new Error("Not supported.")}getContext(t){return new V1(this.parent.getContext(t),this.overlay)}getContextValuesContainer(t){const n=this.parent.getContextValuesContainer(t);return new V1(n,this.overlay)}contextMatchesRules(t){const n=this.getContextValuesContainer(this.contextId);return ja.contextMatchesRules(n,t)}getContextKeyValue(t){return this.overlay.has(t)?this.overlay.get(t):this.parent.getContextKeyValue(t)}createScoped(){throw new Error("Not supported.")}createOverlay(t=na.empty()){return new _0(this,t)}updateParent(){throw new Error("Not supported.")}dispose(){}}function xF(e){for(;e;){if(e.hasAttribute(id)){const t=e.getAttribute(id);return t?parseInt(t,10):NaN}e=e.parentElement}return 0}il.registerCommand(vF,function(e,t,n){e.get(Fo).createKey(String(t),n)});il.registerCommand({id:"getContextKeyInfo",handler(){return[...At.all()].sort((e,t)=>e.key.localeCompare(t.key))},description:{description:"A command that returns information about context keys",args:[]}});il.registerCommand("_generateContextKeyInfo",function(){const e=[],t=new Set;for(let n of At.all())t.has(n.key)||(t.add(n.key),e.push(n));e.sort((n,r)=>n.key.localeCompare(r.key))});const PI=en("filterViewService"),Zn=new Uint8Array(16),kr=[];for(let e=0;e<256;e++)kr.push(e.toString(16).padStart(2,"0"));let Q_;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?Q_=crypto.getRandomValues.bind(crypto):Q_=function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(Math.random()*256);return e};function y0(){Q_(Zn),Zn[6]=Zn[6]&15|64,Zn[8]=Zn[8]&63|128;let e=0,t="";return t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+="-",t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+="-",t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+="-",t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+="-",t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+=kr[Zn[e++]],t+=kr[Zn[e++]],t}class En{constructor(t,n=0){this.actorId=t,this.counter=n}static compare(t,n){return En.decode(t).compare(En.decode(n))}static encode(t){return[t.actorId,t.counter]}static decode(t){return new En(t[0],t[1])}static parse(t){const n=t.split("_");if(n.length!==2)throw new Error("invalid");return[n[1],parseInt(n[0],10)]}inc(){return new En(this.actorId,this.counter+1)}tick(){return this.counter+=1,new En(this.actorId,this.counter)}merge(t){return new En(this.actorId,Math.max(this.counter,t.counter))}compare(t){return this.counter>t.counter?1:this.counter<t.counter?-1:this.actorId>t.actorId?1:this.actorId<t.actorId?-1:0}valueOf(){return this.toString()}toString(){return`${String(this.counter).padStart(10,"0")}_${this.actorId}`}encode(){return En.encode(this)}}class NI{constructor(){this.vendorClock=new Map}merge(t){const n=En.decode(t);if(!this.vendorClock.has(n.actorId)){this.vendorClock.set(n.actorId,n);return}const r=this.vendorClock.get(n.actorId);this.vendorClock.set(n.actorId,r.merge(n))}version(){const t={};for(const[n,r]of this.vendorClock.entries())t[n]=r.counter;return t}}const kF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function IF(e){return kF.test(e)}const Jn=new Uint8Array(16),Ir=[];for(let e=0;e<256;e++)Ir.push(e.toString(16).padStart(2,"0"));let X_;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?X_=crypto.getRandomValues.bind(crypto):X_=function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(Math.random()*256);return e};function U1(){X_(Jn),Jn[6]=Jn[6]&15|64,Jn[8]=Jn[8]&63|128;let e=0,t="";return t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+="-",t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+="-",t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+="-",t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+="-",t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t+=Ir[Jn[e++]],t}const es=Symbol("_update"),b0=Symbol("_undo"),S0=Symbol("_redo");function RF(e,t){const n=new Set,r=[];function i(o){n.has(En.decode(o.id).toString())||(r.push(o),n.add(En.decode(o.id).toString()))}return e.forEach(o=>i(o)),t.forEach(o=>i(o)),r.sort((o,s)=>En.compare(o.id,s.id))}function od(e,t,n,r){const i=e.get(t)||new Map;e.set(t,i);let o=i.get(n);return o||(o=r(t,n)),i.set(n,o),i.get(n)}var pi=(e=>(e[e.string=0]="string",e[e.int=1]="int",e[e.float64=2]="float64",e[e.boolean=3]="boolean",e[e.null=4]="null",e[e.crdt=7]="crdt",e))(pi||{});function MF(e){return e?typeof e[es]=="function":!1}function TF(e){return!!e.structureCtorId&&!!e.structureName}function LF(e){switch(typeof e){case"string":return{type:pi.string,value:String(e)};case"number":return{type:Number.isInteger(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER?pi.int:pi.float64,value:String(e)};case"boolean":return{type:pi.boolean,value:e};case"object":{if(e===null)return{type:pi.null};if(MF(e))return{type:pi.crdt,structureCtorId:e.structureCtorId,structureName:e.structureName}}default:throw new Error(`Unsupported type of value: ${e}`)}}function AF(e,t){switch(e.type){case pi.string:case pi.boolean:return e.value;case pi.int:return parseInt(e.value,10);case pi.float64:return parseFloat(e.value);case pi.null:return null;case pi.crdt:return t(e.structureCtorId,e.structureName)}}function OF(e,t){if(e.length<1)return-1;let n=0,r=e.length-1;for(;n<=r;){const i=Math.floor((n+r)/2);if(t<En.decode(e[i].id))r=i-1;else if(t>En.decode(e[i].id))n=i+1;else return i}return-1}class PF{constructor(t,n){this.structureCtorId=t,this.name=n,this.ops=[],this.vendorClock=new NI}append(t){this.ops.push(t),this.vendorClock.merge(t.id)}redo(t){const n=this.getOperationsById(t);n&&(this.vendorClock.merge(t),n.delete=!1)}undo(t){const n=this.getOperationsById(t);n&&(this.vendorClock.merge(t),n.delete=!0)}getOperationsById(t){const n=OF(this.ops,En.decode(t));return n===-1?null:this.ops[n]}}function $1(e,t){const n=new Map;for(const r of e)od(n,r.structureCtorId,r.structureName,()=>[]).push(r);for(const[r,i]of n)for(const[o,s]of i)t(r,o,s)}class W1{constructor(){this.structureEditorStackMap=new Map}get(t,n){return od(this.structureEditorStackMap,t,n,()=>new PF(t,n))}forEach(t){for(const[n,r]of this.structureEditorStackMap.entries())for(const[i,o]of r.entries())t(o,n,i)}append(t){this.get(t.structureCtorId,t.structureName).append(t)}}class NF{constructor(t,n,r){this.options=r,this.ctorMap=new Map,this.structureMap=new Map,this.structureEditorStackMap=new Map,this.editorStackMap=new Map,this.vendorClock=new NI,this.docOps=[];const i=(r==null?void 0:r.actorId)??U1();if(!IF(i))throw new Error("actorId should be uuid");this._clock=new En(i),n.forEach(o=>{this.ctorMap.set(o.structureCtorId,o)}),this.structureStoreMap=new W1,this.build(t),this._actorId=i}get version(){return this.vendorClock.version()}get actorId(){return this._actorId}get clock(){return this._clock.encode()}get operations(){let t=this.docOps;return this.structureStoreMap.forEach(n=>{t=t.concat(n.ops)}),t.sort((n,r)=>En.compare(n.id,r.id))}get(t,n){const r=n??this._clock.tick().toString();return this.getStructure(t.structureCtorId,r)}merge(t){return this.build(RF(this.operations,t.operations)),this}getTime(){var t;if((t=this.options)!=null&&t.time)return Date.now()}createUndoRedoService(t,n){const r=n??U1(),i=s=>{od(this.structureEditorStackMap,s.structureCtorId,s.structureName,()=>r)},o=new t({name:r,handlerTrack:i,handleRedo:this.handleRedo.bind(this),handleUndo:this.handleUndo.bind(this)});return this.editorStackMap.set(o.name,o),o}hasStructure(t,n){var r;return(r=this.structureMap.get(t))==null?void 0:r.has(n)}handleUndo(t){const r={id:this._clock.tick().encode(),type:"undo",ids:t.map(i=>i.id),time:this.getTime()};$1(t,(i,o,s)=>{this.hasStructure(i,o)&&this.getStructure(i,o)[b0](s)}),this.appendDocOp(r)}appendDocOp(t){this.docOps.push(t),this._clock.merge(En.decode(t.id)),this.vendorClock.merge(t.id)}handleRedo(t){const r={id:this._clock.tick().encode(),type:"redo",ids:t.map(i=>i.id),time:this.getTime()};$1(t,(i,o,s)=>{this.hasStructure(i,o)&&this.getStructure(i,o)[S0](s)}),this.appendDocOp(r)}getStructure(t,n){return od(this.structureMap,t,n,()=>{const r=this.ctorMap.get(t),i=new r(n,this.createContext(t,n));return i[es](this.structureStoreMap.get(t,n).ops),i})}build(t){const n=new Map,r=new W1;for(const i of t)if(this._clock=this._clock.merge(En.decode(i.id)),this.vendorClock.merge(i.id),TF(i))n.set(En.decode(i.id).toString(),i),r.append(i);else{const o=i;switch(o.type){case"undo":{o.ids.forEach(s=>{n.get(En.decode(s).toString()).delete=!0});break}case"redo":{o.ids.forEach(s=>{n.get(En.decode(s).toString()).delete=!1});break}}}r.forEach((i,o,s)=>{this.hasStructure(o,s)&&this.get(this.ctorMap.get(o),s)[es](i.ops)}),this.structureStoreMap=r}createContext(t,n){const r=this;return{tick:()=>this._clock.tick(),getTime:()=>r.getTime(),appendOperation:i=>{var s;this.vendorClock.merge(i.id);const o=od(this.structureEditorStackMap,i.structureCtorId,i.structureName,()=>null);o&&((s=this.editorStackMap.get(o))==null||s.applyOperation(i)),this.structureStoreMap.append(i)},unwrapValue:i=>AF(i,(o,s)=>r.getStructure(o,s)),wrapValue:LF,getStore(){return r.structureStoreMap.get(t,n)}}}}class Z_{constructor(t,n){this.structureName=t,this.context=n,this.structureCtorId="CRDTArray",this.data=[]}[b0](t){const n=this.context.getStore();for(const r of t)n.undo(r.id);this[es](n.ops)}[S0](t){const n=this.context.getStore();for(const r of t)n.redo(r.id);this[es](n.ops)}get lastOperationTime(){const t=this.context.getStore().ops;return t[t.length-1].time}[es](t){const n=new Map;n.set(null,{left:null,right:null,id:null,delete:!0,value:{type:pi.null}});for(const o of t)switch(o.type){case"0":{const s=n.get(o.left?o.left.toString():null),a=s.right;s.right=o.id;const l={left:s.id,id:o.id,delete:!!o.delete,right:a,value:o.value};n.set(o.id.toString(),l),a&&(n.get(a.toString()).left=l.id);break}case"1":{o.delete||(n.get(o.removeId.toString()).delete=!0);break}default:throw new Error(`unknown op: ${JSON.stringify(o)}`)}const r=[];let i=null;for(;;){const o=n.get(i&&i.toString());if(!(o!=null&&o.delete)&&(o!=null&&o.id)&&r.push({id:o.id,value:o.value}),o!=null&&o.right)i=o.right;else break}this.data=r}push(t){this.data.length===0?this.makeAddRightOperation(null,t):this.makeAddRightOperation(this.data.length-1,t)}remove(t){const n=this.context.tick(),r=this.data[t].id,i={id:n.encode(),type:"1",removeId:r,structureCtorId:this.structureCtorId,structureName:this.structureName,time:this.context.getTime()};this.context.appendOperation(i),this.data.splice(t,1)}insert(t,n){this.makeAddRightOperation(t,n)}unshift(t){this.makeAddRightOperation(null,t)}makeAddRightOperation(t,n){let r=null;t!==null&&(r=this.data[t].id);const i=this.context.tick(),o={id:i.encode(),type:"0",value:this.context.wrapValue(n),left:r,structureCtorId:this.structureCtorId,structureName:this.structureName,time:this.context.getTime()};this.context.appendOperation(o);const s={id:i.encode(),value:this.context.wrapValue(n)};t===null?this.data.unshift(s):this.data.splice(t+1,0,s)}toJS(){return this.data.map(t=>this.context.unwrapValue(t.value))}}Z_.structureCtorId="CRDTArray";class J_{constructor(t,n){this.structureName=t,this.context=n,this.structureCtorId="CRDTMap",this.data=new Map}get lastOperationTime(){const t=this.context.getStore().ops;return t[t.length-1].time}[S0](t){const n=this.context.getStore();for(const r of t)n.redo(r.id);this[es](n.ops)}[b0](t){const n=this.context.getStore();for(const r of t)n.undo(r.id);this[es](n.ops)}[es](t){const n=new Map;for(const r of t)switch(r.type){case"0":{r.delete||n.set(r.key,r.value);break}case"1":{r.delete||n.delete(r.key);break}default:throw new Error(`unknown op: ${JSON.stringify(r)}`)}this.data=n}set(t,n){const r=this.context.wrapValue(n),i={id:this.context.tick().encode(),key:t,value:r,type:"0",structureCtorId:this.structureCtorId,structureName:this.structureName,time:this.context.getTime()};this.context.appendOperation(i),this.data.set(t,r)}delete(t){const n={id:this.context.tick().encode(),type:"1",key:t,structureCtorId:this.structureCtorId,structureName:this.structureName,time:this.context.getTime()};this.context.appendOperation(n),this.data.delete(t)}get(t){if(this.data.has(t))return this.context.unwrapValue(this.data.get(t))}toJS(){const t={};return this.data.forEach((n,r)=>{t[r]=this.context.unwrapValue(n)}),t}}J_.structureCtorId="CRDTMap";class DI extends NF{constructor(t){super(t,[Z_,J_],{time:!0})}getMap(t){return this.get(J_,t)}getArray(t){return this.get(Z_,t)}}let DF=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function z(e,t,...n){const r=globalThis.i18nMessages||{};return FF(r[e]||t,n)}function FF(e,t){let n;return t.length===0?n=e:n=e.replace(/\{(\d+)\}/g,(r,i)=>{const o=i[0],s=t[o];let a=r;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),DF&&(n="［"+n.replace(/[aouei]/g,"$&$&")+"］"),n}var qr=(e=>(e[e.random=0]="random",e[e.title_asc=1]="title_asc",e[e.title_desc=2]="title_desc",e[e.add_time_asc=3]="add_time_asc",e[e.add_time_desc=4]="add_time_desc",e[e.annotate_count_asc=5]="annotate_count_asc",e[e.annotate_count_desc=6]="annotate_count_desc",e))(qr||{});const z1={[0]:"random",[1]:z("view_sort.title_asc","Title: A - Z"),[2]:z("view_sort.title_desc","Title: Z - A"),[3]:z("view_sort.add_time_asc","Add Time: Oldest - Newest"),[4]:z("view_sort.add_time_desc","Add Time: Newest - Oldest"),[5]:z("view_sort.annotate_count_asc","Annotate Count: Least - Most"),[6]:z("view_sort.annotate_count_desc","Annotate Count: Most - Least")};function FI(e){return z1[e]??z1[4]}const VF=new Set([0,1,2,4,3,5,6]);function UF(e){return VF.has(e+1)?e+1:0}const ju=class{get metadata(){return{modelType:ju.ModelType,schema:ju.Schema}}get operations(){return this.doc.operations}get lastId(){return En.decode(this.doc.operations[this.doc.operations.length-1].id).toString()}get actorId(){return this.doc.actorId}get version(){return this.doc.version}get id(){return this.getMap().get("id")}getMap(){return this.doc.getMap("view")}constructor(e){this.doc=new DI(e)}get title(){return this.doc.getMap("view").get("title")??""}set title(e){if(typeof e!="string")throw new Error("title must be string");if(this.title===e)return;this.doc.getMap("view").set("title",e)}get limit(){return this.doc.getMap("view").get("limit")??null}set limit(e){if(this.limit===e)return;this.doc.getMap("view").set("limit",e)}get enableLimit(){return this.doc.getMap("view").get("enabledLimit")??!1}set enableLimit(e){if(this.enableLimit===e)return;this.doc.getMap("view").set("enabledLimit",e)}get description(){return this.getMap().get("description")??""}set description(e){if(typeof e!="string")throw new Error("description must be string");if(this.description===e)return;this.doc.getMap("view").set("description",e)}get deleted(){return this.getMap().get("deleted")??!1}set deleted(e){if(typeof e!="boolean")throw new Error("deleted must be boolean");this.deleted!==e&&this.getMap().set("deleted",e)}get createdAt(){return this.getMap().get("createdAt")}static create(){const e=new ju([]),t=e.doc.getMap("view");return t.set("id",y0()),t.set("createdAt",Date.now()),t.set("limit",25),e}static from(e){return new ju([...e])}get filters(){return this.doc.getArray("filters").toJS().map(e=>JSON.parse(e.get("data")))}get filtersWithId(){return this.doc.getArray("filters").toJS().map(e=>({id:e.structureName,...JSON.parse(e.get("data"))}))}addFilter(e){const t=this.doc.getArray("filters"),n=this.doc.getMap();n.set("type",e.type),n.set("key",e.key),n.set("data",JSON.stringify(e)),t.push(n)}updateFilter(e,t){const n=this.doc.getArray("filters").toJS()[e],r=Object.assign({},JSON.parse(n.get("data")),t);n.set("data",JSON.stringify(r))}getFilter(e){return this.filters[e]}deleteFilter(e){this.doc.getArray("filters").remove(e)}get match(){const e=this.doc.getMap("view").get("match")??"and";/* istanbul ignore if -- @preserve */return e!=="and"&&e!=="or"?"and":e}set match(e){if(e!=="and"&&e!=="or")throw new Error('match must be "and" or "or"');const t=this.doc.getMap("view");(t.get("match")??"and")!==e&&t.set("match",e)}set sortBy(e){if(this.sortBy===e)return;this.doc.getMap("view").set("sortBy",e)}get sortBy(){const t=this.doc.getMap("view").get("sortBy");switch(t){case 0:case 1:case 2:case 5:case 6:case 3:case 4:return t;default:return 4}}};let Qo=ju;Qo.Schema="1.1.0";Qo.ModelType="webpage-view";class $F{constructor(t){this.channel=t,this.onViewChange=this.channel.listen("onViewChange")}initView(t){return this.channel.call("initView",[t])}publicViews(){return this.channel.call("publicViews")}getViewState(t){return this.channel.call("getViewState",[t])}patchView(t,n){return this.channel.call("patchView",[t,n])}createFilterView(t){return this.channel.call("createFilterView",[t.operations])}getViews(){return this.channel.call("getViews")}async getView(t){const n=await this.channel.call("getView",[t]);return n?Qo.from(n):null}deleteView(t){return this.channel.call("deleteView",[t])}}class Jt{constructor(t,n=[],r=!1){this.ctor=t,this.staticArguments=n,this.supportsDelayedInstantiation=r}}const VI=[];var $c=(e=>(e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed",e))($c||{});function lf(e,t,n){t instanceof Jt||(t=new Jt(t,[],!!n)),VI.push([e,t])}function WF(){return VI}let zF=class{constructor(t){this.incoming=new Map,this.outgoing=new Map,this.data=t}};class BF{constructor(t){this._hashFn=t,this._nodes=new Map}roots(){const t=[];for(let n of this._nodes.values())n.outgoing.size===0&&t.push(n);return t}insertEdge(t,n){const r=this.lookupOrInsertNode(t),i=this.lookupOrInsertNode(n);r.outgoing.set(this._hashFn(n),i),i.incoming.set(this._hashFn(t),r)}removeNode(t){const n=this._hashFn(t);this._nodes.delete(n);for(let r of this._nodes.values())r.outgoing.delete(n),r.incoming.delete(n)}lookupOrInsertNode(t){const n=this._hashFn(t);let r=this._nodes.get(n);return r||(r=new zF(t),this._nodes.set(n,r)),r}lookup(t){return this._nodes.get(this._hashFn(t))}isEmpty(){return this._nodes.size===0}toString(){let t=[];for(let[n,r]of this._nodes)t.push(`${n}, (incoming)[${[...r.incoming.keys()].join(", ")}], (outgoing)[${[...r.outgoing.keys()].join(",")}]`);return t.join(`
`)}findCycleSlow(){for(let[t,n]of this._nodes){const r=new Set([t]),i=this._findCycle(n,r);if(i)return i}}_findCycle(t,n){for(let[r,i]of t.outgoing){if(n.has(r))return[...n,r].join(" -> ");n.add(r);const o=this._findCycle(i,n);if(o)return o;n.delete(r)}}}class UI{constructor(...t){this._entries=new Map;for(let[n,r]of t)this.set(n,r)}set(t,n){const r=this._entries.get(t);return this._entries.set(t,n),r}has(t){return this._entries.has(t)}get(t){return this._entries.get(t)}}class B1 extends Error{constructor(t){super("cyclic dependency between services"),this.message=t.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${t.toString()}`}}class w0{constructor(t=new UI,n=!1,r){this._activeInstantiations=new Set,this._services=t,this._strict=n,this._parent=r,this._services.set(Or,this)}createChild(t){return new w0(t,this._strict,this)}invokeFunction(t,...n){let r=sd.traceInvocation(t),i=!1;try{return t({get:s=>{if(i)throw $N("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(s,r);if(!a)throw new Error(`[invokeFunction] unknown service '${s}'`);return a}},...n)}finally{i=!0,r.stop()}}createInstance(t,...n){let r,i;return t instanceof Jt?(r=sd.traceCreation(t.ctor),i=this._createInstance(t.ctor,t.staticArguments.concat(n),r)):(r=sd.traceCreation(t),i=this._createInstance(t,n,r)),r.stop(),i}_createInstance(t,n=[],r){let i=ho.getServiceDependencies(t).sort((a,l)=>a.index-l.index),o=[];for(const a of i){let l=this._getOrCreateServiceInstance(a.id,r);l||this._throwIfStrict(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(l)}let s=i.length>0?i[0].index:n.length;if(n.length!==s){console.trace(`[createInstance] First service dependency of ${t.name} at position ${s+1} conflicts with ${n.length} static arguments`);let a=s-n.length;a>0?n=n.concat(new Array(a)):n=n.slice(0,s)}return new t(...n,...o)}_setServiceInstance(t,n){if(this._services.get(t)instanceof Jt)this._services.set(t,n);else if(this._parent)this._parent._setServiceInstance(t,n);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(t){let n=this._services.get(t);return!n&&this._parent?this._parent._getServiceInstanceOrDescriptor(t):n}_getOrCreateServiceInstance(t,n){let r=this._getServiceInstanceOrDescriptor(t);return r instanceof Jt?this._safeCreateAndCacheServiceInstance(t,r,n.branch(t,!0)):(n.branch(t,!1),r)}_safeCreateAndCacheServiceInstance(t,n,r){if(this._activeInstantiations.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this._activeInstantiations.add(t);try{return this._createAndCacheServiceInstance(t,n,r)}finally{this._activeInstantiations.delete(t)}}_createAndCacheServiceInstance(t,n,r){const i=new BF(a=>a.id.toString());let o=0;const s=[{id:t,desc:n,_trace:r}];for(;s.length;){const a=s.pop();if(i.lookupOrInsertNode(a),o++>1e3)throw new B1(i);for(let l of ho.getServiceDependencies(a.desc.ctor)){let c=this._getServiceInstanceOrDescriptor(l.id);if(c||this._throwIfStrict(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),c instanceof Jt){const d={id:l.id,desc:c,_trace:a._trace.branch(l.id,!0)};i.insertEdge(a,d),s.push(d)}}}for(;;){const a=i.roots();if(a.length===0){if(!i.isEmpty())throw new B1(i);break}for(const{data:l}of a){if(this._getServiceInstanceOrDescriptor(l.id)instanceof Jt){const d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}i.removeNode(l)}}return this._getServiceInstanceOrDescriptor(t)}_createServiceInstanceWithOwner(t,n,r=[],i,o){if(this._services.get(t)instanceof Jt)return this._createServiceInstance(n,r,i,o);if(this._parent)return this._parent._createServiceInstanceWithOwner(t,n,r,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${n.name}`)}_createServiceInstance(t,n=[],r,i){if(r){const o=new TD(()=>this._createInstance(t,n,i));return new Proxy(Object.create(null),{get(s,a){if(a in s)return s[a];let l=o.value,c=l[a];return typeof c!="function"||(c=c.bind(l),s[a]=c),c},set(s,a,l){return o.value[a]=l,!0}})}else return this._createInstance(t,n,i)}_throwIfStrict(t,n){if(n&&console.warn(n),this._strict)throw new Error(t)}}const Pa=class{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return Pa._None}static traceCreation(e){return Pa._None}branch(e,t){let n=new Pa(2,e.toString());return this._dep.push([e,t,n]),n}stop(){let e=Date.now()-this._start;Pa._totals+=e;let t=!1;function n(i,o){let s=[],a=new Array(i+1).join("	");for(const[l,c,d]of o._dep)if(c&&d){t=!0,s.push(`${a}CREATES -> ${l}`);let h=n(i+1,d);h&&s.push(h)}else s.push(`${a}uses -> ${l}`);return s.join(`
`)}let r=[`${this.type===0?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Pa._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(r.join(`
`))}};let sd=Pa;sd._None=new class extends Pa{constructor(){super(-1,null)}stop(){}branch(){return this}};sd._totals=0;var ey=(e=>(e[e.Default=1]="Default",e[e.User=2]="User",e))(ey||{});const E0=en("keybindingService"),$I=en("legalService"),WI=class{constructor(){this._zoomLevel=0,this._lastZoomLevelChangeTime=0,this._onDidChangeZoomLevel=new Oe,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this._zoomFactor=1,this._fullscreen=!1,this._onDidChangeFullscreen=new Oe,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event}getZoomLevel(){return this._zoomLevel}getTimeSinceLastZoomLevelChanged(){return Date.now()-this._lastZoomLevelChangeTime}setZoomLevel(e,t){this._zoomLevel!==e&&(this._zoomLevel=e,this._lastZoomLevelChangeTime=t?0:Date.now(),this._onDidChangeZoomLevel.fire(this._zoomLevel))}getZoomFactor(){return this._zoomFactor}setZoomFactor(e){this._zoomFactor=e}getPixelRatio(){let e=document.createElement("canvas").getContext("2d"),t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}setFullscreen(e){this._fullscreen!==e&&(this._fullscreen=e,this._onDidChangeFullscreen.fire())}isFullscreen(){return this._fullscreen}};let zI=WI;zI.INSTANCE=new WI;zI.INSTANCE.onDidChangeFullscreen;const is=navigator.userAgent,HF=is.indexOf("Firefox")>=0,Zh=is.indexOf("AppleWebKit")>=0,jF=is.indexOf("Chrome")>=0,BI=!jF&&is.indexOf("Safari")>=0;is.indexOf("iPad")>=0||BI&&navigator.maxTouchPoints>0;is.indexOf("Edge/")>=0&&is.indexOf("WebView/")>=0;is.indexOf("Electron/")>=0;is.indexOf("Android")>=0;const KF=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,H1=(e,t,n)=>{const r=o=>i.fire(o),i=new Oe({onFirstListenerAdd:()=>{e.addEventListener(t,r,n)},onLastListenerRemove:()=>{e.removeEventListener(t,r,n)}});return i.event};var U=(e=>(e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.KEY_0=21]="KEY_0",e[e.KEY_1=22]="KEY_1",e[e.KEY_2=23]="KEY_2",e[e.KEY_3=24]="KEY_3",e[e.KEY_4=25]="KEY_4",e[e.KEY_5=26]="KEY_5",e[e.KEY_6=27]="KEY_6",e[e.KEY_7=28]="KEY_7",e[e.KEY_8=29]="KEY_8",e[e.KEY_9=30]="KEY_9",e[e.KEY_A=31]="KEY_A",e[e.KEY_B=32]="KEY_B",e[e.KEY_C=33]="KEY_C",e[e.KEY_D=34]="KEY_D",e[e.KEY_E=35]="KEY_E",e[e.KEY_F=36]="KEY_F",e[e.KEY_G=37]="KEY_G",e[e.KEY_H=38]="KEY_H",e[e.KEY_I=39]="KEY_I",e[e.KEY_J=40]="KEY_J",e[e.KEY_K=41]="KEY_K",e[e.KEY_L=42]="KEY_L",e[e.KEY_M=43]="KEY_M",e[e.KEY_N=44]="KEY_N",e[e.KEY_O=45]="KEY_O",e[e.KEY_P=46]="KEY_P",e[e.KEY_Q=47]="KEY_Q",e[e.KEY_R=48]="KEY_R",e[e.KEY_S=49]="KEY_S",e[e.KEY_T=50]="KEY_T",e[e.KEY_U=51]="KEY_U",e[e.KEY_V=52]="KEY_V",e[e.KEY_W=53]="KEY_W",e[e.KEY_X=54]="KEY_X",e[e.KEY_Y=55]="KEY_Y",e[e.KEY_Z=56]="KEY_Z",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.NumLock=78]="NumLock",e[e.ScrollLock=79]="ScrollLock",e[e.US_SEMICOLON=80]="US_SEMICOLON",e[e.US_EQUAL=81]="US_EQUAL",e[e.US_COMMA=82]="US_COMMA",e[e.US_MINUS=83]="US_MINUS",e[e.US_DOT=84]="US_DOT",e[e.US_SLASH=85]="US_SLASH",e[e.US_BACKTICK=86]="US_BACKTICK",e[e.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",e[e.US_BACKSLASH=88]="US_BACKSLASH",e[e.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",e[e.US_QUOTE=90]="US_QUOTE",e[e.OEM_8=91]="OEM_8",e[e.OEM_102=92]="OEM_102",e[e.NUMPAD_0=93]="NUMPAD_0",e[e.NUMPAD_1=94]="NUMPAD_1",e[e.NUMPAD_2=95]="NUMPAD_2",e[e.NUMPAD_3=96]="NUMPAD_3",e[e.NUMPAD_4=97]="NUMPAD_4",e[e.NUMPAD_5=98]="NUMPAD_5",e[e.NUMPAD_6=99]="NUMPAD_6",e[e.NUMPAD_7=100]="NUMPAD_7",e[e.NUMPAD_8=101]="NUMPAD_8",e[e.NUMPAD_9=102]="NUMPAD_9",e[e.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",e[e.NUMPAD_ADD=104]="NUMPAD_ADD",e[e.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",e[e.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",e[e.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",e[e.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",e[e.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",e[e.ABNT_C1=110]="ABNT_C1",e[e.ABNT_C2=111]="ABNT_C2",e[e.MAX_VALUE=112]="MAX_VALUE",e))(U||{});class C0{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(t,n){this._keyCodeToStr[t]=n,this._strToKeyCode[n.toLowerCase()]=t}keyCodeToStr(t){return this._keyCodeToStr[t]}strToKeyCode(t){return this._strToKeyCode[t.toLowerCase()]||0}}const ty=new C0,ny=new C0,ry=new C0;(function(){function e(t,n,r=n,i=r){ty.define(t,n),ny.define(t,r),ry.define(t,i)}e(0,"unknown"),e(1,"Backspace"),e(2,"Tab"),e(3,"Enter"),e(4,"Shift"),e(5,"Ctrl"),e(6,"Alt"),e(7,"PauseBreak"),e(8,"CapsLock"),e(9,"Escape"),e(10,"Space"),e(11,"PageUp"),e(12,"PageDown"),e(13,"End"),e(14,"Home"),e(15,"LeftArrow","Left"),e(16,"UpArrow","Up"),e(17,"RightArrow","Right"),e(18,"DownArrow","Down"),e(19,"Insert"),e(20,"Delete"),e(21,"0"),e(22,"1"),e(23,"2"),e(24,"3"),e(25,"4"),e(26,"5"),e(27,"6"),e(28,"7"),e(29,"8"),e(30,"9"),e(31,"A"),e(32,"B"),e(33,"C"),e(34,"D"),e(35,"E"),e(36,"F"),e(37,"G"),e(38,"H"),e(39,"I"),e(40,"J"),e(41,"K"),e(42,"L"),e(43,"M"),e(44,"N"),e(45,"O"),e(46,"P"),e(47,"Q"),e(48,"R"),e(49,"S"),e(50,"T"),e(51,"U"),e(52,"V"),e(53,"W"),e(54,"X"),e(55,"Y"),e(56,"Z"),e(57,"Meta"),e(58,"ContextMenu"),e(59,"F1"),e(60,"F2"),e(61,"F3"),e(62,"F4"),e(63,"F5"),e(64,"F6"),e(65,"F7"),e(66,"F8"),e(67,"F9"),e(68,"F10"),e(69,"F11"),e(70,"F12"),e(71,"F13"),e(72,"F14"),e(73,"F15"),e(74,"F16"),e(75,"F17"),e(76,"F18"),e(77,"F19"),e(78,"NumLock"),e(79,"ScrollLock"),e(80,";",";","OEM_1"),e(81,"=","=","OEM_PLUS"),e(82,",",",","OEM_COMMA"),e(83,"-","-","OEM_MINUS"),e(84,".",".","OEM_PERIOD"),e(85,"/","/","OEM_2"),e(86,"`","`","OEM_3"),e(110,"ABNT_C1"),e(111,"ABNT_C2"),e(87,"[","[","OEM_4"),e(88,"\\","\\","OEM_5"),e(89,"]","]","OEM_6"),e(90,"'","'","OEM_7"),e(91,"OEM_8"),e(92,"OEM_102"),e(93,"NumPad0"),e(94,"NumPad1"),e(95,"NumPad2"),e(96,"NumPad3"),e(97,"NumPad4"),e(98,"NumPad5"),e(99,"NumPad6"),e(100,"NumPad7"),e(101,"NumPad8"),e(102,"NumPad9"),e(103,"NumPad_Multiply"),e(104,"NumPad_Add"),e(105,"NumPad_Separator"),e(106,"NumPad_Subtract"),e(107,"NumPad_Decimal"),e(108,"NumPad_Divide")})();var Ps;(e=>{function t(s){return ty.keyCodeToStr(s)}e.toString=t;function n(s){return ty.strToKeyCode(s)}e.fromString=n;function r(s){return ny.keyCodeToStr(s)}e.toUserSettingsUS=r;function i(s){return ry.keyCodeToStr(s)}e.toUserSettingsGeneral=i;function o(s){return ny.strToKeyCode(s)||ry.strToKeyCode(s)}e.fromUserSettings=o})(Ps||(Ps={}));var ft=(e=>(e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e))(ft||{});function iy(e,t){if(e===0)return null;const n=(e&65535)>>>0,r=(e&4294901760)>>>16;return r!==0?new Ap([Jh(n,t),Jh(r,t)]):new Ap([Jh(n,t)])}function Jh(e,t){const n=!!(e&2048),r=!!(e&256),i=t===zi.Macintosh?r:n,o=!!(e&1024),s=!!(e&512),a=t===zi.Macintosh?n:r,l=e&255;return new x0(i,o,s,a,l)}class x0{constructor(t,n,r,i,o){this.ctrlKey=t,this.shiftKey=n,this.altKey=r,this.metaKey=i,this.keyCode=o}equals(t){return this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){const t=this.ctrlKey?"1":"0",n=this.shiftKey?"1":"0",r=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`${t}${n}${r}${i}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toChord(){return new Ap([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class Ap{constructor(t){if(t.length===0)throw Kk("parts");this.parts=t}getHashCode(){let t="";for(let n=0,r=this.parts.length;n<r;n++)n!==0&&(t+=";"),t+=this.parts[n].getHashCode();return t}equals(t){if(t===null||this.parts.length!==t.parts.length)return!1;for(let n=0;n<this.parts.length;n++)if(!this.parts[n].equals(t.parts[n]))return!1;return!0}}class GF{constructor(t,n,r,i,o,s){this.ctrlKey=t,this.shiftKey=n,this.altKey=r,this.metaKey=i,this.keyLabel=o,this.keyAriaLabel=s}}class YF{}let HI=new Array(230),av=new Array(U.MAX_VALUE);(function(){for(let t=0;t<av.length;t++)av[t]=-1;function e(t,n){HI[t]=n,av[n]=t}e(3,U.PauseBreak),e(8,U.Backspace),e(9,U.Tab),e(13,U.Enter),e(16,U.Shift),e(17,U.Ctrl),e(18,U.Alt),e(19,U.PauseBreak),e(20,U.CapsLock),e(27,U.Escape),e(32,U.Space),e(33,U.PageUp),e(34,U.PageDown),e(35,U.End),e(36,U.Home),e(37,U.LeftArrow),e(38,U.UpArrow),e(39,U.RightArrow),e(40,U.DownArrow),e(45,U.Insert),e(46,U.Delete),e(48,U.KEY_0),e(49,U.KEY_1),e(50,U.KEY_2),e(51,U.KEY_3),e(52,U.KEY_4),e(53,U.KEY_5),e(54,U.KEY_6),e(55,U.KEY_7),e(56,U.KEY_8),e(57,U.KEY_9),e(65,U.KEY_A),e(66,U.KEY_B),e(67,U.KEY_C),e(68,U.KEY_D),e(69,U.KEY_E),e(70,U.KEY_F),e(71,U.KEY_G),e(72,U.KEY_H),e(73,U.KEY_I),e(74,U.KEY_J),e(75,U.KEY_K),e(76,U.KEY_L),e(77,U.KEY_M),e(78,U.KEY_N),e(79,U.KEY_O),e(80,U.KEY_P),e(81,U.KEY_Q),e(82,U.KEY_R),e(83,U.KEY_S),e(84,U.KEY_T),e(85,U.KEY_U),e(86,U.KEY_V),e(87,U.KEY_W),e(88,U.KEY_X),e(89,U.KEY_Y),e(90,U.KEY_Z),e(93,U.ContextMenu),e(96,U.NUMPAD_0),e(97,U.NUMPAD_1),e(98,U.NUMPAD_2),e(99,U.NUMPAD_3),e(100,U.NUMPAD_4),e(101,U.NUMPAD_5),e(102,U.NUMPAD_6),e(103,U.NUMPAD_7),e(104,U.NUMPAD_8),e(105,U.NUMPAD_9),e(106,U.NUMPAD_MULTIPLY),e(107,U.NUMPAD_ADD),e(108,U.NUMPAD_SEPARATOR),e(109,U.NUMPAD_SUBTRACT),e(110,U.NUMPAD_DECIMAL),e(111,U.NUMPAD_DIVIDE),e(112,U.F1),e(113,U.F2),e(114,U.F3),e(115,U.F4),e(116,U.F5),e(117,U.F6),e(118,U.F7),e(119,U.F8),e(120,U.F9),e(121,U.F10),e(122,U.F11),e(123,U.F12),e(124,U.F13),e(125,U.F14),e(126,U.F15),e(127,U.F16),e(128,U.F17),e(129,U.F18),e(130,U.F19),e(144,U.NumLock),e(145,U.ScrollLock),e(186,U.US_SEMICOLON),e(187,U.US_EQUAL),e(188,U.US_COMMA),e(189,U.US_MINUS),e(190,U.US_DOT),e(191,U.US_SLASH),e(192,U.US_BACKTICK),e(193,U.ABNT_C1),e(194,U.ABNT_C2),e(219,U.US_OPEN_SQUARE_BRACKET),e(220,U.US_BACKSLASH),e(221,U.US_CLOSE_SQUARE_BRACKET),e(222,U.US_QUOTE),e(223,U.OEM_8),e(226,U.OEM_102),e(229,U.KEY_IN_COMPOSITION),HF?(e(59,U.US_SEMICOLON),e(107,U.US_EQUAL),e(109,U.US_MINUS),rs&&e(224,U.Meta)):Zh&&(e(91,U.Meta),e(rs?93:92,U.Meta))})();function qF(e){if(e.charCode){let t=String.fromCharCode(e.charCode).toUpperCase();return Ps.fromString(t)}return HI[e.keyCode]||U.Unknown}const QF=rs?ft.WinCtrl:ft.CtrlCmd,XF=ft.Alt,ZF=ft.Shift,JF=rs?ft.CtrlCmd:ft.WinCtrl;class oy{constructor(t){this._standardKeyboardEventBrand=!0;let n=t;this.browserEvent=n,this.target=n.target,this.ctrlKey=n.ctrlKey,this.shiftKey=n.shiftKey,this.altKey=n.altKey,this.metaKey=n.metaKey,this.keyCode=qF(n),this.code=n.code,this.ctrlKey=this.ctrlKey||this.keyCode===U.Ctrl,this.altKey=this.altKey||this.keyCode===U.Alt,this.shiftKey=this.shiftKey||this.keyCode===U.Shift,this.metaKey=this.metaKey||this.keyCode===U.Meta,this._asKeybinding=this._computeKeybinding(),this._asRuntimeKeybinding=this._computeRuntimeKeybinding()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeybinding(){return this._asRuntimeKeybinding}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=U.Unknown;this.keyCode!==U.Ctrl&&this.keyCode!==U.Shift&&this.keyCode!==U.Alt&&this.keyCode!==U.Meta&&(t=this.keyCode);let n=0;return this.ctrlKey&&(n|=QF),this.altKey&&(n|=XF),this.shiftKey&&(n|=ZF),this.metaKey&&(n|=JF),n|=t,n}_computeRuntimeKeybinding(){let t=U.Unknown;return this.keyCode!==U.Ctrl&&this.keyCode!==U.Shift&&this.keyCode!==U.Alt&&this.keyCode!==U.Meta&&(t=this.keyCode),new x0(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}}ev||document.queryCommandSupported&&document.queryCommandSupported("copy")||navigator&&navigator.clipboard&&navigator.clipboard.writeText,ev||navigator&&navigator.clipboard&&navigator.clipboard.readText,ev||KF?0:navigator.keyboard||BI?1:2,"ontouchstart"in window||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0,window.PointerEvent&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0);let jI;(function(){function e(t,n,r){function i(a,l){if(!n[a]){if(!t[a]){var c=typeof require=="function"&&require;if(!l&&c)return c(a,!0);if(o)return o(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var h=n[a]={exports:{}};t[a][0].call(h.exports,function(p){var g=t[a][1][p];return i(g||p)},h,h.exports,e,t,n,r)}return n[a].exports}for(var o=typeof require=="function"&&require,s=0;s<r.length;s++)i(r[s]);return i}return e})()({1:[function(e,t,n){var r=e("./toMap"),i=["background","base","cite","href","longdesc","src","usemap"];t.exports={uris:r(i)}},{"./toMap":10}],2:[function(e,t,n){var r={allowedAttributes:{"*":["title","accesskey"],a:["href","name","target","aria-label"],iframe:["allowfullscreen","frameborder","src"],img:["src","alt","title","aria-label"]},allowedClasses:{},allowedSchemes:["http","https","mailto"],allowedTags:["a","abbr","article","b","blockquote","br","caption","code","del","details","div","em","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","li","main","mark","ol","p","pre","section","span","strike","strong","sub","summary","sup","table","tbody","td","th","thead","tr","u","ul"],filter:null};t.exports=r},{}],3:[function(e,t,n){var r=e("./toMap"),i=["area","br","col","hr","img","wbr","input","base","basefont","link","meta"];t.exports={voids:r(i)}},{"./toMap":10}],4:[function(e,t,n){e("he");var r=e("assignment"),i=e("./parser"),o=e("./sanitizer"),s=e("./defaults");function a(l,c,d){var h=[],p=d===!0?c:r({},s,c),g=o(h,p);return i(l,g),h.join("")}a.defaults=s,t.exports=a,jI=a},{"./defaults":2,"./parser":7,"./sanitizer":8,assignment:6,he:9}],5:[function(e,t,n){t.exports=function(i){return typeof i=="string"?i.toLowerCase():i}},{}],6:[function(e,t,n){function r(i){for(var o=Array.prototype.slice.call(arguments,1),s,a;o.length;){s=o.shift();for(a in s)s.hasOwnProperty(a)&&(Object.prototype.toString.call(i[a])==="[object Object]"?i[a]=r(i[a],s[a]):i[a]=s[a])}return i}t.exports=r},{}],7:[function(e,t,n){var r=e("he"),i=e("./lowercase");e("./attributes");var o=e("./elements"),s=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,a=/^<\s*\/\s*([\w:-]+)[^>]*>/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,c=/^</,d=/^<\s*\//;function h(){var g=[];return g.lastItem=function(){return g[g.length-1]},g}function p(g,b){for(var k=h(),y=g,_;g;)w();N();function w(){_=!0,x();var V=g===y;y=g,V&&(g="")}function x(){g.substr(0,4)==="<!--"?F():d.test(g)?C(a,N):c.test(g)&&C(s,L),M()}function C(V,Y){var J=g.match(V);J&&(g=g.substring(J[0].length),J[0].replace(V,Y),_=!1)}function F(){var V=g.indexOf("-->");V>=0&&(b.comment&&b.comment(g.substring(4,V)),g=g.substring(V+3),_=!1)}function M(){if(_){var V,Y=g.indexOf("<");Y>=0?(V=g.substring(0,Y),g=g.substring(Y)):(V=g,g=""),b.chars&&b.chars(V)}}function L(V,Y,J,H){var D={},T=i(Y),W=o.voids[T]||!!H;J.replace(l,B),W||k.push(T),b.start&&b.start(T,D,W);function B(G,te,re,ae,K){re===void 0&&ae===void 0&&K===void 0?D[te]=void 0:D[te]=r.decode(re||ae||K||"")}}function N(V,Y){var J,H=0,D=i(Y);if(D)for(H=k.length-1;H>=0&&k[H]!==D;H--);if(H>=0){for(J=k.length-1;J>=H;J--)b.end&&b.end(k[J]);k.length=H}}}t.exports=p},{"./attributes":1,"./elements":3,"./lowercase":5,he:9}],8:[function(e,t,n){var r=e("he"),i=e("./lowercase"),o=e("./attributes"),s=e("./elements");function a(l,c){var d,h=c||{};return x(),{start:g,end:b,chars:y};function p(C){l.push(C)}function g(C,F,M){var L=i(C);if(d.ignoring){_(L);return}if((h.allowedTags||[]).indexOf(L)===-1){_(L);return}if(h.filter&&!h.filter({tag:L,attrs:F})){_(L);return}p("<"),p(L),Object.keys(F).forEach(N),p(M?"/>":">");function N(V){var Y=F[V],J=(h.allowedClasses||{})[L]||[],H=(h.allowedAttributes||{})[L]||[];H=H.concat((h.allowedAttributes||{})["*"]||[]);var D,T=i(V);T==="class"&&H.indexOf(T)===-1?(Y=Y.split(" ").filter(W).join(" ").trim(),D=Y.length):D=H.indexOf(T)!==-1&&(o.uris[T]!==!0||k(Y)),D&&(p(" "),p(V),typeof Y=="string"&&(p('="'),p(r.encode(Y)),p('"')));function W(B){return J&&J.indexOf(B)!==-1}}}function b(C){var F=i(C),M=(h.allowedTags||[]).indexOf(F)!==-1;M&&d.ignoring===!1?(p("</"),p(F),p(">")):w(F)}function k(C){var F=C[0];if(F==="#"||F==="/")return!0;var M=C.indexOf(":");if(M===-1)return!0;var L=C.indexOf("?");if(L!==-1&&M>L)return!0;var N=C.indexOf("#");if(N!==-1&&M>N)return!0;return h.allowedSchemes.some(V);function V(Y){return C.indexOf(Y+":")===0}}function y(C){d.ignoring===!1&&p(h.transformText?h.transformText(C):C)}function _(C){s.voids[C]||(d.ignoring===!1?d={ignoring:C,depth:1}:d.ignoring===C&&d.depth++)}function w(C){d.ignoring===C&&--d.depth<=0&&x()}function x(){d={ignoring:!1,depth:0}}}t.exports=a},{"./attributes":1,"./elements":3,"./lowercase":5,he:9}],9:[function(e,t,n){var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},o=/(&amp;|&lt;|&gt;|&quot;|&#39;)/g,s=/[&<>"']/g;function a(h){return r[h]}function l(h){return i[h]}function c(h){return h==null?"":String(h).replace(s,a)}function d(h){return h==null?"":String(h).replace(o,l)}c.options=d.options={},t.exports={encode:c,escape:c,decode:d,unescape:d,version:"1.0.0-browser"}},{}],10:[function(e,t,n){function r(o){return o.reduce(i,{})}function i(o,s){return o[s]=!0,o}t.exports=r},{}]},{},[4]);var eV=jI;class tV{constructor(t,n,r,i){this._node=t,this._type=n,this._handler=r,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function ad(e,t,n,r){return new tV(e,t,n,r)}function j1(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}const Op={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Zh?"webkitAnimationStart":"animationstart",ANIMATION_END:Zh?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Zh?"webkitAnimationIteration":"animationiteration"};class nV extends cs{constructor(t){super(),this._onDidFocus=this._register(new Oe),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new Oe),this.onDidBlur=this._onDidBlur.event;let n=j1(document.activeElement,t),r=!1;const i=()=>{r=!1,n||(n=!0,this._onDidFocus.fire())},o=()=>{n&&(r=!0,window.setTimeout(()=>{r&&(r=!1,n=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{j1(document.activeElement,t)!==n&&(n?o():i())},this._register(H1(t,Op.FOCUS,!0)(i)),this._register(H1(t,Op.BLUR,!0)(o))}refreshState(){this._refreshStateHandler()}}function rV(e){return new nV(e)}CD.setPreferredWebSchema(/^https:/.test(window.location.href)?"https":"http");var jk;(jk=window.trustedTypes)==null||jk.createPolicy("safeInnerHtml",{createHTML(e,t){return eV(e,t)}});var K1;(e=>{function t(n){const r=n;return typeof(r==null?void 0:r.showDirectoryPicker)=="function"}e.supported=t})(K1||(K1={}));class iV extends cs{constructor(t,n){super(),this._onData=new Oe,this.onData=this._onData.event,this._onOpen=this._register(new Oe),this.onOpen=this._onOpen.event,this._onClose=this._register(new Oe),this.onClose=this._onClose.event,this._onError=this._register(new Oe),this.onError=this._onError.event,this._debugLabel=n,this._socket=new WebSocket(t),this.traceSocketEvent(Ho.Created,{type:"BrowserWebSocket",url:t}),this._fileReader=new FileReader,this._queue=[],this._isReading=!1,this._isClosed=!1,this._fileReader.onload=c=>{this._isReading=!1;const d=c.target.result;this.traceSocketEvent(Ho.Read,d),this._onData.fire(d),this._queue.length>0&&r(this._queue.shift())};const r=c=>{if(this._isReading){this._queue.push(c);return}this._isReading=!0,this._fileReader.readAsArrayBuffer(c)};this._socketMessageListener=c=>{const d=c.data;this.traceSocketEvent(Ho.BrowserWebSocketBlobReceived,{type:d.type,size:d.size}),r(d)},this._socket.addEventListener("message",this._socketMessageListener),this._register(ad(this._socket,"open",c=>{this.traceSocketEvent(Ho.Open),this._onOpen.fire()}));let i=null;const o=()=>{const c=i;i=null,this._onError.fire(c)},s=this._register(new MD(o,0)),a=c=>{s.cancel(),i=c,s.schedule()},l=c=>{s.cancel(),i=c,o()};this._register(ad(this._socket,"close",c=>{this.traceSocketEvent(Ho.Close,{code:c.code,reason:c.reason,wasClean:c.wasClean}),this._isClosed=!0,i&&(window.navigator.onLine?c.wasClean?(s.cancel(),o()):l(new Error(c.reason||`WebSocket close with status code ${c.code}`)):l(new Error("Browser is offline"))),this._onClose.fire({code:c.code,reason:c.reason,wasClean:c.wasClean,event:c})})),this._register(ad(this._socket,"error",c=>{this.traceSocketEvent(Ho.Error,{message:c==null?void 0:c.message}),a(c)}))}traceSocketEvent(t,n){kp.traceSocketEvent(this._socket,this._debugLabel,t,n)}send(t){this._isClosed||(this.traceSocketEvent(Ho.Write,t),this._socket.send(t))}close(){this._isClosed=!0,this.traceSocketEvent(Ho.Close),this._socket.close(),this._socket.removeEventListener("message",this._socketMessageListener),this.dispose()}}const oV=new class{create(e,t){return new iV(e,t)}};class sV{traceSocketEvent(t,n){typeof this.socket.traceSocketEvent=="function"?this.socket.traceSocketEvent(t,n):kp.traceSocketEvent(this.socket,this.debugLabel,t,n)}constructor(t,n){this.socket=t,this.debugLabel=n}dispose(){this.socket.close()}onData(t){return this.socket.onData(n=>t(wn.wrap(new Uint8Array(n))))}onClose(t){const n=r=>{t(typeof r>"u"?r:{type:_I.WebSocketCloseEvent,code:r.code,reason:r.reason,wasClean:r.wasClean,event:r.event})};return this.socket.onClose(n)}onEnd(t){return cs.None}write(t){this.socket.send(t.buffer)}end(){this.socket.close()}drain(){return Promise.resolve()}}class aV{constructor(t){this._webSocketFactory=t||oV}connect(t,n,r,i,o){const s=/^https:/.test(window.location.href)?"wss":"ws",a=this._webSocketFactory.create(`${s}://${/:/.test(t)?`[${t}]`:t}:${n}${r}?${i}`,o);return new Promise((l,c)=>{const d=a.onError(h=>c(h));a.onOpen(()=>{d.dispose(),l(new sV(a,o))})})}}const sy=en("remotesManager");class lV{constructor(t){this.channel=t}init(){return this.channel.call("init")}create(t){return this.channel.call("create",[t])}delete(t){return this.channel.call("delete",[t])}tokens(){return this.channel.call("tokens")}test(t){throw new Error("Invalid")}}const KI=en("personTokenService");function cV(e,t){const n=new Set,r=[];function i(o){n.has(En.decode(o.id).toString())||(r.push(o),n.add(En.decode(o.id).toString()))}return e.forEach(o=>i(o)),t.forEach(o=>i(o)),r.sort((o,s)=>En.compare(o.id,s.id))}const zl=class{constructor(e){this._onModelChanged=new Oe,this.onModelChanged=this._onModelChanged.event,this.doc=new DI(e)}get metadata(){return{fileId:this.id,modelType:zl.ModelType,schema:zl.Schema}}get id(){return this.doc.getMap("website").get("id")}get operations(){return this.doc.operations}get actorId(){return this.doc.actorId}get version(){return this.doc.version}get ext(){return this.doc.getMap("website").get("ext")}set ext(e){if(typeof e!="string")throw new Error("ext should be string");const t=this.doc.getMap("website");e!==t.get("ext")&&(this.doc.getMap("website").set("ext",e),this.fireChange())}static from(e){if(e.length===0)throw new Error("operations should not be empty");return new zl(e)}static create(e){const t=new zl([]),n=t.doc.getMap("website");return n.set("createTime",e.createTime),n.set("firstAddTime",e.firstAddTime),n.set("id",e.id),n.set("title",e.title),e.link&&n.set("link",e.link),n.set("excerpt",e.excerpt),n.set("size",e.size),n.set("ext",e.ext),t}patch(e){return Object.keys(e.previousVersion).forEach(t=>{if(typeof this.doc.version[t]!="number")throw new Error("can't merge");if(e.previousVersion[t]>this.doc.version[t])throw new Error("can't merge")}),zl.from(cV(this.doc.operations,e.operations))}getProperty(){const e=this.doc.getMap("website"),t=e.get("id"),n=e.get("firstAddTime"),r=e.get("createTime"),i=e.get("deleted")??!1,o=e.get("title"),s=e.get("ext"),a=e.get("excerpt"),l=e.get("link"),c=e.get("size"),d=e.get("liked")??!1,h=e.get("read")??!1,p=this.labels;return{id:t,liked:d,firstAddTime:n,createTime:r,deleted:i,title:o,ext:s,excerpt:a,link:l,size:c,read:h,labels:p}}addLabel(e){this.checkLabel(e),!this.labels.includes(e)&&(this.doc.getArray("webpage.labels").push(e),this.fireChange())}set labels(e){e.forEach(o=>this.checkLabel(o));const t=this.labels,n=e,r=t.filter(o=>!n.includes(o)),i=n.filter(o=>!t.includes(o));for(const o of r)this.doDeleteLabel(o);for(const o of i)this.doc.getArray("webpage.labels").push(o);this.fireChange()}get labels(){const e=this.doc.getArray("webpage.labels").toJS();return Array.from(new Set(e))}checkLabel(e){if(typeof e!="string")throw new Error("label should be string");if(e!==e.trim())throw new Error("should trim label before add");if(!e)throw new Error("label should not be empty")}doDeleteLabel(e){const t=this.doc.getArray("webpage.labels").toJS();for(let n=t.length-1;n>=0;n--)t[n]===e&&this.doc.getArray("webpage.labels").remove(n)}deleteLabel(e){this.doDeleteLabel(e),this.fireChange()}get title(){return this.doc.getMap("website").get("title")}set title(e){if(typeof e!="string")throw new Error("title should be string");const t=this.doc.getMap("website");e!==t.get("title")&&(t.set("title",e),this.fireChange())}get excerpt(){return this.doc.getMap("website").get("excerpt")}set excerpt(e){if(typeof e!="string")throw new Error("excerpt should be string");const t=this.doc.getMap("website");t.get("excerpt")!==e&&(t.set("excerpt",e),this.fireChange())}get read(){return this.doc.getMap("website").get("read")??!1}set read(e){if(typeof e!="boolean")throw new Error("read should be boolean");const t=this.doc.getMap("website");t.get("read")!==e&&(t.set("read",e),this.fireChange())}get link(){return this.doc.getMap("website").get("link")??""}set link(e){if(typeof e!="string")throw new Error("link should be string");const t=this.doc.getMap("website");t.get("link")!==e&&(t.set("link",e),this.fireChange())}get liked(){return this.doc.getMap("website").get("liked")??!1}set liked(e){if(typeof e!="boolean")throw new Error("liked should be boolean");if(e===this.liked)return;this.doc.getMap("website").set("liked",e),this.fireChange()}get highlights(){return this.doc.getArray("highlight").toJS().map(t=>{const n=t.get("type");switch(n){case 1:return{highlightId:t.structureName,type:n,marker:JSON.parse(t.get("marker")),note:t.get("note"),text:t.get("text"),tenThousandth:t.get("tenThousandth"),editTime:t.lastOperationTime};default:{/* istanbul ignore next -- @preserve */throw new Error("highlightType must be 1")}}})}updateHighlightNote(e,t){this.doc.getMap(e).get("note")!==t&&(this.doc.getMap(e).set("note",t),this.fireChange())}updateTenThousandth(e){let t=!1;const n=new Set(this.doc.getArray("highlight").toJS().map(r=>r.structureName));for(const r of e)if(n.has(r.id)){const i=this.doc.getMap(r.id),o=i.get("tenThousandth");typeof r.tenThousandth=="number"&&o!==r.tenThousandth&&(t=!0,i.set("tenThousandth",r.tenThousandth))}t&&this.fireChange()}deleteHighlight(e){const n=this.doc.getArray("highlight").toJS().findIndex(r=>r.structureName===e);this.doc.getArray("highlight").remove(n),this.fireChange()}get deleted(){return this.doc.getMap("website").get("deleted")??!1}set deleted(e){if(typeof e!="boolean")throw new Error("liked should be boolean");if(e===this.deleted)return;this.doc.getMap("website").set("deleted",!!e),this.fireChange()}addHighlight({marker:e,text:t,note:n,tenThousandth:r}){const i=this.doc.getMap();return i.set("type",1),i.set("marker",JSON.stringify(e)),i.set("text",t),typeof n<"u"&&n&&i.set("note",n),typeof r<"u"&&i.set("tenThousandth",r),this.doc.getArray("highlight").push(i),this.fireChange(),i.structureName}fireChange(e=!1){this._onModelChanged.fire({auto:e})}};let Og=zl;Og.Schema="1.1.0";Og.ModelType="website";class uV{constructor(t){this.channel=t,this.onWebpageChange=this.channel.listen("onWebpageChange")}init(){return this.channel.call("init")}createByFile(t,n,r){return this.channel.call("createByFile",[t,n,r])}update(t,n){return this.channel.call("update",[t,n])}getContent(t){return this.channel.call("getContent",[t])}search(t){return this.channel.call("search",[t])}publicSearch(t){throw new Error("Method not implemented.")}list(t){return this.channel.call("list",[t])}listWithContent(){throw new Error("Method not implemented.")}setModel(t){throw new Error("Method not implemented.")}async getModel(t){const n=await this.channel.call("getModel",[t]);return n?Og.from(n):null}create(t,n,r){throw new Error("Method not implemented.")}}const cf=en("IWebsiteService"),GI=en("workspaceService"),dV="view.action.openFilter",fV="view.action.saveFilter",hV="view.action.closeFilter",pV="view.action.filterSelectNext",gV="view.action.filterSelectPrevious",mV="sleSelectionWidget.action.selectNext",vV="sleSelectionWidget.action.selectPrevious",_V="sleSelectionWidget.action.complete",yV="sleSelectionWidget.action.cancel",YI="sleSelectionWidget.action.FilterCLear",bV="view.action.pickDesc",Pg=new At("viewPanelVisible",!1),qI=new At("filterChanged",!1),k0=new At("WebpageFilterPanelVisible",!0),uf=new At("selectWidgetVisible",!1),df=new At("filterMainWidgetVisible",!1);class G1{constructor(t){this._onDidChange=new Oe,this.onDidChange=this._onDidChange.event,this.view=t}get filters(){return this.view.filters}get match(){return this.view.match}get sortBy(){return this.view.sortBy}get limit(){return{enabled:this.view.enableLimit,count:this.view.limit}}toggleMatch(){this.view.match==="and"?this.view.match="or":this.view.match="and",this._onDidChange.fire()}addFilter(t){return this.view.addFilter(t),this._onDidChange.fire(),this.filters.length-1}updateSort(t){this.view.sortBy=t,this._onDidChange.fire()}updateLimit(t){this.view.limit=t.count,this.view.enableLimit=t.enabled,this._onDidChange.fire()}updateFilter(t,n){this.view.updateFilter(t,n),this._onDidChange.fire()}getFilter(t){return this.view.getFilter(t)}deleteFilter(t){this.view.deleteFilter(t),this._onDidChange.fire()}empty(){for(;this.view.filters.length>0;)this.view.deleteFilter(0);this._onDidChange.fire()}}var xt=(e=>(e[e.constant=0]="constant",e[e.select=1]="select",e[e.multiple_selection=2]="multiple_selection",e))(xt||{});class pa{constructor(t){this.options=t}get key(){return this.options.descriptor.key}getDescriptor(t){const n=this.options;switch(n.type){case xt.constant:return n.loadData(t),n.descriptor;case xt.multiple_selection:{const{selections:r}=n.getData(t);return{...n.descriptor,selections:r,getRightOperandProps:n.createGetRightOperandProps(r)}}case xt.select:{const r=n.getRightOperands(t);return{...n.descriptor,rightOperands:r,getRightOperandLabel:n.createGetRightOperandLabel(r)}}}}getFilter(t){return this.options.getFilter(t)}}class SV extends pa{constructor(){const t=[{label:z("filter_operator.is","is"),value:0},{label:z("filter_operator.is_not","is not"),value:1},{label:z("filter_operator.is_more_than","is more than"),value:2},{label:z("filter_operator.is_less_than","is less than"),value:3}];super({type:xt.select,descriptor:{type:xt.select,label:z("annotate_count_filter_operator.annotate_count","Annotate Count"),key:"annotation",leftOperandLabel:z("annotate_count_filter_operator.annotate_count","Annotate Count"),operators:t,initValue(n){return{type:xt.select,key:"annotation",operator:0,rightOperand:n}},getOperatorLabel(n){const r=t.find(i=>i.value===n.operator);return r?r.label:t[0].label},changeOperator:n=>{let r=t.findIndex(i=>i.value===n.operator);return r=r+1,r>=t.length&&(r=0),{...n,operator:t[r].value}}},createGetRightOperandLabel(n){return r=>{const i=n.find(o=>o.count===r.rightOperand);return i?i.labels:`${r.rightOperand}`}},getRightOperands:n=>{const r=new Set;return n.forEach(i=>r.add(i.annotateCount)),Array.from(r.values()).sort().reverse().map(i=>({labels:`${i}`,count:i}))},getFilter:n=>r=>{switch(n.operator){case 0:return r.annotateCount===n.rightOperand;case 1:return r.annotateCount!==n.rightOperand;case 2:return r.annotateCount>n.rightOperand;case 3:return r.annotateCount<n.rightOperand;default:return r.annotateCount===n.rightOperand}}})}}var QI={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Mg,function(){var n=1e3,r=6e4,i=36e5,o="millisecond",s="second",a="minute",l="hour",c="day",d="week",h="month",p="quarter",g="year",b="date",k="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},x=function(D,T,W){var B=String(D);return!B||B.length>=T?D:""+Array(T+1-B.length).join(W)+D},C={s:x,z:function(D){var T=-D.utcOffset(),W=Math.abs(T),B=Math.floor(W/60),G=W%60;return(T<=0?"+":"-")+x(B,2,"0")+":"+x(G,2,"0")},m:function D(T,W){if(T.date()<W.date())return-D(W,T);var B=12*(W.year()-T.year())+(W.month()-T.month()),G=T.clone().add(B,h),te=W-G<0,re=T.clone().add(B+(te?-1:1),h);return+(-(B+(W-G)/(te?G-re:re-G))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:h,y:g,w:d,d:c,D:b,h:l,m:a,s,ms:o,Q:p}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},F="en",M={};M[F]=w;var L=function(D){return D instanceof J},N=function D(T,W,B){var G;if(!T)return F;if(typeof T=="string"){var te=T.toLowerCase();M[te]&&(G=te),W&&(M[te]=W,G=te);var re=T.split("-");if(!G&&re.length>1)return D(re[0])}else{var ae=T.name;M[ae]=T,G=ae}return!B&&G&&(F=G),G||!B&&F},V=function(D,T){if(L(D))return D.clone();var W=typeof T=="object"?T:{};return W.date=D,W.args=arguments,new J(W)},Y=C;Y.l=N,Y.i=L,Y.w=function(D,T){return V(D,{locale:T.$L,utc:T.$u,x:T.$x,$offset:T.$offset})};var J=function(){function D(W){this.$L=N(W.locale,null,!0),this.parse(W)}var T=D.prototype;return T.parse=function(W){this.$d=function(B){var G=B.date,te=B.utc;if(G===null)return new Date(NaN);if(Y.u(G))return new Date;if(G instanceof Date)return new Date(G);if(typeof G=="string"&&!/Z$/i.test(G)){var re=G.match(y);if(re){var ae=re[2]-1||0,K=(re[7]||"0").substring(0,3);return te?new Date(Date.UTC(re[1],ae,re[3]||1,re[4]||0,re[5]||0,re[6]||0,K)):new Date(re[1],ae,re[3]||1,re[4]||0,re[5]||0,re[6]||0,K)}}return new Date(G)}(W),this.$x=W.x||{},this.init()},T.init=function(){var W=this.$d;this.$y=W.getFullYear(),this.$M=W.getMonth(),this.$D=W.getDate(),this.$W=W.getDay(),this.$H=W.getHours(),this.$m=W.getMinutes(),this.$s=W.getSeconds(),this.$ms=W.getMilliseconds()},T.$utils=function(){return Y},T.isValid=function(){return this.$d.toString()!==k},T.isSame=function(W,B){var G=V(W);return this.startOf(B)<=G&&G<=this.endOf(B)},T.isAfter=function(W,B){return V(W)<this.startOf(B)},T.isBefore=function(W,B){return this.endOf(B)<V(W)},T.$g=function(W,B,G){return Y.u(W)?this[B]:this.set(G,W)},T.unix=function(){return Math.floor(this.valueOf()/1e3)},T.valueOf=function(){return this.$d.getTime()},T.startOf=function(W,B){var G=this,te=!!Y.u(B)||B,re=Y.p(W),ae=function(ie,fe){var ge=Y.w(G.$u?Date.UTC(G.$y,fe,ie):new Date(G.$y,fe,ie),G);return te?ge:ge.endOf(c)},K=function(ie,fe){return Y.w(G.toDate()[ie].apply(G.toDate("s"),(te?[0,0,0,0]:[23,59,59,999]).slice(fe)),G)},R=this.$W,O=this.$M,j=this.$D,Z="set"+(this.$u?"UTC":"");switch(re){case g:return te?ae(1,0):ae(31,11);case h:return te?ae(1,O):ae(0,O+1);case d:var le=this.$locale().weekStart||0,ee=(R<le?R+7:R)-le;return ae(te?j-ee:j+(6-ee),O);case c:case b:return K(Z+"Hours",0);case l:return K(Z+"Minutes",1);case a:return K(Z+"Seconds",2);case s:return K(Z+"Milliseconds",3);default:return this.clone()}},T.endOf=function(W){return this.startOf(W,!1)},T.$set=function(W,B){var G,te=Y.p(W),re="set"+(this.$u?"UTC":""),ae=(G={},G[c]=re+"Date",G[b]=re+"Date",G[h]=re+"Month",G[g]=re+"FullYear",G[l]=re+"Hours",G[a]=re+"Minutes",G[s]=re+"Seconds",G[o]=re+"Milliseconds",G)[te],K=te===c?this.$D+(B-this.$W):B;if(te===h||te===g){var R=this.clone().set(b,1);R.$d[ae](K),R.init(),this.$d=R.set(b,Math.min(this.$D,R.daysInMonth())).$d}else ae&&this.$d[ae](K);return this.init(),this},T.set=function(W,B){return this.clone().$set(W,B)},T.get=function(W){return this[Y.p(W)]()},T.add=function(W,B){var G,te=this;W=Number(W);var re=Y.p(B),ae=function(O){var j=V(te);return Y.w(j.date(j.date()+Math.round(O*W)),te)};if(re===h)return this.set(h,this.$M+W);if(re===g)return this.set(g,this.$y+W);if(re===c)return ae(1);if(re===d)return ae(7);var K=(G={},G[a]=r,G[l]=i,G[s]=n,G)[re]||1,R=this.$d.getTime()+W*K;return Y.w(R,this)},T.subtract=function(W,B){return this.add(-1*W,B)},T.format=function(W){var B=this,G=this.$locale();if(!this.isValid())return G.invalidDate||k;var te=W||"YYYY-MM-DDTHH:mm:ssZ",re=Y.z(this),ae=this.$H,K=this.$m,R=this.$M,O=G.weekdays,j=G.months,Z=function(fe,ge,we,Ne){return fe&&(fe[ge]||fe(B,te))||we[ge].slice(0,Ne)},le=function(fe){return Y.s(ae%12||12,fe,"0")},ee=G.meridiem||function(fe,ge,we){var Ne=fe<12?"AM":"PM";return we?Ne.toLowerCase():Ne},ie={YY:String(this.$y).slice(-2),YYYY:this.$y,M:R+1,MM:Y.s(R+1,2,"0"),MMM:Z(G.monthsShort,R,j,3),MMMM:Z(j,R),D:this.$D,DD:Y.s(this.$D,2,"0"),d:String(this.$W),dd:Z(G.weekdaysMin,this.$W,O,2),ddd:Z(G.weekdaysShort,this.$W,O,3),dddd:O[this.$W],H:String(ae),HH:Y.s(ae,2,"0"),h:le(1),hh:le(2),a:ee(ae,K,!0),A:ee(ae,K,!1),m:String(K),mm:Y.s(K,2,"0"),s:String(this.$s),ss:Y.s(this.$s,2,"0"),SSS:Y.s(this.$ms,3,"0"),Z:re};return te.replace(_,function(fe,ge){return ge||ie[fe]||re.replace(":","")})},T.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},T.diff=function(W,B,G){var te,re=Y.p(B),ae=V(W),K=(ae.utcOffset()-this.utcOffset())*r,R=this-ae,O=Y.m(this,ae);return O=(te={},te[g]=O/12,te[h]=O,te[p]=O/3,te[d]=(R-K)/6048e5,te[c]=(R-K)/864e5,te[l]=R/i,te[a]=R/r,te[s]=R/n,te)[re]||R,G?O:Y.a(O)},T.daysInMonth=function(){return this.endOf(h).$D},T.$locale=function(){return M[this.$L]},T.locale=function(W,B){if(!W)return this.$L;var G=this.clone(),te=N(W,B,!0);return te&&(G.$L=te),G},T.clone=function(){return Y.w(this.$d,this)},T.toDate=function(){return new Date(this.valueOf())},T.toJSON=function(){return this.isValid()?this.toISOString():null},T.toISOString=function(){return this.$d.toISOString()},T.toString=function(){return this.$d.toUTCString()},D}(),H=J.prototype;return V.prototype=H,[["$ms",o],["$s",s],["$m",a],["$H",l],["$W",c],["$M",h],["$y",g],["$D",b]].forEach(function(D){H[D[1]]=function(T){return this.$g(T,D[0],D[1])}}),V.extend=function(D,T){return D.$i||(D(T,J,V),D.$i=!0),V},V.locale=N,V.isDayjs=L,V.unix=function(D){return V(1e3*D)},V.en=M[F],V.Ls=M,V.p={},V})})(QI);var wV=QI.exports;const Oo=rl(wV);var XI=(e=>(e[e.day_1=0]="day_1",e[e.week_1=1]="week_1",e[e.month_1=2]="month_1",e[e.day_2=3]="day_2",e[e.week_2=4]="week_2",e[e.month_2=5]="month_2",e))(XI||{}),ZI=(e=>(e[e.before=0]="before",e[e.after=1]="after",e))(ZI||{});const EV=[{label:"after",value:1},{label:"before",value:0}],CV=[{labels:z("add_time_filter_right_operands.today","Today"),count:0},{labels:z("add_time_filter_right_operands.yesterday","Yesterday"),count:3},{labels:z("add_time_filter_right_operands.this_week","This week"),count:1},{labels:z("add_time_filter_right_operands.last_week","Last week"),count:4},{labels:z("add_time_filter_right_operands.this_month","This month"),count:2},{labels:z("add_time_filter_right_operands.last_month","Last month"),count:5}];class xV extends pa{constructor(){super({type:xt.select,descriptor:{type:xt.select,label:z("add_time_filter_label.date_added","Date Added"),key:"first-add-time",leftOperandLabel:z("add_time_filter_left_operand.date_added","Date Added"),operators:EV,initValue(t){return{type:xt.select,key:"first-add-time",operator:1,rightOperand:t}},getOperatorLabel(t){switch(t.operator){default:case 1:return z("add_time_filter_left_operator.after","after");case 0:return z("add_time_filter_left_operator.before","before")}},changeOperator:t=>{let n;switch(t.operator){default:case 1:{n=0;break}case 0:{n=1;break}}return{...t,operator:n}}},createGetRightOperandLabel(t){return n=>{const r=t.find(i=>i.count===n.rightOperand);return r?r.labels:t[0].labels}},getRightOperands:()=>CV,getFilter:t=>{const n=this.currentTime;return r=>{let i=n();switch(t.rightOperand){default:case 0:{i=i.startOf("day");break}case 3:{i=i.startOf("day").add(-1,"day");break}case 1:{i=i.startOf("week");break}case 4:{i=i.startOf("week").add(-1,"week");break}case 2:{i=i.startOf("month");break}case 5:{i=i.startOf("month").add(-1,"month");break}}switch(t.operator){case 0:return r.firstAddTime<=i.valueOf();case 1:return r.firstAddTime>=i.valueOf();default:{/* istanbul ignore next -- @preserve */return r.firstAddTime<=i.valueOf()}}}}})}currentTime(){return Oo()}}class kV extends pa{constructor(){const t=[{label:z("host_filter_operator.is_either_of","is either of"),value:!0},{label:z("host_filter_operator.is_not","is not"),value:!1}],n=[{label:z("host_filter_operator.is","is"),value:!0},{label:z("host_filter_operator.is_not","is not"),value:!1}];super({type:xt.multiple_selection,descriptor:{getOperatorLabel:r=>r.rightOperand.length>1?t.find(i=>i.value===r.operator).label:n.find(i=>i.value===r.operator).label,changeOperator:r=>({...r,operator:!r.operator}),type:xt.multiple_selection,label:z("host_filter_label.host","Host"),key:"host",leftOperandLabel:z("host_filter_left_operand.host","Host")},getData:r=>{const i=new Set;return r.filter(s=>s.link).forEach(s=>{try{i.add(new URL(s.link).host)}catch{}}),{selections:Array.from(i.values())}},createGetRightOperandProps:()=>r=>{const i=r.rightOperand.join(",");let o;return r.rightOperand.length!==1?o=`${r.rightOperand.length} hosts`:o=r.rightOperand[0],{title:i,label:o}},getFilter:r=>i=>{let o=null;if(i.link)try{o=new URL(i.link).host}catch{}return r.operator?o?r.rightOperand.includes(o):!1:o?!r.rightOperand.includes(o):!0}})}}function lv(e){return[0,1,3,2].includes(e)?e:0}function IV(e){return[0,1].includes(e)?2:0}class RV extends pa{constructor(){const t=[{label:z("label_filter_operator.includes_all_of","includes all of"),value:0},{label:z("label_filter_operator.includes_any_of","includes any of"),value:1},{label:z("label_filter_operator.exclude_if_all","exclude if all"),value:3},{label:z("label_filter_operator.exclude_if_any_of","exclude if any of"),value:2}],n=[{label:z("label_filter_operator.includes","includes"),value:0},{label:z("label_filter_operator.includes","includes"),value:1},{label:z("label_filter_operator.does_not_include","does not include"),value:3},{label:z("label_filter_operator.does_not_include","does not include"),value:2}],r=[{label:z("label_filter_operator.has","has"),value:0},{label:z("label_filter_operator.has","has"),value:1},{label:z("label_filter_operator.not_has","does not has"),value:3},{label:z("label_filter_operator.not_has","does not has"),value:2}];super({type:xt.multiple_selection,descriptor:{getOperatorLabel:i=>{let o=lv(i.operator);const s=i.rightOperand.length>1,a=i.rightOperand.length===0;return s?t.find(l=>l.value===o).label:a?r.find(l=>l.value===o).label:n.find(l=>l.value===o).label},changeOperator:i=>{let o=lv(i.operator);return i.rightOperand.length>1?o=(o+1)%4:o=IV(o),{...i,operator:o}},type:xt.multiple_selection,label:z("label_filter_label.label","Label"),key:"label",leftOperandLabel:z("label_filter_left_operand.label","Label")},getData:i=>{const o=new Set;return i.filter(a=>a.labels.length>0).forEach(a=>{a.labels.forEach(l=>{o.add(l)})}),{selections:Array.from(o.values())}},createGetRightOperandProps:()=>i=>{let o=i.rightOperand.join(","),s;return i.rightOperand.length===0?(s=z("label_filter_label.any_label","any label"),o=s):i.rightOperand.length===1?s=i.rightOperand[0]:i.rightOperand.length<3?s=i.rightOperand.join(","):s=z("label_filter_label.labels_count","{0} labels",i.rightOperand.length),{title:o,label:s}},getFilter:i=>{const o=i.rightOperand,s=lv(i.operator);return a=>{if(o.length===0)switch(s){case 0:case 1:return a.labels.length!==0;case 3:case 2:return a.labels.length===0}switch(s){case 0:return o.every(l=>a.labels.includes(l));case 1:return o.some(l=>a.labels.includes(l));case 3:return o.every(l=>!a.labels.includes(l));case 2:return o.some(l=>!a.labels.includes(l))}}}})}}class MV extends pa{constructor(){super({type:xt.constant,descriptor:{type:xt.constant,label:z("like_filter.like","Liked"),key:"liked",leftOperandLabel:z("like_filter_left_operand.page","Page"),equalOperatorLabel:z("like_filter_operator.is","is"),inequalityOperatorLabel:z("like_filter_operator.is_not","is not"),rightOperandLabel:z("like_filter.like","Liked")},loadData:()=>{},getFilter:t=>n=>!!n.liked===t.operator})}}class TV extends pa{constructor(){super({type:xt.constant,descriptor:{type:xt.constant,label:z("link_duplicate_filter.link_duplicate","Link Duplicate"),key:"link-duplicate",leftOperandLabel:z("link_duplicate_filter_left_operand.link","Link"),equalOperatorLabel:z("link_duplicate_filter_operator.is","is"),inequalityOperatorLabel:z("link_duplicate_filter_operator.is_not","is not"),rightOperandLabel:z("link_duplicate_filter_right_operand.duplicate","Duplicate")},getFilter:t=>n=>{const r=!!n.link&&(this.count.get(n.link)??0)>1;return t.operator?r:!r},loadData:t=>{this.count=new Map,t.forEach(n=>{if(n.link){const r=this.count.get(n.link)??0;this.count.set(n.link,r+1)}})}}),this.count=new Map}}class LV extends pa{constructor(){super({type:xt.constant,descriptor:{type:xt.constant,label:z("read_status_filter.read_status","Read Status"),key:"read-status",leftOperandLabel:z("read_status_filter_left_operand.page","Page"),equalOperatorLabel:z("read_status_filter_operator.is","is"),inequalityOperatorLabel:z("read_status_filter_operator.is_not","is not"),rightOperandLabel:z("read_status_filter_right_operand.read","Read")},loadData:()=>{},getFilter:t=>n=>!!n.read===t.operator})}}class AV extends pa{constructor(){super({type:xt.constant,descriptor:{type:xt.constant,label:z("title_duplicate_filter.title_duplicate","Title Duplicate"),key:"title-duplicate",leftOperandLabel:z("title_duplicate_filter_left_operand.title","Title"),equalOperatorLabel:z("title_duplicate_filter_operator.is","is"),inequalityOperatorLabel:z("title_duplicate_filter_operator.is_not","is not"),rightOperandLabel:z("title_duplicate_filter_right_operand.duplicate","Duplicate")},getFilter:t=>n=>{const r=!!n.title&&(this.count.get(n.title)??0)>1;return t.operator?r:!r},loadData:t=>{this.count=new Map,t.forEach(n=>{if(n.title){const r=this.count.get(n.title)??0;this.count.set(n.title,r+1)}})}}),this.count=new Map}}class OV{constructor(t){this.factory=t}getFilterDesc(t){return this.factory.map(n=>n.getDescriptor(t))}getItem(t){const n=this.factory.find(r=>r.key===t.key);return n?n.getFilter(t):()=>!0}getModelFilter(t){const n=t.filters.map(r=>this.getItem(r));return r=>{switch(t.match){case"and":return n.every(i=>i(r));case"or":return n.some(i=>i(r));default:{/* istanbul ignore next -- @preserve */return n.every(i=>i(r))}}}}filterWebpages(t,n){if(!t)return n;const r=this.getModelFilter(t);let i=n.filter(s=>r(s));const o=s=>{if(s.length===1)return s;const a=Math.floor(Math.random()*s.length);return[s[a],...o(s.filter((l,c)=>c!=a))]};switch(t.sortBy){case qr.add_time_asc:{i.sort((s,a)=>s.firstAddTime-a.firstAddTime);break}case qr.add_time_desc:{i.sort((s,a)=>-s.firstAddTime+a.firstAddTime);break}case qr.annotate_count_asc:{i.sort((s,a)=>s.annotateCount-a.annotateCount);break}case qr.annotate_count_desc:{i.sort((s,a)=>-s.annotateCount+a.annotateCount);break}case qr.title_asc:{i.sort((s,a)=>s.title.localeCompare(a.title));break}case qr.title_desc:{i.sort((s,a)=>-s.title.localeCompare(a.title));break}case qr.random:{i=o(i);break}}return t.limit.enabled&&t.limit.count&&(i=i.slice(0,t.limit.count)),i}}const ep=new OV([new kV,new MV,new SV,new xV,new TV,new AV,new LV,new RV]);class JI{constructor(){this._rightPanel=null,this._onStatusChange=new Oe,this.onStatusChange=this._onStatusChange.event}get rightPanel(){return this._rightPanel}toggleRightPanel(t){this._rightPanel===t?this._rightPanel=null:this._rightPanel=t,this._onStatusChange.fire()}}const Ng=en("apiServerStatusService");function eR(e,t,n){let r;return t.port?r=`${t.protocol}//${t.hostname}:${t.port}`:r=`${t.protocol}//${t.hostname}`,e===Td.selfhosted?n.ip&&["localhost","127.0.0.1"].includes(t.hostname)?`http://${n.ip}:${t.port}`:r:e===Td.desktop?n.ip?`http://${n.ip}:${n.port}`:`http://localhost:${n.port}`:r}const ga=en("historyService");var PV=Object.defineProperty,NV=Object.getOwnPropertyDescriptor,DV=(e,t,n,r)=>{for(var i=r>1?void 0:r?NV(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&PV(t,n,i),i},FV=(e,t)=>(n,r)=>t(n,r,e);const Yn=en("pageInstanceService");let ay=class{constructor(e){this.historyService=e,this.map=new Map,this._onPageChange=new Oe,this.onPageInstanceChange=this._onPageChange.event,this._pageInstance=null,this.historyService.onPopState(()=>{this.loadPage()})}get pageInstance(){if(!this._pageInstance)throw new Error("pageInstance is null");return this._pageInstance}async go(e,t){const n=this.map.get(e);n&&this.updateInstance(await n.createInstance(t))}updateInstance(e){if(e){if(this._pageInstance)if(this._pageInstance!==e)this._pageInstance.hide();else return;this._pageInstance=e,this._onPageChange.fire()}}async loadPage(){const e=this.map.get(this.historyService.pageName);e&&this.updateInstance(await e.init())}async init(e){this.map=new Map;for(const r of e)this.map.set(r.name,r.page);const t=this.map.get(this.historyService.pageName);if(t){const r=await t.init();if(r){this.updateInstance(r);return}}const n=e[0].page;this._pageInstance=await n.createInstance({})}};ay=DV([FV(0,ga)],ay);new At("isMac",rs,"Whether the operating system is macOS");new At("isLinux",eI,"Whether the operating system is Linux");new At("isWindows",ra,"Whether the operating system is Windows");new At("isWeb",sf,"Whether the platform is a web browser");new At("isMacNative",rs&&!sf,"Whether the operating system is macOS on a non-browser platform");new At("isDevelopment",!1,!0);const Dg="inputFocus",I0=new At(Dg,!1,"Whether keyboard focus is inside an input box"),tR=new At("ListFocused",!1),Fg=Lt.and(tR,Lt.not(Dg)),Vg=new At("listHasSelectionOrFocus",!1),VV="list.action.selectNext",UV="list.action.selectPrevious",$V="list.action.deleteSelect";var js=(e=>(e[e.dom=0]="dom",e[e.command=1]="command",e))(js||{});class nR{constructor(t){this.childrenListService=t,this.isFocused=!1,this._onFocus=new Oe,this.onFocus=this._onFocus.event,this._onBlur=new Oe,this.onBlur=this._onBlur.event,this._onSelectItemChange=new Oe,this.onSelectItemChange=this._onSelectItemChange.event,this._onItemDelete=new Oe,this.onItemDelete=this._onItemDelete.event,this.scopedContextKeyService=null,this.listFocusedContext=null,this._scrollStatus=null,this.onSelectItemChange(n=>{this.scrollStatus&&!this.scrollStatus.elements.has(n.selectItem.id)&&this.setScrollStatus(null)})}get currentItemId(){throw new Error("Not implemented")}get items(){throw new Error("Not implemented")}get scrollStatus(){return this._scrollStatus}setScrollStatus(t){this._scrollStatus=t}blur(t){this.updateFocusStatus(!1),this._onBlur.fire(t)}focus(t){this._onFocus.fire(t),this.updateFocusStatus(!0),this.childrenListService.updateFocus(this)}updateFocusStatus(t){this.isFocused=t,this.listFocusedContext&&this.listFocusedContext.set(t)}bindTo(t){return this.scopedContextKeyService=t,this.listFocusedContext=tR.bindTo(this.scopedContextKeyService),this.listFocusedContext.set(this.isFocused),{dispose:()=>{this.listFocusedContext=null,t.dispose(),this.scopedContextKeyService=null}}}}const Wc=en("listService");class WV{constructor(){this.focus=null}getFocusList(){return this.focus}updateFocus(t){this.focus=t}}var Ku=(e=>(e[e.dom=0]="dom",e[e.command=1]="command",e))(Ku||{}),zV=Object.defineProperty,BV=Object.getOwnPropertyDescriptor,R0=(e,t,n,r)=>{for(var i=r>1?void 0:r?BV(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&zV(t,n,i),i},HV=(e,t)=>(n,r)=>t(n,r,e);let Xa=class extends nR{constructor(e){super(e),this.listService=e,this.list=[],this.WorkbenchListHasSelectionOrFocus=null,this.selectId=null}get items(){return this.list}get currentItemId(){return this.selectId}get currentIndex(){return this.list.findIndex(e=>e.id===this.selectId)}select(e,t){var r,i;this.selectId=e,t!=null&&t.selectOnly||this.focus(js.command);const n=this.items.find(o=>o.id===e);n?((r=this.WorkbenchListHasSelectionOrFocus)==null||r.set(!0),this._onSelectItemChange.fire({selectItem:n,preferPosition:t==null?void 0:t.preferPosition})):(i=this.WorkbenchListHasSelectionOrFocus)==null||i.set(!1)}getList(){return this.list}updateList(e,t){this.list=e,t!=null&&t.autoSelectFirstWhenInit&&(e.length>0?this.selectId?e.every(n=>n.id!==this.selectId)&&this.select(e[0].id):this.select(e[0].id):this.select(null))}replaceListProps(e){const t=e.reduce((n,r)=>(n.set(r.id.toString(),r),n),new Map);for(let n=0;n<this.list.length-1;n++){const r=this.list[n],i=t.get(r.id.toString());i&&(this.list[n]=i)}}selectNext(e){const t=this.list.findIndex(n=>n.id===this.selectId);t===-1||t===this.list.length-1||this.select(this.list[t+1].id,{selectOnly:e,preferPosition:"bottom"})}selectPrevious(e){const t=this.list.findIndex(n=>n.id===this.selectId);t===-1||t===0||this.select(this.list[t-1].id,{selectOnly:e,preferPosition:"top"})}delete(e){var r;const t=this.list.findIndex(i=>i.id===e);if(t===-1)return;const n=this.list[t];this.list.splice(t,1),this.selectId===e&&(this.list[t]?this.select(this.list[t].id):this.select(((r=this.list[t-1])==null?void 0:r.id)??null)),this._onItemDelete.fire(n)}bindTo(e){const t=super.bindTo(e);return this.WorkbenchListHasSelectionOrFocus=Vg.bindTo(e),this.WorkbenchListHasSelectionOrFocus.set(this.selectId!==null),t}};R0([gI(100)],Xa.prototype,"selectNext",1);R0([gI(100)],Xa.prototype,"selectPrevious",1);Xa=R0([HV(0,Wc)],Xa);const gr=en("previewService"),hs=en("promptService");class jV{constructor(){this._focusField=null,this.promptRequest=null,this._currentPrompt=null,this._onPromptChange=new Oe,this.onPromptChange=this._onPromptChange.event}get currentPrompt(){return this._currentPrompt}get focusField(){return this._focusField}show(t){return this.promptRequest=new LD,this._currentPrompt=t,this._focusField=t.items[0].key,this._onPromptChange.fire(),this.promptRequest.p}resolveValue(t){this.cleanPrompt(),this.promptRequest&&this.promptRequest.complete(t)}cancel(){this.cleanPrompt(),this.promptRequest&&this.promptRequest.complete(null)}cleanPrompt(){this._currentPrompt=null,this._focusField=null,this._onPromptChange.fire()}focusNext(){var r;if(!this.currentPrompt)return;const t=this.currentPrompt.items.findIndex(i=>i.key===this.focusField),n=(r=this.currentPrompt)==null?void 0:r.items[(t+1)%this.currentPrompt.items.length];this._focusField=n.key,this._onPromptChange.fire()}setFocus(t){this._focusField=t,this._onPromptChange.fire()}}var KV=Object.defineProperty,GV=Object.getOwnPropertyDescriptor,YV=(e,t,n,r)=>{for(var i=r>1?void 0:r?GV(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&KV(t,n,i),i},Y1=(e,t)=>(n,r)=>t(n,r,e);const wc=en("workbenchWebpageViewService");let ly=class{constructor(e,t){this.filterViewService=e,this.pageInstanceService=t,this._onDidWebpageViewChange=new Oe,this.onDidWebpageViewChange=this._onDidWebpageViewChange.event,this.currentView=null,this._webpageViews=[],e.onViewChange(n=>{this.init()})}get webpageViews(){return this._webpageViews}async load(){return this.filterViewService.getViews()}async save(e){await this.filterViewService.createFilterView(e)}async removeView(e){const t=await this.getWebpageView(e);t.deleted=!0,await this.save(t);const n=this.webpageViews.findIndex(r=>r.id===e);if(this._webpageViews=this.webpageViews.filter(r=>r.id!==e),this.isActive(e)&&this._webpageViews.length>0){const r=Math.min(n,this._webpageViews.length-1);await this.pageInstanceService.go("webpage_view",{viewId:this._webpageViews[r].id})}this._onDidWebpageViewChange.fire()}async saveWebpageView(e){await this.save(e),await this.init()}isActive(e){return this.pageInstanceService.pageInstance.pageId===`webpage_view/${e}`}async getWebpageView(e){const t=await this.filterViewService.getView(e);if(!t)throw new Error("view not exist");return t}async init(){const e=await this.load();this._webpageViews=e,this._onDidWebpageViewChange.fire()}};ly=YV([Y1(0,PI),Y1(1,Yn)],ly);const ma=en("workbenchWebsiteService");class qV{constructor(t){this.webpageService=t,this._webpages=[],this._onWebpagesDidChange=new Oe,this.onWebpagesDidChange=this._onWebpagesDidChange.event,this.initTask=null,this.webpageService.onWebpageChange(()=>{this.doInit()})}get webpages(){return this._webpages}async upload(t,n){const r=await this.doUpload(t,n);return await this.init(),r}async delete(t){this._webpages=this._webpages.filter(n=>n.id!==t)}async init(){if(this.initTask)return this.initTask;this.initTask=this.doInit();try{await this.initTask}catch(t){console.log("init",t)}}async doInit(){const t=await this.fetch();this._webpages=t,this._onWebpagesDidChange.fire({webpages:this._webpages})}}const zc=new At("webpageListLayoutVisible",!1),ff=new At("webpagesListLayout","column"),QV="webpageListLayoutVisible.action.setList",XV="webpageListLayoutVisible.action.setColumn",rR="webpageListLayoutVisible.action.showFilter",iR="webpageListLayoutVisible.action.enableLimit",oR="webpageListLayoutVisible.action.disableLimit",M0="webpageListLayoutVisible.action.editLimit",sR="webpageListLayoutVisible.action.setOrderBy",aR="webpageListLayoutVisible.action.editView",T0="webpageListLayoutVisible.action.createView",lR="webpageListLayoutVisible.action.openRSS",cR=new At("hasWebpageSelection",!1),Ug=new At("HasWebpagePreview",!1),uR=new At("hasWebpageInfoOpen",!1),dR="webpage.action.toggleLike",fR="webpage.action.toggleRead",hR="webpage.action.deleteCurrent",ZV="webpage.action.editTag",JV="webpage.action.preview",e4="webpage.action.exitPreview",t4="webpage.action.PreviewNext",n4="webpage.action.PreviewPrevious";var r4=Object.defineProperty,i4=Object.getOwnPropertyDescriptor,o4=(e,t,n,r)=>{for(var i=r>1?void 0:r?i4(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&r4(t,n,i),i},Is=(e,t)=>(n,r)=>t(n,r,e);const s4=[qr.title_asc,qr.title_desc,qr.add_time_asc,qr.add_time_desc,qr.annotate_count_asc,qr.annotate_count_desc,qr.random].map(e=>({label:FI(e),args:[e],key:e}));function a4(e){if(!e)return!1;try{return new URL(e),!1}catch{return!0}}let Fn=class{constructor(e,t,n,r,i,o,s,a,l){this.options=e,this.instantiationService=t,this.workbenchWebsiteService=n,this.previewService=r,this.workbenchWebpageViewService=i,this.promptService=o,this.pageInstanceService=s,this.apiServerStatusService=a,this.contextKeyService=l,this.id="WebpageListLayoutController",this._onLayoutControllerChange=new Oe,this.onLayoutControllerChange=this._onLayoutControllerChange.event,this._rssUrl=null,this._show=!1,this._viewModel=e.viewModel??Qo.create(),this._lastViewId=this._viewModel.lastId,this._viewModelClone=Qo.from(this._viewModel.operations),this._filter=new G1(this._viewModel),this._filter.onDidChange(()=>{this.setupWebpageList()}),this._showFilter=e.showFilter??!1,this._showMenu=!1,this._layout=ff.bindTo(this.contextKeyService),this._list=this.instantiationService.createInstance(Xa),this.toolbar=new JI,this.options.webpagesRightPanel&&this.toolbar.toggleRightPanel(this.options.webpagesRightPanel),this._list.onSelectItemChange(({selectItem:d})=>{d.id&&this.load(d.id)}),this._list.onItemDelete(d=>{var p;const h=(p=this.previewService.getWebpageModel(this.pageId))==null?void 0:p.textModel;h&&h.id===d.id&&(h.deleted=!0),this.workbenchWebsiteService.delete(d.id),this._onLayoutControllerChange.fire()}),this.initRss(),this.workbenchWebsiteService.onWebpagesDidChange(d=>{this._show&&(this.list.replaceListProps(d.webpages),this._onLayoutControllerChange.fire())}),this.previewService.onLoadingStateChange(d=>{d===this.pageId&&this._onLayoutControllerChange.fire()}),this.list.onFocus(()=>{this._onLayoutControllerChange.fire()}),this.list.onBlur(()=>{this._onLayoutControllerChange.fire()}),this._hasWebpagePreview=Ug.bindTo(this.contextKeyService);const c=cR.bindTo(this.contextKeyService);c.set(!!this.list.currentItemId),this.onLayoutControllerChange(()=>{c.set(!!this.list.currentItemId)})}static create(e,t){return e.createInstance(new Jt(Fn,[t]))}get showFilter(){return this._showFilter}get filter(){return this._filter}get menus(){var r,i;const e=this._viewModel.enableLimit,t=!!((r=this.currentWebpage)!=null&&r.link)&&!a4((i=this.currentWebpage)==null?void 0:i.link);return[this.options.isDefaultView||!this.rssUrl?null:{label:z("webpages_menu.rss","Open RSS Feed"),commandId:lR},this.shouldCreateView?{label:z("webpages_menu.create_view","Create View"),commandId:T0}:{label:z("webpages_menu.edit_view","Edit View"),commandId:aR},this._showFilter?{label:z("webpages_menu.clear_filter","Clear all filter"),commandId:YI}:null,{label:z("webpages_menu.sort_by","Sort by"),commandId:sR,submenuArgs:s4.map(o=>({...o,checked:o.key===this._viewModel.sortBy}))},e?{label:z("webpages_menu.edit_limit","Edit Limit"),commandId:M0}:null,e?{label:z("webpages_menu.disable_limit","Disable Limit"),commandId:oR}:{label:z("webpages_menu.enable_limit","Enable Limit"),commandId:iR},t?{label:z("webpages_menu.open_in_browser","OpenUrl in browser"),commandId:"WebpageListLayoutOpenUrl"}:null].filter(o=>!!o)}get currentWebpage(){return this.previewService.getWebpageModel(this.pageId)}get list(){return this._list}get filters(){return ep.getFilterDesc(this.workbenchWebsiteService.webpages)}get filterChanged(){return this._lastViewId!==this._viewModel.lastId}get showMenu(){return this._showMenu}get pageId(){return this.options.pageId}get rssUrl(){return this._rssUrl}get preview(){return this._hasWebpagePreview.get()}resetFilter(){this._viewModel=this._viewModelClone,this._viewModelClone=Qo.from(this._viewModel.operations),this._filter=new G1(this._viewModel),this._filter.onDidChange(()=>{this.setupWebpageList()}),this.setupWebpageList(),this._onLayoutControllerChange.fire()}initRss(){this.setupRss(),this.apiServerStatusService.onDidStatusChange(()=>{this.setupRss()})}setupRss(){const e=this.apiServerStatusService.status;if(e&&e.status===nd.running){const t=eR(e.serverType,window.location,{port:String(e.port),ip:e.ip});this._rssUrl=`${t}/feeds/views/${this._viewModel.id}/webpages?limit=100`,this._onLayoutControllerChange.fire()}}setShowMenu(e){this._showMenu=e,this._onLayoutControllerChange.fire()}toggleShowFilter(){this._showFilter=!this._showFilter,this._onLayoutControllerChange.fire()}get layout(){return this._layout.get()}setLayout(e){this._layout.set(e),this._layout.get()==="list"&&this._hasWebpagePreview.set(!1),this._onLayoutControllerChange.fire()}showWebb(){this._hasWebpagePreview.set(!0),this._list.blur(js.command),this._onLayoutControllerChange.fire()}hideList(){this._hasWebpagePreview.set(!1),this.list.focus(js.command),this._onLayoutControllerChange.fire()}get shouldCreateView(){return this.options.isDefaultView}async saveView(){if(this.shouldCreateView){const e=await this.promptService.show({title:z("view_prompt.create_title","Create View"),items:[{label:z("view_prompt.title","Title"),key:"title",type:"input",required:!0},{label:z("view_prompt.description","Description"),key:"description",type:"input"}]});if(!e)return;const{title:t,description:n}=e;this._viewModel.title=t,typeof n=="string"&&(this._viewModel.description=n),await this.workbenchWebpageViewService.saveWebpageView(this._viewModel),this.pageInstanceService.go("webpage_view",{viewId:this._viewModel.id});return}await this.workbenchWebpageViewService.saveWebpageView(this._viewModel),this._lastViewId=this._viewModel.lastId,this._viewModelClone=Qo.from(this._viewModel.operations),this._onLayoutControllerChange.fire()}async editView(){const e=await this.promptService.show({title:z("view_prompt.edit_title","Edit View"),items:[{label:z("view_prompt.title","Title"),key:"title",type:"input",required:!0,defaultValue:this._viewModel.title},{label:z("view_prompt.description","Description"),key:"description",type:"input",defaultValue:this._viewModel.description}]});if(!e)return;const{title:t,description:n}=e;this._viewModel.title=t,typeof n=="string"&&(this._viewModel.description=n),await this.workbenchWebpageViewService.saveWebpageView(this._viewModel),this._onLayoutControllerChange.fire()}enableLimit(e){this._viewModel.enableLimit=!0,this._viewModel.limit=e,this._onLayoutControllerChange.fire()}disableLimit(){this._viewModel.enableLimit=!1,this._onLayoutControllerChange.fire()}async load(e,t){this.previewService.loadWebpage(this.pageId,e).then(n=>{var r;n&&(t&&(console.log(" re.highlightsListController",n.highlightsListController),(r=n.highlightsListController)==null||r.list.select(t,{preferPosition:"middle"})),n.textModel.onModelChanged(()=>{this._onLayoutControllerChange.fire()}))})}setupWebpageList(){const e=ep.filterWebpages(this._filter,this.workbenchWebsiteService.webpages);this.list.updateList(e,{autoSelectFirstWhenInit:!this.options.disableAutoSelectFirst}),e.length===0&&this.load(null),this._onLayoutControllerChange.fire()}async show(e){this._show=!0,this._list.focus(js.command),await this.workbenchWebsiteService.init();const t=ep.filterWebpages(this._filter,this.workbenchWebsiteService.webpages);this.list.updateList(t,{autoSelectFirstWhenInit:!this.options.disableAutoSelectFirst}),e!=null&&e.webpageId&&this.list.select(e.webpageId,{preferPosition:"middle"});const n=this.list.selectId;n?this.load(n,e==null?void 0:e.highlightId):this.load(null)}hide(){this._hasWebpagePreview.reset(),this._show=!1}};Fn.id="WebpageListLayoutController";Fn=o4([Is(1,Or),Is(2,ma),Is(3,gr),Is(4,wc),Is(5,hs),Is(6,Yn),Is(7,Ng),Is(8,Fo)],Fn);function l4(e){for(var t=[],n=0;n<e.length;){var r=e[n];if(r==="*"||r==="+"||r==="?"){t.push({type:"MODIFIER",index:n,value:e[n++]});continue}if(r==="\\"){t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});continue}if(r==="{"){t.push({type:"OPEN",index:n,value:e[n++]});continue}if(r==="}"){t.push({type:"CLOSE",index:n,value:e[n++]});continue}if(r===":"){for(var i="",o=n+1;o<e.length;){var s=e.charCodeAt(o);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){i+=e[o++];continue}break}if(!i)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:i}),n=o;continue}if(r==="("){var a=1,l="",o=n+1;if(e[o]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(o));for(;o<e.length;){if(e[o]==="\\"){l+=e[o++]+e[o++];continue}if(e[o]===")"){if(a--,a===0){o++;break}}else if(e[o]==="("&&(a++,e[o+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(o));l+=e[o++]}if(a)throw new TypeError("Unbalanced pattern at ".concat(n));if(!l)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:l}),n=o;continue}t.push({type:"CHAR",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}function c4(e,t){t===void 0&&(t={});for(var n=l4(e),r=t.prefixes,i=r===void 0?"./":r,o="[^".concat(Bl(t.delimiter||"/#?"),"]+?"),s=[],a=0,l=0,c="",d=function(M){if(l<n.length&&n[l].type===M)return n[l++].value},h=function(M){var L=d(M);if(L!==void 0)return L;var N=n[l],V=N.type,Y=N.index;throw new TypeError("Unexpected ".concat(V," at ").concat(Y,", expected ").concat(M))},p=function(){for(var M="",L;L=d("CHAR")||d("ESCAPED_CHAR");)M+=L;return M};l<n.length;){var g=d("CHAR"),b=d("NAME"),k=d("PATTERN");if(b||k){var y=g||"";i.indexOf(y)===-1&&(c+=y,y=""),c&&(s.push(c),c=""),s.push({name:b||a++,prefix:y,suffix:"",pattern:k||o,modifier:d("MODIFIER")||""});continue}var _=g||d("ESCAPED_CHAR");if(_){c+=_;continue}c&&(s.push(c),c="");var w=d("OPEN");if(w){var y=p(),x=d("NAME")||"",C=d("PATTERN")||"",F=p();h("CLOSE"),s.push({name:x||(C?a++:""),pattern:x&&!C?o:C,prefix:y,suffix:F,modifier:d("MODIFIER")||""});continue}h("END")}return s}function cy(e,t){var n=[],r=gR(e,n,t);return u4(r,n,t)}function u4(e,t,n){n===void 0&&(n={});var r=n.decode,i=r===void 0?function(o){return o}:r;return function(o){var s=e.exec(o);if(!s)return!1;for(var a=s[0],l=s.index,c=Object.create(null),d=function(p){if(s[p]===void 0)return"continue";var g=t[p-1];g.modifier==="*"||g.modifier==="+"?c[g.name]=s[p].split(g.prefix+g.suffix).map(function(b){return i(b,g)}):c[g.name]=i(s[p],g)},h=1;h<s.length;h++)d(h);return{path:a,index:l,params:c}}}function Bl(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function pR(e){return e&&e.sensitive?"":"i"}function d4(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,i=n.exec(e.source);i;)t.push({name:i[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),i=n.exec(e.source);return e}function f4(e,t,n){var r=e.map(function(i){return gR(i,t,n).source});return new RegExp("(?:".concat(r.join("|"),")"),pR(n))}function h4(e,t,n){return p4(c4(e,n),t,n)}function p4(e,t,n){n===void 0&&(n={});for(var r=n.strict,i=r===void 0?!1:r,o=n.start,s=o===void 0?!0:o,a=n.end,l=a===void 0?!0:a,c=n.encode,d=c===void 0?function(Y){return Y}:c,h=n.delimiter,p=h===void 0?"/#?":h,g=n.endsWith,b=g===void 0?"":g,k="[".concat(Bl(b),"]|$"),y="[".concat(Bl(p),"]"),_=s?"^":"",w=0,x=e;w<x.length;w++){var C=x[w];if(typeof C=="string")_+=Bl(d(C));else{var F=Bl(d(C.prefix)),M=Bl(d(C.suffix));if(C.pattern)if(t&&t.push(C),F||M)if(C.modifier==="+"||C.modifier==="*"){var L=C.modifier==="*"?"?":"";_+="(?:".concat(F,"((?:").concat(C.pattern,")(?:").concat(M).concat(F,"(?:").concat(C.pattern,"))*)").concat(M,")").concat(L)}else _+="(?:".concat(F,"(").concat(C.pattern,")").concat(M,")").concat(C.modifier);else C.modifier==="+"||C.modifier==="*"?_+="((?:".concat(C.pattern,")").concat(C.modifier,")"):_+="(".concat(C.pattern,")").concat(C.modifier);else _+="(?:".concat(F).concat(M,")").concat(C.modifier)}}if(l)i||(_+="".concat(y,"?")),_+=n.endsWith?"(?=".concat(k,")"):"$";else{var N=e[e.length-1],V=typeof N=="string"?y.indexOf(N[N.length-1])>-1:N===void 0;i||(_+="(?:".concat(y,"(?=").concat(k,"))?")),V||(_+="(?=".concat(y,"|").concat(k,")"))}return new RegExp(_,pR(n))}function gR(e,t,n){return e instanceof RegExp?d4(e,t):Array.isArray(e)?f4(e,t,n):h4(e,t,n)}function Pp(e){return t=>{const n=cy(e)(t);return n?n.params:null}}function mR(e,t){return n=>{for(const r of t){const i=e[r](n);if(i)return{type:r,value:i}}return null}}var g4=Object.defineProperty,m4=Object.getOwnPropertyDescriptor,v4=(e,t,n,r)=>{for(var i=r>1?void 0:r?m4(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&g4(t,n,i),i},q1=(e,t)=>(n,r)=>t(n,r,e);const _4={webpages:Pp("/webpages/:webpageId"),highlights:Pp("/webpages/:webpageId/notes/:highlightId")};let Za=class{constructor(e,t){this.instantiationService=e,this.historyService=t,this.instance=null,this.ignoreSelectChange=!1}async init(){return this.doInit(this.parseUrl(this.historyService.pathname))}async createInstance(){return this.historyService.pageName!=="webpages"&&this.historyService.push("webpages"),this.doInit()}doInit(e){if(this.instance||(this.instance=Fn.create(this.instantiationService,{pageId:"webpages",isDefaultView:!0,disableAutoSelectFirst:!!e,webpagesRightPanel:this.parseWebpagesRightPanel(e)}),this.instance.list.onSelectItemChange(({selectItem:t})=>{this.ignoreSelectChange||t&&this.historyService.push(`webpages/${t.id}`)})),e)switch(e.type){case"highlights":{this.ignoreSelectChange=!0,this.instance.show({webpageId:e==null?void 0:e.value.webpageId,highlightId:e==null?void 0:e.value.highlightId}).then(()=>{this.ignoreSelectChange=!1});break}case"webpages":{this.ignoreSelectChange=!0,this.instance.show({webpageId:e==null?void 0:e.value.webpageId}).then(()=>{this.ignoreSelectChange=!1});break}}else this.instance.show();return this.instance}parseUrl(e){return mR(_4,["highlights","webpages"])(e)}parseWebpagesRightPanel(e){if(e)switch(e==null?void 0:e.type){case"highlights":return"notes"}}};Za.pageName="webpages";Za=v4([q1(0,Or),q1(1,ga)],Za);var y4=Object.defineProperty,b4=Object.getOwnPropertyDescriptor,L0=(e,t,n,r)=>{for(var i=r>1?void 0:r?b4(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&y4(t,n,i),i},vR=(e,t)=>(n,r)=>t(n,r,e);const sl=en("searchWorkbenchService");let uy=class{constructor(e){this.instantiationService=e,this._searchModel=null,this._onFocusSearchInout=new Oe,this.onFocusSearchInput=this._onFocusSearchInout.event,this._onBlurSearchInput=new Oe,this.onBlurSearchInput=this._onBlurSearchInput.event,this._onFocusSearchList=new Oe,this.onFocusSearchList=this._onFocusSearchList.event}get searchModel(){return this._searchModel||(this._searchModel=this.instantiationService.createInstance(Np)),this._searchModel}focusSearchInput(){this._onFocusSearchInout.fire()}blurSearchInput(){this._onBlurSearchInput.fire()}focusSearchList(){this._onFocusSearchList.fire()}};uy=L0([vR(0,Or)],uy);let Np=class{constructor(e){this.webpagesService=e,this._searchQuery=null,this._webpages=[],this.loading=!1,this._onStateChange=new Oe,this.onStateChange=this._onStateChange.event,this._onSearchQueryChange=new Oe,this.onSearchQueryChange=this._onSearchQueryChange.event}async search(e){this._searchQuery=e,this._onSearchQueryChange.fire(e.query),await this.do(e)}changeState(e){this.loading=e,this._onStateChange.fire()}async do(e){if(this.changeState(!0),this._searchQuery!==e)return;const t=await this.webpagesService.search(e.query);this._searchQuery===e&&(this._webpages=t,this.changeState(!1))}async clear(){this._searchQuery=null,this._onSearchQueryChange.fire(null),this.changeState(!1)}get searchQuery(){return this._searchQuery}get searchResult(){return this._webpages}};L0([UD(300)],Np.prototype,"do",1);Np=L0([vR(0,cf)],Np);var S4=Object.defineProperty,w4=Object.getOwnPropertyDescriptor,E4=(e,t,n,r)=>{for(var i=r>1?void 0:r?w4(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&S4(t,n,i),i},C4=(e,t)=>(n,r)=>t(n,r,e);let Dp=class extends nR{constructor(e,t){super(t),this.searchList=e,this.listService=t,this.selectIndex={currentIndex:null,currentGroupIndex:null},this.WorkbenchListHasSelectionOrFocus=null,this._onStateChange=new Oe,this.onTreeListStateChange=this._onStateChange.event,this.onTreeListStateChange(n=>{var r;(r=this.WorkbenchListHasSelectionOrFocus)==null||r.set(n.state.currentIndex!==null)})}get items(){return this.searchList}get currentItemId(){return this.selectIndex.currentIndex===null?null:this.items[this.selectIndex.currentIndex].id}selectFirst(){this.searchList.length!==0&&this.updateIndex({currentIndex:0,currentGroupIndex:null})}selectNext(){this.searchList.length!==0&&this.updateIndex(this.calculateNext(),{preferPosition:"bottom"})}calculateNext(){const{currentIndex:e,currentGroupIndex:t}=this.selectIndex,n=this.items.length;if(e===n-1&&(t??-1)===this.items[e].marks.length-1)return{currentIndex:e,currentGroupIndex:t};if(e===null)return{currentIndex:0,currentGroupIndex:null};{const r=this.items[e].marks.length;return t===null?r===0?{currentIndex:e+1,currentGroupIndex:null}:{currentIndex:e,currentGroupIndex:0}:t===r-1?{currentIndex:e+1,currentGroupIndex:null}:{currentIndex:e,currentGroupIndex:t+1}}}selectPrevious(){this.searchList.length===0||this.selectIndex.currentIndex===null||this.updateIndex(this.calculatePrevious(),{preferPosition:"top"})}calculatePrevious(){const{currentIndex:e,currentGroupIndex:t}=this.selectIndex;if(e===null){if(this.items.length===0)return{currentIndex:null};const n=this.items[this.items.length].marks.length;return{currentIndex:this.items.length-1,currentGroupIndex:n===0?null:n-1}}if(t===null){if(e===0)return{currentIndex:0,currentGroupIndex:null};{const n=this.items[e-1].marks.length;return{currentIndex:e-1,currentGroupIndex:n===0?null:n-1}}}else return t===0?{currentIndex:e,currentGroupIndex:null}:{currentIndex:e,currentGroupIndex:t-1}}updateIndex(e,t){this.selectIndex.currentIndex!==e.currentIndex&&e.currentIndex!==null&&this._onSelectItemChange.fire({selectItem:this.items[e.currentIndex]}),this.selectIndex=e,this._onStateChange.fire({state:e,preferPosition:t==null?void 0:t.preferPosition})}select(e,t){if(e===null){this.updateIndex({currentIndex:null,currentGroupIndex:null});return}const n=this.items.findIndex(r=>r.id===e);n!==-1&&this.updateIndex({currentIndex:n,currentGroupIndex:t})}isSelected(e,t){if(this.selectIndex.currentIndex===null)return!1;if(this.items[this.selectIndex.currentIndex].id===e)return this.selectIndex.currentGroupIndex===t}delete(e){const t=this.items.findIndex(r=>r.id===e);if(t===-1)return;const n=this.items[t];this.items.splice(t,1),this.selectIndex.currentIndex===t&&(this.items[t]?this.updateIndex({currentIndex:t,currentGroupIndex:null}):this.updateIndex({currentIndex:t-1,currentGroupIndex:null})),this._onItemDelete.fire(n)}bindTo(e){const t=super.bindTo(e);return this.WorkbenchListHasSelectionOrFocus=Vg.bindTo(e),this.WorkbenchListHasSelectionOrFocus.set(this.selectIndex.currentIndex!==null),t}};Dp=E4([C4(1,Wc)],Dp);var dy=function(e,t){return dy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},dy(e,t)};function va(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dy(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function x4(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function l(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function _R(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Ec(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cc(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function xc(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function sc(e){return this instanceof sc?(this.v=e,this):new sc(e)}function k4(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(p){r[p]&&(i[p]=function(g){return new Promise(function(b,k){o.push([p,g,b,k])>1||a(p,g)})})}function a(p,g){try{l(r[p](g))}catch(b){h(o[0][3],b)}}function l(p){p.value instanceof sc?Promise.resolve(p.value.v).then(c,d):h(o[0][2],p)}function c(p){a("next",p)}function d(p){a("throw",p)}function h(p,g){p(g),o.shift(),o.length&&a(o[0][0],o[0][1])}}function I4(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ec=="function"?Ec(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){s=e[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}function br(e){return typeof e=="function"}function yR(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var cv=yR(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Fp(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var hf=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Ec(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(k){t={error:k}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var d=this.initialTeardown;if(br(d))try{d()}catch(k){o=k instanceof cv?k.errors:[k]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var p=Ec(h),g=p.next();!g.done;g=p.next()){var b=g.value;try{Q1(b)}catch(k){o=o??[],k instanceof cv?o=xc(xc([],Cc(o)),Cc(k.errors)):o.push(k)}}}catch(k){r={error:k}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}if(o)throw new cv(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Q1(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Fp(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Fp(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),bR=hf.EMPTY;function SR(e){return e instanceof hf||e&&"closed"in e&&br(e.remove)&&br(e.add)&&br(e.unsubscribe)}function Q1(e){br(e)?e():e.unsubscribe()}var wR={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fy={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=fy.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,xc([e,t],Cc(n))):setTimeout.apply(void 0,xc([e,t],Cc(n)))},clearTimeout:function(e){var t=fy.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ER(e){fy.setTimeout(function(){throw e})}function X1(){}function tp(e){e()}var A0=function(e){va(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,SR(n)&&n.add(r)):r.destination=L4,r}return t.create=function(n,r,i){return new hy(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(hf),R4=Function.prototype.bind;function uv(e,t){return R4.call(e,t)}var M4=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){th(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){th(r)}else th(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){th(n)}},e}(),hy=function(e){va(t,e);function t(n,r,i){var o=e.call(this)||this,s;if(br(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&wR.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&uv(n.next,a),error:n.error&&uv(n.error,a),complete:n.complete&&uv(n.complete,a)}):s=n}return o.destination=new M4(s),o}return t}(A0);function th(e){ER(e)}function T4(e){throw e}var L4={closed:!0,next:X1,error:T4,complete:X1},O0=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function CR(e){return e}function A4(e){return e.length===0?CR:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var Gi=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=P4(t)?t:new hy(t,n,r);return tp(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Z1(n),new n(function(i,o){var s=new hy({next:function(a){try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[O0]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return A4(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Z1(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function Z1(e){var t;return(t=e??wR.Promise)!==null&&t!==void 0?t:Promise}function O4(e){return e&&br(e.next)&&br(e.error)&&br(e.complete)}function P4(e){return e&&e instanceof A0||O4(e)&&SR(e)}function N4(e){return br(e==null?void 0:e.lift)}function Bc(e){return function(t){if(N4(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function kc(e,t,n,r,i){return new D4(e,t,n,r,i)}var D4=function(e){va(t,e);function t(n,r,i,o,s,a){var l=e.call(this,n)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(d){n.error(d)}}:e.prototype._next,l._error=o?function(c){try{o(c)}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(A0),F4=yR(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),xR=function(e){va(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new J1(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new F4},t.prototype.next=function(n){var r=this;tp(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Ec(r.currentObservers),a=s.next();!a.done;a=s.next()){var l=a.value;l.next(n)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;tp(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;tp(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?bR:(this.currentObservers=null,a.push(n),new hf(function(){r.currentObservers=null,Fp(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new Gi;return n.source=this,n},t.create=function(n,r){return new J1(n,r)},t}(Gi),J1=function(e){va(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:bR},t}(xR),kR={now:function(){return(kR.delegate||Date).now()},delegate:void 0},V4=function(e){va(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(hf),Vp={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Vp.delegate;return i!=null&&i.setInterval?i.setInterval.apply(i,xc([e,t],Cc(n))):setInterval.apply(void 0,xc([e,t],Cc(n)))},clearInterval:function(e){var t=Vp.delegate;return((t==null?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},U4=function(e){va(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),Vp.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&Vp.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Fp(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(V4),eE=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=kR.now,e}(),$4=function(e){va(t,e);function t(n,r){r===void 0&&(r=eE.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(eE),W4=new $4(U4),IR=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function RR(e){return br(e==null?void 0:e.then)}function MR(e){return br(e[O0])}function TR(e){return Symbol.asyncIterator&&br(e==null?void 0:e[Symbol.asyncIterator])}function LR(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function z4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var AR=z4();function OR(e){return br(e==null?void 0:e[AR])}function PR(e){return k4(this,arguments,function(){var n,r,i,o;return _R(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,sc(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,sc(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,sc(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function NR(e){return br(e==null?void 0:e.getReader)}function $g(e){if(e instanceof Gi)return e;if(e!=null){if(MR(e))return B4(e);if(IR(e))return H4(e);if(RR(e))return j4(e);if(TR(e))return DR(e);if(OR(e))return K4(e);if(NR(e))return G4(e)}throw LR(e)}function B4(e){return new Gi(function(t){var n=e[O0]();if(br(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function H4(e){return new Gi(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function j4(e){return new Gi(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,ER)})}function K4(e){return new Gi(function(t){var n,r;try{for(var i=Ec(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function DR(e){return new Gi(function(t){Y4(e,t).catch(function(n){return t.error(n)})})}function G4(e){return DR(PR(e))}function Y4(e,t){var n,r,i,o;return x4(this,void 0,void 0,function(){var s,a;return _R(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=I4(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Ka(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function FR(e,t){return t===void 0&&(t=0),Bc(function(n,r){n.subscribe(kc(r,function(i){return Ka(r,e,function(){return r.next(i)},t)},function(){return Ka(r,e,function(){return r.complete()},t)},function(i){return Ka(r,e,function(){return r.error(i)},t)}))})}function VR(e,t){return t===void 0&&(t=0),Bc(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function q4(e,t){return $g(e).pipe(VR(t),FR(t))}function Q4(e,t){return $g(e).pipe(VR(t),FR(t))}function X4(e,t){return new Gi(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Z4(e,t){return new Gi(function(n){var r;return Ka(n,t,function(){r=e[AR](),Ka(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return br(r==null?void 0:r.return)&&r.return()}})}function UR(e,t){if(!e)throw new Error("Iterable cannot be null");return new Gi(function(n){Ka(n,t,function(){var r=e[Symbol.asyncIterator]();Ka(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function J4(e,t){return UR(PR(e),t)}function eU(e,t){if(e!=null){if(MR(e))return q4(e,t);if(IR(e))return X4(e,t);if(RR(e))return Q4(e,t);if(TR(e))return UR(e,t);if(OR(e))return Z4(e,t);if(NR(e))return J4(e,t)}throw LR(e)}function tU(e,t){return t?eU(e,t):$g(e)}function nU(e,t){return Bc(function(n,r){var i=0;n.subscribe(kc(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function $R(e,t){return t===void 0&&(t=W4),Bc(function(n,r){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var c=o;o=null,r.next(c)}};function l(){var c=s+e,d=t.now();if(d<c){i=this.schedule(void 0,c-d),r.add(i);return}a()}n.subscribe(kc(r,function(c){o=c,s=t.now(),i||(i=t.schedule(l,e),r.add(i))},function(){a(),r.complete()},void 0,function(){o=i=null}))})}function rU(e,t){return Bc(function(n,r){var i=null,o=0,s=!1,a=function(){return s&&!i&&r.complete()};n.subscribe(kc(r,function(l){i==null||i.unsubscribe();var c=0,d=o++;$g(e(l,d)).subscribe(i=kc(r,function(h){return r.next(t?t(l,h,d,c++):h)},function(){i=null,a()}))},function(){s=!0,a()}))})}function iU(e,t,n){var r=br(e)||t||n?{next:e,error:t,complete:n}:e;return r?Bc(function(i,o){var s;(s=r.subscribe)===null||s===void 0||s.call(r);var a=!0;i.subscribe(kc(o,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},function(){var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},function(l){var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},function(){var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):CR}var oU=Object.defineProperty,sU=Object.getOwnPropertyDescriptor,aU=(e,t,n,r)=>{for(var i=r>1?void 0:r?sU(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&oU(t,n,i),i},nh=(e,t)=>(n,r)=>t(n,r,e);function lU(e){if(!e)return!1;try{return new URL(e),!1}catch{return!0}}let os=class{constructor(e,t,n,r,i){this.options=e,this.instantiationService=t,this.workbenchWebsiteService=n,this.previewService=r,this.workbenchSearchService=i,this.id="SearchPageController",this._onLayoutControllerChange=new Oe,this.onLayoutControllerChange=this._onLayoutControllerChange.event,this._rssUrl=null,this.stateChange$=new xR,this.stateSubscription=null,this._showFilter=e.showFilter??!1,this._showMenu=!1,this.previewService.onLoadingStateChange(o=>{o===this.pageId&&this._onLayoutControllerChange.fire()}),this.toolbar=new JI,this._list=this.instantiationService.createInstance(Dp,[]),this.workbenchSearchService.searchModel.onStateChange(()=>{this.setList(this.workbenchSearchService.searchModel.searchResult),this._onLayoutControllerChange.fire()}),this.workbenchSearchService.onFocusSearchList(()=>{this._list.focus(js.command)})}static create(e,t){return e.createInstance(new Jt(os,[t]))}get showFilter(){return this._showFilter}get menus(){var n,r;return[!!((n=this.currentWebpage)!=null&&n.link)&&!lU((r=this.currentWebpage)==null?void 0:r.link)?{label:"OpenUrl in browser",commandId:"WebpageListLayoutOpenUrl"}:null].filter(i=>!!i)}get currentWebpage(){return this.previewService.getWebpageModel(this.pageId)}get list(){return this._list}get filters(){return ep.getFilterDesc(this.workbenchWebsiteService.webpages)}get showMenu(){return this._showMenu}get pageId(){return this.options.pageId}get rssUrl(){return this._rssUrl}get searchQuery(){return this.workbenchSearchService.searchModel.searchQuery}setList(e){this._list=this.instantiationService.createInstance(Dp,e),this._list.onTreeListStateChange(t=>{this.stateChange$.next(t.state)}),this._list.onItemDelete(t=>{var r;const n=(r=this.previewService.getWebpageModel(this.pageId))==null?void 0:r.textModel;n&&n.id===t.id&&(n.deleted=!0),this.workbenchWebsiteService.delete(t.id)}),this._list.selectFirst(),this._onLayoutControllerChange.fire(),this.stateSubscription&&this.stateSubscription.unsubscribe(),this.stateSubscription=this.stateChange$.pipe(nU(t=>t.currentIndex!==null),rU(t=>{const n=this._list.items[t.currentIndex];return tU((async()=>({model:await this.previewService.loadWebpage(this.pageId,n.id),state:t}))())}),$R(100),iU(t=>{const n=this._list.items[t.state.currentIndex],r=this.previewService.getWebpageModel(this.pageId);if(!(n.id===(r==null?void 0:r.currentWebsiteId))||t.state.currentGroupIndex===null)return;const o=this._list.items[t.state.currentIndex].marks[t.state.currentGroupIndex];o&&r.focusAndScroll({text:o.content,textBefore:o.prefix,textAfter:o.suffix})})).subscribe()}setShowMenu(e){this._showMenu=e,this._onLayoutControllerChange.fire()}hide(){this.workbenchSearchService.blurSearchInput()}};os.id="SearchPageController";os=aU([nh(1,Or),nh(2,ma),nh(3,gr),nh(4,sl)],os);var cU=Object.defineProperty,uU=Object.getOwnPropertyDescriptor,dU=(e,t,n,r)=>{for(var i=r>1?void 0:r?uU(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&cU(t,n,i),i},dv=(e,t)=>(n,r)=>t(n,r,e);let py=class{constructor(t,n,r){this.instantiationService=t,this.historyService=n,this.workbenchSearchService=r,this.instance=null}async createInstance(){const t=this.doInit();return this.historyService.push("search",t.searchQuery?{query:t.searchQuery.query}:{}),t}async init(){const t=this.doInit(),n=this.historyService.query;return n&&(n!=null&&n.query)&&this.workbenchSearchService.searchModel.search({query:n.query}),t}doInit(){return this.instance||(this.instance=os.create(this.instantiationService,{pageId:"search",isDefaultView:!0}),this.workbenchSearchService.searchModel.onSearchQueryChange(t=>{this.historyService.replace("search",t?{query:t}:{})})),this.instance}};py=dU([dv(0,Or),dv(1,ga),dv(2,sl)],py);const fU=[{label:z("settings_tab.appearance","Appearance"),key:"appearance"},{label:z("settings_tab.about","About"),key:"about"},{label:z("settings_tab.api","API"),key:"api"},{label:z("settings_tab.remotes","Remotes"),key:"remotes"}];class hU{constructor(t){this.pageId="settings",this._onSettingsTabChange=new Oe,this.onSettingsTabChange=this._onSettingsTabChange.event,this._tabs=fU;const n=this.tabs.find(r=>r.key===(t==null?void 0:t.panel))??this.tabs[0];this._settingTab=n}hide(){}get tabs(){return this._tabs}get currentTab(){return this._settingTab}selectTab(t,n){const r=this._tabs.find(i=>i.key===t);!r||this._settingTab.key===r.key||(this._settingTab=r,this._onSettingsTabChange.fire({ignoreHistory:(n==null?void 0:n.ignoreHistory)??!1}))}}var pU=Object.defineProperty,gU=Object.getOwnPropertyDescriptor,mU=(e,t,n,r)=>{for(var i=r>1?void 0:r?gU(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&pU(t,n,i),i},vU=(e,t)=>(n,r)=>t(n,r,e);let gy=class{constructor(e){this.historyService=e,this.instance=null}parseUrl(e){const t=cy("/settings/:tab")(e);return t?{tab:t.params.tab}:null}encode(){if(!this.instance)throw new Error("");return`settings/${this.instance.currentTab.key}`}async init(){let e=this.parseData();return e?this.instance?this.instance.currentTab.key===e.tab||!e.tab?this.instance:(this.instance.selectTab(e.tab,{ignoreHistory:!0}),this.instance):this.doCreate(e):null}getUrl(){if(!this.instance)throw new Error("");return`settings/${this.instance.currentTab.key}`}parseData(){const e=cy("/settings/:tab")(this.historyService.pathname);return e?{tab:e.params.tab}:null}doCreate(e){return this.instance||(this.instance=new hU({panel:e==null?void 0:e.tab}),this.instance.onSettingsTabChange(({ignoreHistory:t})=>{t||this.historyService.push(this.getUrl())})),this.instance}async createInstance(e){const t=this.doCreate(e);return this.historyService.replace(this.getUrl()),t}};gy=mU([vU(0,ga)],gy);var _U=Object.defineProperty,yU=Object.getOwnPropertyDescriptor,bU=(e,t,n,r)=>{for(var i=r>1?void 0:r?yU(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&_U(t,n,i),i},tE=(e,t)=>(n,r)=>t(n,r,e);let Ks=class{constructor(e,t){this.instantiationService=e,this.historyService=t,this.instance=null}async init(){const e=this.doInit();return e.show(),e}doInit(){if(!this.instance){const e=Qo.create();e.addFilter({type:xt.constant,key:"read-status",operator:!1}),e.addFilter({type:xt.select,key:"first-add-time",operator:ZI.after,rightOperand:XI.week_2}),this.instance=Fn.create(this.instantiationService,{pageId:Ks.pageName,viewModel:e,isDefaultView:!0})}return this.instance}async createInstance(){this.historyService.push("webpages_unread");const e=this.doInit();return e.show(),e}};Ks.pageName="webpages_unread";Ks=bU([tE(0,Or),tE(1,ga)],Ks);var SU=Object.defineProperty,wU=Object.getOwnPropertyDescriptor,EU=(e,t,n,r)=>{for(var i=r>1?void 0:r?wU(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&SU(t,n,i),i},CU=(e,t)=>(n,r)=>t(n,r,e);class xU{constructor(){this.pageId="upload"}hide(){}}let my=class{constructor(e){this.historyService=e,this.instance=null}async init(){return this.doInit()}async createInstance(){return this.historyService.push("upload"),this.doInit()}doInit(){return this.instance||(this.instance=new xU),this.instance}};my=EU([CU(0,ga)],my);var kU=Object.defineProperty,IU=Object.getOwnPropertyDescriptor,RU=(e,t,n,r)=>{for(var i=r>1?void 0:r?IU(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&kU(t,n,i),i},fv=(e,t)=>(n,r)=>t(n,r,e);let Qr=class{constructor(e,t,n){this.instantiationService=e,this.workbenchWebpageViewService=t,this.historyService=n,this.instanceMap=new Map}async createInstance(e){const t=await this.createPage(e);return this.historyService.push(`${Qr.pageName}/${e.viewId}`),t.show(),t}async init(){const e=this.parseUrl(window.location.pathname);if(!e)return null;const t=await this.createPage({viewId:e.value.viewId});switch(e.type){case"webpageViewWithWebpageId":{t.show({webpageId:e.value.webpageId});break}default:t.show()}return t}async update(e){return this.instanceMap.get(e.viewId)}async createPage(e){const t=await this.workbenchWebpageViewService.getWebpageView(e.viewId);if(!this.instanceMap.has(e.viewId)){const r=Fn.create(this.instantiationService,{pageId:`${Qr.pageName}/${e.viewId}`,viewModel:t,showFilter:!0});r.list.onSelectItemChange(i=>{i.selectItem&&this.historyService.push(`${Qr.pageName}/${e.viewId}/${i.selectItem.id}`)}),this.instanceMap.set(e.viewId,r)}return this.instanceMap.get(e.viewId)}parseUrl(e){return mR(Qr.parserObject,["webpageView","webpageViewWithWebpageId"])(e)}};Qr.pageName="webpages_view";Qr.parserObject={webpageView:Pp(`/${Qr.pageName}/:viewId`),webpageViewWithWebpageId:Pp(`/${Qr.pageName}/:viewId/:webpageId`)};Qr=RU([fv(0,Or),fv(1,wc),fv(2,ga)],Qr);async function MU(e){const t=new FileReader;return new Promise((n,r)=>{t.onload=i=>{var o;((o=i.target)==null?void 0:o.result)instanceof ArrayBuffer?n(i.target.result):r(new Error(`Could not read from file :${e.name}`))},t.readAsArrayBuffer(e)})}function TU(){return new Worker("/assets/worker-2c1d2753.js")}function LU(e,t){const n=new TU,r=y0();return new Promise((i,o)=>{const s={type:"req",name:e,data:t,id:r};n.postMessage(s,[]),n.addEventListener("message",a=>{const l=a.data;if(l.id===r){if(l.type==="err"){o(new Error(l.message));return}i(l)}})})}async function AU(e){var c;const t=await MU(e),{value:n,hash:r,ext:i}=await LU(e.name,t),s=new DOMParser().parseFromString(n.main.data.value,"text/html"),a=s.title,l=(c=s.querySelector('meta[name="description"]'))==null?void 0:c.getAttribute("content");return{id:r,title:a,link:n.main.url,excerpt:l??"",size:e.size,createTime:n.createTime??e.lastModified,ext:i}}var OU=Object.defineProperty,PU=Object.getOwnPropertyDescriptor,NU=(e,t,n,r)=>{for(var i=r>1?void 0:r?PU(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&OU(t,n,i),i},DU=(e,t)=>(n,r)=>t(n,r,e);let Up=class{constructor(e){this.apiServerService=e,this._onDidStatusChange=new Oe,this.onDidStatusChange=this._onDidStatusChange.event,this._loading=!1,this._status=null,this._port=null,this.init()}get loading(){return this._loading}get status(){return this._status}get port(){return this._port??""}async init(){this._loading=!0,this._onDidStatusChange.fire(),this._status=await this.apiServerService.status(),this._status.serverType===Td.desktop&&(this._port=await this.apiServerService.getPort()),this._loading=!1,this._onDidStatusChange.fire()}async startServer(){this._loading=!0,this._onDidStatusChange.fire(),await this.apiServerService.start(),this._status=await this.apiServerService.status(),this._loading=!1,this._onDidStatusChange.fire()}async stop(){await this.apiServerService.stop(),this._status=await this.apiServerService.status(),this._onDidStatusChange.fire()}async updatePort(e){this._port=e,await this.apiServerService.configPort(e),this._onDidStatusChange.fire()}};Up=NU([DU(0,SI)],Up);const WR="%[a-f0-9]{2}",nE=new RegExp("("+WR+")|([^%]+?)","gi"),rE=new RegExp("("+WR+")+","gi");function vy(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;const n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],vy(n),vy(r))}function FU(e){try{return decodeURIComponent(e)}catch{let t=e.match(nE)||[];for(let n=1;n<t.length;n++)e=vy(t,n).join(""),t=e.match(nE)||[];return e}}function VU(e){const t={"%FE%FF":"��","%FF%FE":"��"};let n=rE.exec(e);for(;n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{const i=FU(n[0]);i!==n[0]&&(t[n[0]]=i)}n=rE.exec(e)}t["%C2"]="�";const r=Object.keys(t);for(const i of r)e=e.replace(new RegExp(i,"g"),t[i]);return e}function UU(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return VU(e)}}function zR(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];const n=e.indexOf(t);return n===-1?[]:[e.slice(0,n),e.slice(n+t.length)]}function $U(e,t){const n={};if(Array.isArray(t))for(const r of t){const i=Object.getOwnPropertyDescriptor(e,r);i!=null&&i.enumerable&&Object.defineProperty(n,r,i)}else for(const r of Reflect.ownKeys(e)){const i=Object.getOwnPropertyDescriptor(e,r);if(i.enumerable){const o=e[r];t(r,o,e)&&Object.defineProperty(n,r,i)}}return n}const WU=e=>e==null,zU=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),_y=Symbol("encodeFragmentIdentifier");function BU(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return r===void 0||e.skipNull&&r===null||e.skipEmptyString&&r===""?n:r===null?[...n,[sr(t,e),"[",i,"]"].join("")]:[...n,[sr(t,e),"[",sr(i,e),"]=",sr(r,e)].join("")]};case"bracket":return t=>(n,r)=>r===void 0||e.skipNull&&r===null||e.skipEmptyString&&r===""?n:r===null?[...n,[sr(t,e),"[]"].join("")]:[...n,[sr(t,e),"[]=",sr(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>r===void 0||e.skipNull&&r===null||e.skipEmptyString&&r===""?n:r===null?[...n,[sr(t,e),":list="].join("")]:[...n,[sr(t,e),":list=",sr(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(r,i)=>i===void 0||e.skipNull&&i===null||e.skipEmptyString&&i===""?r:(i=i===null?"":i,r.length===0?[[sr(n,e),t,sr(i,e)].join("")]:[[r,sr(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>r===void 0||e.skipNull&&r===null||e.skipEmptyString&&r===""?n:r===null?[...n,sr(t,e)]:[...n,[sr(t,e),"=",sr(r,e)].join("")]}}function HU(e){let t;switch(e.arrayFormat){case"index":return(n,r,i)=>{if(t=/\[(\d*)]$/.exec(n),n=n.replace(/\[\d*]$/,""),!t){i[n]=r;return}i[n]===void 0&&(i[n]={}),i[n][t[1]]=r};case"bracket":return(n,r,i)=>{if(t=/(\[])$/.exec(n),n=n.replace(/\[]$/,""),!t){i[n]=r;return}if(i[n]===void 0){i[n]=[r];return}i[n]=[...i[n],r]};case"colon-list-separator":return(n,r,i)=>{if(t=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!t){i[n]=r;return}if(i[n]===void 0){i[n]=[r];return}i[n]=[...i[n],r]};case"comma":case"separator":return(n,r,i)=>{const o=typeof r=="string"&&r.includes(e.arrayFormatSeparator),s=typeof r=="string"&&!o&&Ko(r,e).includes(e.arrayFormatSeparator);r=s?Ko(r,e):r;const a=o||s?r.split(e.arrayFormatSeparator).map(l=>Ko(l,e)):r===null?r:Ko(r,e);i[n]=a};case"bracket-separator":return(n,r,i)=>{const o=/(\[])$/.test(n);if(n=n.replace(/\[]$/,""),!o){i[n]=r&&Ko(r,e);return}const s=r===null?[]:r.split(e.arrayFormatSeparator).map(a=>Ko(a,e));if(i[n]===void 0){i[n]=s;return}i[n]=[...i[n],...s]};default:return(n,r,i)=>{if(i[n]===void 0){i[n]=r;return}i[n]=[...[i[n]].flat(),r]}}}function BR(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function sr(e,t){return t.encode?t.strict?zU(e):encodeURIComponent(e):e}function Ko(e,t){return t.decode?UU(e):e}function HR(e){return Array.isArray(e)?e.sort():typeof e=="object"?HR(Object.keys(e)).sort((t,n)=>Number(t)-Number(n)).map(t=>e[t]):e}function jR(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function jU(e){let t="";const n=e.indexOf("#");return n!==-1&&(t=e.slice(n)),t}function iE(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function P0(e){e=jR(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function N0(e,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t},BR(t.arrayFormatSeparator);const n=HU(t),r=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return r;for(const i of e.split("&")){if(i==="")continue;const o=t.decode?i.replace(/\+/g," "):i;let[s,a]=zR(o,"=");s===void 0&&(s=o),a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:Ko(a,t),n(Ko(s,t),a,r)}for(const[i,o]of Object.entries(r))if(typeof o=="object"&&o!==null)for(const[s,a]of Object.entries(o))o[s]=iE(a,t);else r[i]=iE(o,t);return t.sort===!1?r:(t.sort===!0?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((i,o)=>{const s=r[o];return s&&typeof s=="object"&&!Array.isArray(s)?i[o]=HR(s):i[o]=s,i},Object.create(null))}function KR(e,t){if(!e)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},BR(t.arrayFormatSeparator);const n=s=>t.skipNull&&WU(e[s])||t.skipEmptyString&&e[s]==="",r=BU(t),i={};for(const[s,a]of Object.entries(e))n(s)||(i[s]=a);const o=Object.keys(i);return t.sort!==!1&&o.sort(t.sort),o.map(s=>{const a=e[s];return a===void 0?"":a===null?sr(s,t):Array.isArray(a)?a.length===0&&t.arrayFormat==="bracket-separator"?sr(s,t)+"[]":a.reduce(r(s),[]).join("&"):sr(s,t)+"="+sr(a,t)}).filter(s=>s.length>0).join("&")}function GR(e,t){var i;t={decode:!0,...t};let[n,r]=zR(e,"#");return n===void 0&&(n=e),{url:((i=n==null?void 0:n.split("?"))==null?void 0:i[0])??"",query:N0(P0(e),t),...t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:Ko(r,t)}:{}}}function YR(e,t){t={encode:!0,strict:!0,[_y]:!0,...t};const n=jR(e.url).split("?")[0]||"",r=P0(e.url),i={...N0(r,{sort:!1}),...e.query};let o=KR(i,t);o&&(o=`?${o}`);let s=jU(e.url);if(e.fragmentIdentifier){const a=new URL(n);a.hash=e.fragmentIdentifier,s=t[_y]?a.hash:`#${e.fragmentIdentifier}`}return`${n}${o}${s}`}function qR(e,t,n){n={parseFragmentIdentifier:!0,[_y]:!1,...n};const{url:r,query:i,fragmentIdentifier:o}=GR(e,n);return YR({url:r,query:$U(i,t),fragmentIdentifier:o},n)}function KU(e,t,n){const r=Array.isArray(t)?i=>!t.includes(i):(i,o)=>!t(i,o);return qR(e,r,n)}const hv=Object.freeze(Object.defineProperty({__proto__:null,exclude:KU,extract:P0,parse:N0,parseUrl:GR,pick:qR,stringify:KR,stringifyUrl:YR},Symbol.toStringTag,{value:"Module"}));class GU{constructor(){this.routeData=null,this._onPopState=new Oe,this.onPopState=this._onPopState.event,window.addEventListener("popstate",()=>{this._onPopState.fire()})}get pageName(){return this.pathname.slice(1).split("/")[0]??""}get pathname(){return window.location.pathname}get query(){return hv.parseUrl(window.location.href).query}push(t,n){history.pushState({},"",hv.stringifyUrl({url:`/${t}`,query:n}))}replace(t,n){history.pushState({},"",hv.stringifyUrl({url:`/${t}`,query:n}))}}var YU=Object.defineProperty,qU=Object.getOwnPropertyDescriptor,QU=(e,t,n,r)=>{for(var i=r>1?void 0:r?qU(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&YU(t,n,i),i},XU=(e,t)=>(n,r)=>t(n,r,e);const $p=en("workbenchLegalService");let yy=class{constructor(e){this.legalService=e,this._currentTermsDocument="",this._currentPrivacyDocument="",this._currentCreditsDocument="",this.info=null}get currentTermsVersion(){if(!this.info)throw new Error("not initialized");return this.info.currentTermsVersion}get currentPrivacyVersion(){if(!this.info)throw new Error("");return this.info.currentPrivacyVersion}get currentPrivacyDocument(){return this.wrap(this._currentPrivacyDocument,z("legal.privacy_policy","Privacy Policy"))}wrap(e,t){return`<!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>${t}</title>
      </head>
      <body>
        ${e}
      </body>
    </html>
    `}get currentTermsDocument(){return this.wrap(this._currentTermsDocument,z("legal.eula","EULA"))}get currentCreditsDocument(){return this.wrap(this._currentCreditsDocument,z("legal.credits","Credits"))}get show(){if(!this.info)throw new Error("not initialized");return!this.info.agreedPrivacy.includes(this.info.currentPrivacyVersion)||!this.info.agreedEula.includes(this.info.currentTermsVersion)}async init(){this.info=await this.legalService.getLegalConfig(),this._currentPrivacyDocument=await this.legalService.getDocument("privacy",this.info.currentPrivacyVersion),this._currentTermsDocument=await this.legalService.getDocument("eula",this.info.currentTermsVersion),this._currentCreditsDocument=await this.legalService.getDocument("license","credits")}async agree(e){e.privacyVersion&&await this.legalService.agreePrivacy(e.privacyVersion),e.termsVersion&&await this.legalService.agreeTerms(e.termsVersion),await this.init()}};yy=QU([XU(0,$I)],yy);var ZU=Object.defineProperty,JU=Object.getOwnPropertyDescriptor,e3=(e,t,n,r)=>{for(var i=r>1?void 0:r?JU(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&ZU(t,n,i),i},t3=(e,t)=>(n,r)=>t(n,r,e);let by=class{constructor(e){this.personTokenService=e,this._onTokensChanged=new Oe,this._tokens=[],this.onTokensChanged=this._onTokensChanged.event,this._onUserInputValue=new Oe,this.onUserInputValue=this._onUserInputValue.event,this.userInputValue=""}get tokens(){return this._tokens}setUserInputValue(e){this.userInputValue=e,this._onUserInputValue.fire()}async createToken(){await this.personTokenService.create(this.userInputValue),this.userInputValue="",this._onUserInputValue.fire(),await this.fetchTokens()}async deleteToken(e){await this.personTokenService.delete(e),await this.fetchTokens()}async fetchTokens(){const e=await this.personTokenService.tokens();this._tokens=e,this._onTokensChanged.fire()}};by=e3([t3(0,KI)],by);const Wp=en("workbenchPersonalAccessTokenService");var Fe=(e=>(e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension",e))(Fe||{});class ld{constructor(){this._coreKeybindings=[],this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(t){if(lo===zi.Windows){if(t&&t.win)return t.win}else if(lo===zi.Macintosh){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}static bindToCurrentPlatform2(t){if(lo===zi.Windows){if(t&&t.win)return t.win}else if(lo===zi.Macintosh){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}registerKeybindingRule(t){const n=ld.bindToCurrentPlatform(t);if(n&&n.primary){const r=iy(n.primary,lo);r&&this._registerDefaultKeybinding(r,t.id,t.args,t.weight,0,t.when)}if(n&&Array.isArray(n.secondary))for(let r=0,i=n.secondary.length;r<i;r++){const o=n.secondary[r],s=iy(o,lo);s&&this._registerDefaultKeybinding(s,t.id,t.args,t.weight,-r-1,t.when)}}setExtensionKeybindings(t){let n=[],r=0;for(let i=0,o=t.length;i<o;i++){const s=t[i];let a=ld.bindToCurrentPlatform2(s);a&&a.primary&&(n[r++]={keybinding:a.primary,command:s.id,commandArgs:s.args,when:s.when,weight1:s.weight,weight2:0,extensionId:s.extensionId||null,isBuiltinExtension:s.isBuiltinExtension||!1})}this._extensionKeybindings=n,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(t){this.registerKeybindingRule(t),il.registerCommand(t)}static _mightProduceChar(t){return t>=U.KEY_0&&t<=U.KEY_9||t>=U.KEY_A&&t<=U.KEY_Z?!0:t===U.US_SEMICOLON||t===U.US_EQUAL||t===U.US_COMMA||t===U.US_MINUS||t===U.US_DOT||t===U.US_SLASH||t===U.US_BACKTICK||t===U.ABNT_C1||t===U.ABNT_C2||t===U.US_OPEN_SQUARE_BRACKET||t===U.US_BACKSLASH||t===U.US_CLOSE_SQUARE_BRACKET||t===U.US_QUOTE||t===U.OEM_8||t===U.OEM_102}_assertNoCtrlAlt(t,n){t.ctrlKey&&t.altKey&&!t.metaKey&&ld._mightProduceChar(t.keyCode)&&console.warn("Ctrl+Alt+ keybindings should not be used by default under Windows. Offender: ",t," for ",n)}_registerDefaultKeybinding(t,n,r,i,o,s){lo===zi.Windows&&this._assertNoCtrlAlt(t.parts[0],n),this._coreKeybindings.push({keybinding:t,command:n,commandArgs:r,when:s,weight1:i,weight2:o,extensionId:null,isBuiltinExtension:!1}),this._cachedMergedKeybindings=null}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=[].concat(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(r3)),this._cachedMergedKeybindings.slice(0)}}const De=new ld,n3={EditorModes:"platform.keybindingsRegistry"};Uc.add(n3.EditorModes,De);function r3(e,t){return e.weight1!==t.weight1?e.weight1-t.weight1:e.command<t.command?-1:e.command>t.command?1:e.weight2-t.weight2}const sa=en("messageService");class i3{constructor(){this._messages=[],this._onStatusChange=new Oe}get messages(){return this._messages}get onStatusChange(){return this._onStatusChange.event}destroy(t){this._messages=this._messages.filter(n=>n.id!==t),this._onStatusChange.fire()}showInformationMessage(t){return this._messages.push({id:y0(),message:t,destroytime:Date.now()+2e3}),this._onStatusChange.fire(),Promise.resolve()}cleanDestroy(){this._messages=this._messages.filter(t=>t.destroytime>=Date.now()),this._onStatusChange.fire()}}const D0=new At("highlightsContainerActive",!1),o3="workbench_highlights.action.deleteSelect",QR="workbench_highlights.action.editNote",s3="workbench_highlights.action.showMenu",a3="workbench_highlights.action.stopEditNote",XR="workbench_highlights.action.copyText",ZR="workbench_highlights.action.copyURL",JR="workbench_highlights.action.note",pf=Lt.and(Vg,D0,Fg),l3=Lt.and(D0,I0);De.registerCommandAndKeybindingRule({id:XR,weight:Fe.WorkbenchContrib+5,when:pf,primary:U.KEY_C|ft.CtrlCmd,handler:(e,t)=>{var a;const n=e.get(gr),r=e.get(sa),i=e.get(qa),o=(a=n.currentWebsite)==null?void 0:a.highlightsListController,s=t??(o==null?void 0:o.selectedHighlightId);if(o&&s){const l=o.highlights.find(c=>c.highlightId===s);l&&(i.writeText(l.text),r.showInformationMessage(z("highlight_list.copy_text_success","Copy text success")))}}});De.registerCommandAndKeybindingRule({id:ZR,weight:Fe.WorkbenchContrib+5,when:pf,handler:(e,t)=>{var a,l;const n=e.get(gr),r=e.get(sa),i=e.get(qa),o=(a=n.currentWebsite)==null?void 0:a.highlightsListController,s=t??(o==null?void 0:o.selectedHighlightId);if(o&&s&&o.highlights.find(d=>d.highlightId===s)){const d=`${location.host}/webpages/${(l=n.currentWebsite)==null?void 0:l.currentWebsiteId}/notes/${s}`;i.writeText(d),r.showInformationMessage(z("highlight_list.copy_url_success","Copy url success"))}}});De.registerCommandAndKeybindingRule({id:JR,weight:Fe.WorkbenchContrib+5,when:pf,primary:U.KEY_C|ft.CtrlCmd|ft.Shift,handler:(e,t)=>{var a;const n=e.get(gr),r=e.get(qa),i=e.get(sa),o=(a=n.currentWebsite)==null?void 0:a.highlightsListController,s=t??(o==null?void 0:o.selectedHighlightId);if(o&&s){const l=o.highlights.find(c=>c.highlightId===s);l&&l.note&&(r.writeText(l.note),i.showInformationMessage(z("highlight_list.copy_note_success","Copy note success")))}}});De.registerCommandAndKeybindingRule({id:QR,weight:Fe.WorkbenchContrib+5,when:pf,primary:U.KEY_N,handler:(e,t)=>{var o;const r=(o=e.get(gr).currentWebsite)==null?void 0:o.highlightsListController;if(!r)return;(t??r.selectedHighlightId)&&(r.list.focus(js.command),setTimeout(()=>{r.editNote()},100))}});De.registerCommandAndKeybindingRule({id:a3,weight:Fe.WorkbenchContrib+5,when:l3,primary:U.Escape,secondary:[U.Enter|ft.CtrlCmd],handler:e=>{var r;const n=(r=e.get(gr).currentWebsite)==null?void 0:r.highlightsListController;n&&n.selectedHighlightId&&n.endEditNote()}});De.registerCommandAndKeybindingRule({id:s3,weight:Fe.WorkbenchContrib+5,when:pf,primary:U.KEY_M,handler:e=>{var r;const n=(r=e.get(gr).currentWebsite)==null?void 0:r.highlightsListController;n&&n.selectedHighlightId&&n.setVisibleMenuId(n.selectedHighlightId)}});var c3=Object.defineProperty,u3=Object.getOwnPropertyDescriptor,d3=(e,t,n,r)=>{for(var i=r>1?void 0:r?u3(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&c3(t,n,i),i},oE=(e,t)=>(n,r)=>t(n,r,e);let Sy=class{constructor(e,t,n){this.model=e,this.contextKeyService=t,this.instantiationService=n,this.visibleMenuId=null,this._onStatusChange=new Oe,this._onEditNote=new Oe,this.onEditNote=this._onEditNote.event,this.onStatusChange=this._onStatusChange.event,this.highlightsContainerActive=D0.bindTo(this.contextKeyService),this.highlightNoteInputFocused=!1,this._list=this.instantiationService.createInstance(Xa),this._list.onFocus(()=>{this.highlightsContainerActive.set(!0),this._onStatusChange.fire()}),this._list.onBlur(()=>{this.highlightsContainerActive.set(!1),this._onStatusChange.fire()}),this.updateList(this.model.highlights??[]),this.model.onModelChanged(()=>{this.updateList(this.model.highlights??[])}),this._list.onItemDelete(r=>{this.model.deleteHighlight(r.id)})}get list(){return this._list}updateList(e){const t=[...e].sort((n,r)=>(n.tenThousandth??1/0)-(r.tenThousandth??1/0));this._list.updateList(t.map(n=>({...n,id:n.highlightId})))}setVisibleMenuId(e){this.visibleMenuId=e,this._onStatusChange.fire()}get idEditing(){return this.highlightNoteInputFocused}get selectedHighlightId(){return this._list.selectId}get highlights(){return this._list.items}updateNote(e,t){this.model.updateHighlightNote(e,t),this._onStatusChange.fire()}editNote(e){this.highlightNoteInputFocused=!0,e||this._onEditNote.fire(),this.visibleMenuId=null,this._onStatusChange.fire()}endEditNote(){this.highlightNoteInputFocused!==!1&&(this.highlightNoteInputFocused=!1,this._onEditNote.fire(),this._list.focus(js.command))}};Sy=d3([oE(1,Fo),oE(2,Or)],Sy);class eM{constructor(t,n,r){this.handleAdd=r,this._onItemStatusChange=new Oe,this.onItemStatusChange=this._onItemStatusChange.event,this._onMultipleSelectDispose=new Oe,this.onMultipleSelectDispose=this._onMultipleSelectDispose.event,this._onCursorChange=new Oe,this.onCursorChange=this._onCursorChange.event,this._onOptionsChange=new Oe,this.onOptionsChange=this._onCursorChange.event,this._searchQuery=null,this.cursorIndex=0,this.sortedOptions=[],this.selectOptions=new Set(t),this.optionsMap=new Map,n.map(i=>{this.optionsMap.set(i.id,i)}),this.build()}build(){this.sortedOptions=Array.from(this.optionsMap.values()).sort((t,n)=>{const r=this.isOptionSelected(t.id)?1:0,i=this.isOptionSelected(n.id)?1:0;return r!==i?-r+i:t.label.localeCompare(n.label)}),this._onOptionsChange.fire()}get options(){return this.sortedOptions.filter(t=>this.searchQuery?t.label.toLocaleLowerCase().includes(this.searchQuery.toLocaleLowerCase()):!0)}get searchQuery(){return this._searchQuery??""}get waitForAdd(){if(!this.searchQuery||!this.handleAdd)return null;const t=this.searchQuery.trim();return t.length===0||this.options.some(r=>r.label===t)?null:t}get cursorId(){var t;return((t=this.options[this.cursorIndex])==null?void 0:t.id)??null}cursorMoveDown(){let t=Math.max(this.options.length-1,0);this.waitForAdd&&(t=this.options.length),this.cursorIndex=Math.min(this.cursorIndex+1,t),this._onCursorChange.fire()}async addOption(){if(!(!this.waitForAdd||!this.handleAdd))try{const t=await this.handleAdd(this.waitForAdd);this.optionsMap.set(t.id,t),this._searchQuery=null,this.selectOption(t.id),this.build(),this.cursorMoveTo(t.id)}catch{}}cursorMoveUp(){this.cursorIndex=Math.max(this.cursorIndex-1,0),this._onCursorChange.fire()}cursorMoveTo(t){this.cursorIndex=this.options.findIndex(n=>n.id===t)??0,this._onCursorChange.fire()}selectOption(t){this.selectOptions.add(t);const n=this.optionsMap.get(t);n&&this._onItemStatusChange.fire({option:n,status:"selected",currentOptions:Array.from(this.selectOptions)})}toggleOption(t){this.isOptionSelected(t)?this.unselectOption(t):this.selectOption(t)}unselectOption(t){this.selectOptions.delete(t);const n=this.optionsMap.get(t);n&&this._onItemStatusChange.fire({option:n,status:"unselected",currentOptions:Array.from(this.selectOptions)})}updateSearchQuery(t){this._searchQuery=t,this._onOptionsChange.fire(),this.cursorIndex=0,this._onCursorChange.fire()}isOptionSelected(t){return this.selectOptions.has(t)}dispose(){this._onMultipleSelectDispose.fire()}}var f3=Object.defineProperty,h3=Object.getOwnPropertyDescriptor,p3=(e,t,n,r)=>{for(var i=r>1?void 0:r?h3(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&f3(t,n,i),i},pv=(e,t)=>(n,r)=>t(n,r,e);let wy=class{constructor(e,t,n,r,i){this.content=t,this.webpagesService=n,this.instantiationService=r,this.workbenchWebsiteService=i,this.toFocus=null,this.tagEditController=null,this._onStateChange=new Oe,this.onStateChange=this._onStateChange.event,this.textModel=Og.from(e);let o=this.textModel.version;this.textModel.onModelChanged(async()=>{const s=this.textModel.operations,a=this.textModel.version,l=s.filter(c=>{const d=c.id[1],h=o[c.id[0]];return h?d>h:!0});this.webpagesService.update(this.textModel.id,{version:a,previousVersion:o,operations:l}).then(()=>{o=a})}),this.highlightsListController=this.instantiationService.createInstance(Sy,this.textModel)}get highlightInstance(){var e;return(e=this.frame)==null?void 0:e.highlightInstance}get currentWebsiteId(){return this.textModel.id}get title(){return this.textModel.getProperty().title}get link(){return this.textModel.getProperty().link}setFrame(e){this.frame=e,e.highlightInstance.onClickHighlight(t=>{this.highlightsListController.list.select(t)}),e.highlightInstance.onCreateHighlight(t=>{this.highlightsListController.list.select(t)}),this.toFocus&&this.frame.highlightInstance.focusAndScroll(this.toFocus)}focusAndScroll(e){this.frame?this.frame.highlightInstance.focusAndScroll(e):(console.log("update",e),this.toFocus=e)}get onModelChanged(){return this.textModel.onModelChanged}startEditTag(){const e=this.textModel.labels??[],t=new Set;this.workbenchWebsiteService.webpages.forEach(r=>{r.labels.forEach(i=>{t.add(i)})});const n=new eM(e,Array.from(t.values()).map(r=>({id:r,label:r})),async r=>({id:r,label:r}));n.onItemStatusChange(r=>{r.status==="selected"?this.textModel.addLabel(r.option.id):this.textModel.deleteLabel(r.option.id)}),this.tagEditController=n,this._onStateChange.fire(),n.onMultipleSelectDispose(()=>{this.tagEditController=null,this._onStateChange.fire()})}};wy=p3([pv(2,cf),pv(3,Or),pv(4,ma)],wy);var g3=Object.defineProperty,m3=Object.getOwnPropertyDescriptor,v3=(e,t,n,r)=>{for(var i=r>1?void 0:r?m3(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&g3(t,n,i),i},gv=(e,t)=>(n,r)=>t(n,r,e);let Ey=class{constructor(e,t,n){this.webpagesService=e,this.pageInstanceService=t,this.instantiationService=n,this.loading=null,this.pagePreviewModelMap=new Map,this._onLoadingStateChange=new Oe,this.onLoadingStateChange=this._onLoadingStateChange.event}get currentWebsite(){var t;const e=this.pageInstanceService.pageInstance;return((t=this.pagePreviewModelMap.get(e.pageId))==null?void 0:t.textModel)??null}get currentWebsiteLoaded(){var n;const t=this.pageInstanceService.pageInstance.pageId;return!!((n=this.pagePreviewModelMap.get(t))!=null&&n.textModel)}isLoading(e){var t;return((t=this.pagePreviewModelMap.get(e))==null?void 0:t.loading)??!1}getWebpageModel(e){var t;return((t=this.pagePreviewModelMap.get(e))==null?void 0:t.textModel)??null}getLatestWebpage(e){var t;return((t=this.pagePreviewModelMap.get(e))==null?void 0:t.id)??null}async loadWebpage(e,t){const n=this.pagePreviewModelMap.get(e);return(n==null?void 0:n.id)===t?n.textModelTask:t===null?(this.pagePreviewModelMap.set(e,{id:t,loading:!1,textModel:null,textModelTask:this.doLoadPage(e,t)}),null):(this.pagePreviewModelMap.set(e,{id:t,loading:!1,textModel:(n==null?void 0:n.textModel)??null,textModelTask:this.doLoadPage(e,t)}),this._onLoadingStateChange.fire(e),this.pagePreviewModelMap.get(e).textModelTask)}async doLoadPage(e,t){if(t===null)return this._onLoadingStateChange.fire(e),null;const n=setTimeout(()=>{const a=this.pagePreviewModelMap.get(e);(a==null?void 0:a.id)===t&&(a.loading=!0,a.textModel=null,this._onLoadingStateChange.fire(e))},200),[r,i]=await Promise.all([this.fetchLogs(t),this.fetchWebsite(t)]),o=this.instantiationService.createInstance(new Jt(wy,[r,i])),s=this.pagePreviewModelMap.get(e);return clearTimeout(n),(s==null?void 0:s.id)===t&&(s.textModel=o,s.loading=!1,this._onLoadingStateChange.fire(e)),o}async fetchWebsite(e){return await this.webpagesService.getContent(e)}async fetchLogs(e){return this.webpagesService.getModel(e).then(t=>(t==null?void 0:t.operations)??[])}};Ey=v3([gv(0,cf),gv(1,Yn),gv(2,Or)],Ey);class _3 extends Ey{async fetchWebsite(t){return(await fetch(`/private/api/get?path=${encodeURIComponent(t)}`)).json()}}var y3=Object.defineProperty,b3=Object.getOwnPropertyDescriptor,S3=(e,t,n,r)=>{for(var i=r>1?void 0:r?b3(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&y3(t,n,i),i},mv=(e,t)=>(n,r)=>t(n,r,e);let Cy=class{constructor(e,t,n){this.promptService=e,this.instantiationService=t,this.remotesManagerService=n,this._statusMap=new Map,this._onStatusChange=new Oe,this.onStatusChange=this._onStatusChange.event,this._list=this.instantiationService.createInstance(Xa),this._list.onSelectItemChange(()=>{this._onStatusChange.fire()}),this._list.onItemDelete(r=>{this.delete(r.id)}),this.remotesManagerService.onSyncStatusChange(r=>{this.connect(r.workspaceId)})}get list(){return this._list}get currentService(){if(!this._list.selectId)return null;const e=this._list.items[this._list.currentIndex]??null;return e?{config:e,status:this._statusMap.get(e.id)??null}:null}getStatus(e){return this._statusMap.get(e)??null}async reconnect(e){this._statusMap.delete(e),this._onStatusChange.fire();const t=await this.remotesManagerService.getSyncStatus(e);this._statusMap.set(e,t),this._onStatusChange.fire()}init(){this.reload()}select(e){this._list.select(e)}async delete(e){await this.remotesManagerService.deleteRemoteHamsterBase(e),this._statusMap.delete(e),this._list.delete(e),this._onStatusChange.fire()}async update(e,t){this._statusMap.delete(e),await this.remotesManagerService.update(e,t),this.reload()}async start(e){await this.remotesManagerService.startSync(e),this.reload()}async stop(e){await this.remotesManagerService.stopSync(e),this.reload()}async create(){const e=await this.promptService.show({title:z("remotes_prompt.title","Add Remote"),items:[{type:"input",key:"name",label:z("remotes_prompt.name","Name")}]});if(!e)return;const{name:t}=e;await this.remotesManagerService.addRemoteHamsterBase({name:t,entrypoint:"",token:""}),this.reload()}async reload(){const e=await this.remotesManagerService.getRemoteHamsterBaseList();this._list.updateList(e,{autoSelectFirstWhenInit:!0});for(const t of e)this.connect(t.id);this._onStatusChange.fire()}async connect(e){this._statusMap.set(e,await this.remotesManagerService.getSyncStatus(e)),this._onStatusChange.fire()}};Cy=S3([mv(0,hs),mv(1,Or),mv(2,sy)],Cy);const F0=en("workbenchRemoteHamsterBaseService");class w3{constructor(){this._onThemeConfigChanged=new Oe,this._onThemeChanged=new Oe,this.onThemeConfigChanged=this._onThemeConfigChanged.event,this.onThemeChanged=this._onThemeChanged.event,this.isDark=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,this._themeConfig=localStorage.getItem("_themeConfig")??"auto",window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{if(this.theme!==this.getTheme(this._themeConfig,t.matches)){this.isDark=t.matches,this._onThemeChanged.fire();return}this.isDark=t.matches})}get themeConfig(){return this._themeConfig}get theme(){return this.getTheme(this._themeConfig,this.isDark)}setThemeConfig(t){this.theme!==this.getTheme(t,this.isDark)&&(this._themeConfig=t,this._onThemeChanged.fire()),this._themeConfig=t,localStorage.setItem("_themeConfig",this._themeConfig),this._onThemeConfigChanged.fire()}getTheme(t,n){switch(t){case"auto":return n?"dark":"light";case"light":return"light";case"dark":return"dark"}}}const gf=en("workbenchThemeService");var di=(e=>(e[e.error=-1]="error",e[e.added=0]="added",e[e.parsing=1]="parsing",e[e.parsed=2]="parsed",e[e.uploading=3]="uploading",e[e.uploaded=4]="uploaded",e))(di||{});function sE(e){return{[-1]:z("upload_status.error","Upload Error"),[0]:z("upload_status.added","Added"),[1]:z("upload_status.parsing","Parsing"),[2]:z("upload_status.parsed","Parsed"),[3]:z("upload_status.uploading","Uploading"),[4]:z("upload_status.uploaded","Uploaded")}[e]}const tM=en("workbenchUploadService");var E3=Object.defineProperty,C3=Object.getOwnPropertyDescriptor,x3=(e,t,n,r)=>{for(var i=r>1?void 0:r?C3(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&E3(t,n,i),i},k3=(e,t)=>(n,r)=>t(n,r,e);function I3(e){return new Promise(t=>{setTimeout(()=>t(),e)})}let xy=class{constructor(e,t){this.webpageParser=e,this.workbenchWebsiteService=t,this._onStatusChange=new Oe,this.onStatusChange=this._onStatusChange.event,this.uploadPanelOpen=!1,this.parseTaskPromise=null,this.uploadTaskPromise=null,this.hiddenTaskPromise=null,this._files=[]}toggleUploadPanel(){this.uploadPanelOpen=!this.uploadPanelOpen,this.fireChange()}get files(){return this._files}addFiles(e){for(const t of e)this._files.push({file:t,status:{type:di.added}});this.fireChange()}async parseOne(){this.parseTaskPromise||(this.parseTaskPromise=this.doParseOne()),await this.parseTaskPromise,this.parseTaskPromise=null}async doParseOne(){const e=this._files.find(t=>t.status.type===di.added);if(e){e.status={type:di.parsing},this.fireChange();try{const t=await this.webpageParser(e.file);e.status={type:di.parsed,meta:t}}catch(t){e.status={type:di.error,errorMessage:t.message}}this.fireChange()}}async uploadOne(){this.uploadTaskPromise||(this.uploadTaskPromise=this.doUploadOne()),await this.uploadTaskPromise,this.uploadTaskPromise=null}async hideOne(){this.hiddenTaskPromise||(this.hiddenTaskPromise=this.doHiddenOne()),await this.hiddenTaskPromise,this.hiddenTaskPromise=null}async doUploadOne(){const e=this._files.find(n=>n.status.type===di.parsed);if(!e)return;const t=e.status;e.status.type=di.uploading,this.fireChange();try{await this.workbenchWebsiteService.upload(t.meta,e.file)}catch(n){e.status={type:di.error,errorMessage:n.message},this.fireChange();return}e.status={type:di.uploaded,hidden:!1},this.fireChange()}async doHiddenOne(){const e=this._files.find(t=>t.status.type===di.uploaded&&t.status.hidden===!1);e&&(await I3(500),e.status.hidden=!0,this.fireChange())}fireChange(){this._onStatusChange.fire()}};xy=x3([k3(1,ma)],xy);const It=en("viewsService");class R3{constructor(){this.map=new Map}registerView(t,n){this.map.set(t,n)}getViewWithId(t){return this.map.get(t)??null}}class M3{constructor(t,n){this.workspaceId=t,this.sqliteName=n}async getPagesCache(){const t=await this.getDataBaseName();return sessionStorage.getItem(t)?parseInt(sessionStorage.getItem(t),10):0}async merge(t){return await this.addAll(t),await this.getAll()}async getAll(){const t=await this.webpages();return new Promise(n=>{const o=t.transaction("webpages","readonly").objectStore("webpages").getAll();o.onsuccess=function(s){n(s.target.result)}})}async addAll(t){const n=await this.webpages(),r=await this.getDataBaseName();return new Promise(i=>{let o=n.transaction("webpages","readwrite"),s=o.objectStore("webpages"),a=0;t.forEach(l=>{s.put(l),l.lastModified&&l.lastModified>a&&(a=l.lastModified)}),sessionStorage.setItem(r,String(a)),o.oncomplete=function(){i()},o.onerror=function(){i()}})}async webpages(){const t=await this.getDataBaseName();return new Promise(n=>{let r=indexedDB.open(t,1);r.onupgradeneeded=function(){let i=r.result;i.objectStoreNames.contains("webpages")||i.createObjectStore("webpages",{keyPath:"id"})},r.onsuccess=function(){let i=r.result;n(i)}})}async getDataBaseName(){return`hamsterbase_cache_${this.workspaceId}_webpages_${this.sqliteName}`}}var T3=Object.defineProperty,L3=Object.getOwnPropertyDescriptor,A3=(e,t,n,r)=>{for(var i=r>1?void 0:r?L3(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&T3(t,n,i),i},aE=(e,t)=>(n,r)=>t(n,r,e);let ky=class extends qV{constructor(e,t){super(t),this.workspaceService=e,this.webpagesService=t,t.onWebpageChange(()=>{this.init()})}async fetch(){const e=await this.workspaceService.workspaceId(),t=await this.workspaceService.databaseName(),n=new M3(e,t),r=await n.getPagesCache(),i=await this.webpagesService.list({last_modified:r});return(await n.merge(i)).filter(s=>!s.deleted).sort((s,a)=>-s.createTime+a.createTime)}async doUpload(e,t){const n=new FormData;n.append("info",JSON.stringify(e)),n.append("file",t);const r=await fetch("/private/api/upload",{method:"post",body:n}),{fileId:i}=await r.json();return i}};ky=A3([aE(0,GI),aE(1,cf)],ky);const O3="sidebar.action.openSettings",P3="sidebar.action.selectNextMenu",N3="sidebar.action.selectPreviousMenu",D3="sidebar.action.openFirstSidebar",F3="sidebar.action.openSecondSidebar",V3="sidebar.action.openThirdSidebar",U3="sidebar.action.openFourthSidebar",$3="sidebar.action.openFifthSidebar",W3="sidebar.action.openSixthSidebar",z3="sidebar.action.openSeventhSidebar",B3="sidebar.action.openEighthSidebar",H3="sidebar.action.openNinthSidebar",V0=new At("sidebarMenuSelected",!1);var j3=Object.defineProperty,K3=Object.getOwnPropertyDescriptor,G3=(e,t,n,r)=>{for(var i=r>1?void 0:r?K3(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&j3(t,n,i),i},rh=(e,t)=>(n,r)=>t(n,r,e);const Hc=en("sidebarMenuService");let Iy=class{constructor(e,t,n,r){this.workbenchWebpageViewService=e,this.pageInstanceService=t,this.unreadCount=0,this.totalCount=0,this._onStateChange=new Oe,this.onStateChange=this._onStateChange.event,n.onWebpagesDidChange(()=>{this.unreadCount=n.webpages.filter(o=>o.read?!1:Oo().diff(Oo(o.firstAddTime),"day")<14).length,this.totalCount=n.webpages.length,this._onStateChange.fire()}),this.workbenchWebpageViewService.onDidWebpageViewChange(()=>{this._onStateChange.fire()}),this.pageInstanceService.onPageInstanceChange(()=>{this._onStateChange.fire()});const i=V0.bindTo(r);i.set(this.getMenuIndex(this.activeMenuKey)!==null),this.pageInstanceService.onPageInstanceChange(()=>{i.set(this.getMenuIndex(this.activeMenuKey)!==null)})}get settings(){return{key:"settings",title:z("left_panel_title.settings","Settings"),icon:"SettingConfig",action:()=>this.pageInstanceService.go("settings"),keyCode:U.US_COMMA|ft.CtrlCmd|ft.Shift}}get activeMenuKey(){return this.pageInstanceService.pageInstance.pageId??null}get menuGroups(){return[this.library(),this.view()]}selectNextMenu(){const e=this.getMenuIndex(this.activeMenuKey);if(e===null)return;const t=this.getMenuByIndex(e+1);t&&t.action()}selectPreviousMenu(){const e=this.getMenuIndex(this.activeMenuKey);if(e===null)return;const t=this.getMenuByIndex(e-1);t&&t.action()}getMenuByIndex(e){const t=this.menuGroups;let n=0;for(const r of t)for(const i of r.menus){if(n===e)return i;n++}return null}getMenuIndex(e){if(e===null)return null;const t=this.menuGroups;let n=0;for(const r of t)for(const i of r.menus){if(i.key===e)return n;n++}return null}library(){const e=this.pageInstanceService.pageInstance;return{key:"Library",title:z("left_sidebar_menu_group.library","Library"),menus:[{key:"upload",icon:"AddWeb",label:z("left_sidebar_menu.upload","Upload"),title:z("left_sidebar_menu.upload","Upload"),action:()=>{e.pageId!=="upload"&&this.pageInstanceService.go("upload")}},{key:Za.pageName,icon:"Inbox",label:z("left_sidebar_menu.all","All"),title:z("left_sidebar_menu.all","All"),action:()=>{this.pageInstanceService.go(Za.pageName)},keepExtra:!0,extra:{type:"text",text:String(this.totalCount)}},{key:Ks.pageName,icon:"MessageSent",label:z("left_sidebar_menu.unread","Unread"),title:z("left_sidebar_menu.unread","Unread"),keepExtra:!0,action:()=>{e.pageId!==Ks.pageName&&this.pageInstanceService.go(Ks.pageName)},extra:{type:"text",text:String(this.unreadCount)}}]}}view(){const e=this.workbenchWebpageViewService.webpageViews.map(t=>({key:`${Qr.pageName}/${t.id}`,title:t.title,label:t.title,action:()=>{this.pageInstanceService.pageInstance.pageId!==`${Qr.pageName}/${t.id}`&&this.pageInstanceService.go(Qr.pageName,{viewId:t.id})},extra:{type:"icon",icon:"CloseSmall",action:()=>{this.workbenchWebpageViewService.removeView(t.id)}}}));return{key:"view",title:z("left_sidebar_menu_group.views","Views"),menus:e,extra:{icon:"AddOne",title:z("left_sidebar_menu.views_action_create_view","Create_View"),commandId:T0}}}};Iy=G3([rh(0,wc),rh(1,Yn),rh(2,ma),rh(3,Fo)],Iy);lf(Ng,Up,$c.Delayed);lf(sa,i3,$c.Delayed);lf(hs,jV,$c.Delayed);lf(F0,Cy,$c.Delayed);lf(Hc,Iy,$c.Delayed);var nM={exports:{}},Qi={},rM={exports:{}},zt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var lE=Object.getOwnPropertySymbols,Y3=Object.prototype.hasOwnProperty,q3=Object.prototype.propertyIsEnumerable;function Q3(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function X3(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var iM=X3()?Object.assign:function(e,t){for(var n,r=Q3(e),i,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var s in n)Y3.call(n,s)&&(r[s]=n[s]);if(lE){i=lE(n);for(var a=0;a<i.length;a++)q3.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U0=iM,jc=60103,oM=60106;zt.Fragment=60107;zt.StrictMode=60108;zt.Profiler=60114;var sM=60109,aM=60110,lM=60112;zt.Suspense=60113;var cM=60115,uM=60116;if(typeof Symbol=="function"&&Symbol.for){var no=Symbol.for;jc=no("react.element"),oM=no("react.portal"),zt.Fragment=no("react.fragment"),zt.StrictMode=no("react.strict_mode"),zt.Profiler=no("react.profiler"),sM=no("react.provider"),aM=no("react.context"),lM=no("react.forward_ref"),zt.Suspense=no("react.suspense"),cM=no("react.memo"),uM=no("react.lazy")}var cE=typeof Symbol=="function"&&Symbol.iterator;function Z3(e){return e===null||typeof e!="object"?null:(e=cE&&e[cE]||e["@@iterator"],typeof e=="function"?e:null)}function mf(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fM={};function Kc(e,t,n){this.props=e,this.context=t,this.refs=fM,this.updater=n||dM}Kc.prototype.isReactComponent={};Kc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(mf(85));this.updater.enqueueSetState(this,e,t,"setState")};Kc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hM(){}hM.prototype=Kc.prototype;function $0(e,t,n){this.props=e,this.context=t,this.refs=fM,this.updater=n||dM}var W0=$0.prototype=new hM;W0.constructor=$0;U0(W0,Kc.prototype);W0.isPureReactComponent=!0;var z0={current:null},pM=Object.prototype.hasOwnProperty,gM={key:!0,ref:!0,__self:!0,__source:!0};function mM(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)pM.call(t,r)&&!gM.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:jc,type:e,key:o,ref:s,props:i,_owner:z0.current}}function J3(e,t){return{$$typeof:jc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function B0(e){return typeof e=="object"&&e!==null&&e.$$typeof===jc}function e2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var uE=/\/+/g;function vv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?e2(""+e.key):t.toString(36)}function np(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case jc:case oM:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+vv(s,0):r,Array.isArray(i)?(n="",e!=null&&(n=e.replace(uE,"$&/")+"/"),np(i,t,n,"",function(c){return c})):i!=null&&(B0(i)&&(i=J3(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(uE,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",Array.isArray(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+vv(o,a);s+=np(o,t,n,l,i)}else if(l=Z3(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+vv(o,a++),s+=np(o,t,n,l,i);else if(o==="object")throw t=""+e,Error(mf(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function ih(e,t,n){if(e==null)return e;var r=[],i=0;return np(e,r,"","",function(o){return t.call(n,o,i++)}),r}function t2(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var vM={current:null};function ps(){var e=vM.current;if(e===null)throw Error(mf(321));return e}var n2={ReactCurrentDispatcher:vM,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:z0,IsSomeRendererActing:{current:!1},assign:U0};zt.Children={map:ih,forEach:function(e,t,n){ih(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ih(e,function(){t++}),t},toArray:function(e){return ih(e,function(t){return t})||[]},only:function(e){if(!B0(e))throw Error(mf(143));return e}};zt.Component=Kc;zt.PureComponent=$0;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n2;zt.cloneElement=function(e,t,n){if(e==null)throw Error(mf(267,e));var r=U0({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=z0.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)pM.call(t,l)&&!gM.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:jc,type:e.type,key:i,ref:o,props:r,_owner:s}};zt.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:aM,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:sM,_context:e},e.Consumer=e};zt.createElement=mM;zt.createFactory=function(e){var t=mM.bind(null,e);return t.type=e,t};zt.createRef=function(){return{current:null}};zt.forwardRef=function(e){return{$$typeof:lM,render:e}};zt.isValidElement=B0;zt.lazy=function(e){return{$$typeof:uM,_payload:{_status:-1,_result:e},_init:t2}};zt.memo=function(e,t){return{$$typeof:cM,type:e,compare:t===void 0?null:t}};zt.useCallback=function(e,t){return ps().useCallback(e,t)};zt.useContext=function(e,t){return ps().useContext(e,t)};zt.useDebugValue=function(){};zt.useEffect=function(e,t){return ps().useEffect(e,t)};zt.useImperativeHandle=function(e,t,n){return ps().useImperativeHandle(e,t,n)};zt.useLayoutEffect=function(e,t){return ps().useLayoutEffect(e,t)};zt.useMemo=function(e,t){return ps().useMemo(e,t)};zt.useReducer=function(e,t,n){return ps().useReducer(e,t,n)};zt.useRef=function(e){return ps().useRef(e)};zt.useState=function(e){return ps().useState(e)};zt.version="17.0.2";rM.exports=zt;var v=rM.exports;const Q=rl(v),r2=wN({__proto__:null,default:Q},[v]);var _M={exports:{}},yM={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,n,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}if(typeof window>"u"||typeof MessageChannel!="function"){var l=null,c=null,d=function(){if(l!==null)try{var K=e.unstable_now();l(!0,K),l=null}catch(R){throw setTimeout(d,0),R}};t=function(K){l!==null?setTimeout(t,0,K):(l=K,setTimeout(d,0))},n=function(K,R){c=setTimeout(K,R)},r=function(){clearTimeout(c)},e.unstable_shouldYield=function(){return!1},i=e.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,p=window.clearTimeout;if(typeof console<"u"){var g=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof g!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var b=!1,k=null,y=-1,_=5,w=0;e.unstable_shouldYield=function(){return e.unstable_now()>=w},i=function(){},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<K?Math.floor(1e3/K):5};var x=new MessageChannel,C=x.port2;x.port1.onmessage=function(){if(k!==null){var K=e.unstable_now();w=K+_;try{k(!0,K)?C.postMessage(null):(b=!1,k=null)}catch(R){throw C.postMessage(null),R}}else b=!1},t=function(K){k=K,b||(b=!0,C.postMessage(null))},n=function(K,R){y=h(function(){K(e.unstable_now())},R)},r=function(){p(y),y=-1}}function F(K,R){var O=K.length;K.push(R);e:for(;;){var j=O-1>>>1,Z=K[j];if(Z!==void 0&&0<N(Z,R))K[j]=R,K[O]=Z,O=j;else break e}}function M(K){return K=K[0],K===void 0?null:K}function L(K){var R=K[0];if(R!==void 0){var O=K.pop();if(O!==R){K[0]=O;e:for(var j=0,Z=K.length;j<Z;){var le=2*(j+1)-1,ee=K[le],ie=le+1,fe=K[ie];if(ee!==void 0&&0>N(ee,O))fe!==void 0&&0>N(fe,ee)?(K[j]=fe,K[ie]=O,j=ie):(K[j]=ee,K[le]=O,j=le);else if(fe!==void 0&&0>N(fe,O))K[j]=fe,K[ie]=O,j=ie;else break e}}return R}return null}function N(K,R){var O=K.sortIndex-R.sortIndex;return O!==0?O:K.id-R.id}var V=[],Y=[],J=1,H=null,D=3,T=!1,W=!1,B=!1;function G(K){for(var R=M(Y);R!==null;){if(R.callback===null)L(Y);else if(R.startTime<=K)L(Y),R.sortIndex=R.expirationTime,F(V,R);else break;R=M(Y)}}function te(K){if(B=!1,G(K),!W)if(M(V)!==null)W=!0,t(re);else{var R=M(Y);R!==null&&n(te,R.startTime-K)}}function re(K,R){W=!1,B&&(B=!1,r()),T=!0;var O=D;try{for(G(R),H=M(V);H!==null&&(!(H.expirationTime>R)||K&&!e.unstable_shouldYield());){var j=H.callback;if(typeof j=="function"){H.callback=null,D=H.priorityLevel;var Z=j(H.expirationTime<=R);R=e.unstable_now(),typeof Z=="function"?H.callback=Z:H===M(V)&&L(V),G(R)}else L(V);H=M(V)}if(H!==null)var le=!0;else{var ee=M(Y);ee!==null&&n(te,ee.startTime-R),le=!1}return le}finally{H=null,D=O,T=!1}}var ae=i;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){W||T||(W=!0,t(re))},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return M(V)},e.unstable_next=function(K){switch(D){case 1:case 2:case 3:var R=3;break;default:R=D}var O=D;D=R;try{return K()}finally{D=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=ae,e.unstable_runWithPriority=function(K,R){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var O=D;D=K;try{return R()}finally{D=O}},e.unstable_scheduleCallback=function(K,R,O){var j=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?j+O:j):O=j,K){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=O+Z,K={id:J++,callback:R,priorityLevel:K,startTime:O,expirationTime:Z,sortIndex:-1},O>j?(K.sortIndex=O,F(Y,K),M(V)===null&&K===M(Y)&&(B?r():B=!0,n(te,O-j))):(K.sortIndex=Z,F(V,K),W||T||(W=!0,t(re))),K},e.unstable_wrapCallback=function(K){var R=D;return function(){var O=D;D=R;try{return K.apply(this,arguments)}finally{D=O}}}})(yM);_M.exports=yM;var i2=_M.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=v,Vn=iM,Sr=i2;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Wg)throw Error(ke(227));var bM=new Set,Dd={};function al(e,t){Ic(e,t),Ic(e+"Capture",t)}function Ic(e,t){for(Dd[e]=t,e=0;e<t.length;e++)bM.add(t[e])}var ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),o2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dE=Object.prototype.hasOwnProperty,fE={},hE={};function s2(e){return dE.call(hE,e)?!0:dE.call(fE,e)?!1:o2.test(e)?hE[e]=!0:(fE[e]=!0,!1)}function a2(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function l2(e,t,n,r){if(t===null||typeof t>"u"||a2(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zr(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ar[e]=new Zr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ar[t]=new Zr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ar[e]=new Zr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ar[e]=new Zr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ar[e]=new Zr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ar[e]=new Zr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ar[e]=new Zr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ar[e]=new Zr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ar[e]=new Zr(e,5,!1,e.toLowerCase(),null,!1,!1)});var H0=/[\-:]([a-z])/g;function j0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(H0,j0);Ar[t]=new Zr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(H0,j0);Ar[t]=new Zr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(H0,j0);Ar[t]=new Zr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ar[e]=new Zr(e,1,!1,e.toLowerCase(),null,!1,!1)});Ar.xlinkHref=new Zr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ar[e]=new Zr(e,1,!1,e.toLowerCase(),null,!0,!0)});function K0(e,t,n,r){var i=Ar.hasOwnProperty(t)?Ar[t]:null,o=i!==null?i.type===0:r?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");o||(l2(t,n,i,r)&&(n=null),r||i===null?s2(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ll=Wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gu=60103,Da=60106,Ns=60107,G0=60108,cd=60114,Y0=60109,q0=60110,zg=60112,ud=60113,zp=60120,Bg=60115,Q0=60116,X0=60121,Z0=60128,SM=60129,J0=60130,Ry=60131;if(typeof Symbol=="function"&&Symbol.for){var _r=Symbol.for;Gu=_r("react.element"),Da=_r("react.portal"),Ns=_r("react.fragment"),G0=_r("react.strict_mode"),cd=_r("react.profiler"),Y0=_r("react.provider"),q0=_r("react.context"),zg=_r("react.forward_ref"),ud=_r("react.suspense"),zp=_r("react.suspense_list"),Bg=_r("react.memo"),Q0=_r("react.lazy"),X0=_r("react.block"),_r("react.scope"),Z0=_r("react.opaque.id"),SM=_r("react.debug_trace_mode"),J0=_r("react.offscreen"),Ry=_r("react.legacy_hidden")}var pE=typeof Symbol=="function"&&Symbol.iterator;function Su(e){return e===null||typeof e!="object"?null:(e=pE&&e[pE]||e["@@iterator"],typeof e=="function"?e:null)}var _v;function Yu(e){if(_v===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_v=t&&t[1]||""}return`
`+_v+e}var yv=!1;function oh(e,t){if(!e||yv)return"";yv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a])return`
`+i[s].replace(" at new "," at ");while(1<=s&&0<=a);break}}}finally{yv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Yu(e):""}function c2(e){switch(e.tag){case 5:return Yu(e.type);case 16:return Yu("Lazy");case 13:return Yu("Suspense");case 19:return Yu("SuspenseList");case 0:case 2:case 15:return e=oh(e.type,!1),e;case 11:return e=oh(e.type.render,!1),e;case 22:return e=oh(e.type._render,!1),e;case 1:return e=oh(e.type,!0),e;default:return""}}function ac(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ns:return"Fragment";case Da:return"Portal";case cd:return"Profiler";case G0:return"StrictMode";case ud:return"Suspense";case zp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case q0:return(e.displayName||"Context")+".Consumer";case Y0:return(e._context.displayName||"Context")+".Provider";case zg:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Bg:return ac(e.type);case X0:return ac(e._render);case Q0:t=e._payload,e=e._init;try{return ac(e(t))}catch{}}return null}function aa(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function wM(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function u2(e){var t=wM(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sh(e){e._valueTracker||(e._valueTracker=u2(e))}function EM(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=wM(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function My(e,t){var n=t.checked;return Vn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function gE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=aa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function CM(e,t){t=t.checked,t!=null&&K0(e,"checked",t,!1)}function Ty(e,t){CM(e,t);var n=aa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ly(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ly(e,t.type,aa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ly(e,t,n){(t!=="number"||Bp(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function d2(e){var t="";return Wg.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function Ay(e,t){return e=Vn({children:void 0},t),(t=d2(t.children))&&(e.children=t),e}function lc(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+aa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Oy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Vn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ke(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(ke(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:aa(n)}}function xM(e,t){var n=aa(t.value),r=aa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _E(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var Py={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function kM(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ny(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kM(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ah,IM=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!==Py.svg||"innerHTML"in e)e.innerHTML=t;else{for(ah=ah||document.createElement("div"),ah.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ah.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var dd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f2=["Webkit","ms","Moz","O"];Object.keys(dd).forEach(function(e){f2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dd[t]=dd[e]})});function RM(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||dd.hasOwnProperty(e)&&dd[e]?(""+t).trim():t+"px"}function MM(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=RM(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var h2=Vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dy(e,t){if(t){if(h2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function Fy(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function eS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vy=null,cc=null,uc=null;function yE(e){if(e=_f(e)){if(typeof Vy!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=qg(t),Vy(e.stateNode,e.type,t))}}function TM(e){cc?uc?uc.push(e):uc=[e]:cc=e}function LM(){if(cc){var e=cc,t=uc;if(uc=cc=null,yE(e),t)for(e=0;e<t.length;e++)yE(t[e])}}function tS(e,t){return e(t)}function AM(e,t,n,r,i){return e(t,n,r,i)}function nS(){}var OM=tS,Fa=!1,bv=!1;function rS(){(cc!==null||uc!==null)&&(nS(),LM())}function p2(e,t,n){if(bv)return e(t,n);bv=!0;try{return OM(e,t,n)}finally{bv=!1,rS()}}function Vd(e,t){var n=e.stateNode;if(n===null)return null;var r=qg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ke(231,t,typeof n));return n}var Uy=!1;if(ss)try{var wu={};Object.defineProperty(wu,"passive",{get:function(){Uy=!0}}),window.addEventListener("test",wu,wu),window.removeEventListener("test",wu,wu)}catch{Uy=!1}function g2(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var fd=!1,Hp=null,jp=!1,$y=null,m2={onError:function(e){fd=!0,Hp=e}};function v2(e,t,n,r,i,o,s,a,l){fd=!1,Hp=null,g2.apply(m2,arguments)}function _2(e,t,n,r,i,o,s,a,l){if(v2.apply(this,arguments),fd){if(fd){var c=Hp;fd=!1,Hp=null}else throw Error(ke(198));jp||(jp=!0,$y=c)}}function cl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function PM(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bE(e){if(cl(e)!==e)throw Error(ke(188))}function y2(e){var t=e.alternate;if(!t){if(t=cl(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return bE(i),e;if(o===r)return bE(i),t;o=o.sibling}throw Error(ke(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?e:t}function NM(e){if(e=y2(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function SE(e,t){for(var n=e.alternate;t!==null;){if(t===e||t===n)return!0;t=t.return}return!1}var DM,iS,FM,VM,Wy=!1,xo=[],Gs=null,Ys=null,qs=null,Ud=new Map,$d=new Map,Eu=[],wE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zy(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:n|16,nativeEvent:i,targetContainers:[r]}}function EE(e,t){switch(e){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":Ud.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(t.pointerId)}}function Cu(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e=zy(t,n,r,i,o),t!==null&&(t=_f(t),t!==null&&iS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function b2(e,t,n,r,i){switch(t){case"focusin":return Gs=Cu(Gs,e,t,n,r,i),!0;case"dragenter":return Ys=Cu(Ys,e,t,n,r,i),!0;case"mouseover":return qs=Cu(qs,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ud.set(o,Cu(Ud.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,$d.set(o,Cu($d.get(o)||null,e,t,n,r,i)),!0}return!1}function S2(e){var t=Va(e.target);if(t!==null){var n=cl(t);if(n!==null){if(t=n.tag,t===13){if(t=PM(n),t!==null){e.blockedOn=t,VM(e.lanePriority,function(){Sr.unstable_runWithPriority(e.priority,function(){FM(n)})});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null)return t=_f(n),t!==null&&iS(t),e.blockedOn=n,!1;t.shift()}return!0}function CE(e,t,n){rp(e)&&n.delete(t)}function w2(){for(Wy=!1;0<xo.length;){var e=xo[0];if(e.blockedOn!==null){e=_f(e.blockedOn),e!==null&&DM(e);break}for(var t=e.targetContainers;0<t.length;){var n=lS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null){e.blockedOn=n;break}t.shift()}e.blockedOn===null&&xo.shift()}Gs!==null&&rp(Gs)&&(Gs=null),Ys!==null&&rp(Ys)&&(Ys=null),qs!==null&&rp(qs)&&(qs=null),Ud.forEach(CE),$d.forEach(CE)}function xu(e,t){e.blockedOn===t&&(e.blockedOn=null,Wy||(Wy=!0,Sr.unstable_scheduleCallback(Sr.unstable_NormalPriority,w2)))}function UM(e){function t(i){return xu(i,e)}if(0<xo.length){xu(xo[0],e);for(var n=1;n<xo.length;n++){var r=xo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gs!==null&&xu(Gs,e),Ys!==null&&xu(Ys,e),qs!==null&&xu(qs,e),Ud.forEach(t),$d.forEach(t),n=0;n<Eu.length;n++)r=Eu[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Eu.length&&(n=Eu[0],n.blockedOn===null);)S2(n),n.blockedOn===null&&Eu.shift()}function lh(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ql={animationend:lh("Animation","AnimationEnd"),animationiteration:lh("Animation","AnimationIteration"),animationstart:lh("Animation","AnimationStart"),transitionend:lh("Transition","TransitionEnd")},Sv={},$M={};ss&&($M=document.createElement("div").style,"AnimationEvent"in window||(delete ql.animationend.animation,delete ql.animationiteration.animation,delete ql.animationstart.animation),"TransitionEvent"in window||delete ql.transitionend.transition);function Hg(e){if(Sv[e])return Sv[e];if(!ql[e])return e;var t=ql[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $M)return Sv[e]=t[n];return e}var WM=Hg("animationend"),zM=Hg("animationiteration"),BM=Hg("animationstart"),HM=Hg("transitionend"),jM=new Map,oS=new Map,E2=["abort","abort",WM,"animationEnd",zM,"animationIteration",BM,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",HM,"transitionEnd","waiting","waiting"];function sS(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),oS.set(r,t),jM.set(r,i),al(i,[r])}}var C2=Sr.unstable_now;C2();var Sn=8;function Hl(e){if(1&e)return Sn=15,1;if(2&e)return Sn=14,2;if(4&e)return Sn=13,4;var t=24&e;return t!==0?(Sn=12,t):e&32?(Sn=11,32):(t=192&e,t!==0?(Sn=10,t):e&256?(Sn=9,256):(t=3584&e,t!==0?(Sn=8,t):e&4096?(Sn=7,4096):(t=4186112&e,t!==0?(Sn=6,t):(t=62914560&e,t!==0?(Sn=5,t):e&67108864?(Sn=4,67108864):e&134217728?(Sn=3,134217728):(t=805306368&e,t!==0?(Sn=2,t):1073741824&e?(Sn=1,1073741824):(Sn=8,e))))))}function x2(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function k2(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(ke(358,e))}}function Wd(e,t){var n=e.pendingLanes;if(n===0)return Sn=0;var r=0,i=0,o=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(o!==0)r=o,i=Sn=15;else if(o=n&134217727,o!==0){var l=o&~s;l!==0?(r=Hl(l),i=Sn):(a&=o,a!==0&&(r=Hl(a),i=Sn))}else o=n&~s,o!==0?(r=Hl(o),i=Sn):a!==0&&(r=Hl(a),i=Sn);if(r===0)return 0;if(r=31-la(r),r=n&((0>r?0:1<<r)<<1)-1,t!==0&&t!==r&&!(t&s)){if(Hl(t),i<=Sn)return t;Sn=i}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-la(t),i=1<<n,r|=e[n],t&=~i;return r}function KM(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kp(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=jl(24&~t),e===0?Kp(10,t):e;case 10:return e=jl(192&~t),e===0?Kp(8,t):e;case 8:return e=jl(3584&~t),e===0&&(e=jl(4186112&~t),e===0&&(e=512)),e;case 2:return t=jl(805306368&~t),t===0&&(t=268435456),t}throw Error(ke(358,e))}function jl(e){return e&-e}function wv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jg(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,e=e.eventTimes,t=31-la(t),e[t]=n}var la=Math.clz32?Math.clz32:M2,I2=Math.log,R2=Math.LN2;function M2(e){return e===0?32:31-(I2(e)/R2|0)|0}var T2=Sr.unstable_UserBlockingPriority,L2=Sr.unstable_runWithPriority,ip=!0;function A2(e,t,n,r){Fa||nS();var i=aS,o=Fa;Fa=!0;try{AM(i,e,t,n,r)}finally{(Fa=o)||rS()}}function O2(e,t,n,r){L2(T2,aS.bind(null,e,t,n,r))}function aS(e,t,n,r){if(ip){var i;if((i=(t&4)===0)&&0<xo.length&&-1<wE.indexOf(e))e=zy(null,e,t,n,r),xo.push(e);else{var o=lS(e,t,n,r);if(o===null)i&&EE(e,r);else{if(i){if(-1<wE.indexOf(e)){e=zy(o,e,t,n,r),xo.push(e);return}if(b2(o,e,t,n,r))return;EE(e,r)}oT(e,t,r,null,n)}}}}function lS(e,t,n,r){var i=eS(r);if(i=Va(i),i!==null){var o=cl(i);if(o===null)i=null;else{var s=o.tag;if(s===13){if(i=PM(o),i!==null)return i;i=null}else if(s===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return oT(e,t,r,i,n),null}var Ds=null,cS=null,op=null;function GM(){if(op)return op;var e,t=cS,n=t.length,r,i="value"in Ds?Ds.value:Ds.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return op=i.slice(e,1<r?1-r:void 0)}function sp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ch(){return!0}function xE(){return!1}function Mi(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ch:xE,this.isPropagationStopped=xE,this}return Vn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ch)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ch)},persist:function(){},isPersistent:ch}),t}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uS=Mi(Gc),vf=Vn({},Gc,{view:0,detail:0}),P2=Mi(vf),Ev,Cv,ku,Kg=Vn({},vf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ku&&(ku&&e.type==="mousemove"?(Ev=e.screenX-ku.screenX,Cv=e.screenY-ku.screenY):Cv=Ev=0,ku=e),Ev)},movementY:function(e){return"movementY"in e?e.movementY:Cv}}),kE=Mi(Kg),N2=Vn({},Kg,{dataTransfer:0}),D2=Mi(N2),F2=Vn({},vf,{relatedTarget:0}),xv=Mi(F2),V2=Vn({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),U2=Mi(V2),$2=Vn({},Gc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),W2=Mi($2),z2=Vn({},Gc,{data:0}),IE=Mi(z2),B2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=j2[e])?!!t[e]:!1}function dS(){return K2}var G2=Vn({},vf,{key:function(e){if(e.key){var t=B2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?H2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dS,charCode:function(e){return e.type==="keypress"?sp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Y2=Mi(G2),q2=Vn({},Kg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RE=Mi(q2),Q2=Vn({},vf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dS}),X2=Mi(Q2),Z2=Vn({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),J2=Mi(Z2),e$=Vn({},Kg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),t$=Mi(e$),n$=[9,13,27,32],fS=ss&&"CompositionEvent"in window,hd=null;ss&&"documentMode"in document&&(hd=document.documentMode);var r$=ss&&"TextEvent"in window&&!hd,YM=ss&&(!fS||hd&&8<hd&&11>=hd),ME=String.fromCharCode(32),TE=!1;function qM(e,t){switch(e){case"keyup":return n$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QM(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ql=!1;function i$(e,t){switch(e){case"compositionend":return QM(t);case"keypress":return t.which!==32?null:(TE=!0,ME);case"textInput":return e=t.data,e===ME&&TE?null:e;default:return null}}function o$(e,t){if(Ql)return e==="compositionend"||!fS&&qM(e,t)?(e=GM(),op=cS=Ds=null,Ql=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return YM&&t.locale!=="ko"?null:t.data;default:return null}}var s$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!s$[e.type]:t==="textarea"}function XM(e,t,n,r){TM(r),t=Gp(t,"onChange"),0<t.length&&(n=new uS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var pd=null,zd=null;function a$(e){nT(e,0)}function Gg(e){var t=Zl(e);if(EM(t))return e}function l$(e,t){if(e==="change")return t}var ZM=!1;if(ss){var kv;if(ss){var Iv="oninput"in document;if(!Iv){var AE=document.createElement("div");AE.setAttribute("oninput","return;"),Iv=typeof AE.oninput=="function"}kv=Iv}else kv=!1;ZM=kv&&(!document.documentMode||9<document.documentMode)}function OE(){pd&&(pd.detachEvent("onpropertychange",JM),zd=pd=null)}function JM(e){if(e.propertyName==="value"&&Gg(zd)){var t=[];if(XM(t,zd,e,eS(e)),e=a$,Fa)e(t);else{Fa=!0;try{tS(e,t)}finally{Fa=!1,rS()}}}}function c$(e,t,n){e==="focusin"?(OE(),pd=t,zd=n,pd.attachEvent("onpropertychange",JM)):e==="focusout"&&OE()}function u$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gg(zd)}function d$(e,t){if(e==="click")return Gg(t)}function f$(e,t){if(e==="input"||e==="change")return Gg(t)}function h$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bi=typeof Object.is=="function"?Object.is:h$,p$=Object.prototype.hasOwnProperty;function Bd(e,t){if(Bi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!p$.call(t,n[r])||!Bi(e[n[r]],t[n[r]]))return!1;return!0}function PE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function NE(e,t){var n=PE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=PE(n)}}function eT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function DE(){for(var e=window,t=Bp();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bp(e.document)}return t}function By(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var g$=ss&&"documentMode"in document&&11>=document.documentMode,Xl=null,Hy=null,gd=null,jy=!1;function FE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jy||Xl==null||Xl!==Bp(r)||(r=Xl,"selectionStart"in r&&By(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gd&&Bd(gd,r)||(gd=r,r=Gp(Hy,"onSelect"),0<r.length&&(t=new uS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Xl)))}sS("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);sS("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);sS(E2,2);for(var VE="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Rv=0;Rv<VE.length;Rv++)oS.set(VE[Rv],0);Ic("onMouseEnter",["mouseout","mouseover"]);Ic("onMouseLeave",["mouseout","mouseover"]);Ic("onPointerEnter",["pointerout","pointerover"]);Ic("onPointerLeave",["pointerout","pointerover"]);al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));al("onBeforeInput",["compositionend","keypress","textInput","paste"]);al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tT=new Set("cancel close invalid load scroll toggle".split(" ").concat(qu));function UE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,_2(r,t,void 0,e),e.currentTarget=null}function nT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;UE(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;UE(i,a,c),o=l}}}if(jp)throw e=$y,jp=!1,$y=null,e}function Rn(e,t){var n=aT(t),r=e+"__bubble";n.has(r)||(iT(t,e,2,!1),n.add(r))}var $E="_reactListening"+Math.random().toString(36).slice(2);function rT(e){e[$E]||(e[$E]=!0,bM.forEach(function(t){tT.has(t)||WE(t,!1,e,null),WE(t,!0,e,null)}))}function WE(e,t,n,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=n;if(e==="selectionchange"&&n.nodeType!==9&&(o=n.ownerDocument),r!==null&&!t&&tT.has(e)){if(e!=="scroll")return;i|=2,o=r}var s=aT(o),a=e+"__"+(t?"capture":"bubble");s.has(a)||(t&&(i|=4),iT(o,e,i,t),s.add(a))}function iT(e,t,n,r){var i=oS.get(t);switch(i===void 0?2:i){case 0:i=A2;break;case 1:i=O2;break;default:i=aS}n=i.bind(null,t,n,e),i=void 0,!Uy||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function oT(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Va(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}p2(function(){var c=o,d=eS(n),h=[];e:{var p=jM.get(e);if(p!==void 0){var g=uS,b=e;switch(e){case"keypress":if(sp(n)===0)break e;case"keydown":case"keyup":g=Y2;break;case"focusin":b="focus",g=xv;break;case"focusout":b="blur",g=xv;break;case"beforeblur":case"afterblur":g=xv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=kE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=D2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=X2;break;case WM:case zM:case BM:g=U2;break;case HM:g=J2;break;case"scroll":g=P2;break;case"wheel":g=t$;break;case"copy":case"cut":case"paste":g=W2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=RE}var k=(t&4)!==0,y=!k&&e==="scroll",_=k?p!==null?p+"Capture":null:p;k=[];for(var w=c,x;w!==null;){x=w;var C=x.stateNode;if(x.tag===5&&C!==null&&(x=C,_!==null&&(C=Vd(w,_),C!=null&&k.push(Hd(w,C,x)))),y)break;w=w.return}0<k.length&&(p=new g(p,b,null,n,d),h.push({event:p,listeners:k}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&!(t&16)&&(b=n.relatedTarget||n.fromElement)&&(Va(b)||b[Yc]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=c,b=b?Va(b):null,b!==null&&(y=cl(b),b!==y||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=c),g!==b)){if(k=kE,C="onMouseLeave",_="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(k=RE,C="onPointerLeave",_="onPointerEnter",w="pointer"),y=g==null?p:Zl(g),x=b==null?p:Zl(b),p=new k(C,w+"leave",g,n,d),p.target=y,p.relatedTarget=x,C=null,Va(d)===c&&(k=new k(_,w+"enter",b,n,d),k.target=x,k.relatedTarget=y,C=k),y=C,g&&b)t:{for(k=g,_=b,w=0,x=k;x;x=wl(x))w++;for(x=0,C=_;C;C=wl(C))x++;for(;0<w-x;)k=wl(k),w--;for(;0<x-w;)_=wl(_),x--;for(;w--;){if(k===_||_!==null&&k===_.alternate)break t;k=wl(k),_=wl(_)}k=null}else k=null;g!==null&&zE(h,p,g,k,!1),b!==null&&y!==null&&zE(h,y,b,k,!0)}}e:{if(p=c?Zl(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var F=l$;else if(LE(p))if(ZM)F=f$;else{F=u$;var M=c$}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=d$);if(F&&(F=F(e,c))){XM(h,F,n,d);break e}M&&M(e,p,c),e==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Ly(p,"number",p.value)}switch(M=c?Zl(c):window,e){case"focusin":(LE(M)||M.contentEditable==="true")&&(Xl=M,Hy=c,gd=null);break;case"focusout":gd=Hy=Xl=null;break;case"mousedown":jy=!0;break;case"contextmenu":case"mouseup":case"dragend":jy=!1,FE(h,n,d);break;case"selectionchange":if(g$)break;case"keydown":case"keyup":FE(h,n,d)}var L;if(fS)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ql?qM(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(YM&&n.locale!=="ko"&&(Ql||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ql&&(L=GM()):(Ds=d,cS="value"in Ds?Ds.value:Ds.textContent,Ql=!0)),M=Gp(c,N),0<M.length&&(N=new IE(N,e,null,n,d),h.push({event:N,listeners:M}),L?N.data=L:(L=QM(n),L!==null&&(N.data=L)))),(L=r$?i$(e,n):o$(e,n))&&(c=Gp(c,"onBeforeInput"),0<c.length&&(d=new IE("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=L))}nT(h,t)})}function Hd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gp(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Vd(e,n),o!=null&&r.unshift(Hd(e,o,i)),o=Vd(e,t),o!=null&&r.push(Hd(e,o,i))),e=e.return}return r}function wl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zE(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Vd(n,o),l!=null&&s.unshift(Hd(n,l,a))):i||(l=Vd(n,o),l!=null&&s.push(Hd(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}function Yp(){}var Mv=null,Tv=null;function sT(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ky(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var BE=typeof setTimeout=="function"?setTimeout:void 0,m$=typeof clearTimeout=="function"?clearTimeout:void 0;function hS(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function dc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function HE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Lv=0;function v$(e){return{$$typeof:Z0,toString:e,valueOf:e}}var Yg=Math.random().toString(36).slice(2),Fs="__reactFiber$"+Yg,qp="__reactProps$"+Yg,Yc="__reactContainer$"+Yg,jE="__reactEvents$"+Yg;function Va(e){var t=e[Fs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yc]||n[Fs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=HE(e);e!==null;){if(n=e[Fs])return n;e=HE(e)}return t}e=n,n=e.parentNode}return null}function _f(e){return e=e[Fs]||e[Yc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function qg(e){return e[qp]||null}function aT(e){var t=e[jE];return t===void 0&&(t=e[jE]=new Set),t}var Gy=[],Jl=-1;function _a(e){return{current:e}}function Mn(e){0>Jl||(e.current=Gy[Jl],Gy[Jl]=null,Jl--)}function Kn(e,t){Jl++,Gy[Jl]=e.current,e.current=t}var ca={},$r=_a(ca),gi=_a(!1),Ja=ca;function Rc(e,t){var n=e.type.contextTypes;if(!n)return ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function mi(e){return e=e.childContextTypes,e!=null}function Qp(){Mn(gi),Mn($r)}function KE(e,t,n){if($r.current!==ca)throw Error(ke(168));Kn($r,t),Kn(gi,n)}function lT(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ke(108,ac(t)||"Unknown",i));return Vn({},n,r)}function ap(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ca,Ja=$r.current,Kn($r,e),Kn(gi,gi.current),!0}function GE(e,t,n){var r=e.stateNode;if(!r)throw Error(ke(169));n?(e=lT(e,t,Ja),r.__reactInternalMemoizedMergedChildContext=e,Mn(gi),Mn($r),Kn($r,e)):Mn(gi),Kn(gi,n)}var pS=null,Ga=null,_$=Sr.unstable_runWithPriority,gS=Sr.unstable_scheduleCallback,Yy=Sr.unstable_cancelCallback,y$=Sr.unstable_shouldYield,YE=Sr.unstable_requestPaint,qy=Sr.unstable_now,b$=Sr.unstable_getCurrentPriorityLevel,Qg=Sr.unstable_ImmediatePriority,cT=Sr.unstable_UserBlockingPriority,uT=Sr.unstable_NormalPriority,dT=Sr.unstable_LowPriority,fT=Sr.unstable_IdlePriority,Av={},S$=YE!==void 0?YE:function(){},Go=null,lp=null,Ov=!1,qE=qy(),Vr=1e4>qE?qy:function(){return qy()-qE};function Mc(){switch(b$()){case Qg:return 99;case cT:return 98;case uT:return 97;case dT:return 96;case fT:return 95;default:throw Error(ke(332))}}function hT(e){switch(e){case 99:return Qg;case 98:return cT;case 97:return uT;case 96:return dT;case 95:return fT;default:throw Error(ke(332))}}function el(e,t){return e=hT(e),_$(e,t)}function jd(e,t,n){return e=hT(e),gS(e,t,n)}function Vo(){if(lp!==null){var e=lp;lp=null,Yy(e)}pT()}function pT(){if(!Ov&&Go!==null){Ov=!0;var e=0;try{var t=Go;el(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),Go=null}catch(n){throw Go!==null&&(Go=Go.slice(e+1)),gS(Qg,Vo),n}finally{Ov=!1}}}var w$=ll.ReactCurrentBatchConfig;function oo(e,t){if(e&&e.defaultProps){t=Vn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Xp=_a(null),Zp=null,ec=null,Jp=null;function mS(){Jp=ec=Zp=null}function vS(e){var t=Xp.current;Mn(Xp),e.type._context._currentValue=t}function gT(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function fc(e,t){Zp=e,Jp=ec=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(po=!0),e.firstContext=null)}function Yi(e,t){if(Jp!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Jp=e,t=1073741823),t={context:e,observedBits:t,next:null},ec===null){if(Zp===null)throw Error(ke(308));ec=t,Zp.dependencies={lanes:0,firstContext:t,responders:null}}else ec=ec.next=t;return e._currentValue}var As=!1;function _S(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function mT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xs(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function QE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Kd(e,t,n,r){var i=e.updateQueue;As=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var d=e.alternate;if(d!==null){d=d.updateQueue;var h=d.lastBaseUpdate;h!==s&&(h===null?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=l)}}if(o!==null){h=i.baseState,s=0,d=c=l=null;do{a=o.lane;var p=o.eventTime;if((r&a)===a){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,b=o;switch(a=t,p=n,b.tag){case 1:if(g=b.payload,typeof g=="function"){h=g.call(p,h,a);break e}h=g;break e;case 3:g.flags=g.flags&-4097|64;case 0:if(g=b.payload,a=typeof g=="function"?g.call(p,h,a):g,a==null)break e;h=Vn({},h,a);break e;case 2:As=!0}}o.callback!==null&&(e.flags|=32,a=i.effects,a===null?i.effects=[o]:a.push(o))}else p={eventTime:p,lane:a,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,s|=a;if(o=o.next,o===null){if(a=i.shared.pending,a===null)break;o=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,bf|=s,e.lanes=s,e.memoizedState=h}}function XE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var vT=new Wg.Component().refs;function eg(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Vn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Xg={isMounted:function(e){return(e=e._reactInternals)?cl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ii(),i=Zs(e),o=Qs(r,i);o.payload=t,n!=null&&(o.callback=n),Xs(e,o),Js(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ii(),i=Zs(e),o=Qs(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),Xs(e,o),Js(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ii(),r=Zs(e),i=Qs(n,r);i.tag=2,t!=null&&(i.callback=t),Xs(e,i),Js(e,r,n)}};function ZE(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Bd(n,r)||!Bd(i,o):!0}function _T(e,t,n){var r=!1,i=ca,o=t.contextType;return typeof o=="object"&&o!==null?o=Yi(o):(i=mi(t)?Ja:$r.current,r=t.contextTypes,o=(r=r!=null)?Rc(e,i):ca),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xg,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function JE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Xg.enqueueReplaceState(t,t.state,null)}function Qy(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=vT,_S(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Yi(o):(o=mi(t)?Ja:$r.current,i.context=Rc(e,o)),Kd(e,n,i,r),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(eg(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Xg.enqueueReplaceState(i,i.state,null),Kd(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4)}var uh=Array.isArray;function Iu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,e));var i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=r.refs;s===vT&&(s=r.refs={}),o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,e))}return e}function dh(e,t){if(e.type!=="textarea")throw Error(ke(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function yT(e){function t(y,_){if(e){var w=y.lastEffect;w!==null?(w.nextEffect=_,y.lastEffect=_):y.firstEffect=y.lastEffect=_,_.nextEffect=null,_.flags=8}}function n(y,_){if(!e)return null;for(;_!==null;)t(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function i(y,_){return y=da(y,_),y.index=0,y.sibling=null,y}function o(y,_,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<_?(y.flags=2,_):w):(y.flags=2,_)):_}function s(y){return e&&y.alternate===null&&(y.flags=2),y}function a(y,_,w,x){return _===null||_.tag!==6?(_=Vv(w,y.mode,x),_.return=y,_):(_=i(_,w),_.return=y,_)}function l(y,_,w,x){return _!==null&&_.elementType===w.type?(x=i(_,w.props),x.ref=Iu(y,_,w),x.return=y,x):(x=fp(w.type,w.key,w.props,null,y.mode,x),x.ref=Iu(y,_,w),x.return=y,x)}function c(y,_,w,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Uv(w,y.mode,x),_.return=y,_):(_=i(_,w.children||[]),_.return=y,_)}function d(y,_,w,x,C){return _===null||_.tag!==7?(_=mc(w,y.mode,x,C),_.return=y,_):(_=i(_,w),_.return=y,_)}function h(y,_,w){if(typeof _=="string"||typeof _=="number")return _=Vv(""+_,y.mode,w),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gu:return w=fp(_.type,_.key,_.props,null,y.mode,w),w.ref=Iu(y,null,_),w.return=y,w;case Da:return _=Uv(_,y.mode,w),_.return=y,_}if(uh(_)||Su(_))return _=mc(_,y.mode,w,null),_.return=y,_;dh(y,_)}return null}function p(y,_,w,x){var C=_!==null?_.key:null;if(typeof w=="string"||typeof w=="number")return C!==null?null:a(y,_,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gu:return w.key===C?w.type===Ns?d(y,_,w.props.children,x,C):l(y,_,w,x):null;case Da:return w.key===C?c(y,_,w,x):null}if(uh(w)||Su(w))return C!==null?null:d(y,_,w,x,null);dh(y,w)}return null}function g(y,_,w,x,C){if(typeof x=="string"||typeof x=="number")return y=y.get(w)||null,a(_,y,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gu:return y=y.get(x.key===null?w:x.key)||null,x.type===Ns?d(_,y,x.props.children,C,x.key):l(_,y,x,C);case Da:return y=y.get(x.key===null?w:x.key)||null,c(_,y,x,C)}if(uh(x)||Su(x))return y=y.get(w)||null,d(_,y,x,C,null);dh(_,x)}return null}function b(y,_,w,x){for(var C=null,F=null,M=_,L=_=0,N=null;M!==null&&L<w.length;L++){M.index>L?(N=M,M=null):N=M.sibling;var V=p(y,M,w[L],x);if(V===null){M===null&&(M=N);break}e&&M&&V.alternate===null&&t(y,M),_=o(V,_,L),F===null?C=V:F.sibling=V,F=V,M=N}if(L===w.length)return n(y,M),C;if(M===null){for(;L<w.length;L++)M=h(y,w[L],x),M!==null&&(_=o(M,_,L),F===null?C=M:F.sibling=M,F=M);return C}for(M=r(y,M);L<w.length;L++)N=g(M,y,L,w[L],x),N!==null&&(e&&N.alternate!==null&&M.delete(N.key===null?L:N.key),_=o(N,_,L),F===null?C=N:F.sibling=N,F=N);return e&&M.forEach(function(Y){return t(y,Y)}),C}function k(y,_,w,x){var C=Su(w);if(typeof C!="function")throw Error(ke(150));if(w=C.call(w),w==null)throw Error(ke(151));for(var F=C=null,M=_,L=_=0,N=null,V=w.next();M!==null&&!V.done;L++,V=w.next()){M.index>L?(N=M,M=null):N=M.sibling;var Y=p(y,M,V.value,x);if(Y===null){M===null&&(M=N);break}e&&M&&Y.alternate===null&&t(y,M),_=o(Y,_,L),F===null?C=Y:F.sibling=Y,F=Y,M=N}if(V.done)return n(y,M),C;if(M===null){for(;!V.done;L++,V=w.next())V=h(y,V.value,x),V!==null&&(_=o(V,_,L),F===null?C=V:F.sibling=V,F=V);return C}for(M=r(y,M);!V.done;L++,V=w.next())V=g(M,y,L,V.value,x),V!==null&&(e&&V.alternate!==null&&M.delete(V.key===null?L:V.key),_=o(V,_,L),F===null?C=V:F.sibling=V,F=V);return e&&M.forEach(function(J){return t(y,J)}),C}return function(y,_,w,x){var C=typeof w=="object"&&w!==null&&w.type===Ns&&w.key===null;C&&(w=w.props.children);var F=typeof w=="object"&&w!==null;if(F)switch(w.$$typeof){case Gu:e:{for(F=w.key,C=_;C!==null;){if(C.key===F){switch(C.tag){case 7:if(w.type===Ns){n(y,C.sibling),_=i(C,w.props.children),_.return=y,y=_;break e}break;default:if(C.elementType===w.type){n(y,C.sibling),_=i(C,w.props),_.ref=Iu(y,C,w),_.return=y,y=_;break e}}n(y,C);break}else t(y,C);C=C.sibling}w.type===Ns?(_=mc(w.props.children,y.mode,x,w.key),_.return=y,y=_):(x=fp(w.type,w.key,w.props,null,y.mode,x),x.ref=Iu(y,_,w),x.return=y,y=x)}return s(y);case Da:e:{for(C=w.key;_!==null;){if(_.key===C)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(y,_.sibling),_=i(_,w.children||[]),_.return=y,y=_;break e}else{n(y,_);break}else t(y,_);_=_.sibling}_=Uv(w,y.mode,x),_.return=y,y=_}return s(y)}if(typeof w=="string"||typeof w=="number")return w=""+w,_!==null&&_.tag===6?(n(y,_.sibling),_=i(_,w),_.return=y,y=_):(n(y,_),_=Vv(w,y.mode,x),_.return=y,y=_),s(y);if(uh(w))return b(y,_,w,x);if(Su(w))return k(y,_,w,x);if(F&&dh(y,w),typeof w>"u"&&!C)switch(y.tag){case 1:case 22:case 0:case 11:case 15:throw Error(ke(152,ac(y.type)||"Component"))}return n(y,_)}}var tg=yT(!0),bT=yT(!1),yf={},To=_a(yf),Gd=_a(yf),Yd=_a(yf);function Ua(e){if(e===yf)throw Error(ke(174));return e}function Xy(e,t){switch(Kn(Yd,t),Kn(Gd,e),Kn(To,yf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ny(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ny(t,e)}Mn(To),Kn(To,t)}function Tc(){Mn(To),Mn(Gd),Mn(Yd)}function eC(e){Ua(Yd.current);var t=Ua(To.current),n=Ny(t,e.type);t!==n&&(Kn(Gd,e),Kn(To,n))}function yS(e){Gd.current===e&&(Mn(To),Mn(Gd))}var jn=_a(0);function ng(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xo=null,Vs=null,Lo=!1;function ST(e,t){var n=Hi(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function tC(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Zy(e){if(Lo){var t=Vs;if(t){var n=t;if(!tC(e,t)){if(t=dc(n.nextSibling),!t||!tC(e,t)){e.flags=e.flags&-1025|2,Lo=!1,Xo=e;return}ST(Xo,n)}Xo=e,Vs=dc(t.firstChild)}else e.flags=e.flags&-1025|2,Lo=!1,Xo=e}}function nC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xo=e}function fh(e){if(e!==Xo)return!1;if(!Lo)return nC(e),Lo=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!Ky(t,e.memoizedProps))for(t=Vs;t;)ST(e,t),t=dc(t.nextSibling);if(nC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vs=dc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vs=null}}else Vs=Xo?dc(e.stateNode.nextSibling):null;return!0}function Pv(){Vs=Xo=null,Lo=!1}var hc=[];function bS(){for(var e=0;e<hc.length;e++)hc[e]._workInProgressVersionPrimary=null;hc.length=0}var md=ll.ReactCurrentDispatcher,ji=ll.ReactCurrentBatchConfig,qd=0,rr=null,Dr=null,Rr=null,rg=!1,vd=!1;function li(){throw Error(ke(321))}function SS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bi(e[n],t[n]))return!1;return!0}function wS(e,t,n,r,i,o){if(qd=o,rr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,md.current=e===null||e.memoizedState===null?C$:x$,e=n(r,i),vd){o=0;do{if(vd=!1,!(25>o))throw Error(ke(301));o+=1,Rr=Dr=null,t.updateQueue=null,md.current=k$,e=n(r,i)}while(vd)}if(md.current=ag,t=Dr!==null&&Dr.next!==null,qd=0,Rr=Dr=rr=null,rg=!1,t)throw Error(ke(300));return e}function $a(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?rr.memoizedState=Rr=e:Rr=Rr.next=e,Rr}function ul(){if(Dr===null){var e=rr.alternate;e=e!==null?e.memoizedState:null}else e=Dr.next;var t=Rr===null?rr.memoizedState:Rr.next;if(t!==null)Rr=t,Dr=e;else{if(e===null)throw Error(ke(310));Dr=e,e={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Rr===null?rr.memoizedState=Rr=e:Rr=Rr.next=e}return Rr}function ko(e,t){return typeof t=="function"?t(e):t}function Ru(e){var t=ul(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=Dr,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){i=i.next,r=r.baseState;var a=s=o=null,l=i;do{var c=l.lane;if((qd&c)===c)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var d={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(s=a=d,o=r):a=a.next=d,rr.lanes|=c,bf|=c}l=l.next}while(l!==null&&l!==i);a===null?o=r:a.next=s,Bi(r,t.memoizedState)||(po=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=a,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Mu(e){var t=ul(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Bi(o,t.memoizedState)||(po=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function rC(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(i!==null?e=i===r:(e=e.mutableReadLanes,(e=(qd&e)===e)&&(t._workInProgressVersionPrimary=r,hc.push(t))),e)return n(t._source);throw hc.push(t),Error(ke(350))}function wT(e,t,n,r){var i=Xr;if(i===null)throw Error(ke(349));var o=t._getVersion,s=o(t._source),a=md.current,l=a.useState(function(){return rC(i,t,n)}),c=l[1],d=l[0];l=Rr;var h=e.memoizedState,p=h.refs,g=p.getSnapshot,b=h.source;h=h.subscribe;var k=rr;return e.memoizedState={refs:p,source:t,subscribe:r},a.useEffect(function(){p.getSnapshot=n,p.setSnapshot=c;var y=o(t._source);if(!Bi(s,y)){y=n(t._source),Bi(d,y)||(c(y),y=Zs(k),i.mutableReadLanes|=y&i.pendingLanes),y=i.mutableReadLanes,i.entangledLanes|=y;for(var _=i.entanglements,w=y;0<w;){var x=31-la(w),C=1<<x;_[x]|=y,w&=~C}}},[n,t,r]),a.useEffect(function(){return r(t._source,function(){var y=p.getSnapshot,_=p.setSnapshot;try{_(y(t._source));var w=Zs(k);i.mutableReadLanes|=w&i.pendingLanes}catch(x){_(function(){throw x})}})},[t,r]),Bi(g,n)&&Bi(b,t)&&Bi(h,r)||(e={pending:null,dispatch:null,lastRenderedReducer:ko,lastRenderedState:d},e.dispatch=c=xS.bind(null,rr,e),l.queue=e,l.baseQueue=null,d=rC(i,t,n),l.memoizedState=l.baseState=d),d}function ET(e,t,n){var r=ul();return wT(r,e,t,n)}function Tu(e){var t=$a();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ko,lastRenderedState:e},e=e.dispatch=xS.bind(null,rr,e),[t.memoizedState,e]}function ig(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=rr.updateQueue,t===null?(t={lastEffect:null},rr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function iC(e){var t=$a();return e={current:e},t.memoizedState=e}function og(){return ul().memoizedState}function Jy(e,t,n,r){var i=$a();rr.flags|=e,i.memoizedState=ig(1|t,n,void 0,r===void 0?null:r)}function ES(e,t,n,r){var i=ul();r=r===void 0?null:r;var o=void 0;if(Dr!==null){var s=Dr.memoizedState;if(o=s.destroy,r!==null&&SS(r,s.deps)){ig(t,n,o,r);return}}rr.flags|=e,i.memoizedState=ig(1|t,n,o,r)}function oC(e,t){return Jy(516,4,e,t)}function sg(e,t){return ES(516,4,e,t)}function CT(e,t){return ES(4,2,e,t)}function xT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kT(e,t,n){return n=n!=null?n.concat([e]):null,ES(4,2,xT.bind(null,t,e),n)}function CS(){}function IT(e,t){var n=ul();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&SS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function RT(e,t){var n=ul();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&SS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function E$(e,t){var n=Mc();el(98>n?98:n,function(){e(!0)}),el(97<n?97:n,function(){var r=ji.transition;ji.transition=1;try{e(!1),t()}finally{ji.transition=r}})}function xS(e,t,n){var r=Ii(),i=Zs(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(s===null?o.next=o:(o.next=s.next,s.next=o),t.pending=o,s=e.alternate,e===rr||s!==null&&s===rr)vd=rg=!0;else{if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,l=s(a,n);if(o.eagerReducer=s,o.eagerState=l,Bi(l,a))return}catch{}finally{}Js(e,i,r)}}var ag={readContext:Yi,useCallback:li,useContext:li,useEffect:li,useImperativeHandle:li,useLayoutEffect:li,useMemo:li,useReducer:li,useRef:li,useState:li,useDebugValue:li,useDeferredValue:li,useTransition:li,useMutableSource:li,useOpaqueIdentifier:li,unstable_isNewReconciler:!1},C$={readContext:Yi,useCallback:function(e,t){return $a().memoizedState=[e,t===void 0?null:t],e},useContext:Yi,useEffect:oC,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Jy(4,2,xT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jy(4,2,e,t)},useMemo:function(e,t){var n=$a();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$a();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=xS.bind(null,rr,e),[r.memoizedState,e]},useRef:iC,useState:Tu,useDebugValue:CS,useDeferredValue:function(e){var t=Tu(e),n=t[0],r=t[1];return oC(function(){var i=ji.transition;ji.transition=1;try{r(e)}finally{ji.transition=i}},[e]),n},useTransition:function(){var e=Tu(!1),t=e[0];return e=E$.bind(null,e[1]),iC(e),[e,t]},useMutableSource:function(e,t,n){var r=$a();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},wT(r,e,t,n)},useOpaqueIdentifier:function(){if(Lo){var e=!1,t=v$(function(){throw e||(e=!0,n("r:"+(Lv++).toString(36))),Error(ke(355))}),n=Tu(t)[1];return!(rr.mode&2)&&(rr.flags|=516,ig(5,function(){n("r:"+(Lv++).toString(36))},void 0,null)),t}return t="r:"+(Lv++).toString(36),Tu(t),t},unstable_isNewReconciler:!1},x$={readContext:Yi,useCallback:IT,useContext:Yi,useEffect:sg,useImperativeHandle:kT,useLayoutEffect:CT,useMemo:RT,useReducer:Ru,useRef:og,useState:function(){return Ru(ko)},useDebugValue:CS,useDeferredValue:function(e){var t=Ru(ko),n=t[0],r=t[1];return sg(function(){var i=ji.transition;ji.transition=1;try{r(e)}finally{ji.transition=i}},[e]),n},useTransition:function(){var e=Ru(ko)[0];return[og().current,e]},useMutableSource:ET,useOpaqueIdentifier:function(){return Ru(ko)[0]},unstable_isNewReconciler:!1},k$={readContext:Yi,useCallback:IT,useContext:Yi,useEffect:sg,useImperativeHandle:kT,useLayoutEffect:CT,useMemo:RT,useReducer:Mu,useRef:og,useState:function(){return Mu(ko)},useDebugValue:CS,useDeferredValue:function(e){var t=Mu(ko),n=t[0],r=t[1];return sg(function(){var i=ji.transition;ji.transition=1;try{r(e)}finally{ji.transition=i}},[e]),n},useTransition:function(){var e=Mu(ko)[0];return[og().current,e]},useMutableSource:ET,useOpaqueIdentifier:function(){return Mu(ko)[0]},unstable_isNewReconciler:!1},I$=ll.ReactCurrentOwner,po=!1;function fi(e,t,n,r){t.child=e===null?bT(t,null,n,r):tg(t,e.child,n,r)}function sC(e,t,n,r,i){n=n.render;var o=t.ref;return fc(t,i),r=wS(e,t,n,r,o,i),e!==null&&!po?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Zo(e,t,i)):(t.flags|=1,fi(e,t,r,i),t.child)}function aC(e,t,n,r,i,o){if(e===null){var s=n.type;return typeof s=="function"&&!LS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,MT(e,t,s,r,i,o)):(e=fp(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}return s=e.child,!(i&o)&&(i=s.memoizedProps,n=n.compare,n=n!==null?n:Bd,n(i,r)&&e.ref===t.ref)?Zo(e,t,o):(t.flags|=1,e=da(s,r),e.ref=t.ref,e.return=t,t.child=e)}function MT(e,t,n,r,i,o){if(e!==null&&Bd(e.memoizedProps,r)&&e.ref===t.ref)if(po=!1,(o&i)!==0)e.flags&16384&&(po=!0);else return t.lanes=e.lanes,Zo(e,t,o);return eb(e,t,n,r,o)}function Nv(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if(!(t.mode&4))t.memoizedState={baseLanes:0},ph(t,n);else if(n&1073741824)t.memoizedState={baseLanes:0},ph(t,o!==null?o.baseLanes:n);else return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ph(t,e),null;else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ph(t,r);return fi(e,t,i,n),t.child}function TT(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=128)}function eb(e,t,n,r,i){var o=mi(n)?Ja:$r.current;return o=Rc(t,o),fc(t,i),n=wS(e,t,n,r,o,i),e!==null&&!po?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Zo(e,t,i)):(t.flags|=1,fi(e,t,n,i),t.child)}function lC(e,t,n,r,i){if(mi(n)){var o=!0;ap(t)}else o=!1;if(fc(t,i),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),_T(t,n,r),Qy(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yi(c):(c=mi(n)?Ja:$r.current,c=Rc(t,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&JE(t,s,r,c),As=!1;var p=t.memoizedState;s.state=p,Kd(t,r,s,i),l=t.memoizedState,a!==r||p!==l||gi.current||As?(typeof d=="function"&&(eg(t,n,d,r),l=t.memoizedState),(a=As||ZE(t,n,a,r,p,l,c))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4)):(typeof s.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4),r=!1)}else{s=t.stateNode,mT(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:oo(t.type,a),s.props=c,h=t.pendingProps,p=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yi(l):(l=mi(n)?Ja:$r.current,l=Rc(t,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||p!==l)&&JE(t,s,r,l),As=!1,p=t.memoizedState,s.state=p,Kd(t,r,s,i);var b=t.memoizedState;a!==h||p!==b||gi.current||As?(typeof g=="function"&&(eg(t,n,g,r),b=t.memoizedState),(c=As||ZE(t,n,c,r,p,b,l))?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,b,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,b,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=b),s.props=r,s.state=b,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),r=!1)}return tb(e,t,n,r,o,i)}function tb(e,t,n,r,i,o){TT(e,t);var s=(t.flags&64)!==0;if(!r&&!s)return i&&GE(t,n,!1),Zo(e,t,o);r=t.stateNode,I$.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=tg(t,e.child,null,o),t.child=tg(t,null,a,o)):fi(e,t,a,o),t.memoizedState=r.state,i&&GE(t,n,!0),t.child}function cC(e){var t=e.stateNode;t.pendingContext?KE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&KE(e,t.context,!1),Xy(e,t.containerInfo)}var hh={dehydrated:null,retryLane:0};function uC(e,t,n){var r=t.pendingProps,i=jn.current,o=!1,s;return(s=(t.flags&64)!==0)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-65):e!==null&&e.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),Kn(jn,i&1),e===null?(r.fallback!==void 0&&Zy(t),e=r.children,i=r.fallback,o?(e=dC(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=hh,e):typeof r.unstable_expectedLoadTime=="number"?(e=dC(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=hh,t.lanes=33554432,e):(n=AS({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):e.memoizedState!==null?o?(r=hC(e,t,r.children,r.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=hh,r):(n=fC(e,t,r.children,n),t.memoizedState=null,n):o?(r=hC(e,t,r.children,r.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=hh,r):(n=fC(e,t,r.children,n),t.memoizedState=null,n)}function dC(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},!(i&2)&&o!==null?(o.childLanes=0,o.pendingProps=t):o=AS(t,i,0,null),n=mc(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function fC(e,t,n,r){var i=e.child;return e=i.sibling,n=da(i,{mode:"visible",children:n}),!(t.mode&2)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function hC(e,t,n,r,i){var o=t.mode,s=e.child;e=s.sibling;var a={mode:"hidden",children:n};return!(o&2)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=a,s=n.lastEffect,s!==null?(t.firstEffect=n.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):n=da(s,a),e!==null?r=da(e,r):(r=mc(r,o,i,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,r}function pC(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),gT(e.return,t)}function Dv(e,t,n,r,i,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.lastEffect=o)}function gC(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(fi(e,t,r.children,n),r=jn.current,r&2)r=r&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pC(e,n);else if(e.tag===19)pC(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Kn(jn,r),!(t.mode&2))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ng(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Dv(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ng(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Dv(t,!0,n,null,o,t.lastEffect);break;case"together":Dv(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Zo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),bf|=t.lanes,n&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,n=da(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=da(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}var LT,nb,AT,OT;LT=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nb=function(){};AT=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ua(To.current);var o=null;switch(n){case"input":i=My(e,i),r=My(e,r),o=[];break;case"option":i=Ay(e,i),r=Ay(e,r),o=[];break;case"select":i=Vn({},i,{value:void 0}),r=Vn({},r,{value:void 0}),o=[];break;case"textarea":i=Oy(e,i),r=Oy(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Yp)}Dy(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Dd.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Dd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Rn("scroll",e),o||a===l||(o=[])):typeof l=="object"&&l!==null&&l.$$typeof===Z0?l.toString():(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};OT=function(e,t,n,r){n!==r&&(t.flags|=4)};function Lu(e,t){if(!Lo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function R$(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mi(t.type)&&Qp(),null;case 3:return Tc(),Mn(gi),Mn($r),bS(),r=t.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fh(t)?t.flags|=4:r.hydrate||(t.flags|=256)),nb(t),null;case 5:yS(t);var i=Ua(Yd.current);if(n=t.type,e!==null&&t.stateNode!=null)AT(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(t.stateNode===null)throw Error(ke(166));return null}if(e=Ua(To.current),fh(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Fs]=t,r[qp]=o,n){case"dialog":Rn("cancel",r),Rn("close",r);break;case"iframe":case"object":case"embed":Rn("load",r);break;case"video":case"audio":for(e=0;e<qu.length;e++)Rn(qu[e],r);break;case"source":Rn("error",r);break;case"img":case"image":case"link":Rn("error",r),Rn("load",r);break;case"details":Rn("toggle",r);break;case"input":gE(r,o),Rn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Rn("invalid",r);break;case"textarea":vE(r,o),Rn("invalid",r)}Dy(n,o),e=null;for(var s in o)o.hasOwnProperty(s)&&(i=o[s],s==="children"?typeof i=="string"?r.textContent!==i&&(e=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(e=["children",""+i]):Dd.hasOwnProperty(s)&&i!=null&&s==="onScroll"&&Rn("scroll",r));switch(n){case"input":sh(r),mE(r,o,!0);break;case"textarea":sh(r),_E(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Yp)}r=e,t.updateQueue=r,r!==null&&(t.flags|=4)}else{switch(s=i.nodeType===9?i:i.ownerDocument,e===Py.html&&(e=kM(n)),e===Py.html?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Fs]=t,e[qp]=r,LT(e,t,!1,!1),t.stateNode=e,s=Fy(n,r),n){case"dialog":Rn("cancel",e),Rn("close",e),i=r;break;case"iframe":case"object":case"embed":Rn("load",e),i=r;break;case"video":case"audio":for(i=0;i<qu.length;i++)Rn(qu[i],e);i=r;break;case"source":Rn("error",e),i=r;break;case"img":case"image":case"link":Rn("error",e),Rn("load",e),i=r;break;case"details":Rn("toggle",e),i=r;break;case"input":gE(e,r),i=My(e,r),Rn("invalid",e);break;case"option":i=Ay(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Vn({},r,{value:void 0}),Rn("invalid",e);break;case"textarea":vE(e,r),i=Oy(e,r),Rn("invalid",e);break;default:i=r}Dy(n,i);var a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?MM(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IM(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fd(e,l):typeof l=="number"&&Fd(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Dd.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Rn("scroll",e):l!=null&&K0(e,o,l,s))}switch(n){case"input":sh(e),mE(e,r,!1);break;case"textarea":sh(e),_E(e);break;case"option":r.value!=null&&e.setAttribute("value",""+aa(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?lc(e,!!r.multiple,o,!1):r.defaultValue!=null&&lc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Yp)}sT(n,r)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)OT(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ke(166));n=Ua(Yd.current),Ua(To.current),fh(t)?(r=t.stateNode,n=t.memoizedProps,r[Fs]=t,r.nodeValue!==n&&(t.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fs]=t,t.stateNode=r)}return null;case 13:return Mn(jn),r=t.memoizedState,t.flags&64?(t.lanes=n,t):(r=r!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&fh(t):n=e.memoizedState!==null,r&&!n&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||jn.current&1?Mr===0&&(Mr=3):((Mr===0||Mr===3)&&(Mr=4),Xr===null||!(bf&134217727)&&!(Qc&134217727)||pc(Xr,Ur))),(r||n)&&(t.flags|=4),null);case 4:return Tc(),nb(t),e===null&&rT(t.stateNode.containerInfo),null;case 10:return vS(t),null;case 17:return mi(t.type)&&Qp(),null;case 19:if(Mn(jn),r=t.memoizedState,r===null)return null;if(o=(t.flags&64)!==0,s=r.rendering,s===null)if(o)Lu(r,!1);else{if(Mr!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(s=ng(e),s!==null){for(t.flags|=64,Lu(r,!1),o=s.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),r.lastEffect===null&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Kn(jn,jn.current&1|2),t.child}e=e.sibling}r.tail!==null&&Vr()>lb&&(t.flags|=64,o=!0,Lu(r,!1),t.lanes=33554432)}else{if(!o)if(e=ng(s),e!==null){if(t.flags|=64,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Lu(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!Lo)return t=t.lastEffect=r.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Vr()-r.renderingStartTime>lb&&n!==1073741824&&(t.flags|=64,o=!0,Lu(r,!1),t.lanes=33554432);r.isBackwards?(s.sibling=t.child,t.child=s):(n=r.last,n!==null?n.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Vr(),n.sibling=null,t=jn.current,Kn(jn,o?t&1|2:t&1),n):null;case 23:case 24:return TS(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(ke(156,t.tag))}function M$(e){switch(e.tag){case 1:mi(e.type)&&Qp();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Tc(),Mn(gi),Mn($r),bS(),t=e.flags,t&64)throw Error(ke(285));return e.flags=t&-4097|64,e;case 5:return yS(e),null;case 13:return Mn(jn),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Mn(jn),null;case 4:return Tc(),null;case 10:return vS(e),null;case 23:case 24:return TS(),null;default:return null}}function kS(e,t){try{var n="",r=t;do n+=c2(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i}}function rb(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var T$=typeof WeakMap=="function"?WeakMap:Map;function PT(e,t,n){n=Qs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cg||(cg=!0,cb=r),rb(e,t)},n}function NT(e,t,n){n=Qs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return rb(e,t),r(i)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(Io===null?Io=new Set([this]):Io.add(this),rb(e,t));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}var L$=typeof WeakSet=="function"?WeakSet:Set;function mC(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){ea(e,n)}else t.current=null}function A$(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var n=e.memoizedProps,r=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:oo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&hS(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(ke(163))}function O$(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var i=e;r=i.next,i=i.tag,i&4&&i&1&&(HT(n,e),W$(n,e)),e=r}while(e!==t)}return;case 1:e=n.stateNode,n.flags&4&&(t===null?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:oo(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,t!==null&&XE(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}XE(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.flags&4&&sT(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&UM(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(ke(163))}function vC(e,t){for(var n=e;;){if(n.tag===5){var r=n.stateNode;if(t)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=RM("display",i)}}else if(n.tag===6)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function _C(e,t){if(Ga&&typeof Ga.onCommitFiberUnmount=="function")try{Ga.onCommitFiberUnmount(pS,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,i!==void 0)if(r&4)HT(t,n);else{r=t;try{i()}catch(o){ea(r,o)}}n=n.next}while(n!==e)}break;case 1:if(mC(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){ea(t,o)}break;case 5:mC(t);break;case 4:DT(e,t)}}function yC(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bC(e){return e.tag===5||e.tag===3||e.tag===4}function SC(e){e:{for(var t=e.return;t!==null;){if(bC(t))break e;t=t.return}throw Error(ke(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:t=t.containerInfo,r=!0;break;case 4:t=t.containerInfo,r=!0;break;default:throw Error(ke(161))}n.flags&16&&(Fd(t,""),n.flags&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||bC(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?ib(e,n,t):ob(e,n,t)}function ib(e,t,n){var r=e.tag,i=r===5||r===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yp));else if(r!==4&&(e=e.child,e!==null))for(ib(e,t,n),e=e.sibling;e!==null;)ib(e,t,n),e=e.sibling}function ob(e,t,n){var r=e.tag,i=r===5||r===6;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ob(e,t,n),e=e.sibling;e!==null;)ob(e,t,n),e=e.sibling}function DT(e,t){for(var n=t,r=!1,i,o;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(ke(160));switch(i=r.stateNode,r.tag){case 5:o=!1;break e;case 3:i=i.containerInfo,o=!0;break e;case 4:i=i.containerInfo,o=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var s=e,a=n,l=a;;)if(_C(s,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}o?(s=i,a=n.stateNode,s.nodeType===8?s.parentNode.removeChild(a):s.removeChild(a)):i.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){i=n.stateNode.containerInfo,o=!0,n.child.return=n,n=n.child;continue}}else if(_C(e,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function Fv(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)===3&&(e=r.destroy,r.destroy=void 0,e!==void 0&&e()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=t.stateNode,n!=null){r=t.memoizedProps;var i=e!==null?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,o!==null){for(n[qp]=r,e==="input"&&r.type==="radio"&&r.name!=null&&CM(n,r),Fy(e,i),t=Fy(e,r),i=0;i<o.length;i+=2){var s=o[i],a=o[i+1];s==="style"?MM(n,a):s==="dangerouslySetInnerHTML"?IM(n,a):s==="children"?Fd(n,a):K0(n,s,a,t)}switch(e){case"input":Ty(n,r);break;case"textarea":xM(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,o=r.value,o!=null?lc(n,!!r.multiple,o,!1):e!==!!r.multiple&&(r.defaultValue!=null?lc(n,!!r.multiple,r.defaultValue,!0):lc(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(ke(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.hydrate&&(n.hydrate=!1,UM(n.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(MS=Vr(),vC(t.child,!0)),wC(t);return;case 19:wC(t);return;case 17:return;case 23:case 24:vC(t,t.memoizedState!==null);return}throw Error(ke(163))}function wC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new L$),t.forEach(function(r){var i=H$.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function P$(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var N$=Math.ceil,lg=ll.ReactCurrentDispatcher,IS=ll.ReactCurrentOwner,mt=0,Xr=null,hr=null,Ur=0,tl=0,sb=_a(0),Mr=0,Zg=null,qc=0,bf=0,Qc=0,RS=0,ab=null,MS=0,lb=1/0;function Xc(){lb=Vr()+500}var je=null,cg=!1,cb=null,Io=null,ua=!1,_d=null,Qu=90,ub=[],db=[],ts=null,yd=0,fb=null,cp=-1,qo=0,up=0,bd=null,dp=!1;function Ii(){return mt&48?Vr():cp!==-1?cp:cp=Vr()}function Zs(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return Mc()===99?1:2;if(qo===0&&(qo=qc),w$.transition!==0){up!==0&&(up=ab!==null?ab.pendingLanes:0),e=qo;var t=4186112&~up;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Mc(),mt&4&&e===98?e=Kp(12,qo):(e=x2(e),e=Kp(e,qo)),e}function Js(e,t,n){if(50<yd)throw yd=0,fb=null,Error(ke(185));if(e=Jg(e,t),e===null)return null;jg(e,t,n),e===Xr&&(Qc|=t,Mr===4&&pc(e,Ur));var r=Mc();t===1?mt&8&&!(mt&48)?hb(e):(qi(e,n),mt===0&&(Xc(),Vo())):(!(mt&4)||r!==98&&r!==99||(ts===null?ts=new Set([e]):ts.add(e)),qi(e,n)),ab=e}function Jg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function qi(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-la(s),l=1<<a,c=o[a];if(c===-1){if(!(l&r)||l&i){c=t,Hl(l);var d=Sn;o[a]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=Wd(e,e===Xr?Ur:0),t=Sn,r===0)n!==null&&(n!==Av&&Yy(n),e.callbackNode=null,e.callbackPriority=0);else{if(n!==null){if(e.callbackPriority===t)return;n!==Av&&Yy(n)}t===15?(n=hb.bind(null,e),Go===null?(Go=[n],lp=gS(Qg,pT)):Go.push(n),n=Av):t===14?n=jd(99,hb.bind(null,e)):(n=k2(t),n=jd(n,FT.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function FT(e){if(cp=-1,up=qo=0,mt&48)throw Error(ke(327));var t=e.callbackNode;if(ya()&&e.callbackNode!==t)return null;var n=Wd(e,e===Xr?Ur:0);if(n===0)return null;var r=n,i=mt;mt|=16;var o=WT();(Xr!==e||Ur!==r)&&(Xc(),gc(e,r));do try{V$();break}catch(a){$T(e,a)}while(1);if(mS(),lg.current=o,mt=i,hr!==null?r=0:(Xr=null,Ur=0,r=Mr),qc&Qc)gc(e,0);else if(r!==0){if(r===2&&(mt|=64,e.hydrate&&(e.hydrate=!1,hS(e.containerInfo)),n=KM(e),n!==0&&(r=Xu(e,n))),r===1)throw t=Zg,gc(e,0),pc(e,n),qi(e,Vr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(ke(345));case 2:Aa(e);break;case 3:if(pc(e,n),(n&62914560)===n&&(r=MS+500-Vr(),10<r)){if(Wd(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ii(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=BE(Aa.bind(null,e),r);break}Aa(e);break;case 4:if(pc(e,n),(n&4186112)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-la(n);o=1<<s,s=r[s],s>i&&(i=s),n&=~o}if(n=i,n=Vr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*N$(n/1960))-n,10<n){e.timeoutHandle=BE(Aa.bind(null,e),n);break}Aa(e);break;case 5:Aa(e);break;default:throw Error(ke(329))}}return qi(e,Vr()),e.callbackNode===t?FT.bind(null,e):null}function pc(e,t){for(t&=~RS,t&=~Qc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-la(t),r=1<<n;e[n]=-1,t&=~r}}function hb(e){if(mt&48)throw Error(ke(327));if(ya(),e===Xr&&e.expiredLanes&Ur){var t=Ur,n=Xu(e,t);qc&Qc&&(t=Wd(e,t),n=Xu(e,t))}else t=Wd(e,0),n=Xu(e,t);if(e.tag!==0&&n===2&&(mt|=64,e.hydrate&&(e.hydrate=!1,hS(e.containerInfo)),t=KM(e),t!==0&&(n=Xu(e,t))),n===1)throw n=Zg,gc(e,0),pc(e,t),qi(e,Vr()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Aa(e),qi(e,Vr()),null}function D$(){if(ts!==null){var e=ts;ts=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,qi(t,Vr())})}Vo()}function VT(e,t){var n=mt;mt|=1;try{return e(t)}finally{mt=n,mt===0&&(Xc(),Vo())}}function UT(e,t){var n=mt;mt&=-2,mt|=8;try{return e(t)}finally{mt=n,mt===0&&(Xc(),Vo())}}function ph(e,t){Kn(sb,tl),tl|=t,qc|=t}function TS(){tl=sb.current,Mn(sb)}function gc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,m$(n)),hr!==null)for(n=hr.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qp();break;case 3:Tc(),Mn(gi),Mn($r),bS();break;case 5:yS(r);break;case 4:Tc();break;case 13:Mn(jn);break;case 19:Mn(jn);break;case 10:vS(r);break;case 23:case 24:TS()}n=n.return}Xr=e,hr=da(e.current,null),Ur=tl=qc=t,Mr=0,Zg=null,RS=Qc=bf=0}function $T(e,t){do{var n=hr;try{if(mS(),md.current=ag,rg){for(var r=rr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rg=!1}if(qd=0,Rr=Dr=rr=null,vd=!1,IS.current=null,n===null||n.return===null){Mr=1,Zg=t,hr=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Ur,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l;if(!(a.mode&2)){var d=a.alternate;d?(a.updateQueue=d.updateQueue,a.memoizedState=d.memoizedState,a.lanes=d.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=(jn.current&1)!==0,p=s;do{var g;if(g=p.tag===13){var b=p.memoizedState;if(b!==null)g=b.dehydrated!==null;else{var k=p.memoizedProps;g=k.fallback===void 0?!1:k.unstable_avoidThisFallback!==!0?!0:!h}}if(g){var y=p.updateQueue;if(y===null){var _=new Set;_.add(c),p.updateQueue=_}else y.add(c);if(!(p.mode&2)){if(p.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var w=Qs(-1,1);w.tag=2,Xs(a,w)}a.lanes|=1;break e}l=void 0,a=t;var x=o.pingCache;if(x===null?(x=o.pingCache=new T$,l=new Set,x.set(c,l)):(l=x.get(c),l===void 0&&(l=new Set,x.set(c,l))),!l.has(a)){l.add(a);var C=B$.bind(null,o,c,a);c.then(C,C)}p.flags|=4096,p.lanes=t;break e}p=p.return}while(p!==null);l=Error((ac(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Mr!==5&&(Mr=2),l=kS(l,a),p=s;do{switch(p.tag){case 3:o=l,p.flags|=4096,t&=-t,p.lanes|=t;var F=PT(p,o,t);QE(p,F);break e;case 1:o=l;var M=p.type,L=p.stateNode;if(!(p.flags&64)&&(typeof M.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Io===null||!Io.has(L)))){p.flags|=4096,t&=-t,p.lanes|=t;var N=NT(p,o,t);QE(p,N);break e}}p=p.return}while(p!==null)}BT(n)}catch(V){t=V,hr===n&&n!==null&&(hr=n=n.return);continue}break}while(1)}function WT(){var e=lg.current;return lg.current=ag,e===null?ag:e}function Xu(e,t){var n=mt;mt|=16;var r=WT();Xr===e&&Ur===t||gc(e,t);do try{F$();break}catch(i){$T(e,i)}while(1);if(mS(),mt=n,lg.current=r,hr!==null)throw Error(ke(261));return Xr=null,Ur=0,Mr}function F$(){for(;hr!==null;)zT(hr)}function V$(){for(;hr!==null&&!y$();)zT(hr)}function zT(e){var t=jT(e.alternate,e,tl);e.memoizedProps=e.pendingProps,t===null?BT(e):hr=t,IS.current=null}function BT(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&2048){if(n=M$(t),n!==null){n.flags&=2047,hr=n;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(n=R$(n,t,tl),n!==null){hr=n;return}if(n=t,n.tag!==24&&n.tag!==23||n.memoizedState===null||tl&1073741824||!(n.mode&4)){for(var r=0,i=n.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){hr=t;return}hr=t=e}while(t!==null);Mr===0&&(Mr=5)}function Aa(e){var t=Mc();return el(99,U$.bind(null,e,t)),null}function U$(e,t){do ya();while(_d!==null);if(mt&48)throw Error(ke(327));var n=e.finishedWork;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ke(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,a=e.expirationTimes;0<o;){var l=31-la(o),c=1<<l;i[l]=0,s[l]=-1,a[l]=-1,o&=~c}if(ts!==null&&!(r&24)&&ts.has(e)&&ts.delete(e),e===Xr&&(hr=Xr=null,Ur=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(i=mt,mt|=32,IS.current=null,Mv=ip,s=DE(),By(s)){if("selectionStart"in s)a={start:s.selectionStart,end:s.selectionEnd};else e:if(a=(a=s.ownerDocument)&&a.defaultView||window,(c=a.getSelection&&a.getSelection())&&c.rangeCount!==0){a=c.anchorNode,o=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var d=0,h=-1,p=-1,g=0,b=0,k=s,y=null;t:for(;;){for(var _;k!==a||o!==0&&k.nodeType!==3||(h=d+o),k!==l||c!==0&&k.nodeType!==3||(p=d+c),k.nodeType===3&&(d+=k.nodeValue.length),(_=k.firstChild)!==null;)y=k,k=_;for(;;){if(k===s)break t;if(y===a&&++g===o&&(h=d),y===l&&++b===c&&(p=d),(_=k.nextSibling)!==null)break;k=y,y=k.parentNode}k=_}a=h===-1||p===-1?null:{start:h,end:p}}else a=null;a=a||{start:0,end:0}}else a=null;Tv={focusedElem:s,selectionRange:a},ip=!1,bd=null,dp=!1,je=r;do try{$$()}catch(V){if(je===null)throw Error(ke(330));ea(je,V),je=je.nextEffect}while(je!==null);bd=null,je=r;do try{for(s=e;je!==null;){var w=je.flags;if(w&16&&Fd(je.stateNode,""),w&128){var x=je.alternate;if(x!==null){var C=x.ref;C!==null&&(typeof C=="function"?C(null):C.current=null)}}switch(w&1038){case 2:SC(je),je.flags&=-3;break;case 6:SC(je),je.flags&=-3,Fv(je.alternate,je);break;case 1024:je.flags&=-1025;break;case 1028:je.flags&=-1025,Fv(je.alternate,je);break;case 4:Fv(je.alternate,je);break;case 8:a=je,DT(s,a);var F=a.alternate;yC(a),F!==null&&yC(F)}je=je.nextEffect}}catch(V){if(je===null)throw Error(ke(330));ea(je,V),je=je.nextEffect}while(je!==null);if(C=Tv,x=DE(),w=C.focusedElem,s=C.selectionRange,x!==w&&w&&w.ownerDocument&&eT(w.ownerDocument.documentElement,w)){for(s!==null&&By(w)&&(x=s.start,C=s.end,C===void 0&&(C=x),"selectionStart"in w?(w.selectionStart=x,w.selectionEnd=Math.min(C,w.value.length)):(C=(x=w.ownerDocument||document)&&x.defaultView||window,C.getSelection&&(C=C.getSelection(),a=w.textContent.length,F=Math.min(s.start,a),s=s.end===void 0?F:Math.min(s.end,a),!C.extend&&F>s&&(a=s,s=F,F=a),a=NE(w,F),o=NE(w,s),a&&o&&(C.rangeCount!==1||C.anchorNode!==a.node||C.anchorOffset!==a.offset||C.focusNode!==o.node||C.focusOffset!==o.offset)&&(x=x.createRange(),x.setStart(a.node,a.offset),C.removeAllRanges(),F>s?(C.addRange(x),C.extend(o.node,o.offset)):(x.setEnd(o.node,o.offset),C.addRange(x)))))),x=[],C=w;C=C.parentNode;)C.nodeType===1&&x.push({element:C,left:C.scrollLeft,top:C.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<x.length;w++)C=x[w],C.element.scrollLeft=C.left,C.element.scrollTop=C.top}ip=!!Mv,Tv=Mv=null,e.current=n,je=r;do try{for(w=e;je!==null;){var M=je.flags;if(M&36&&O$(w,je.alternate,je),M&128){x=void 0;var L=je.ref;if(L!==null){var N=je.stateNode;switch(je.tag){case 5:x=N;break;default:x=N}typeof L=="function"?L(x):L.current=x}}je=je.nextEffect}}catch(V){if(je===null)throw Error(ke(330));ea(je,V),je=je.nextEffect}while(je!==null);je=null,S$(),mt=i}else e.current=n;if(ua)ua=!1,_d=e,Qu=t;else for(je=r;je!==null;)t=je.nextEffect,je.nextEffect=null,je.flags&8&&(M=je,M.sibling=null,M.stateNode=null),je=t;if(r=e.pendingLanes,r===0&&(Io=null),r===1?e===fb?yd++:(yd=0,fb=e):yd=0,n=n.stateNode,Ga&&typeof Ga.onCommitFiberRoot=="function")try{Ga.onCommitFiberRoot(pS,n,void 0,(n.current.flags&64)===64)}catch{}if(qi(e,Vr()),cg)throw cg=!1,e=cb,cb=null,e;return mt&8||Vo(),null}function $$(){for(;je!==null;){var e=je.alternate;dp||bd===null||(je.flags&8?SE(je,bd)&&(dp=!0):je.tag===13&&P$(e,je)&&SE(je,bd)&&(dp=!0));var t=je.flags;t&256&&A$(e,je),!(t&512)||ua||(ua=!0,jd(97,function(){return ya(),null})),je=je.nextEffect}}function ya(){if(Qu!==90){var e=97<Qu?97:Qu;return Qu=90,el(e,z$)}return!1}function W$(e,t){ub.push(t,e),ua||(ua=!0,jd(97,function(){return ya(),null}))}function HT(e,t){db.push(t,e),ua||(ua=!0,jd(97,function(){return ya(),null}))}function z$(){if(_d===null)return!1;var e=_d;if(_d=null,mt&48)throw Error(ke(331));var t=mt;mt|=32;var n=db;db=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,typeof s=="function")try{s()}catch(l){if(o===null)throw Error(ke(330));ea(o,l)}}for(n=ub,ub=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var a=i.create;i.destroy=a()}catch(l){if(o===null)throw Error(ke(330));ea(o,l)}}for(a=e.current.firstEffect;a!==null;)e=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=e;return mt=t,Vo(),!0}function EC(e,t,n){t=kS(n,t),t=PT(e,t,1),Xs(e,t),t=Ii(),e=Jg(e,1),e!==null&&(jg(e,1,t),qi(e,t))}function ea(e,t){if(e.tag===3)EC(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){EC(n,e,t);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Io===null||!Io.has(r))){e=kS(t,e);var i=NT(n,e,1);if(Xs(n,i),i=Ii(),n=Jg(n,1),n!==null)jg(n,1,i),qi(n,i);else if(typeof r.componentDidCatch=="function"&&(Io===null||!Io.has(r)))try{r.componentDidCatch(t,e)}catch{}break}}n=n.return}}function B$(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ii(),e.pingedLanes|=e.suspendedLanes&n,Xr===e&&(Ur&n)===n&&(Mr===4||Mr===3&&(Ur&62914560)===Ur&&500>Vr()-MS?gc(e,0):RS|=n),qi(e,t)}function H$(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(qo===0&&(qo=qc),t=jl(62914560&~qo),t===0&&(t=4194304)):t=Mc()===99?1:2:t=1),n=Ii(),e=Jg(e,t),e!==null&&(jg(e,t,n),qi(e,n))}var jT;jT=function(e,t,n){var r=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||gi.current)po=!0;else if(n&r)po=!!(e.flags&16384);else{switch(po=!1,t.tag){case 3:cC(t),Pv();break;case 5:eC(t);break;case 1:mi(t.type)&&ap(t);break;case 4:Xy(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Kn(Xp,i._currentValue),i._currentValue=r;break;case 13:if(t.memoizedState!==null)return n&t.child.childLanes?uC(e,t,n):(Kn(jn,jn.current&1),t=Zo(e,t,n),t!==null?t.sibling:null);Kn(jn,jn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&64){if(r)return gC(e,t,n);t.flags|=64}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kn(jn,jn.current),r)break;return null;case 23:case 24:return t.lanes=0,Nv(e,t,n)}return Zo(e,t,n)}else po=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Rc(t,$r.current),fc(t,n),i=wS(null,t,r,e,i,n),t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var o=!0;ap(t)}else o=!1;t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_S(t);var s=r.getDerivedStateFromProps;typeof s=="function"&&eg(t,r,s,e),i.updater=Xg,t.stateNode=i,i._reactInternals=t,Qy(t,r,e,n),t=tb(null,t,r,!0,o,n)}else t.tag=0,fi(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=K$(i),e=oo(i,e),o){case 0:t=eb(null,t,i,e,n);break e;case 1:t=lC(null,t,i,e,n);break e;case 11:t=sC(null,t,i,e,n);break e;case 14:t=aC(null,t,i,oo(i.type,e),r,n);break e}throw Error(ke(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oo(r,i),eb(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oo(r,i),lC(e,t,r,i,n);case 3:if(cC(t),r=t.updateQueue,e===null||r===null)throw Error(ke(282));if(r=t.pendingProps,i=t.memoizedState,i=i!==null?i.element:null,mT(e,t),Kd(t,r,null,n),r=t.memoizedState.element,r===i)Pv(),t=Zo(e,t,n);else{if(i=t.stateNode,(o=i.hydrate)&&(Vs=dc(t.stateNode.containerInfo.firstChild),Xo=t,o=Lo=!0),o){if(e=i.mutableSourceEagerHydrationData,e!=null)for(i=0;i<e.length;i+=2)o=e[i],o._workInProgressVersionPrimary=e[i+1],hc.push(o);for(n=bT(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else fi(e,t,r,n),Pv();t=t.child}return t;case 5:return eC(t),e===null&&Zy(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,Ky(r,i)?s=null:o!==null&&Ky(r,o)&&(t.flags|=16),TT(e,t),fi(e,t,s,n),t.child;case 6:return e===null&&Zy(t),null;case 13:return uC(e,t,n);case 4:return Xy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=tg(t,null,r,n):fi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oo(r,i),sC(e,t,r,i,n);case 7:return fi(e,t,t.pendingProps,n),t.child;case 8:return fi(e,t,t.pendingProps.children,n),t.child;case 12:return fi(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var a=t.type._context;if(Kn(Xp,a._currentValue),a._currentValue=o,s!==null)if(a=s.value,o=Bi(a,o)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(a,o):1073741823)|0,o===0){if(s.children===i.children&&!gi.current){t=Zo(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r&&c.observedBits&o){a.tag===1&&(c=Qs(-1,n&-n),c.tag=2,Xs(a,c)),a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),gT(a.return,n),l.lanes|=n;break}c=c.next}}else s=a.tag===10&&a.type===t.type?null:a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}fi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,o=t.pendingProps,r=o.children,fc(t,n),i=Yi(i,o.unstable_observedBits),r=r(i),t.flags|=1,fi(e,t,r,n),t.child;case 14:return i=t.type,o=oo(i,t.pendingProps),o=oo(i.type,o),aC(e,t,i,o,r,n);case 15:return MT(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oo(r,i),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,ap(t)):e=!1,fc(t,n),_T(t,r,i),Qy(t,r,i,n),tb(null,t,r,!0,e,n);case 19:return gC(e,t,n);case 23:return Nv(e,t,n);case 24:return Nv(e,t,n)}throw Error(ke(156,t.tag))};function j$(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(e,t,n,r){return new j$(e,t,n,r)}function LS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function K$(e){if(typeof e=="function")return LS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zg)return 11;if(e===Bg)return 14}return 2}function da(e,t){var n=e.alternate;return n===null?(n=Hi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fp(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")LS(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ns:return mc(n.children,i,o,t);case SM:s=8,i|=16;break;case G0:s=8,i|=1;break;case cd:return e=Hi(12,n,t,i|8),e.elementType=cd,e.type=cd,e.lanes=o,e;case ud:return e=Hi(13,n,t,i),e.type=ud,e.elementType=ud,e.lanes=o,e;case zp:return e=Hi(19,n,t,i),e.elementType=zp,e.lanes=o,e;case J0:return AS(n,i,o,t);case Ry:return e=Hi(24,n,t,i),e.elementType=Ry,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y0:s=10;break e;case q0:s=9;break e;case zg:s=11;break e;case Bg:s=14;break e;case Q0:s=16,r=null;break e;case X0:s=22;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=Hi(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function mc(e,t,n,r){return e=Hi(7,e,r,t),e.lanes=n,e}function AS(e,t,n,r){return e=Hi(23,e,r,t),e.elementType=J0,e.lanes=n,e}function Vv(e,t,n){return e=Hi(6,e,null,t),e.lanes=n,e}function Uv(e,t,n){return t=Hi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function G$(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=wv(0),this.expirationTimes=wv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wv(0),this.mutableSourceEagerHydrationData=null}function Y$(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Da,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ug(e,t,n,r){var i=t.current,o=Ii(),s=Zs(i);e:if(n){n=n._reactInternals;t:{if(cl(n)!==n||n.tag!==1)throw Error(ke(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(mi(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(ke(171))}if(n.tag===1){var l=n.type;if(mi(l)){n=lT(n,l,a);break e}}n=a}else n=ca;return t.context===null?t.context=n:t.pendingContext=n,t=Qs(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),Xs(i,t),Js(i,s,o),s}function $v(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function CC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function OS(e,t){CC(e,t),(e=e.alternate)&&CC(e,t)}function q$(){return null}function PS(e,t,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new G$(e,t,n!=null&&n.hydrate===!0),t=Hi(3,null,null,t===2?7:t===1?3:0),n.current=t,t.stateNode=n,_S(t),e[Yc]=n.current,rT(e.nodeType===8?e.parentNode:e),r)for(e=0;e<r.length;e++){t=r[e];var i=t._getVersion;i=i(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}PS.prototype.render=function(e){ug(e,this._internalRoot,null,null)};PS.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ug(null,e,null,function(){t[Yc]=null})};function Sf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Q$(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new PS(e,0,t?{hydrate:!0}:void 0)}function em(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if(typeof i=="function"){var a=i;i=function(){var c=$v(s);a.call(c)}}ug(t,s,e,i)}else{if(o=n._reactRootContainer=Q$(n,r),s=o._internalRoot,typeof i=="function"){var l=i;i=function(){var c=$v(s);l.call(c)}}UT(function(){ug(t,s,e,i)})}return $v(s)}DM=function(e){if(e.tag===13){var t=Ii();Js(e,4,t),OS(e,4)}};iS=function(e){if(e.tag===13){var t=Ii();Js(e,67108864,t),OS(e,67108864)}};FM=function(e){if(e.tag===13){var t=Ii(),n=Zs(e);Js(e,n,t),OS(e,n)}};VM=function(e,t){return t()};Vy=function(e,t,n){switch(t){case"input":if(Ty(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=qg(r);if(!i)throw Error(ke(90));EM(r),Ty(r,i)}}}break;case"textarea":xM(e,n);break;case"select":t=n.value,t!=null&&lc(e,!!n.multiple,t,!1)}};tS=VT;AM=function(e,t,n,r,i){var o=mt;mt|=4;try{return el(98,e.bind(null,t,n,r,i))}finally{mt=o,mt===0&&(Xc(),Vo())}};nS=function(){!(mt&49)&&(D$(),ya())};OM=function(e,t){var n=mt;mt|=2;try{return e(t)}finally{mt=n,mt===0&&(Xc(),Vo())}};function KT(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sf(t))throw Error(ke(200));return Y$(e,t,null,n)}var X$={Events:[_f,Zl,qg,TM,LM,ya,{current:!1}]},Au={findFiberByHostInstance:Va,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Z$={bundleType:Au.bundleType,version:Au.version,rendererPackageName:Au.rendererPackageName,rendererConfig:Au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=NM(e),e===null?null:e.stateNode},findFiberByHostInstance:Au.findFiberByHostInstance||q$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{pS=gh.inject(Z$),Ga=gh}catch{}}Qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X$;Qi.createPortal=KT;Qi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):Error(ke(268,Object.keys(e)));return e=NM(t),e=e===null?null:e.stateNode,e};Qi.flushSync=function(e,t){var n=mt;if(n&48)return e(t);mt|=1;try{if(e)return el(99,e.bind(null,t))}finally{mt=n,Vo()}};Qi.hydrate=function(e,t,n){if(!Sf(t))throw Error(ke(200));return em(null,e,t,!0,n)};Qi.render=function(e,t,n){if(!Sf(t))throw Error(ke(200));return em(null,e,t,!1,n)};Qi.unmountComponentAtNode=function(e){if(!Sf(e))throw Error(ke(40));return e._reactRootContainer?(UT(function(){em(null,null,e,!1,function(){e._reactRootContainer=null,e[Yc]=null})}),!0):!1};Qi.unstable_batchedUpdates=VT;Qi.unstable_createPortal=function(e,t){return KT(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Qi.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sf(n))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return em(e,t,n,!1,r)};Qi.version="17.0.2";function GT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GT)}catch(e){console.error(e)}}GT(),nM.exports=Qi;var NS=nM.exports;const as=rl(NS);var YT={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(o){var s=typeof o;if(s==="string"||s==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var a=n.apply(null,o);a&&r.push(a)}}else if(s==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){r.push(o.toString());continue}for(var l in o)t.call(o,l)&&o[l]&&r.push(l)}}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(YT);var J$=YT.exports;const Te=rl(J$);function tc(e){return`https://hamsterbase.com/redirect?to=${e}&lang=${z("homepage.redirect_lang","en-US")}`}const DS=Q.createContext(null);function Ft(e){return v.useContext(DS).instantiationService.invokeFunction(r=>r.get(e))}const e5=()=>{const e=v.useState(0)[1];return()=>e(t=>t+1)};function ut(e){const t=e5();v.useLayoutEffect(()=>{if(e)return e(t).dispose},[e,t])}const t5="_drop-container_3q198_1",n5="_dropping_3q198_13",r5="_drop-zone-title_3q198_17",i5="_drop-zone-desc_3q198_22",o5="_browser-text_3q198_26",Ou={"drop-container":"_drop-container_3q198_1",dropContainer:t5,dropping:n5,"drop-zone-title":"_drop-zone-title_3q198_17",dropZoneTitle:r5,"drop-zone-desc":"_drop-zone-desc_3q198_22",dropZoneDesc:i5,"browser-text":"_browser-text_3q198_26",browserText:o5},s5=(e,t)=>{if(e&&t){const n=t.split(","),r=e.name||"",i=e.type||"",o=i.replace(/\/.*$/,"");return n.some(s=>{const a=s.trim();if(/^\*(\/\*)?$/.test(s))return!0;if(a.charAt(0)==="."){const l=r.toLowerCase(),c=a.toLowerCase();let d=[c];return(c===".jpg"||c===".jpeg")&&(d=[".jpg",".jpeg"]),d.some(h=>l.endsWith(h))}return/\/\*$/.test(a)?o===a.replace(/\/.*$/,""):!!(i===a||/^\w+$/.test(a))})}return!0};var qT={exports:{}},wf={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a5=v,QT=60103;wf.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var xC=Symbol.for;QT=xC("react.element"),wf.Fragment=xC("react.fragment")}var l5=a5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c5=Object.prototype.hasOwnProperty,u5={key:!0,ref:!0,__self:!0,__source:!0};function XT(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)c5.call(t,r)&&!u5.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:QT,type:e,key:o,ref:s,props:i,_owner:l5.current}}wf.jsx=XT;wf.jsxs=XT;qT.exports=wf;var FS=qT.exports;const E=FS.jsx,ce=FS.jsxs,tm=FS.Fragment;function d5(e,t){return new Promise(n=>{const r=document.createElement("input");r.setAttribute("type","file"),e&&r.setAttribute("multiple","true"),t&&r.setAttribute("accept",t),r.click(),r.onchange=async()=>{const i=r.files;if(i)n(Array.from(i));else{n(null);return}}})}const f5=e=>{const t=e.accept,[n,r]=v.useState(!1),i=l=>{var c;l&&l.length>0&&((c=e.onUpload)==null||c.call(e,l))},o=l=>{if(l.preventDefault(),r(!0),l.type==="dragover")return;let c=Array.from(l.dataTransfer.files);t&&(c=c.filter(d=>s5(d,t))),i(c),r(!1)},s=()=>{r(!1)},a=async()=>{const l=await d5(!0,e.accept);i(l)};return E("div",{onDrop:o,onDragOver:o,onDragLeave:s,children:ce("div",{className:Te(Ou.dropContainer,n?Ou.dropping:""),onClick:a,children:[ce("p",{className:Ou.dropZoneTitle,children:[z("upload_panel.drop_zone","Drop webpages or"),E("span",{className:Ou.browserText,children:z("upload_panel.drop_zone_browser","browser")})]}),E("p",{className:Ou.dropZoneDesc,children:z("upload_panel.drop_zone_description","Supports: HTML, MHT, Webarchive")})]})})},h5="_container_11wsn_1",p5="_upload-panel_11wsn_29",g5="_faq-title_11wsn_37",m5="_upload-item_11wsn_42",v5="_upload-item-name_11wsn_46",_5="_upload-item-label_11wsn_53",y5="_upload-item-progress_11wsn_59",b5="_upload-item-progressbar_11wsn_64",S5="_upload-error_11wsn_71",w5="_file-list-container_11wsn_77",Eo={container:h5,"upload-panel":"_upload-panel_11wsn_29",uploadPanel:p5,"faq-title":"_faq-title_11wsn_37",faqTitle:g5,"upload-item":"_upload-item_11wsn_42",uploadItem:m5,"upload-item-name":"_upload-item-name_11wsn_46",uploadItemName:v5,"upload-item-label":"_upload-item-label_11wsn_53",uploadItemLabel:_5,"upload-item-progress":"_upload-item-progress_11wsn_59",uploadItemProgress:y5,"upload-item-progressbar":"_upload-item-progressbar_11wsn_64",uploadItemProgressbar:b5,"upload-error":"_upload-error_11wsn_71",uploadError:S5,"file-list-container":"_file-list-container_11wsn_77",fileListContainer:w5},E5=e=>{const t=e.file.file.name,n=e.file.status,r=n.type===di.error,i=r?100:e.file.status.type/di.uploaded*100;if(e.file.status.type===di.uploaded&&e.file.status.hidden)return null;const o=r?n.errorMessage??"":sE(e.file.status.type);return ce("div",{className:Te(Eo.uploadItem,r&&Eo.uploadError),children:[E("p",{className:Eo.uploadItemName,title:t,children:t}),E("p",{className:Eo.uploadItemLabel,title:o,children:sE(e.file.status.type)}),E("div",{className:Eo.uploadItemProgress,children:E("div",{className:Eo.uploadItemProgressbar,style:{width:`${i}%`}})})]})},C5=()=>{const e=[{title:z("upload_panel.browser_extension","Is there an official browser extension for hamsterbase??"),description:z("upload_panel.browser_extension_description","Yes. The hamsterbase browser extension supports annotations directly in the browser and also supports saving snapshots."),link:tc("browser-extension")},{title:z("upload_panel.save_webpage_title","How to save snapshots of webpages?"),description:z("upload_panel.save_webpage_description","HTML / MHT (mhtml) / WebArchive are three popular web snapshot formats that allow you to access the full content of a web page offline. This article will explain how to save snapshots of webpages in your browser."),link:tc("save-webpages")},{title:z("upload_panel.import_webpage_title","How to import webpage snapshots?"),description:z("upload_panel.import_webpage_description","This article introduces the manual import and automatic import features of Hamsterbase. Manual import is suitable for scenarios with a small number of snapshots, and automatic import is suitable for importing a large number of snapshots."),link:tc("import-webpages")},{title:z("upload_panel.singlefile_title","How does Singlefile connect to hamsterbase?"),description:z("upload_panel.singlefile_description","Singlefile is an open source browser plugin that supports Safari, Chrome, Edge and Firefox. It can help you save complete web pages as a single HTML file. This article explains how to connect to Hamsterbase in singlefile. Once connected you can use singlefile to save the current page you are viewing with one click."),link:tc("singlefile")}],t=Ft(tM);ut(t.onStatusChange);const n=r=>{t.addFiles(r)};return v.useEffect(()=>{const r=setInterval(()=>{t.parseOne(),t.uploadOne(),t.hideOne()},100);return()=>{clearInterval(r)}},[]),ce("div",{className:Eo.container,children:[ce("div",{className:Eo.uploadPanel,children:[E("h1",{children:z("upload_panel.title","Import webpages")}),E(f5,{onUpload:n,accept:".mhtml,.mht,.webarchive,.html"}),E("div",{className:Eo.fileListContainer,children:t.files.map(r=>E(E5,{file:r,children:" "})).filter(r=>!!r)})]}),ce("div",{style:{overflowY:"scroll"},children:[E("h1",{children:"FAQ"}),e.map(r=>ce(Q.Fragment,{children:[E("p",{className:Eo.faqTitle,children:r.title}),ce("p",{children:[r.description,E("a",{href:r.link,target:"_blank",style:{paddingLeft:4},children:z("upload_panel.faq_link","Learn more")})]})]},r.title))]})]})};var x5=["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","className","spin"];function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function IC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(n),!0).forEach(function(r){k5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I5(e,t){if(e==null)return{};var n=R5(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function R5(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var M5={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function T5(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function L5(e,t,n){var r=typeof t.fill=="string"?[t.fill]:t.fill||[],i=[],o=t.theme||n.theme;switch(o){case"outline":i.push(typeof r[0]=="string"?r[0]:"currentColor"),i.push("none"),i.push(typeof r[0]=="string"?r[0]:"currentColor"),i.push("none");break;case"filled":i.push(typeof r[0]=="string"?r[0]:"currentColor"),i.push(typeof r[0]=="string"?r[0]:"currentColor"),i.push("#FFF"),i.push("#FFF");break;case"two-tone":i.push(typeof r[0]=="string"?r[0]:"currentColor"),i.push(typeof r[1]=="string"?r[1]:n.colors.twoTone.twoTone),i.push(typeof r[0]=="string"?r[0]:"currentColor"),i.push(typeof r[1]=="string"?r[1]:n.colors.twoTone.twoTone);break;case"multi-color":i.push(typeof r[0]=="string"?r[0]:"currentColor"),i.push(typeof r[1]=="string"?r[1]:n.colors.multiColor.outFillColor),i.push(typeof r[2]=="string"?r[2]:n.colors.multiColor.innerStrokeColor),i.push(typeof r[3]=="string"?r[3]:n.colors.multiColor.innerFillColor);break}return{size:t.size||n.size,strokeWidth:t.strokeWidth||n.strokeWidth,strokeLinecap:t.strokeLinecap||n.strokeLinecap,strokeLinejoin:t.strokeLinejoin||n.strokeLinejoin,colors:i,id:e}}var ZT=v.createContext(M5);ZT.Provider;function Bt(e,t,n){return function(r){var i=r.size,o=r.strokeWidth,s=r.strokeLinecap,a=r.strokeLinejoin,l=r.theme,c=r.fill,d=r.className,h=r.spin,p=I5(r,x5),g=v.useContext(ZT),b=v.useMemo(T5,[]),k=L5(b,{size:i,strokeWidth:o,strokeLinecap:s,strokeLinejoin:a,theme:l,fill:c},g),y=[g.prefix+"-icon"];return y.push(g.prefix+"-icon-"+e),t&&g.rtl&&y.push(g.prefix+"-icon-rtl"),h&&y.push(g.prefix+"-icon-spin"),d&&y.push(d),E("span",{...IC(IC({},p),{},{className:y.join(" ")}),children:n(k)})}}const A5=Bt("add-one",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M24 16V32",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M16 24L32 24",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),O5=Bt("add-web",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M25 40H7C5.34315 40 4 38.6569 4 37V11C4 9.34315 5.34315 8 7 8H41C42.6569 8 44 9.34315 44 11V24.9412",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M4 11C4 9.34315 5.34315 8 7 8H41C42.6569 8 44 9.34315 44 11V20H4V11Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth}),Q.createElement("path",{d:"M32 35H44",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M38 29V41",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("circle",{r:"2",transform:"matrix(-1.31134e-07 -1 -1 1.31134e-07 10 14)",fill:e.colors[2]}),Q.createElement("circle",{r:"2",transform:"matrix(-1.31134e-07 -1 -1 1.31134e-07 16 14)",fill:e.colors[2]}))}),P5=Bt("boxing-one",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M13 26H15C17.76 26 20 23.76 20 21C20 18.24 17.76 16 15 16H11C8.24 16 6 18.24 6 21V30C6 33.3137 8.68629 36 12 36H36C39.3137 36 42 33.3137 42 30V26C42 23.7909 40.2091 22 38 22H24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeMiterlimit:"2",strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M34 44H14C12.89 44 12 43.1 12 42V36H36V42C36 43.1 35.1 44 34 44Z",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeMiterlimit:"2",strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M6 20C5 20 4 18 4 16V12C4 7.58 7.58 4 12 4H36C40.42 4 44 7.58 44 12V16C44 19.31 41.31 22 38 22H19.9",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeMiterlimit:"2",strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),N5=Bt("check",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M43 11L16.875 37L5 25.1818",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),D5=Bt("check-one",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M24 44C29.5228 44 34.5228 41.7614 38.1421 38.1421C41.7614 34.5228 44 29.5228 44 24C44 18.4772 41.7614 13.4772 38.1421 9.85786C34.5228 6.23858 29.5228 4 24 4C18.4772 4 13.4772 6.23858 9.85786 9.85786C6.23858 13.4772 4 18.4772 4 24C4 29.5228 6.23858 34.5228 9.85786 38.1421C13.4772 41.7614 18.4772 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M16 24L22 30L34 18",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),Ef=Bt("close",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M8 8L40 40",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M8 40L40 8",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),F5=Bt("close-small",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M14 14L34 34",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M14 34L34 14",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),V5=Bt("column",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M39.3 6H8.7C7.20883 6 6 7.20883 6 8.7V39.3C6 40.7912 7.20883 42 8.7 42H39.3C40.7912 42 42 40.7912 42 39.3V8.7C42 7.20883 40.7912 6 39.3 6Z",stroke:e.colors[0],strokeWidth:e.strokeWidth}),Q.createElement("path",{d:"M24 6L24 42",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap}))}),U5=Bt("copy-one",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M13 38H41V16H30V4H13V38Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M30 4L41 16",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M7 20V44H28",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M19 20H23",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap}),Q.createElement("path",{d:"M19 28H31",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap}))}),JT=Bt("delete",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M9 10V44H39V10H9Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M20 20V33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M28 20V33",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M4 10H44",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M16 10L19.289 4H28.7771L32 10H16Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),RC=Bt("disabaled-web",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M25 40H7C5.34315 40 4 38.6569 4 37V11C4 9.34315 5.34315 8 7 8H41C42.6569 8 44 9.34315 44 11V23.0588",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("circle",{cx:"38",cy:"35",r:"6",stroke:e.colors[0],strokeWidth:e.strokeWidth}),Q.createElement("path",{d:"M34 31L42 39",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M4 11C4 9.34315 5.34315 8 7 8H41C42.6569 8 44 9.34315 44 11V20H4V11Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth}),Q.createElement("circle",{r:"2",transform:"matrix(-1.31134e-07 -1 -1 1.31134e-07 10 14)",fill:e.colors[2]}),Q.createElement("circle",{r:"2",transform:"matrix(-1.31134e-07 -1 -1 1.31134e-07 16 14)",fill:e.colors[2]}))}),$5=Bt("down-one",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M36 19L24 31L12 19H36Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),MC=Bt("download-web",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M27 40H7C5.34315 40 4 38.6569 4 37V11C4 9.34315 5.34315 8 7 8H41C42.6569 8 44 9.34315 44 11V24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M34 36L39 41L44 36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M39 29L39 41",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M4 11C4 9.34315 5.34315 8 7 8H41C42.6569 8 44 9.34315 44 11V20H4V11Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth}),Q.createElement("circle",{r:"2",transform:"matrix(-1.31134e-07 -1 -1 1.31134e-07 10 14)",fill:e.colors[2]}),Q.createElement("circle",{r:"2",transform:"matrix(-1.31134e-07 -1 -1 1.31134e-07 16 14)",fill:e.colors[2]}))}),W5=Bt("filter",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M6 9L20.4 25.8178V38.4444L27.6 42V25.8178L42 9H6Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),z5=Bt("handle-round",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("circle",{cx:"24",cy:"24",r:"20",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("circle",{cx:"24",cy:"24",r:"12",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),TC=Bt("high-light",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M6 44L6 25H12V17H36V25H42V44H6Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M17 17V8L31 4V17",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),B5=Bt("inbox",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M4 30L9 6H39L44 30",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M4 30H14.9091L16.7273 36H31.2727L33.0909 30H44V43H4V30Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M19 14H29",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M16 22H32",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),H5=Bt("info",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M24 44C29.5228 44 34.5228 41.7614 38.1421 38.1421C41.7614 34.5228 44 29.5228 44 24C44 18.4772 41.7614 13.4772 38.1421 9.85786C34.5228 6.23858 29.5228 4 24 4C18.4772 4 13.4772 6.23858 9.85786 9.85786C6.23858 13.4772 4 18.4772 4 24C4 29.5228 6.23858 34.5228 9.85786 38.1421C13.4772 41.7614 18.4772 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 11C25.3807 11 26.5 12.1193 26.5 13.5C26.5 14.8807 25.3807 16 24 16C22.6193 16 21.5 14.8807 21.5 13.5C21.5 12.1193 22.6193 11 24 11Z",fill:e.colors[2]}),Q.createElement("path",{d:"M24.5 34V20H23.5H22.5",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M21 34H28",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),LC=Bt("like",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M15 8C8.92487 8 4 12.9249 4 19C4 30 17 40 24 42.3262C31 40 44 30 44 19C44 12.9249 39.0751 8 33 8C29.2797 8 25.9907 9.8469 24 12.6738C22.0093 9.8469 18.7203 8 15 8Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),j5=Bt("list-two",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M9 42C11.2091 42 13 40.2091 13 38C13 35.7909 11.2091 34 9 34C6.79086 34 5 35.7909 5 38C5 40.2091 6.79086 42 9 42Z",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M9 14C11.2091 14 13 12.2092 13 10C13 7.79086 11.2091 6 9 6C6.79086 6 5 7.79086 5 10C5 12.2092 6.79086 14 9 14Z",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M9 28C11.2091 28 13 26.2092 13 24C13 21.7908 11.2091 20 9 20C6.79086 20 5 21.7908 5 24C5 26.2092 6.79086 28 9 28Z",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M21 24H43",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M21 38H43",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M21 10H43",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),K5=Bt("message-sent",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M44 24C44 35.0457 35.0457 44 24 44C18.0265 44 4 44 4 44C4 44 4 29.0722 4 24C4 12.9543 12.9543 4 24 4C35.0457 4 44 12.9543 44 24Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M13.9999 26L20 32L33 19",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),eL=Bt("minus",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M10.5 24L38.5 24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),G5=Bt("more",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("circle",{cx:"12",cy:"24",r:"3",fill:e.colors[0]}),Q.createElement("circle",{cx:"24",cy:"24",r:"3",fill:e.colors[0]}),Q.createElement("circle",{cx:"36",cy:"24",r:"3",fill:e.colors[0]}))}),Y5=Bt("more-one",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("circle",{cx:"24",cy:"12",r:"3",fill:e.colors[0]}),Q.createElement("circle",{cx:"24",cy:"24",r:"3",fill:e.colors[0]}),Q.createElement("circle",{cx:"24",cy:"35",r:"3",fill:e.colors[0]}))}),q5=Bt("notebook",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M10 6C10 4.89543 10.8954 4 12 4H40C41.1046 4 42 4.89543 42 6V42C42 43.1046 41.1046 44 40 44H12C10.8954 44 10 43.1046 10 42V6Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M34 6V42",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M6 14H14",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M6 24H14",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M6 34H14",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M27 4H39",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M27 44H39",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),Q5=Bt("notes",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M8 6C8 4.89543 8.89543 4 10 4H30L40 14V42C40 43.1046 39.1046 44 38 44H10C8.89543 44 8 43.1046 8 42V6Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M16 20H32",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M16 28H32",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),VS=Bt("plus",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M24.0605 10L24.0239 38",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M10 24L38 24",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),X5=Bt("right",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M19 12L31 24L19 36",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),Z5=Bt("round",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("circle",{cx:"24",cy:"24",r:"20",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth}))}),J5=Bt("search",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M21 38C30.3888 38 38 30.3888 38 21C38 11.6112 30.3888 4 21 4C11.6112 4 4 11.6112 4 21C4 30.3888 11.6112 38 21 38Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M26.657 14.3431C25.2093 12.8954 23.2093 12 21.0001 12C18.791 12 16.791 12.8954 15.3433 14.3431",stroke:e.colors[2],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M33.2216 33.2217L41.7069 41.707",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),eW=Bt("setting-config",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M41.5 10H35.5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M27.5 6V14",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M27.5 10L5.5 10",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M13.5 24H5.5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M21.5 20V28",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M43.5 24H21.5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M41.5 38H35.5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M27.5 34V42",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M27.5 38H5.5",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}))}),tW=Bt("up-one",!1,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M12 29L24 17L36 29H12Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinejoin:e.strokeLinejoin}))}),AC=Bt("upload-web",!0,function(e){return Q.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},Q.createElement("path",{d:"M28 40H7C5.34315 40 4 38.6569 4 37V11C4 9.34315 5.34315 8 7 8H41C42.6569 8 44 9.34315 44 11V23.0588",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M39 41L39 29",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M34 34L39 29L44 34",stroke:e.colors[0],strokeWidth:e.strokeWidth,strokeLinecap:e.strokeLinecap,strokeLinejoin:e.strokeLinejoin}),Q.createElement("path",{d:"M4 11C4 9.34315 5.34315 8 7 8H41C42.6569 8 44 9.34315 44 11V20H4V11Z",fill:e.colors[1],stroke:e.colors[0],strokeWidth:e.strokeWidth}),Q.createElement("circle",{r:"2",transform:"matrix(-1.31134e-07 -1 -1 1.31134e-07 10 14)",fill:e.colors[2]}),Q.createElement("circle",{r:"2",transform:"matrix(-1.31134e-07 -1 -1 1.31134e-07 16 14)",fill:e.colors[2]}))}),nW="_message_1ansv_3",rW="_message-box_1ansv_29",OC={message:nW,"message-box":"_message-box_1ansv_29",messageBox:rW},iW=()=>{const e=Ft(sa);return ut(e.onStatusChange),v.useEffect(()=>{const t=setInterval(()=>{e.cleanDestroy()},100);return()=>clearInterval(t)},[]),E("div",{className:OC.messageBox,children:e.messages.map(t=>ce("div",{className:OC.message,children:[E(D5,{theme:"filled",size:16}),E("span",{style:{flex:1},children:t.message}),E(Ef,{size:14,onClick:()=>{e.destroy(t.id)}})]},t.id))})};function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(this,arguments)}function Cf(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var oW=".".charCodeAt(0),sW=/\\(\\)?/g,aW=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),lW=function(t){var n=[];return t.charCodeAt(0)===oW&&n.push(""),t.replace(aW,function(r,i,o,s){var a=r;o?a=s.replace(sW,"$1"):i&&(a=i.trim()),n.push(a)}),n},mh={},cW=/[.[\]]+/,tL=function(t){if(t==null||!t.length)return[];if(typeof t!="string")throw new Error("toPath() expects a string");return mh[t]==null&&(t.endsWith("[]")?mh[t]=t.split(cW).filter(Boolean):mh[t]=lW(t)),mh[t]},Nn=function(t,n){for(var r=tL(n),i=t,o=0;o<r.length;o++){var s=r[o];if(i==null||typeof i!="object"||Array.isArray(i)&&isNaN(s))return;i=i[s]}return i};function uW(e){var t=dW(e,"string");return typeof t=="symbol"?t:String(t)}function dW(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fW=function e(t,n,r,i,o){if(n>=r.length)return i;var s=r[n];if(isNaN(s)){var a;if(t==null){var l,c=e(void 0,n+1,r,i,o);return c===void 0?void 0:(l={},l[s]=c,l)}if(Array.isArray(t))throw new Error("Cannot set a non-numeric property on an array");var d=e(t[s],n+1,r,i,o);if(d===void 0){var h=Object.keys(t).length;if(t[s]===void 0&&h===0)return;if(t[s]!==void 0&&h<=1)return!isNaN(r[n-1])&&!o?{}:void 0;t[s];var p=Cf(t,[s].map(uW));return p}return ot({},t,(a={},a[s]=d,a))}var g=Number(s);if(t==null){var b=e(void 0,n+1,r,i,o);if(b===void 0)return;var k=[];return k[g]=b,k}if(!Array.isArray(t))throw new Error("Cannot set a numeric property on an object");var y=t[g],_=e(y,n+1,r,i,o),w=[].concat(t);if(o&&_===void 0){if(w.splice(g,1),w.length===0)return}else w[g]=_;return w},Di=function(t,n,r,i){if(i===void 0&&(i=!1),t==null)throw new Error("Cannot call setIn() with "+String(t)+" state");if(n==null)throw new Error("Cannot call setIn() with "+String(n)+" key");return fW(t,0,tL(n),r,i)},PC="FINAL_FORM/form-error",Sd="FINAL_FORM/array-error";function NC(e,t){var n=e.errors,r=e.initialValues,i=e.lastSubmittedValues,o=e.submitErrors,s=e.submitFailed,a=e.submitSucceeded,l=e.submitting,c=e.values,d=t.active,h=t.blur,p=t.change,g=t.data,b=t.focus,k=t.modified,y=t.modifiedSinceLastSubmit,_=t.name,w=t.touched,x=t.validating,C=t.visited,F=Nn(c,_),M=Nn(n,_);M&&M[Sd]&&(M=M[Sd]);var L=o&&Nn(o,_),N=r&&Nn(r,_),V=t.isEqual(N,F),Y=!!(i&&!t.isEqual(Nn(i,_),F)),J=!M&&!L;return{active:d,blur:h,change:p,data:g,dirty:!V,dirtySinceLastSubmit:Y,error:M,focus:b,initial:N,invalid:!J,length:Array.isArray(F)?F.length:void 0,modified:k,modifiedSinceLastSubmit:y,name:_,pristine:V,submitError:L,submitFailed:s,submitSucceeded:a,submitting:l,touched:w,valid:J,value:F,visited:C,validating:x}}var nL=["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","value","visited","validating"],So=function(t,n){if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var r=Object.keys(t),i=Object.keys(n);if(r.length!==i.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(n),s=0;s<r.length;s++){var a=r[s];if(!o(a)||t[a]!==n[a])return!1}return!0};function rL(e,t,n,r,i,o){var s=!1;return i.forEach(function(a){r[a]&&(e[a]=t[a],(!n||(~o.indexOf(a)?!So(t[a],n[a]):t[a]!==n[a]))&&(s=!0))}),s}var hW=["data"],pW=function(t,n,r,i){var o={blur:t.blur,change:t.change,focus:t.focus,name:t.name},s=rL(o,t,n,r,nL,hW)||!n;return s||i?o:void 0},iL=["active","dirty","dirtyFields","dirtyFieldsSinceLastSubmit","dirtySinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitting","submitError","submitErrors","submitFailed","submitSucceeded","touched","valid","validating","values","visited"],gW=["touched","visited"];function DC(e,t,n,r){var i={},o=rL(i,e,t,n,iL,gW)||!t;return o||r?i:void 0}var FC=function(t){var n,r;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(!n||o.length!==n.length||o.some(function(a,l){return!So(n[l],a)}))&&(n=o,r=t.apply(void 0,o)),r}},Wv=function(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"},mW="4.20.9",vW=function(t,n){return t===n},nc=function e(t){return Object.keys(t).some(function(n){var r=t[n];return r&&typeof r=="object"&&!(r instanceof Error)?e(r):typeof r<"u"})};function _W(e){var t=e.active,n=e.dirtySinceLastSubmit,r=e.modifiedSinceLastSubmit,i=e.error,o=e.errors,s=e.initialValues,a=e.pristine,l=e.submitting,c=e.submitFailed,d=e.submitSucceeded,h=e.submitError,p=e.submitErrors,g=e.valid,b=e.validating,k=e.values;return{active:t,dirty:!a,dirtySinceLastSubmit:n,modifiedSinceLastSubmit:r,error:i,errors:o,hasSubmitErrors:!!(h||p&&nc(p)),hasValidationErrors:!!(i||nc(o)),invalid:!g,initialValues:s,pristine:a,submitting:l,submitFailed:c,submitSucceeded:d,submitError:h,submitErrors:p,valid:g,validating:b>0,values:k}}function oL(e,t,n,r,i,o){var s=i(n,r,t,o);return s?(e(s),!0):!1}function VC(e,t,n,r,i){var o=e.entries;Object.keys(o).forEach(function(s){var a=o[Number(s)];if(a){var l=a.subscription,c=a.subscriber,d=a.notified;oL(c,l,t,n,r,i||!d)&&(a.notified=!0)}})}function yW(e){if(!e)throw new Error("No config specified");var t=e.debug,n=e.destroyOnUnregister,r=e.keepDirtyOnReinitialize,i=e.initialValues,o=e.mutators,s=e.onSubmit,a=e.validate,l=e.validateOnBlur;if(!s)throw new Error("No onSubmit function specified");var c={subscribers:{index:0,entries:{}},fieldSubscribers:{},fields:{},formState:{asyncErrors:{},dirtySinceLastSubmit:!1,modifiedSinceLastSubmit:!1,errors:{},initialValues:i&&ot({},i),invalid:!1,pristine:!0,submitting:!1,submitFailed:!1,submitSucceeded:!1,resetWhileSubmitting:!1,valid:!0,validating:0,values:i?ot({},i):{}},lastFormState:void 0},d=0,h=!1,p=!1,g=!1,b=0,k={},y=function(R){return function(O){return delete k[R],O}},_=function(R,O,j){var Z=Nn(R.formState.values,O),le=j(Z);R.formState.values=Di(R.formState.values,O,le)||{}},w=function(R,O,j){if(R.fields[O]){var Z,le;R.fields=ot({},R.fields,(Z={},Z[j]=ot({},R.fields[O],{name:j,blur:function(){return ae.blur(j)},change:function(fe){return ae.change(j,fe)},focus:function(){return ae.focus(j)},lastFieldState:void 0}),Z)),delete R.fields[O],R.fieldSubscribers=ot({},R.fieldSubscribers,(le={},le[j]=R.fieldSubscribers[O],le)),delete R.fieldSubscribers[O];var ee=Nn(R.formState.values,O);R.formState.values=Di(R.formState.values,O,void 0)||{},R.formState.values=Di(R.formState.values,j,ee),delete R.lastFormState}},x=function(R){return function(){if(o){for(var O={formState:c.formState,fields:c.fields,fieldSubscribers:c.fieldSubscribers,lastFormState:c.lastFormState},j=arguments.length,Z=new Array(j),le=0;le<j;le++)Z[le]=arguments[le];var ee=o[R](Z,O,{changeValue:_,getIn:Nn,renameField:w,resetFieldState:ae.resetFieldState,setIn:Di,shallowEqual:So});return c.formState=O.formState,c.fields=O.fields,c.fieldSubscribers=O.fieldSubscribers,c.lastFormState=O.lastFormState,N(void 0,function(){V(),B()}),ee}}},C=o?Object.keys(o).reduce(function(K,R){return K[R]=x(R),K},{}):{},F=function(R){var O=[];if(a){var j=a(ot({},c.formState.values));Wv(j)?O.push(j.then(function(Z){return R(Z,!0)})):R(j,!1)}return O},M=function(R){return Object.keys(R.validators).reduce(function(O,j){var Z=R.validators[Number(j)]();return Z&&O.push(Z),O},[])},L=function(R,O){var j=[],Z=M(R);if(Z.length){var le;Z.forEach(function(ee){var ie=ee(Nn(c.formState.values,R.name),c.formState.values,ee.length===0||ee.length===3?NC(c.formState,c.fields[R.name]):void 0);if(ie&&Wv(ie)){R.validating=!0;var fe=ie.then(function(ge){c.fields[R.name]&&(c.fields[R.name].validating=!1,O(ge))});j.push(fe)}else le||(le=ie)}),O(le)}return j},N=function(R,O){if(h){p=!0,O();return}var j=c.fields,Z=c.formState,le=ot({},j),ee=Object.keys(le);if(!a&&!ee.some(function(Le){return M(le[Le]).length})){O();return}var ie=!1;if(R){var fe=le[R];if(fe){var ge=fe.validateFields;ge&&(ie=!0,ee=ge.length?ge.concat(R):[R])}}var we={},Ne={},be={},Ye=[].concat(F(function(Le,st){st?Ne=Le||{}:we=Le||{}}),ee.reduce(function(Le,st){return Le.concat(L(j[st],function(nt){be[st]=nt}))},[])),Pe=Ye.length>0,$e=++b,it=Promise.all(Ye).then(y($e));Pe&&(k[$e]=it);var ht=function(st){var nt=ot({},ie?Z.errors:{},we,st?Ne:Z.asyncErrors),Xe=function(rt){ee.forEach(function(et){if(j[et]){var pt=Nn(we,et),wt=Nn(nt,et),Mt=M(le[et]).length,yt=be[et];rt(et,Mt&&yt||a&&pt||(!pt&&!ie?wt:void 0))}})};Xe(function(ze,rt){nt=Di(nt,ze,rt)||{}}),Xe(function(ze,rt){if(rt&&rt[Sd]){var et=Nn(nt,ze),pt=[].concat(et);pt[Sd]=rt[Sd],nt=Di(nt,ze,pt)}}),So(Z.errors,nt)||(Z.errors=nt),st&&(Z.asyncErrors=Ne),Z.error=we[PC]};if(Pe&&(c.formState.validating++,O()),ht(!1),O(),Pe){var at=function(){c.formState.validating--,O()};it.then(function(){b>$e||ht(!0)}).then(at,at)}},V=function(R){if(!d){var O=c.fields,j=c.fieldSubscribers,Z=c.formState,le=ot({},O),ee=function(fe){var ge=le[fe],we=NC(Z,ge),Ne=ge.lastFieldState;ge.lastFieldState=we;var be=j[fe];be&&VC(be,we,Ne,pW,Ne===void 0)};R?ee(R):Object.keys(le).forEach(ee)}},Y=function(){Object.keys(c.fields).forEach(function(R){c.fields[R].touched=!0})},J=function(){return!!(c.formState.error||nc(c.formState.errors))},H=function(){var R=c.fields,O=c.formState,j=c.lastFormState,Z=ot({},R),le=Object.keys(Z),ee=!1,ie=le.reduce(function(Pe,$e){var it=!Z[$e].isEqual(Nn(O.values,$e),Nn(O.initialValues||{},$e));return it&&(ee=!0,Pe[$e]=!0),Pe},{}),fe=le.reduce(function(Pe,$e){var it=O.lastSubmittedValues||{};return Z[$e].isEqual(Nn(O.values,$e),Nn(it,$e))||(Pe[$e]=!0),Pe},{});O.pristine=!ee,O.dirtySinceLastSubmit=!!(O.lastSubmittedValues&&Object.values(fe).some(function(Pe){return Pe})),O.modifiedSinceLastSubmit=!!(O.lastSubmittedValues&&Object.keys(Z).some(function(Pe){return Z[Pe].modifiedSinceLastSubmit})),O.valid=!O.error&&!O.submitError&&!nc(O.errors)&&!(O.submitErrors&&nc(O.submitErrors));var ge=_W(O),we=le.reduce(function(Pe,$e){return Pe.modified[$e]=Z[$e].modified,Pe.touched[$e]=Z[$e].touched,Pe.visited[$e]=Z[$e].visited,Pe},{modified:{},touched:{},visited:{}}),Ne=we.modified,be=we.touched,Ye=we.visited;return ge.dirtyFields=j&&So(j.dirtyFields,ie)?j.dirtyFields:ie,ge.dirtyFieldsSinceLastSubmit=j&&So(j.dirtyFieldsSinceLastSubmit,fe)?j.dirtyFieldsSinceLastSubmit:fe,ge.modified=j&&So(j.modified,Ne)?j.modified:Ne,ge.touched=j&&So(j.touched,be)?j.touched:be,ge.visited=j&&So(j.visited,Ye)?j.visited:Ye,j&&So(j,ge)?j:ge},D=function(){return t&&!0&&t(H(),Object.keys(c.fields).reduce(function(R,O){return R[O]=c.fields[O],R},{}))},T=!1,W=!1,B=function K(){if(T)W=!0;else{if(T=!0,D(),!d&&!(h&&g)){var R=c.lastFormState,O=H();O!==R&&(c.lastFormState=O,VC(c.subscribers,O,R,DC))}T=!1,W&&(W=!1,K())}},G=function(){return Object.keys(c.fields).some(function(R){return c.fields[R].beforeSubmit&&c.fields[R].beforeSubmit()===!1})},te=function(){return Object.keys(c.fields).forEach(function(R){return c.fields[R].afterSubmit&&c.fields[R].afterSubmit()})},re=function(){return Object.keys(c.fields).forEach(function(R){return c.fields[R].modifiedSinceLastSubmit=!1})};N(void 0,function(){B()});var ae={batch:function(R){d++,R(),d--,V(),B()},blur:function(R){var O=c.fields,j=c.formState,Z=O[R];Z&&(delete j.active,O[R]=ot({},Z,{active:!1,touched:!0}),l?N(R,function(){V(),B()}):(V(),B()))},change:function(R,O){var j=c.fields,Z=c.formState;if(Nn(Z.values,R)!==O){_(c,R,function(){return O});var le=j[R];le&&(j[R]=ot({},le,{modified:!0,modifiedSinceLastSubmit:!!Z.lastSubmittedValues})),l?(V(),B()):N(R,function(){V(),B()})}},get destroyOnUnregister(){return!!n},set destroyOnUnregister(K){n=K},focus:function(R){var O=c.fields[R];O&&!O.active&&(c.formState.active=R,O.active=!0,O.visited=!0,V(),B())},mutators:C,getFieldState:function(R){var O=c.fields[R];return O&&O.lastFieldState},getRegisteredFields:function(){return Object.keys(c.fields)},getState:function(){return H()},initialize:function(R){var O=c.fields,j=c.formState,Z=ot({},O),le=typeof R=="function"?R(j.values):R;r||(j.values=le);var ee=r?Object.keys(Z).reduce(function(ie,fe){var ge=Z[fe],we=ge.isEqual(Nn(j.values,fe),Nn(j.initialValues||{},fe));return we||(ie[fe]=Nn(j.values,fe)),ie},{}):{};j.initialValues=le,j.values=le,Object.keys(ee).forEach(function(ie){j.values=Di(j.values,ie,ee[ie])||{}}),N(void 0,function(){V(),B()})},isValidationPaused:function(){return h},pauseValidation:function(R){R===void 0&&(R=!0),h=!0,g=R},registerField:function(R,O,j,Z){j===void 0&&(j={}),c.fieldSubscribers[R]||(c.fieldSubscribers[R]={index:0,entries:{}});var le=c.fieldSubscribers[R].index++;c.fieldSubscribers[R].entries[le]={subscriber:FC(O),subscription:j,notified:!1};var ee=c.fields[R]||{active:!1,afterSubmit:Z&&Z.afterSubmit,beforeSubmit:Z&&Z.beforeSubmit,data:Z&&Z.data||{},isEqual:Z&&Z.isEqual||vW,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,name:R,touched:!1,valid:!0,validateFields:Z&&Z.validateFields,validators:{},validating:!1,visited:!1};ee.blur=ee.blur||function(){return ae.blur(R)},ee.change=ee.change||function(Ne){return ae.change(R,Ne)},ee.focus=ee.focus||function(){return ae.focus(R)},c.fields[R]=ee;var ie=!1,fe=Z&&Z.silent,ge=function(){fe&&c.fields[R]?V(R):(B(),V())};if(Z){ie=!!(Z.getValidator&&Z.getValidator()),Z.getValidator&&(c.fields[R].validators[le]=Z.getValidator);var we=Nn(c.formState.values,R)===void 0;Z.initialValue!==void 0&&(we||Nn(c.formState.values,R)===Nn(c.formState.initialValues,R))&&(c.formState.initialValues=Di(c.formState.initialValues||{},R,Z.initialValue),c.formState.values=Di(c.formState.values,R,Z.initialValue),N(void 0,ge)),Z.defaultValue!==void 0&&Z.initialValue===void 0&&Nn(c.formState.initialValues,R)===void 0&&we&&(c.formState.values=Di(c.formState.values,R,Z.defaultValue))}return ie?N(void 0,ge):ge(),function(){var Ne=!1;c.fields[R]&&(Ne=!!(c.fields[R].validators[le]&&c.fields[R].validators[le]()),delete c.fields[R].validators[le]);var be=!!c.fieldSubscribers[R];be&&delete c.fieldSubscribers[R].entries[le];var Ye=be&&!Object.keys(c.fieldSubscribers[R].entries).length;Ye&&(delete c.fieldSubscribers[R],delete c.fields[R],Ne&&(c.formState.errors=Di(c.formState.errors,R,void 0)||{}),n&&(c.formState.values=Di(c.formState.values,R,void 0,!0)||{})),fe||(Ne?N(void 0,function(){B(),V()}):Ye&&B())}},reset:function(R){R===void 0&&(R=c.formState.initialValues),c.formState.submitting&&(c.formState.resetWhileSubmitting=!0),c.formState.submitFailed=!1,c.formState.submitSucceeded=!1,delete c.formState.submitError,delete c.formState.submitErrors,delete c.formState.lastSubmittedValues,ae.initialize(R||{})},resetFieldState:function(R){c.fields[R]=ot({},c.fields[R],{active:!1,lastFieldState:void 0,modified:!1,touched:!1,valid:!0,validating:!1,visited:!1}),N(void 0,function(){V(),B()})},restart:function(R){R===void 0&&(R=c.formState.initialValues),ae.batch(function(){for(var O in c.fields)ae.resetFieldState(O),c.fields[O]=ot({},c.fields[O],{active:!1,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,touched:!1,valid:!0,validating:!1,visited:!1});ae.reset(R)})},resumeValidation:function(){h=!1,g=!1,p&&N(void 0,function(){V(),B()}),p=!1},setConfig:function(R,O){switch(R){case"debug":t=O;break;case"destroyOnUnregister":n=O;break;case"initialValues":ae.initialize(O);break;case"keepDirtyOnReinitialize":r=O;break;case"mutators":o=O,O?(Object.keys(C).forEach(function(j){j in O||delete C[j]}),Object.keys(O).forEach(function(j){C[j]=x(j)})):Object.keys(C).forEach(function(j){delete C[j]});break;case"onSubmit":s=O;break;case"validate":a=O,N(void 0,function(){V(),B()});break;case"validateOnBlur":l=O;break;default:throw new Error("Unrecognised option "+R)}},submit:function(){var R=c.formState;if(!R.submitting){if(delete R.submitErrors,delete R.submitError,R.lastSubmittedValues=ot({},R.values),J()){Y(),re(),c.formState.submitFailed=!0,B(),V();return}var O=Object.keys(k);if(O.length){Promise.all(O.map(function(fe){return k[Number(fe)]})).then(ae.submit,console.error);return}var j=G();if(!j){var Z,le=!1,ee=function(ge){R.submitting=!1;var we=R.resetWhileSubmitting;return we&&(R.resetWhileSubmitting=!1),ge&&nc(ge)?(R.submitFailed=!0,R.submitSucceeded=!1,R.submitErrors=ge,R.submitError=ge[PC],Y()):(we||(R.submitFailed=!1,R.submitSucceeded=!0),te()),B(),V(),le=!0,Z&&Z(ge),ge};R.submitting=!0,R.submitFailed=!1,R.submitSucceeded=!1,R.lastSubmittedValues=ot({},R.values),re();var ie=s(R.values,ae,ee);if(!le){if(ie&&Wv(ie))return B(),V(),ie.then(ee,function(fe){throw ee(),fe});if(s.length>=3)return B(),V(),new Promise(function(fe){Z=fe});ee(ie)}}}},subscribe:function(R,O){if(!R)throw new Error("No callback given.");if(!O)throw new Error("No subscription provided. What values do you want to listen to?");var j=FC(R),Z=c.subscribers,le=Z.index++;Z.entries[le]={subscriber:j,subscription:O,notified:!1};var ee=H();return oL(j,O,ee,ee,DC,!0),function(){delete Z.entries[le]}}};return ae}var bW=["render","children","component"];function sL(e,t,n){var r=e.render,i=e.children,o=e.component,s=Cf(e,bW);if(o)return v.createElement(o,Object.assign(t,s,{children:i,render:r}));if(r)return r(i===void 0?Object.assign(t,s):Object.assign(t,s,{children:i}));if(typeof i!="function")throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+n);return i(Object.assign(t,s))}function Rs(e,t,n){n===void 0&&(n=function(o,s){return o===s});var r=Q.useRef(e);Q.useEffect(function(){n(e,r.current)||(t(),r.current=e)})}function SW(e){var t=Q.useRef();return t.current||(t.current=e()),t.current}var UC=function(t,n){if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var r=Object.keys(t),i=Object.keys(n);if(r.length!==i.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(n),s=0;s<r.length;s++){var a=r[s];if(!o(a)||t[a]!==n[a])return!1}return!0},wW=function(t){return!!(t&&typeof t.stopPropagation=="function")},aL=v.createContext();function lL(e){var t=Q.useRef(e);return Q.useEffect(function(){t.current=e}),t}var EW="6.5.8",cL=function(t,n,r){r.forEach(function(i){Object.defineProperty(t,i,{get:function(){return n[i]},enumerable:!0})})},CW=function(t,n){return cL(t,n,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},xW=function(t,n){return cL(t,n,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"])},kW=["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"],IW={"final-form":mW,"react-final-form":EW},RW=iL.reduce(function(e,t){return e[t]=!0,e},{});function MW(e){var t=e.debug,n=e.decorators,r=n===void 0?[]:n,i=e.destroyOnUnregister,o=e.form,s=e.initialValues,a=e.initialValuesEqual,l=e.keepDirtyOnReinitialize,c=e.mutators,d=e.onSubmit,h=e.subscription,p=h===void 0?RW:h,g=e.validate,b=e.validateOnBlur,k=Cf(e,kW),y={debug:t,destroyOnUnregister:i,initialValues:s,keepDirtyOnReinitialize:l,mutators:c,onSubmit:d,validate:g,validateOnBlur:b},_=SW(function(){var N=o||yW(y);return N.pauseValidation(),N}),w=v.useState(function(){var N={};return _.subscribe(function(V){N=V},p)(),N}),x=w[0],C=w[1],F=lL(x);v.useEffect(function(){_.isValidationPaused()&&_.resumeValidation();var N=[_.subscribe(function(V){UC(V,F.current)||C(V)},p)].concat(r?r.map(function(V){return V(_)}):[]);return function(){_.pauseValidation(),N.reverse().forEach(function(V){return V()})}},r),Rs(t,function(){_.setConfig("debug",t)}),Rs(i,function(){_.destroyOnUnregister=!!i}),Rs(l,function(){_.setConfig("keepDirtyOnReinitialize",l)}),Rs(s,function(){_.setConfig("initialValues",s)},a||UC),Rs(c,function(){_.setConfig("mutators",c)}),Rs(d,function(){_.setConfig("onSubmit",d)}),Rs(g,function(){_.setConfig("validate",g)}),Rs(b,function(){_.setConfig("validateOnBlur",b)});var M=function(V){return V&&(typeof V.preventDefault=="function"&&V.preventDefault(),typeof V.stopPropagation=="function"&&V.stopPropagation()),_.submit()},L={form:ot({},_,{reset:function(V){wW(V)?_.reset():_.reset(V)}}),handleSubmit:M};return CW(L,x),v.createElement(aL.Provider,{value:_},sL(ot({},k,{__versions:IW}),L,"ReactFinalForm"))}function TW(e){var t=v.useContext(aL);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}var LW=typeof window<"u"&&window.navigator&&window.navigator.product&&window.navigator.product==="ReactNative",AW=function(t){var n=[];if(t)for(var r=0;r<t.length;r++){var i=t[r];i.selected&&n.push(i.value)}return n},OW=function(t,n,r,i){if(!i&&t.nativeEvent&&t.nativeEvent.text!==void 0||i&&t.nativeEvent)return t.nativeEvent.text;var o=t,s=o.target,a=s.type,l=s.value,c=s.checked;switch(a){case"checkbox":if(r!==void 0){if(c)return Array.isArray(n)?n.concat(r):[r];if(!Array.isArray(n))return n;var d=n.indexOf(r);return d<0?n:n.slice(0,d).concat(n.slice(d+1))}else return!!c;case"select-multiple":return AW(t.target.options);default:return l}};function zv(e){var t=v.useRef(e);return v.useEffect(function(){t.current=e}),v.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current.apply(null,r)},[])}var PW=nL.reduce(function(e,t){return e[t]=!0,e},{}),Bv=function(t,n){return t===void 0?"":t},NW=function(t,n){return t===""?void 0:t},DW=function(t,n){return t===n};function FW(e,t){t===void 0&&(t={});var n=t,r=n.afterSubmit,i=n.allowNull,o=n.component,s=n.data,a=n.defaultValue,l=n.format,c=l===void 0?Bv:l,d=n.formatOnBlur,h=n.initialValue,p=n.multiple,g=n.parse,b=g===void 0?NW:g,k=n.subscription,y=k===void 0?PW:k,_=n.type,w=n.validateFields,x=n.value,C=TW("useField"),F=lL(t),M=function(W,B){return C.registerField(e,W,y,{afterSubmit:r,beforeSubmit:function(){var te=F.current,re=te.beforeSubmit,ae=te.formatOnBlur,K=te.format,R=K===void 0?Bv:K;if(ae){var O=C.getFieldState(e),j=O.value,Z=R(j,e);Z!==j&&C.change(e,Z)}return re&&re()},data:s,defaultValue:a,getValidator:function(){return F.current.validate},initialValue:h,isEqual:function(te,re){return(F.current.isEqual||DW)(te,re)},silent:B,validateFields:w})},L=v.useRef(!0),N=v.useState(function(){var T={},W=C.destroyOnUnregister;return C.destroyOnUnregister=!1,M(function(B){T=B},!0)(),C.destroyOnUnregister=W,T}),V=N[0],Y=N[1];v.useEffect(function(){return M(function(T){L.current?L.current=!1:Y(T)},!1)},[e,s,a,h]);var J={};xW(J,V);var H={name:e,get value(){var T=V.value;return d?o==="input"&&(T=Bv(T)):T=c(T,e),T===null&&!i&&(T=""),_==="checkbox"||_==="radio"?x:o==="select"&&p?T||[]:T},get checked(){var T=V.value;if(_==="checkbox")return T=c(T,e),x===void 0?!!T:!!(Array.isArray(T)&&~T.indexOf(x));if(_==="radio")return c(T,e)===x},onBlur:zv(function(T){if(V.blur(),d){var W=C.getFieldState(V.name);V.change(c(W.value,V.name))}}),onChange:zv(function(T){var W=T&&T.target?OW(T,V.value,x,LW):T;V.change(b(W,e))}),onFocus:zv(function(T){return V.focus()})};p&&(H.multiple=p),_!==void 0&&(H.type=_);var D={input:H,meta:J};return D}var VW=["afterSubmit","allowNull","beforeSubmit","children","component","data","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"],UW=v.forwardRef(function(t,n){var r=t.afterSubmit,i=t.allowNull,o=t.beforeSubmit,s=t.children,a=t.component,l=t.data,c=t.defaultValue,d=t.format,h=t.formatOnBlur,p=t.initialValue,g=t.isEqual,b=t.multiple,k=t.name,y=t.parse,_=t.subscription,w=t.type,x=t.validate,C=t.validateFields,F=t.value,M=Cf(t,VW),L=FW(k,{afterSubmit:r,allowNull:i,beforeSubmit:o,children:s,component:a,data:l,defaultValue:c,format:d,formatOnBlur:h,initialValue:p,isEqual:g,multiple:b,parse:y,subscription:_,type:w,validate:x,validateFields:C,value:F});if(typeof s=="function")return s(ot({},L,M));if(typeof a=="string")return v.createElement(a,ot({},L.input,{children:s,ref:n},M));if(!k)throw new Error("prop name cannot be undefined in <Field> component");return sL(ot({children:s,component:a,ref:n},M),L,"Field("+k+")")});function fa(e){const t=Ft(Fo),n=v.useRef(null);return n.current||(n.current=e.bindTo(t)),n.current}function Po(e){const t=fa(e);v.useEffect(()=>(t.set(!0),()=>{t.set(!1)}),[])}const US=new At("promptVisible",!1),$W="prompt.action.focusNext",WW="prompt.action.cancel";De.registerCommandAndKeybindingRule({id:$W,weight:Fe.WorkbenchContrib+5,when:Lt.and(US),primary:U.Tab,handler:e=>{e.get(hs).focusNext()}});De.registerCommandAndKeybindingRule({id:WW,weight:Fe.WorkbenchContrib+5,when:Lt.and(US),primary:U.Escape,handler:e=>{e.get(hs).cancel()}});const zW="_modal-container_12a5p_1",BW="_tab-mask_12a5p_16",HW="_modal-title_12a5p_26",jW="_modal-close_12a5p_34",KW="_modal-buttons_12a5p_40",GW="_form-item_12a5p_47",YW="_bc-input_12a5p_60",El={"modal-container":"_modal-container_12a5p_1",modalContainer:zW,"tab-mask":"_tab-mask_12a5p_16",tabMask:BW,"modal-title":"_modal-title_12a5p_26",modalTitle:HW,"modal-close":"_modal-close_12a5p_34",modalClose:jW,"modal-buttons":"_modal-buttons_12a5p_40",modalButtons:KW,"form-item":"_form-item_12a5p_47",formItem:GW,"bc-input":"_bc-input_12a5p_60",bcInput:YW},qW="_hm-button_19t7o_2",QW="_primary_19t7o_12",XW="_icon_19t7o_28",ZW="_text_19t7o_51",JW="_danger_19t7o_60",e8="_large_19t7o_74",t8="_small_19t7o_79",vh={"hm-button":"_hm-button_19t7o_2",hmButton:qW,primary:QW,icon:XW,text:ZW,danger:JW,large:e8,small:t8},pr=e=>E("button",{onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,type:e.htmlType||"button",onClick:t=>{e.disabled||e.onClick&&e.onClick(t)},style:e.style,disabled:e.disabled,className:Te(vh.hmButton,vh[e.type||""],vh[e.size||""],{[vh.danger]:e.danger},e.className),children:e.children});function Tn(e){return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(e)}function n8(e,t){if(Tn(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uL(e){var t=n8(e,"string");return Tn(t)==="symbol"?t:String(t)}function Ee(e,t,n){return t=uL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(n),!0).forEach(function(r){Ee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$C(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cl(e){return!!(e.addonBefore||e.addonAfter)}function Hv(e){return!!(e.prefix||e.suffix||e.allowClear)}function wd(e,t,n,r){if(n){var i=t;if(t.type==="click"){var o=e.cloneNode(!0);i=Object.create(t,{target:{value:o},currentTarget:{value:o}}),o.value="",n(i);return}if(r!==void 0){i=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=r,n(i);return}n(i)}}function r8(e,t){if(e){e.focus(t);var n=t||{},r=n.cursor;if(r){var i=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(i,i);break;default:e.setSelectionRange(0,i)}}}}function pb(e){return typeof e>"u"||e===null?"":String(e)}var dL=function(t){var n,r,i=t.inputElement,o=t.prefixCls,s=t.prefix,a=t.suffix,l=t.addonBefore,c=t.addonAfter,d=t.className,h=t.style,p=t.disabled,g=t.readOnly,b=t.focused,k=t.triggerFocus,y=t.allowClear,_=t.value,w=t.handleReset,x=t.hidden,C=t.classes,F=t.classNames,M=t.dataAttrs,L=t.styles,N=v.useRef(null),V=function(K){var R;(R=N.current)!==null&&R!==void 0&&R.contains(K.target)&&(k==null||k())},Y=function(){var K;if(!y)return null;var R=!p&&!g&&_,O="".concat(o,"-clear-icon"),j=Tn(y)==="object"&&y!==null&&y!==void 0&&y.clearIcon?y.clearIcon:"✖";return E("span",{onClick:w,onMouseDown:function(le){return le.preventDefault()},className:Te(O,(K={},Ee(K,"".concat(O,"-hidden"),!R),Ee(K,"".concat(O,"-has-suffix"),!!a),K)),role:"button",tabIndex:-1,children:j})},J=v.cloneElement(i,{value:_,hidden:x,className:Te((n=i.props)===null||n===void 0?void 0:n.className,!Hv(t)&&!Cl(t)&&d)||null,style:he(he({},(r=i.props)===null||r===void 0?void 0:r.style),!Hv(t)&&!Cl(t)?h:{})});if(Hv(t)){var H,D="".concat(o,"-affix-wrapper"),T=Te(D,(H={},Ee(H,"".concat(D,"-disabled"),p),Ee(H,"".concat(D,"-focused"),b),Ee(H,"".concat(D,"-readonly"),g),Ee(H,"".concat(D,"-input-with-clear-btn"),a&&y&&_),H),!Cl(t)&&d,C==null?void 0:C.affixWrapper),W=(a||y)&&ce("span",{className:Te("".concat(o,"-suffix"),F==null?void 0:F.suffix),style:L==null?void 0:L.suffix,children:[Y(),a]});J=ce("span",{className:T,style:Cl(t)?void 0:h,hidden:!Cl(t)&&x,onClick:V,...M==null?void 0:M.affixWrapper,ref:N,children:[s&&E("span",{className:Te("".concat(o,"-prefix"),F==null?void 0:F.prefix),style:L==null?void 0:L.prefix,children:s}),v.cloneElement(i,{value:_,hidden:null}),W]})}if(Cl(t)){var B="".concat(o,"-group"),G="".concat(B,"-addon"),te=Te("".concat(o,"-wrapper"),B,C==null?void 0:C.wrapper),re=Te("".concat(o,"-group-wrapper"),d,C==null?void 0:C.group);return E("span",{className:re,style:h,hidden:x,children:ce("span",{className:te,children:[l&&E("span",{className:G,children:l}),v.cloneElement(J,{hidden:null}),c&&E("span",{className:G,children:c})]})})}return J};function gb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i8(e){if(Array.isArray(e))return gb(e)}function fL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $S(e,t){if(e){if(typeof e=="string")return gb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gb(e,t)}}function o8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tr(e){return i8(e)||fL(e)||$S(e)||o8()}function hL(e){if(Array.isArray(e))return e}function s8(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function pL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _e(e,t){return hL(e)||s8(e,t)||$S(e,t)||pL()}function Un(e,t){if(e==null)return{};var n=Cf(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Co(e){var t=v.useRef();t.current=e;var n=v.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(o))},[]);return n}function go(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Cn=go()?v.useLayoutEffect:v.useEffect,WC=function(t,n){var r=v.useRef(!0);Cn(function(){if(!r.current)return t()},n),Cn(function(){return r.current=!1,function(){r.current=!0}},[])};function Ya(e){var t=v.useRef(!1),n=v.useState(e),r=_e(n,2),i=r[0],o=r[1];v.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function s(a,l){l&&t.current||o(a)}return[i,s]}function jv(e){return e!==void 0}function Lc(e,t){var n=t||{},r=n.defaultValue,i=n.value,o=n.onChange,s=n.postState,a=Ya(function(){return jv(i)?i:jv(r)?typeof r=="function"?r():r:typeof e=="function"?e():e}),l=_e(a,2),c=l[0],d=l[1],h=i!==void 0?i:c,p=s?s(h):h,g=Co(o),b=Ya([h]),k=_e(b,2),y=k[0],_=k[1];WC(function(){var x=y[0];c!==x&&g(c,x)},[y]),WC(function(){jv(i)||d(i)},[i]);var w=Co(function(x,C){d(x,C),_([h],C)});return[p,w]}function gL(e,t){var n=he({},e);return Array.isArray(t)&&t.forEach(function(r){delete n[r]}),n}var a8=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],l8=v.forwardRef(function(e,t){var n=e.autoComplete,r=e.onChange,i=e.onFocus,o=e.onBlur,s=e.onPressEnter,a=e.onKeyDown,l=e.prefixCls,c=l===void 0?"rc-input":l,d=e.disabled,h=e.htmlSize,p=e.className,g=e.maxLength,b=e.suffix,k=e.showCount,y=e.type,_=y===void 0?"text":y,w=e.classes,x=e.classNames,C=e.styles,F=Un(e,a8),M=Lc(e.defaultValue,{value:e.value}),L=_e(M,2),N=L[0],V=L[1],Y=v.useState(!1),J=_e(Y,2),H=J[0],D=J[1],T=v.useRef(null),W=function(j){T.current&&r8(T.current,j)};v.useImperativeHandle(t,function(){return{focus:W,blur:function(){var j;(j=T.current)===null||j===void 0||j.blur()},setSelectionRange:function(j,Z,le){var ee;(ee=T.current)===null||ee===void 0||ee.setSelectionRange(j,Z,le)},select:function(){var j;(j=T.current)===null||j===void 0||j.select()},input:T.current}}),v.useEffect(function(){D(function(O){return O&&d?!1:O})},[d]);var B=function(j){e.value===void 0&&V(j.target.value),T.current&&wd(T.current,j,r)},G=function(j){s&&j.key==="Enter"&&s(j),a==null||a(j)},te=function(j){D(!0),i==null||i(j)},re=function(j){D(!1),o==null||o(j)},ae=function(j){V(""),W(),T.current&&wd(T.current,j,r)},K=function(){var j=gL(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]);return E("input",{autoComplete:n,...j,onChange:B,onFocus:te,onBlur:re,onKeyDown:G,className:Te(c,Ee({},"".concat(c,"-disabled"),d),x==null?void 0:x.input),style:C==null?void 0:C.input,ref:T,size:h,type:_})},R=function(){var j=Number(g)>0;if(b||k){var Z=pb(N),le=tr(Z).length,ee=Tn(k)==="object"?k.formatter({value:Z,count:le,maxLength:g}):"".concat(le).concat(j?" / ".concat(g):"");return ce(tm,{children:[!!k&&E("span",{className:Te("".concat(c,"-show-count-suffix"),Ee({},"".concat(c,"-show-count-has-suffix"),!!b),x==null?void 0:x.count),style:he({},C==null?void 0:C.count),children:ee}),b]})}return null};return E(dL,{...F,prefixCls:c,className:p,inputElement:K(),handleReset:ae,value:pb(N),focused:H,triggerFocus:W,suffix:R(),disabled:d,classes:w,classNames:x,styles:C})});const ta=v.forwardRef((e,t)=>{const{id:n,type:r,onChange:i,prefix:o,placeholder:s,value:a,title:l,disabled:c,onFocus:d,onBlur:h,allowClear:p,size:g,...b}=e;return E(l8,{prefixCls:"bc-input",ref:t,id:n,type:r,onChange:k=>i==null?void 0:i(k.target.value),prefix:o,placeholder:s,value:a,title:l,disabled:c,onFocus:d,onBlur:h,className:Te(e.className,e!=null&&e.size?`bc-input-${g}`:void 0,e.disabled?"bc-input-disabled":void 0),allowClear:p?{clearIcon:E(Ef,{size:14})}:void 0,...b})});var mb={},c8=function(t){};function u8(e,t){}function d8(e,t){}function f8(){mb={}}function mL(e,t,n){!t&&!mb[n]&&(e(!1,n),mb[n]=!0)}function Zc(e,t){mL(u8,e,t)}function h8(e,t){mL(d8,e,t)}Zc.preMessage=c8;Zc.resetWarned=f8;Zc.noteOnce=h8;var vL={exports:{}},on={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wr=typeof Symbol=="function"&&Symbol.for,WS=wr?Symbol.for("react.element"):60103,zS=wr?Symbol.for("react.portal"):60106,nm=wr?Symbol.for("react.fragment"):60107,rm=wr?Symbol.for("react.strict_mode"):60108,im=wr?Symbol.for("react.profiler"):60114,om=wr?Symbol.for("react.provider"):60109,sm=wr?Symbol.for("react.context"):60110,BS=wr?Symbol.for("react.async_mode"):60111,am=wr?Symbol.for("react.concurrent_mode"):60111,lm=wr?Symbol.for("react.forward_ref"):60112,cm=wr?Symbol.for("react.suspense"):60113,p8=wr?Symbol.for("react.suspense_list"):60120,um=wr?Symbol.for("react.memo"):60115,dm=wr?Symbol.for("react.lazy"):60116,g8=wr?Symbol.for("react.block"):60121,m8=wr?Symbol.for("react.fundamental"):60117,v8=wr?Symbol.for("react.responder"):60118,_8=wr?Symbol.for("react.scope"):60119;function Ti(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case WS:switch(e=e.type,e){case BS:case am:case nm:case im:case rm:case cm:return e;default:switch(e=e&&e.$$typeof,e){case sm:case lm:case dm:case um:case om:return e;default:return t}}case zS:return t}}}function _L(e){return Ti(e)===am}on.AsyncMode=BS;on.ConcurrentMode=am;on.ContextConsumer=sm;on.ContextProvider=om;on.Element=WS;on.ForwardRef=lm;on.Fragment=nm;on.Lazy=dm;on.Memo=um;on.Portal=zS;on.Profiler=im;on.StrictMode=rm;on.Suspense=cm;on.isAsyncMode=function(e){return _L(e)||Ti(e)===BS};on.isConcurrentMode=_L;on.isContextConsumer=function(e){return Ti(e)===sm};on.isContextProvider=function(e){return Ti(e)===om};on.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===WS};on.isForwardRef=function(e){return Ti(e)===lm};on.isFragment=function(e){return Ti(e)===nm};on.isLazy=function(e){return Ti(e)===dm};on.isMemo=function(e){return Ti(e)===um};on.isPortal=function(e){return Ti(e)===zS};on.isProfiler=function(e){return Ti(e)===im};on.isStrictMode=function(e){return Ti(e)===rm};on.isSuspense=function(e){return Ti(e)===cm};on.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===nm||e===am||e===im||e===rm||e===cm||e===p8||typeof e=="object"&&e!==null&&(e.$$typeof===dm||e.$$typeof===um||e.$$typeof===om||e.$$typeof===sm||e.$$typeof===lm||e.$$typeof===m8||e.$$typeof===v8||e.$$typeof===_8||e.$$typeof===g8)};on.typeOf=Ti;vL.exports=on;var yL=vL.exports;function bL(e,t,n){var r=v.useRef({});return(!("value"in r.current)||n(r.current.condition,t))&&(r.current.value=e(),r.current.condition=t),r.current.value}function HS(e,t){typeof e=="function"?e(t):Tn(e)==="object"&&e&&"current"in e&&(e.current=t)}function Jc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(function(i){return i});return r.length<=1?r[0]:function(i){t.forEach(function(o){HS(o,i)})}}function jS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bL(function(){return Jc.apply(void 0,t)},t,function(r,i){return r.length===i.length&&r.every(function(o,s){return o===i[s]})})}function xf(e){var t,n,r=yL.isMemo(e)?e.type.type:e.type;return!(typeof r=="function"&&!((t=r.prototype)!==null&&t!==void 0&&t.render)||typeof e=="function"&&!((n=e.prototype)!==null&&n!==void 0&&n.render))}var SL=v.createContext(null),zC=[];function y8(e,t){var n=v.useState(function(){if(!go())return null;var b=document.createElement("div");return b}),r=_e(n,1),i=r[0],o=v.useRef(!1),s=v.useContext(SL),a=v.useState(zC),l=_e(a,2),c=l[0],d=l[1],h=s||(o.current?void 0:function(b){d(function(k){var y=[b].concat(tr(k));return y})});function p(){i.parentElement||document.body.appendChild(i),o.current=!0}function g(){var b;(b=i.parentElement)===null||b===void 0||b.removeChild(i),o.current=!1}return Cn(function(){return e?s?s(p):p():g(),g},[e]),Cn(function(){c.length&&(c.forEach(function(b){return b()}),d(zC))},[c]),[i,h]}function Ed(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var BC="data-rc-order",b8="rc-util-key",vb=new Map;function wL(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):b8}function fm(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function S8(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function EL(e){return Array.from((vb.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function CL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!go())return null;var n=t.csp,r=t.prepend,i=document.createElement("style");i.setAttribute(BC,S8(r)),n!=null&&n.nonce&&(i.nonce=n==null?void 0:n.nonce),i.innerHTML=e;var o=fm(t),s=o.firstChild;if(r){if(r==="queue"){var a=EL(o).filter(function(l){return["prepend","prependQueue"].includes(l.getAttribute(BC))});if(a.length)return o.insertBefore(i,a[a.length-1].nextSibling),i}o.insertBefore(i,s)}else o.appendChild(i);return i}function xL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=fm(t);return EL(n).find(function(r){return r.getAttribute(wL(t))===e})}function HC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=xL(e,t);if(n){var r=fm(t);r.removeChild(n)}}function w8(e,t){var n=vb.get(e);if(!n||!Ed(document,n)){var r=CL("",t),i=r.parentNode;vb.set(e,i),e.removeChild(r)}}function kL(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=fm(n);w8(r,n);var i=xL(t,n);if(i){var o,s;if((o=n.csp)!==null&&o!==void 0&&o.nonce&&i.nonce!==((s=n.csp)===null||s===void 0?void 0:s.nonce)){var a;i.nonce=(a=n.csp)===null||a===void 0?void 0:a.nonce}return i.innerHTML!==e&&(i.innerHTML=e),i}var l=CL(e,n);return l.setAttribute(wL(n),t),l}var Kv;function E8(e){if(typeof document>"u")return 0;if(e||Kv===void 0){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var i=t.offsetWidth;n.style.overflow="scroll";var o=t.offsetWidth;i===o&&(o=n.clientWidth),document.body.removeChild(n),Kv=i-o}return Kv}function C8(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var x8="rc-util-locker-".concat(Date.now()),jC=0;function k8(e){var t=!!e,n=v.useState(function(){return jC+=1,"".concat(x8,"_").concat(jC)}),r=_e(n,1),i=r[0];Cn(function(){if(t){var o=E8(),s=C8();kL(`
html body {
  overflow-y: hidden;
  `.concat(s?"width: calc(100% - ".concat(o,"px);"):"",`
}`),i)}else HC(i);return function(){HC(i)}},[t,i])}var KC=!1;function I8(e){return typeof e=="boolean"&&(KC=e),KC}var GC=function(t){return t===!1?!1:!go()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},IL=v.forwardRef(function(e,t){var n=e.open,r=e.autoLock,i=e.getContainer;e.debug;var o=e.autoDestroy,s=o===void 0?!0:o,a=e.children,l=v.useState(n),c=_e(l,2),d=c[0],h=c[1],p=d||n;v.useEffect(function(){(s||n)&&h(n)},[n,s]);var g=v.useState(function(){return GC(i)}),b=_e(g,2),k=b[0],y=b[1];v.useEffect(function(){var J=GC(i);y(J??null)});var _=y8(p&&!k),w=_e(_,2),x=w[0],C=w[1],F=k??x;k8(r&&n&&go()&&(F===x||F===document.body));var M=null;if(a&&xf(a)&&t){var L=a;M=L.ref}var N=jS(M,t);if(!p||!go()||k===void 0)return null;var V=F===!1||I8(),Y=a;return t&&(Y=v.cloneElement(a,{ref:N})),v.createElement(SL.Provider,{value:C},V?Y:NS.createPortal(Y,F))});function dg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return Q.Children.forEach(e,function(r){r==null&&!t.keepEmpty||(Array.isArray(r)?n=n.concat(dg(r)):yL.isFragment(r)&&r.props?n=n.concat(dg(r.props.children,t)):n.push(r))}),n}function fg(e){return e instanceof HTMLElement||e instanceof SVGElement}function Qd(e){return fg(e)?e:e instanceof Q.Component?as.findDOMNode(e):null}var RL=function(){if(typeof Map<"u")return Map;function e(t,n){var r=-1;return t.some(function(i,o){return i[0]===n?(r=o,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},t.prototype.set=function(n,r){var i=e(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,i=e(r,n);~i&&r.splice(i,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var s=o[i];n.call(r,s[1],s[0])}},t}()}(),_b=typeof window<"u"&&typeof document<"u"&&window.document===document,hg=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),R8=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(hg):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),M8=2;function T8(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&a()}function s(){R8(o)}function a(){var l=Date.now();if(n){if(l-i<M8)return;r=!0}else n=!0,r=!1,setTimeout(s,t);i=l}return a}var L8=20,A8=["top","right","bottom","left","width","height","size","weight"],O8=typeof MutationObserver<"u",P8=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=T8(this.refresh.bind(this),L8)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!_b||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),O8?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!_b||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,i=A8.some(function(o){return!!~r.indexOf(o)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),ML=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},Ac=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||hg},TL=hm(0,0,0,0);function pg(e){return parseFloat(e)||0}function YC(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,i){var o=e["border-"+i+"-width"];return r+pg(o)},0)}function N8(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var o=i[r],s=e["padding-"+o];n[o]=pg(s)}return n}function D8(e){var t=e.getBBox();return hm(0,0,t.width,t.height)}function F8(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return TL;var r=Ac(e).getComputedStyle(e),i=N8(r),o=i.left+i.right,s=i.top+i.bottom,a=pg(r.width),l=pg(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+o)!==t&&(a-=YC(r,"left","right")+o),Math.round(l+s)!==n&&(l-=YC(r,"top","bottom")+s)),!U8(e)){var c=Math.round(a+o)-t,d=Math.round(l+s)-n;Math.abs(c)!==1&&(a-=c),Math.abs(d)!==1&&(l-=d)}return hm(i.left,i.top,a,l)}var V8=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Ac(e).SVGGraphicsElement}:function(e){return e instanceof Ac(e).SVGElement&&typeof e.getBBox=="function"}}();function U8(e){return e===Ac(e).document.documentElement}function $8(e){return _b?V8(e)?D8(e):F8(e):TL}function W8(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return ML(s,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),s}function hm(e,t,n,r){return{x:e,y:t,width:n,height:r}}var z8=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=hm(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=$8(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),B8=function(){function e(t,n){var r=W8(n);ML(this,{target:t,contentRect:r})}return e}(),H8=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new RL,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Ac(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new z8(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Ac(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new B8(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),LL=typeof WeakMap<"u"?new WeakMap:new RL,AL=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=P8.getInstance(),r=new H8(t,n,this);LL.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){AL.prototype[e]=function(){var t;return(t=LL.get(this))[e].apply(t,arguments)}});var OL=function(){return typeof hg.ResizeObserver<"u"?hg.ResizeObserver:AL}(),Us=new Map;function j8(e){e.forEach(function(t){var n,r=t.target;(n=Us.get(r))===null||n===void 0||n.forEach(function(i){return i(r)})})}var PL=new OL(j8);function K8(e,t){Us.has(e)||(Us.set(e,new Set),PL.observe(e)),Us.get(e).add(t)}function G8(e,t){Us.has(e)&&(Us.get(e).delete(t),Us.get(e).size||(PL.unobserve(e),Us.delete(e)))}function eu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uL(r.key),r)}}function tu(e,t,n){return t&&qC(e.prototype,t),n&&qC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yb(e,t){return yb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yb(e,t)}function kf(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yb(e,t)}function gg(e){return gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gg(e)}function Y8(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q8(e,t){if(t&&(Tn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ct(e)}function If(e){var t=Y8();return function(){var r=gg(e),i;if(t){var o=gg(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return q8(this,i)}}var Q8=function(e){kf(n,e);var t=If(n);function n(){return eu(this,n),t.apply(this,arguments)}return tu(n,[{key:"render",value:function(){return this.props.children}}]),n}(v.Component),bb=v.createContext(null);function X8(e){var t=e.children,n=e.onBatchResize,r=v.useRef(0),i=v.useRef([]),o=v.useContext(bb),s=v.useCallback(function(a,l,c){r.current+=1;var d=r.current;i.current.push({size:a,element:l,data:c}),Promise.resolve().then(function(){d===r.current&&(n==null||n(i.current),i.current=[])}),o==null||o(a,l,c)},[n,o]);return v.createElement(bb.Provider,{value:s},t)}function Z8(e,t){var n=e.children,r=e.disabled,i=v.useRef(null),o=v.useRef(null),s=v.useContext(bb),a=typeof n=="function",l=a?n(i):n,c=v.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!a&&v.isValidElement(l)&&xf(l),h=d?l.ref:null,p=v.useMemo(function(){return Jc(h,i)},[h,i]),g=function(){return Qd(i.current)||Qd(o.current)};v.useImperativeHandle(t,function(){return g()});var b=v.useRef(e);b.current=e;var k=v.useCallback(function(y){var _=b.current,w=_.onResize,x=_.data,C=y.getBoundingClientRect(),F=C.width,M=C.height,L=y.offsetWidth,N=y.offsetHeight,V=Math.floor(F),Y=Math.floor(M);if(c.current.width!==V||c.current.height!==Y||c.current.offsetWidth!==L||c.current.offsetHeight!==N){var J={width:V,height:Y,offsetWidth:L,offsetHeight:N};c.current=J;var H=L===Math.round(F)?F:L,D=N===Math.round(M)?M:N,T=he(he({},J),{},{offsetWidth:H,offsetHeight:D});s==null||s(T,y,x),w&&Promise.resolve().then(function(){w(T,y)})}},[]);return v.useEffect(function(){var y=g();return y&&!r&&K8(y,k),function(){return G8(y,k)}},[i.current,r]),v.createElement(Q8,{ref:o},d?v.cloneElement(l,{ref:p}):l)}var J8=v.forwardRef(Z8),ez="rc-observer-key";function tz(e,t){var n=e.children,r=typeof n=="function"?[n]:dg(n);return r.map(function(i,o){var s=(i==null?void 0:i.key)||"".concat(ez,"-").concat(o);return v.createElement(J8,ot({},e,{key:s,ref:o===0?t:void 0}),i)})}var ba=v.forwardRef(tz);ba.Collection=X8;function nz(){var e=he({},r2);return e.useId}var QC=0;function rz(e){var t=v.useState("ssr-id"),n=_e(t,2),r=n[0],i=n[1],o=nz(),s=o==null?void 0:o();return v.useEffect(function(){if(!o){var a=QC;QC+=1,i("rc_unique_".concat(a))}},[]),e||s||r}const KS=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var XC=v.createContext(null);function ZC(e){return e?Array.isArray(e)?e:[e]:[]}function iz(e,t,n,r){return v.useMemo(function(){var i=ZC(n??t),o=ZC(r??t),s=new Set(i),a=new Set(o);return e&&(s.has("hover")&&(s.delete("hover"),s.add("click")),a.has("hover")&&(a.delete("hover"),a.add("click"))),[s,a]},[e,t,n,r])}const GS=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,s=i.height;if(o||s)return!0}}return!1};function oz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function sz(e,t,n,r){for(var i=n.points,o=Object.keys(e),s=0;s<o.length;s+=1){var a,l=o[s];if(oz((a=e[l])===null||a===void 0?void 0:a.points,i,r))return"".concat(t,"-placement-").concat(l)}return""}function JC(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function Rf(e){return e.ownerDocument.defaultView}function Sb(e){for(var t=[],n=e==null?void 0:e.parentElement,r=["hidden","scroll","auto"];n;){var i=Rf(n).getComputedStyle(n),o=i.overflowX,s=i.overflowY;(r.includes(o)||r.includes(s))&&t.push(n),n=n.parentElement}return t}function mg(e){return Number.isNaN(e)?1:e}function az(e,t){var n=he({},e);return(t||[]).forEach(function(r){if(!(r instanceof HTMLBodyElement)){var i=Rf(r).getComputedStyle(r),o=i.position;if(o!=="static"){var s=r.getBoundingClientRect(),a=r.offsetHeight,l=r.clientHeight,c=r.offsetWidth,d=r.clientWidth,h=mg(Math.round(s.width/c*1e3)/1e3),p=mg(Math.round(s.height/a*1e3)/1e3),g=(c-d)*h,b=(a-l)*p,k=s.x+s.width-g,y=s.y+s.height-b;n.left=Math.max(n.left,s.x),n.top=Math.max(n.top,s.y),n.right=Math.min(n.right,k),n.bottom=Math.min(n.bottom,y)}}}),n}function ex(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n="".concat(t),r=n.match(/^(.*)\%$/);return r?e*(parseFloat(r[1])/100):parseFloat(n)}function tx(e,t){var n=t||[],r=_e(n,2),i=r[0],o=r[1];return[ex(e.width,i),ex(e.height,o)]}function nx(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function xl(e,t){var n=t[0],r=t[1],i,o;return n==="t"?o=e.y:n==="b"?o=e.y+e.height:o=e.y+e.height/2,r==="l"?i=e.x:r==="r"?i=e.x+e.width:i=e.x+e.width/2,{x:i,y:o}}function Ms(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map(function(r,i){return i===t?n[r]||"c":r}).join("")}function lz(e,t,n,r,i,o,s){var a=v.useState({ready:!1,offsetX:0,offsetY:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),l=_e(a,2),c=l[0],d=l[1],h=v.useRef(0),p=v.useMemo(function(){return t?Sb(t):[]},[t]),g=v.useRef({}),b=function(){g.current={}};e||b();var k=Co(function(){if(t&&n&&e){let An=function(Qt,hn){var lr=Y.x+Qt,On=Y.y+hn,vr=lr+R,Hr=On+K,ei=Math.max(lr,Z.left),ti=Math.max(On,Z.top),ni=Math.min(vr,Z.right),Xi=Math.min(Hr,Z.bottom);return Math.max(0,(ni-ei)*(Xi-ti))},jt=function(){vn=Y.y+wt,qt=vn+K,_n=Y.x+pt,Pt=_n+R};var tn=An,fn=jt,w=t,x=w.style.left,C=w.style.top,F=w.ownerDocument,M=Rf(w),L=he(he({},i[r]),o);w.style.left="0",w.style.top="0";var N;if(Array.isArray(n))N={x:n[0],y:n[1],width:0,height:0};else{var V=n.getBoundingClientRect();N={x:V.x,y:V.y,width:V.width,height:V.height}}var Y=w.getBoundingClientRect(),J=M.getComputedStyle(w),H=J.width,D=J.height,T=F.documentElement,W=T.clientWidth,B=T.clientHeight,G=T.scrollWidth,te=T.scrollHeight,re=T.scrollTop,ae=T.scrollLeft,K=Y.height,R=Y.width,O=N.height,j=N.width,Z=L.htmlRegion==="scroll"?{left:-ae,top:-re,right:G-ae,bottom:te-re}:{left:0,top:0,right:W,bottom:B};Z=az(Z,p),w.style.left=x,w.style.top=C;var le=mg(Math.round(R/parseFloat(H)*1e3)/1e3),ee=mg(Math.round(K/parseFloat(D)*1e3)/1e3);if(le===0||ee===0||fg(n)&&!GS(n))return;var ie=L.offset,fe=L.targetOffset,ge=tx(Y,ie),we=_e(ge,2),Ne=we[0],be=we[1],Ye=tx(N,fe),Pe=_e(Ye,2),$e=Pe[0],it=Pe[1];N.x-=$e,N.y-=it;var ht=L.points||[],at=_e(ht,2),Le=at[0],st=at[1],nt=nx(st),Xe=nx(Le),ze=xl(N,nt),rt=xl(Y,Xe),et=he({},L),pt=ze.x-rt.x+Ne,wt=ze.y-rt.y+be,Mt=An(pt,wt),yt=xl(N,["t","l"]),sn=xl(Y,["t","l"]),$n=xl(N,["b","r"]),qe=xl(Y,["b","r"]),Qe=L.overflow||{},bt=Qe.adjustX,Ht=Qe.adjustY,Ot=Qe.shiftX,mn=Qe.shiftY,Vt=function(hn){return typeof hn=="boolean"?hn:hn>=0},vn,qt,_n,Pt;jt();var zr=Vt(Ht),ar=Xe[0]===nt[0];if(zr&&Xe[0]==="t"&&(qt>Z.bottom||g.current.bt)){var qn=wt;ar?qn-=K-O:qn=yt.y-qe.y-be,An(pt,qn)>=Mt?(g.current.bt=!0,wt=qn,et.points=[Ms(Xe,0),Ms(nt,0)]):g.current.bt=!1}if(zr&&Xe[0]==="b"&&(vn<Z.top||g.current.tb)){var ye=wt;ar?ye+=K-O:ye=$n.y-sn.y-be,An(pt,ye)>=Mt?(g.current.tb=!0,wt=ye,et.points=[Ms(Xe,0),Ms(nt,0)]):g.current.tb=!1}var xe=Vt(bt),ve=Xe[1]===nt[1];if(xe&&Xe[1]==="l"&&(Pt>Z.right||g.current.rl)){var Ge=pt;ve?Ge-=R-j:Ge=yt.x-qe.x-Ne,An(Ge,wt)>=Mt?(g.current.rl=!0,pt=Ge,et.points=[Ms(Xe,1),Ms(nt,1)]):g.current.rl=!1}if(xe&&Xe[1]==="r"&&(_n<Z.left||g.current.lr)){var Je=pt;ve?Je+=R-j:Je=$n.x-sn.x-Ne,An(Je,wt)>=Mt?(g.current.lr=!0,pt=Je,et.points=[Ms(Xe,1),Ms(nt,1)]):g.current.lr=!1}jt();var dt=Ot===!0?0:Ot;typeof dt=="number"&&(_n<Z.left&&(pt-=_n-Z.left,N.x+j<Z.left+dt&&(pt+=N.x-Z.left+j-dt)),Pt>Z.right&&(pt-=Pt-Z.right,N.x>Z.right-dt&&(pt+=N.x-Z.right+dt)));var an=mn===!0?0:mn;typeof an=="number"&&(vn<Z.top&&(wt-=vn-Z.top,N.y+O<Z.top+an&&(wt+=N.y-Z.top+O-an)),qt>Z.bottom&&(wt-=qt-Z.bottom,N.y>Z.bottom-an&&(wt+=N.y-Z.bottom+an)));var yn=Y.x+pt,mr=yn+R,Ut=Y.y+wt,Nt=Ut+K,Br=N.x,Li=Br+j,Jr=N.y,Qn=Jr+O,Yt=Math.max(yn,Br),_i=Math.min(mr,Li),X=(Yt+_i)/2,oe=X-yn,Se=Math.max(Ut,Jr),Be=Math.min(Nt,Qn),Wt=(Se+Be)/2,vt=Wt-Ut;s==null||s(t,et),d({ready:!0,offsetX:pt/le,offsetY:wt/ee,arrowX:oe/le,arrowY:vt/ee,scaleX:le,scaleY:ee,align:et})}}),y=function(){h.current+=1;var x=h.current;Promise.resolve().then(function(){h.current===x&&k()})},_=function(){d(function(x){return he(he({},x),{},{ready:!1})})};return Cn(_,[r]),Cn(function(){e||_()},[e]),[c.ready,c.offsetX,c.offsetY,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,y]}function cz(e,t,n,r){Cn(function(){if(e&&t&&n){let h=function(){r()};var d=h,i=t,o=n,s=Sb(i),a=Sb(o),l=Rf(o),c=new Set([l].concat(tr(s),tr(a)));return c.forEach(function(p){p.addEventListener("scroll",h,{passive:!0})}),l.addEventListener("resize",h,{passive:!0}),r(),function(){c.forEach(function(p){p.removeEventListener("scroll",h),l.removeEventListener("resize",h)})}}},[e,t,n])}var uz=v.createContext({}),dz=function(e){kf(n,e);var t=If(n);function n(){return eu(this,n),t.apply(this,arguments)}return tu(n,[{key:"render",value:function(){return this.props.children}}]),n}(v.Component),Oa="none",_h="appear",yh="enter",bh="leave",rx="none",co="prepare",rc="start",ic="active",YS="end",NL="prepared";function ix(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}function fz(e,t){var n={animationend:ix("Animation","AnimationEnd"),transitionend:ix("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}var hz=fz(go(),typeof window<"u"?window:{}),DL={};if(go()){var pz=document.createElement("div");DL=pz.style}var Sh={};function FL(e){if(Sh[e])return Sh[e];var t=hz[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in DL)return Sh[e]=t[o],Sh[e]}return""}var VL=FL("animationend"),UL=FL("transitionend"),$L=!!(VL&&UL),ox=VL||"animationend",sx=UL||"transitionend";function ax(e,t){if(!e)return null;if(Tn(e)==="object"){var n=t.replace(/-\w/g,function(r){return r[1].toUpperCase()});return e[n]}return"".concat(e,"-").concat(t)}const gz=function(e){var t=v.useRef(),n=v.useRef(e);n.current=e;var r=v.useCallback(function(s){n.current(s)},[]);function i(s){s&&(s.removeEventListener(sx,r),s.removeEventListener(ox,r))}function o(s){t.current&&t.current!==s&&i(t.current),s&&s!==t.current&&(s.addEventListener(sx,r),s.addEventListener(ox,r),t.current=s)}return v.useEffect(function(){return function(){i(t.current)}},[]),[o,i]};var WL=go()?v.useLayoutEffect:v.useEffect,zL=function(t){return+setTimeout(t,16)},BL=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(zL=function(t){return window.requestAnimationFrame(t)},BL=function(t){return window.cancelAnimationFrame(t)});var lx=0,qS=new Map;function HL(e){qS.delete(e)}var Gn=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;lx+=1;var r=lx;function i(o){if(o===0)HL(r),t();else{var s=zL(function(){i(o-1)});qS.set(r,s)}}return i(n),r};Gn.cancel=function(e){var t=qS.get(e);return HL(t),BL(t)};const mz=function(){var e=v.useRef(null);function t(){Gn.cancel(e.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var o=Gn(function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)});e.current=o}return v.useEffect(function(){return function(){t()}},[]),[n,t]};var vz=[co,rc,ic,YS],_z=[co,NL],jL=!1,yz=!0;function KL(e){return e===ic||e===YS}const bz=function(e,t,n){var r=Ya(rx),i=_e(r,2),o=i[0],s=i[1],a=mz(),l=_e(a,2),c=l[0],d=l[1];function h(){s(co,!0)}var p=t?_z:vz;return WL(function(){if(o!==rx&&o!==YS){var g=p.indexOf(o),b=p[g+1],k=n(o);k===jL?s(b,!0):b&&c(function(y){function _(){y.isCanceled()||s(b,!0)}k===!0?_():Promise.resolve(k).then(_)})}},[e,o]),v.useEffect(function(){return function(){d()}},[]),[h,o]};function Sz(e,t,n,r){var i=r.motionEnter,o=i===void 0?!0:i,s=r.motionAppear,a=s===void 0?!0:s,l=r.motionLeave,c=l===void 0?!0:l,d=r.motionDeadline,h=r.motionLeaveImmediately,p=r.onAppearPrepare,g=r.onEnterPrepare,b=r.onLeavePrepare,k=r.onAppearStart,y=r.onEnterStart,_=r.onLeaveStart,w=r.onAppearActive,x=r.onEnterActive,C=r.onLeaveActive,F=r.onAppearEnd,M=r.onEnterEnd,L=r.onLeaveEnd,N=r.onVisibleChanged,V=Ya(),Y=_e(V,2),J=Y[0],H=Y[1],D=Ya(Oa),T=_e(D,2),W=T[0],B=T[1],G=Ya(null),te=_e(G,2),re=te[0],ae=te[1],K=v.useRef(!1),R=v.useRef(null);function O(){return n()}var j=v.useRef(!1);function Z(){B(Oa,!0),ae(null,!0)}function le(at){var Le=O();if(!(at&&!at.deadline&&at.target!==Le)){var st=j.current,nt;W===_h&&st?nt=F==null?void 0:F(Le,at):W===yh&&st?nt=M==null?void 0:M(Le,at):W===bh&&st&&(nt=L==null?void 0:L(Le,at)),W!==Oa&&st&&nt!==!1&&Z()}}var ee=gz(le),ie=_e(ee,1),fe=ie[0],ge=function(Le){var st,nt,Xe;switch(Le){case _h:return st={},Ee(st,co,p),Ee(st,rc,k),Ee(st,ic,w),st;case yh:return nt={},Ee(nt,co,g),Ee(nt,rc,y),Ee(nt,ic,x),nt;case bh:return Xe={},Ee(Xe,co,b),Ee(Xe,rc,_),Ee(Xe,ic,C),Xe;default:return{}}},we=v.useMemo(function(){return ge(W)},[W]),Ne=bz(W,!e,function(at){if(at===co){var Le=we[co];return Le?Le(O()):jL}if(Pe in we){var st;ae(((st=we[Pe])===null||st===void 0?void 0:st.call(we,O(),null))||null)}return Pe===ic&&(fe(O()),d>0&&(clearTimeout(R.current),R.current=setTimeout(function(){le({deadline:!0})},d))),Pe===NL&&Z(),yz}),be=_e(Ne,2),Ye=be[0],Pe=be[1],$e=KL(Pe);j.current=$e,WL(function(){H(t);var at=K.current;K.current=!0;var Le;!at&&t&&a&&(Le=_h),at&&t&&o&&(Le=yh),(at&&!t&&c||!at&&h&&!t&&c)&&(Le=bh);var st=ge(Le);Le&&(e||st[co])?(B(Le),Ye()):B(Oa)},[t]),v.useEffect(function(){(W===_h&&!a||W===yh&&!o||W===bh&&!c)&&B(Oa)},[a,o,c]),v.useEffect(function(){return function(){K.current=!1,clearTimeout(R.current)}},[]);var it=v.useRef(!1);v.useEffect(function(){J&&(it.current=!0),J!==void 0&&W===Oa&&((it.current||J)&&(N==null||N(J)),it.current=!0)},[J,W]);var ht=re;return we[co]&&Pe===rc&&(ht=he({transition:"none"},ht)),[W,Pe,ht,J??t]}function wz(e){var t=e;Tn(e)==="object"&&(t=e.transitionSupport);function n(i,o){return!!(i.motionName&&t&&o!==!1)}var r=v.forwardRef(function(i,o){var s=i.visible,a=s===void 0?!0:s,l=i.removeOnLeave,c=l===void 0?!0:l,d=i.forceRender,h=i.children,p=i.motionName,g=i.leavedClassName,b=i.eventProps,k=v.useContext(uz),y=k.motion,_=n(i,y),w=v.useRef(),x=v.useRef();function C(){try{return w.current instanceof HTMLElement?w.current:Qd(x.current)}catch{return null}}var F=Sz(_,a,C,i),M=_e(F,4),L=M[0],N=M[1],V=M[2],Y=M[3],J=v.useRef(Y);Y&&(J.current=!0);var H=v.useCallback(function(ae){w.current=ae,HS(o,ae)},[o]),D,T=he(he({},b),{},{visible:a});if(!h)D=null;else if(L===Oa)Y?D=h(he({},T),H):!c&&J.current&&g?D=h(he(he({},T),{},{className:g}),H):d||!c&&!g?D=h(he(he({},T),{},{style:{display:"none"}}),H):D=null;else{var W,B;N===co?B="prepare":KL(N)?B="active":N===rc&&(B="start");var G=ax(p,"".concat(L,"-").concat(B));D=h(he(he({},T),{},{className:Te(ax(p,L),(W={},Ee(W,G,G&&B),Ee(W,p,typeof p=="string"),W)),style:V}),H)}if(v.isValidElement(D)&&xf(D)){var te=D,re=te.ref;re||(D=v.cloneElement(D,{ref:H}))}return v.createElement(dz,{ref:x},D)});return r.displayName="CSSMotion",r}const nu=wz($L);var wb="add",Eb="keep",Cb="remove",Gv="removed";function Ez(e){var t;return e&&Tn(e)==="object"&&"key"in e?t=e:t={key:e},he(he({},t),{},{key:String(t.key)})}function xb(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(Ez)}function Cz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=t.length,o=xb(e),s=xb(t);o.forEach(function(c){for(var d=!1,h=r;h<i;h+=1){var p=s[h];if(p.key===c.key){r<h&&(n=n.concat(s.slice(r,h).map(function(g){return he(he({},g),{},{status:wb})})),r=h),n.push(he(he({},p),{},{status:Eb})),r+=1,d=!0;break}}d||n.push(he(he({},c),{},{status:Cb}))}),r<i&&(n=n.concat(s.slice(r).map(function(c){return he(he({},c),{},{status:wb})})));var a={};n.forEach(function(c){var d=c.key;a[d]=(a[d]||0)+1});var l=Object.keys(a).filter(function(c){return a[c]>1});return l.forEach(function(c){n=n.filter(function(d){var h=d.key,p=d.status;return h!==c||p!==Cb}),n.forEach(function(d){d.key===c&&(d.status=Eb)})}),n}var xz=["component","children","onVisibleChanged","onAllRemoved"],kz=["status"],Iz=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function Rz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nu,n=function(r){kf(o,r);var i=If(o);function o(){var s;eu(this,o);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return s=i.call.apply(i,[this].concat(l)),Ee(Ct(s),"state",{keyEntities:[]}),Ee(Ct(s),"removeKey",function(d){var h=s.state.keyEntities,p=h.map(function(g){return g.key!==d?g:he(he({},g),{},{status:Gv})});return s.setState({keyEntities:p}),p.filter(function(g){var b=g.status;return b!==Gv}).length}),s}return tu(o,[{key:"render",value:function(){var a=this,l=this.state.keyEntities,c=this.props,d=c.component,h=c.children,p=c.onVisibleChanged,g=c.onAllRemoved,b=Un(c,xz),k=d||v.Fragment,y={};return Iz.forEach(function(_){y[_]=b[_],delete b[_]}),delete b.keys,v.createElement(k,b,l.map(function(_){var w=_.status,x=Un(_,kz),C=w===wb||w===Eb;return v.createElement(t,ot({},y,{key:x.key,visible:C,eventProps:x,onVisibleChanged:function(M){if(p==null||p(M,{key:x.key}),!M){var L=a.removeKey(x.key);L===0&&g&&g()}}}),h)}))}}],[{key:"getDerivedStateFromProps",value:function(a,l){var c=a.keys,d=l.keyEntities,h=xb(c),p=Cz(d,h);return{keyEntities:p.filter(function(g){var b=d.find(function(k){var y=k.key;return g.key===y});return!(b&&b.status===Gv&&g.status===Cb)})}}}]),o}(v.Component);return Ee(n,"defaultProps",{component:"div"}),n}Rz($L);function Mz(e){var t=e.prefixCls,n=e.align,r=e.arrow,i=r||{},o=i.x,s=o===void 0?0:o,a=i.y,l=a===void 0?0:a,c=i.className,d=v.useRef();if(!n||!n.points)return null;var h={position:"absolute"};if(n.autoArrow!==!1){var p=n.points[0],g=n.points[1],b=p[0],k=p[1],y=g[0],_=g[1];b===y||!["t","b"].includes(b)?h.top=l:b==="t"?h.top=0:h.bottom=0,k===_||!["l","r"].includes(k)?h.left=s:k==="l"?h.left=0:h.right=0}return v.createElement("div",{ref:d,className:Te("".concat(t,"-arrow"),c),style:h})}function Tz(e){var t=e.prefixCls,n=e.open,r=e.zIndex,i=e.mask,o=e.motion;return i?v.createElement(nu,ot({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),function(s){var a=s.className;return v.createElement("div",{style:{zIndex:r},className:Te("".concat(t,"-mask"),a)})}):null}var Lz=v.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Az=v.forwardRef(function(e,t){var n=e.popup,r=e.className,i=e.prefixCls,o=e.style,s=e.target,a=e.onVisibleChanged,l=e.open,c=e.keepDom,d=e.onClick,h=e.mask,p=e.arrow,g=e.align,b=e.motion,k=e.maskMotion,y=e.forceRender,_=e.getPopupContainer,w=e.autoDestroy,x=e.portal,C=e.zIndex,F=e.onMouseEnter,M=e.onMouseLeave,L=e.ready,N=e.offsetX,V=e.offsetY,Y=e.onAlign,J=e.onPrepare,H=e.stretch,D=e.targetWidth,T=e.targetHeight,W=typeof n=="function"?n():n,B=l||c,G=(_==null?void 0:_.length)>0,te=v.useState(!_||!G),re=_e(te,2),ae=re[0],K=re[1];if(Cn(function(){!ae&&G&&s&&K(!0)},[ae,G,s]),!ae)return null;var R=L||!l?{left:N,top:V}:{left:"-1000vw",top:"-1000vh"},O={};return H&&(H.includes("height")&&T?O.height=T:H.includes("minHeight")&&T&&(O.minHeight=T),H.includes("width")&&D?O.width=D:H.includes("minWidth")&&D&&(O.minWidth=D)),l||(O.pointerEvents="none"),v.createElement(x,{open:y||B,getContainer:_&&function(){return _(s)},autoDestroy:w},v.createElement(Tz,{prefixCls:i,open:l,zIndex:C,mask:h,motion:k}),v.createElement(ba,{onResize:Y,disabled:!l},function(j){return v.createElement(nu,ot({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:y,leavedClassName:"".concat(i,"-hidden")},b,{onAppearPrepare:J,onEnterPrepare:J,visible:l,onVisibleChanged:function(le){var ee;b==null||(ee=b.onVisibleChanged)===null||ee===void 0||ee.call(b,le),a(le)}}),function(Z,le){var ee=Z.className,ie=Z.style,fe=Te(i,ee,r);return v.createElement("div",{ref:Jc(j,t,le),className:fe,style:he(he(he(he({},R),O),ie),{},{boxSizing:"border-box",zIndex:C},o),onMouseEnter:F,onMouseLeave:M,onClick:d},p&&v.createElement(Mz,{prefixCls:i,arrow:p,align:g}),v.createElement(Lz,{cache:!l},W))})}))}),Oz=v.forwardRef(function(e,t){var n=e.children,r=e.getTriggerDOMNode,i=xf(n),o=v.useCallback(function(a){HS(t,r?r(a):a)},[r]),s=jS(o,n.ref);return i?v.cloneElement(n,{ref:s}):n}),Pz=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Nz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IL,t=v.forwardRef(function(n,r){var i=n.prefixCls,o=i===void 0?"rc-trigger-popup":i,s=n.children,a=n.action,l=a===void 0?"hover":a,c=n.showAction,d=n.hideAction,h=n.popupVisible,p=n.defaultPopupVisible,g=n.onPopupVisibleChange,b=n.afterPopupVisibleChange,k=n.mouseEnterDelay,y=n.mouseLeaveDelay,_=y===void 0?.1:y,w=n.focusDelay,x=n.blurDelay,C=n.mask,F=n.maskClosable,M=F===void 0?!0:F,L=n.getPopupContainer,N=n.forceRender,V=n.autoDestroy,Y=n.destroyPopupOnHide,J=n.popup,H=n.popupClassName,D=n.popupStyle,T=n.popupPlacement,W=n.builtinPlacements,B=W===void 0?{}:W,G=n.popupAlign,te=n.zIndex,re=n.stretch,ae=n.getPopupClassNameFromAlign,K=n.alignPoint,R=n.onPopupClick,O=n.onPopupAlign,j=n.arrow,Z=n.popupMotion,le=n.maskMotion,ee=n.popupTransitionName,ie=n.popupAnimation,fe=n.maskTransitionName,ge=n.maskAnimation,we=n.className,Ne=n.getTriggerDOMNode,be=Un(n,Pz),Ye=V||Y||!1,Pe=v.useState(!1),$e=_e(Pe,2),it=$e[0],ht=$e[1];Cn(function(){ht(KS())},[]);var at=v.useRef({}),Le=v.useContext(XC),st=v.useMemo(function(){return{registerSubPopup:function(We,$t){at.current[We]=$t,Le==null||Le.registerSubPopup(We,$t)}}},[Le]),nt=rz(),Xe=v.useState(null),ze=_e(Xe,2),rt=ze[0],et=ze[1],pt=Co(function(Ze){fg(Ze)&&rt!==Ze&&et(Ze),Le==null||Le.registerSubPopup(nt,Ze)}),wt=v.useState(null),Mt=_e(wt,2),yt=Mt[0],sn=Mt[1],$n=Co(function(Ze){fg(Ze)&&yt!==Ze&&sn(Ze)}),qe=v.Children.only(s),Qe=(qe==null?void 0:qe.props)||{},bt={},Ht=Co(function(Ze){var We,$t,Zt=yt;return(Zt==null?void 0:Zt.contains(Ze))||(Zt==null||(We=Zt.getRootNode())===null||We===void 0?void 0:We.host)===Ze||Ze===Zt||(rt==null?void 0:rt.contains(Ze))||(rt==null||($t=rt.getRootNode())===null||$t===void 0?void 0:$t.host)===Ze||Ze===rt||Object.values(at.current).some(function(Kt){return(Kt==null?void 0:Kt.contains(Ze))||Ze===Kt})}),Ot=JC(o,Z,ie,ee),mn=JC(o,le,ge,fe),Vt=v.useState(p||!1),vn=_e(Vt,2),qt=vn[0],_n=vn[1],Pt=h??qt,zr=Co(function(Ze){h===void 0&&_n(Ze)});Cn(function(){_n(h||!1)},[h]);var ar=v.useRef(Pt);ar.current=Pt;var qn=Co(function(Ze){Pt!==Ze&&(zr(Ze),g==null||g(Ze))}),ye=v.useRef(),xe=function(){clearTimeout(ye.current)},ve=function(We){var $t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;xe(),$t===0?qn(We):ye.current=setTimeout(function(){qn(We)},$t*1e3)};v.useEffect(function(){return xe},[]);var Ge=v.useState(!1),Je=_e(Ge,2),dt=Je[0],an=Je[1],yn=v.useRef(!0);Cn(function(){(!yn.current||Pt)&&an(!0),yn.current=!0},[Pt]);var mr=v.useState(null),Ut=_e(mr,2),Nt=Ut[0],Br=Ut[1],Li=v.useState([0,0]),Jr=_e(Li,2),Qn=Jr[0],Yt=Jr[1],_i=function(We){Yt([We.clientX,We.clientY])},X=lz(Pt,rt,K?Qn:yt,T,B,G,O),oe=_e(X,9),Se=oe[0],Be=oe[1],Wt=oe[2],vt=oe[3],tn=oe[4],fn=oe[5],An=oe[6],jt=oe[7],Qt=oe[8],hn=Co(function(){dt||Qt()});cz(Pt,yt,rt,hn),Cn(function(){hn()},[Qn]),Cn(function(){Pt&&!(B!=null&&B[T])&&hn()},[JSON.stringify(G)]);var lr=v.useMemo(function(){var Ze=sz(B,o,jt,K);return Te(Ze,ae==null?void 0:ae(jt))},[jt,ae,B,o,K]);v.useImperativeHandle(r,function(){return{forceAlign:hn}});var On=function(We){an(!1),Qt(),b==null||b(We)},vr=function(){return new Promise(function(We){Br(function(){return We})})};Cn(function(){Nt&&(Qt(),Nt(),Br(null))},[Nt]);var Hr=v.useState(0),ei=_e(Hr,2),ti=ei[0],ni=ei[1],Xi=v.useState(0),Uo=_e(Xi,2),cr=Uo[0],Ae=Uo[1],Re=function(We,$t){if(hn(),re){var Zt=$t.getBoundingClientRect();ni(Zt.width),Ae(Zt.height)}},bn=iz(it,l,c,d),ln=_e(bn,2),Tt=ln[0],Dt=ln[1],Xt=function(We,$t,Zt,Kt){bt[We]=function(Er){var vs;Kt==null||Kt(Er),ve($t,Zt);for(var yi=arguments.length,_s=new Array(yi>1?yi-1:0),ys=1;ys<yi;ys++)_s[ys-1]=arguments[ys];(vs=Qe[We])===null||vs===void 0||vs.call.apply(vs,[Qe,Er].concat(_s))}},Wn=Tt.has("click"),Xn=Dt.has("click")||Dt.has("contextMenu");(Wn||Xn)&&(bt.onClick=function(Ze){var We;ar.current&&Xn?ve(!1):!ar.current&&Wn&&(_i(Ze),ve(!0));for(var $t=arguments.length,Zt=new Array($t>1?$t-1:0),Kt=1;Kt<$t;Kt++)Zt[Kt-1]=arguments[Kt];(We=Qe.onClick)===null||We===void 0||We.call.apply(We,[Qe,Ze].concat(Zt))}),v.useEffect(function(){if(Xn&&rt&&(!C||M)){var Ze=!1,We=function(yi){var _s=yi.target;Ze=Ht(_s)},$t=function(yi){var _s=yi.target;ar.current&&!Ze&&!Ht(_s)&&ve(!1)},Zt=Rf(rt),Kt=yt==null?void 0:yt.getRootNode();Zt.addEventListener("mousedown",We),Zt.addEventListener("click",$t);var Er=Kt&&Kt!==yt.ownerDocument;return Er&&(Kt.addEventListener("mousedown",We),Kt.addEventListener("click",$t)),function(){Zt.removeEventListener("mousedown",We),Zt.removeEventListener("click",$t),Er&&(Kt.removeEventListener("mousedown",We),Kt.removeEventListener("click",$t))}}},[Xn,yt,rt,C,M]);var jr=Tt.has("hover"),ur=Dt.has("hover"),Kr,Zi;jr&&(Xt("onMouseEnter",!0,k,function(Ze){_i(Ze)}),Kr=function(){ve(!0,k)},K&&(bt.onMouseMove=function(Ze){var We;(We=Qe.onMouseMove)===null||We===void 0||We.call(Qe,Ze)})),ur&&(Xt("onMouseLeave",!1,_),Zi=function(){ve(!1,_)}),Tt.has("focus")&&Xt("onFocus",!0,w),Dt.has("focus")&&Xt("onBlur",!1,x),Tt.has("contextMenu")&&(bt.onContextMenu=function(Ze){var We;_i(Ze),ve(!0),Ze.preventDefault();for(var $t=arguments.length,Zt=new Array($t>1?$t-1:0),Kt=1;Kt<$t;Kt++)Zt[Kt-1]=arguments[Kt];(We=Qe.onContextMenu)===null||We===void 0||We.call.apply(We,[Qe,Ze].concat(Zt))}),we&&(bt.className=Te(Qe.className,we));var vo=he(he({},Qe),bt),gs={},_o=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];_o.forEach(function(Ze){be[Ze]&&(gs[Ze]=function(){for(var We,$t=arguments.length,Zt=new Array($t),Kt=0;Kt<$t;Kt++)Zt[Kt]=arguments[Kt];(We=vo[Ze])===null||We===void 0||We.call.apply(We,[vo].concat(Zt)),be[Ze].apply(be,Zt)})});var ms=v.cloneElement(qe,he(he({},vo),gs)),Ca=j?he(he({},j!==!0?j:{}),{},{x:vt,y:tn}):null;return v.createElement(v.Fragment,null,v.createElement(ba,{disabled:!Pt,ref:$n,onResize:Re},v.createElement(Oz,{getTriggerDOMNode:Ne},ms)),v.createElement(XC.Provider,{value:st},v.createElement(Az,{portal:e,ref:pt,prefixCls:o,popup:J,className:Te(H,lr),style:D,target:yt,onMouseEnter:Kr,onMouseLeave:Zi,zIndex:te,open:Pt,keepDom:dt,onClick:R,mask:C,motion:Ot,maskMotion:mn,onVisibleChanged:On,onPrepare:vr,forceRender:N,autoDestroy:Ye,getPopupContainer:L,align:jt,arrow:Ca,ready:Se,offsetX:Be,offsetY:Wt,onAlign:hn,stretch:re,targetWidth:ti/fn,targetHeight:cr/An})))});return t}const GL=Nz(IL);var kl={shiftX:64,adjustY:1},Il={adjustX:1,shiftY:!0},Fi=[0,0],Dz={left:{points:["cr","cl"],overflow:Il,offset:[-4,0],targetOffset:Fi},right:{points:["cl","cr"],overflow:Il,offset:[4,0],targetOffset:Fi},top:{points:["bc","tc"],overflow:kl,offset:[0,-4],targetOffset:Fi},bottom:{points:["tc","bc"],overflow:kl,offset:[0,4],targetOffset:Fi},topLeft:{points:["bl","tl"],overflow:kl,offset:[0,-4],targetOffset:Fi},leftTop:{points:["tr","tl"],overflow:Il,offset:[-4,0],targetOffset:Fi},topRight:{points:["br","tr"],overflow:kl,offset:[0,-4],targetOffset:Fi},rightTop:{points:["tl","tr"],overflow:Il,offset:[4,0],targetOffset:Fi},bottomRight:{points:["tr","br"],overflow:kl,offset:[0,4],targetOffset:Fi},rightBottom:{points:["bl","br"],overflow:Il,offset:[4,0],targetOffset:Fi},bottomLeft:{points:["tl","bl"],overflow:kl,offset:[0,4],targetOffset:Fi},leftBottom:{points:["br","bl"],overflow:Il,offset:[-4,0],targetOffset:Fi}};function Fz(e){var t=e.children,n=e.prefixCls,r=e.id,i=e.overlayInnerStyle,o=e.className,s=e.style;return v.createElement("div",{className:Te("".concat(n,"-content"),o),style:s},v.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:i},typeof t=="function"?t():t))}var Vz=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Uz=function(t,n){var r=t.overlayClassName,i=t.trigger,o=i===void 0?["hover"]:i,s=t.mouseEnterDelay,a=s===void 0?0:s,l=t.mouseLeaveDelay,c=l===void 0?.1:l,d=t.overlayStyle,h=t.prefixCls,p=h===void 0?"rc-tooltip":h,g=t.children,b=t.onVisibleChange,k=t.afterVisibleChange,y=t.transitionName,_=t.animation,w=t.motion,x=t.placement,C=x===void 0?"right":x,F=t.align,M=F===void 0?{}:F,L=t.destroyTooltipOnHide,N=L===void 0?!1:L,V=t.defaultVisible,Y=t.getTooltipContainer,J=t.overlayInnerStyle;t.arrowContent;var H=t.overlay,D=t.id,T=t.showArrow,W=T===void 0?!0:T,B=Un(t,Vz),G=v.useRef(null);v.useImperativeHandle(n,function(){return G.current});var te=he({},B);"visible"in t&&(te.popupVisible=t.visible);var re=function(){return v.createElement(Fz,{key:"content",prefixCls:p,id:D,overlayInnerStyle:J},H)};return v.createElement(GL,ot({popupClassName:r,prefixCls:p,popup:re,action:o,builtinPlacements:Dz,popupPlacement:C,ref:G,popupAlign:M,getPopupContainer:Y,onPopupVisibleChange:b,afterPopupVisibleChange:k,popupTransitionName:y,popupAnimation:_,popupMotion:w,defaultPopupVisible:V,autoDestroy:N,mouseLeaveDelay:c,popupStyle:d,mouseEnterDelay:a,arrow:W},te),g)};const $z=v.forwardRef(Uz);const Wz=e=>E($z,{overlayClassName:e.overlayClassName,visible:e.visible,placement:e.placement,overlay:e.title,mouseEnterDelay:1,mouseLeaveDelay:0,children:e.children}),QS=()=>{const e=Ft(E0);return t=>{if(typeof t>"u")return[];const n=e.resolveKeybinding(new Ap([Jh(t,lo)]))[0];return(n?n.getLabel()??"":"").replace(/\+/g," ").replace(/(\^|⇧|⌥|⌘)/g,i=>`${i} `).split(" ")}},zz="_shortcut_lkdpo_1",Bz="_container_lkdpo_15",Hz="_shortcut-tooltip_lkdpo_22",Yv={shortcut:zz,container:Bz,"shortcut-tooltip":"_shortcut-tooltip_lkdpo_22",shortcutTooltip:Hz},No=e=>{const t=QS();return E(Wz,{visible:e.visible,overlayClassName:Yv.shortcutTooltip,title:ce("div",{className:Yv.container,children:[E("span",{children:e.title}),E("div",{children:t(e.keyCode).map((n,r)=>E("span",{className:Yv.shortcut,children:n},r))})]}),placement:e.placement??"bottomLeft",children:e.children})},jz="_icon_kl2pf_1",Kz="_active_kl2pf_14",Gz="_disabled_kl2pf_18",qv={icon:jz,active:Kz,disabled:Gz},ki=e=>{const t=e.renderIcon(16),n=v.useMemo(()=>{if(e.onClick)return r=>{r.preventDefault(),r.stopPropagation(),e.disabled||e.onClick()}},[e.onClick,e.disabled]);return E(No,{title:e.title,keyCode:e.keyCode,placement:e.placement,children:E("div",{className:Te(qv.icon,e.className,{[qv.active]:e.active,[qv.disabled]:e.disabled}),onClick:n,onMouseDown:r=>r.preventDefault(),children:t})})},Yz=()=>{const e=Ft(hs),t=!!e.currentPrompt,n=e.currentPrompt,r=(n==null?void 0:n.items)??[];if(ut(e.onPromptChange),fa(US).set(t),v.useLayoutEffect(()=>{const s=document.querySelector(`[data-prompt-key="${e.focusField}"]`);s&&(console.log("selement",s),s.focus())},[e.focusField]),!t)return E(Q.Fragment,{});const o=r.reduce((s,a)=>({...s,[a.key]:a.defaultValue}),{});return ce("div",{children:[ce("div",{className:El.modalContainer,children:[E("div",{className:El.modalTitle,children:n==null?void 0:n.title}),E("div",{className:El.modalClose,children:E(ki,{title:z("prompt.close","Close"),keyCode:U.Escape,onClick:()=>{e.cancel()},renderIcon:s=>E(Ef,{size:s})},"close")}),E(MW,{initialValues:o,onSubmit:s=>{e.resolveValue(s)},render:({handleSubmit:s})=>ce("form",{onSubmit:s,children:[r.map(a=>{let l=a.validate??[];a.required&&l.push(d=>d?void 0:z("form_validate.required","Please input {0}",a.label));const c=(...d)=>h=>d.reduce((p,g)=>p||g(h),void 0);return E(UW,{name:a.key,component:"input",validate:c(...l),children:({input:d,meta:h})=>{const{type:p,...g}=d;return ce("div",{className:El.formItem,onFocus:()=>e.setFocus(a.key),children:[ce("label",{children:[a.label,": "]}),E(ta,{"data-prompt-key":a.key,size:"small",type:p==="password"?"password":void 0,...g}),h.error&&h.touched&&E("span",{children:h.error})]})}})}),ce("div",{className:El.modalButtons,children:[E(No,{keyCode:U.Enter,title:z("prompt_button.save","Save"),children:E(pr,{type:"primary",htmlType:"submit",children:z("prompt_button.save","Save")})}),E(No,{keyCode:U.Escape,title:z("prompt_button.cancel","Cancel"),children:E(pr,{type:"text",onClick:()=>{e.cancel()},children:z("prompt_button.cancel","Cancel")})})]})]})})]}),E("div",{className:El.tabMask})]})},qz="_status_1u4gu_1",Qz="_status-point_1u4gu_10",Xz="_status-success-point_1u4gu_18",Zz="_status-fail-point_1u4gu_22",ro={status:qz,"status-point":"_status-point_1u4gu_10",statusPoint:Qz,"status-success-point":"_status-success-point_1u4gu_18",statusSuccessPoint:Xz,"status-fail-point":"_status-fail-point_1u4gu_22",statusFailPoint:Zz},YL=e=>{if(!e.status)return ce("div",{className:Te(ro.status),children:[E("div",{className:Te(ro.statusPoint)}),"connecting"]});switch(e.status.status){case"connected":return ce("div",{className:Te(ro.status),children:[E("div",{className:Te(ro.statusPoint,ro.statusSuccessPoint)}),"Connected"]});case"disconnected":return ce("div",{className:Te(ro.status),children:[E("div",{className:Te(ro.statusPoint,ro.statusFailPoint)}),"Connect Error"]});case"running":return ce("div",{className:Te(ro.status),children:[E("div",{className:Te(ro.statusPoint,ro.statusSuccessPoint)}),"Syncing"]});default:return null}},Jz="_client_1tlqp_1",e6="_logo_1tlqp_10",t6="_name_1tlqp_16",n6="_client-selected_1tlqp_24",r6="_client-selected-focused_1tlqp_29",Pu={client:Jz,logo:e6,name:t6,"client-selected":"_client-selected_1tlqp_24",clientSelected:n6,"client-selected-focused":"_client-selected-focused_1tlqp_29",clientSelectedFocused:r6},qL="/assets/logo-842e3789.svg",QL="/assets/international-5f9f0e10.svg",i6="data:font/woff2;base64,d09GMgABAAAAAALEAAsAAAAABnAAAAJ4AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGYACCcAqBFIEfATYCJAMICwYABCAFhDcHOBuzBcgekiRFAQkU8DUVhYAR4uH7/Wjnvv/+mloou1k0CXhaQt9KgsYQiXgULYmmyTN5/3fpfudytCrUs8aU3T93O/dyYblWMZewxSiwWziQyCkMzbna+8+Ay/EvoAc+EPj2oDUWPqXvTcE9LYswoTDiFA5neGW8IlBjST/n1vjsKkTP88KEFDdbGGTFca5IefBLPllGskqoGHowQ9xXku6mF+Be9Pn4pzn8ICkLsK/ZvT1WgodPn+C6uCxTfBEIBDyXUKLAHJCJw+7YNpdoYl1qbG4jaM6Cn/B/YBWHNgnxr7ML60AfxM8k8aSPWphAxuQysDHpp8gtZSSSrXwKRQ7b166li/fB8MFHhxZ2R1y5ytNQ6PBxuRoMHjyB3PSvs2RzsiG8++B2L3wnKqtsX6Y2na6izYUT9X+RRHfQeyfC7AbZXyua0xsHgrc91mRjvf/9ITfAj9S+kTEb5gBV57CEH6Y5GcibDSfponUCyXJurYQaNbhkrhYfU/WtN5YKWevtOSp1ZihkA+r8PyVAqdYEKmTLqDGr7XitVjkukQPABJsgVHmIpMEjFKq8JDLzCqUO96hQ5TNqHHvnDnJBtGxyzAsskcIOUYrMpK5KRNnLKG3oea6IvPA6cluBlzTVN+aTE2giH7PF3pSahaCEcmaQ8anPoa4zYnGmYlHUy0JY3Q0NtOkt9UVmwAgO5QmohCjYQSiKGBMN9KK4fhmSbNDl8QZZVLsOcTYFpUSTeo0dxITa7Oy60TW2TZJmgkARFCcJAzG+9Tyk0zGE1TxPhYqEevKEiKVbg8NHh6rrt9Uav7APatiGFE6GCxqu1a0/0QzGVwRnGgIA",o6=Q.forwardRef((e,t)=>ce("div",{ref:t,className:Te(Pu.client,{[Pu.clientSelected]:e.selected&&!e.focused,[Pu.clientSelectedFocused]:e.focused&&e.selected}),onClick:()=>{e.onClick()},children:[E("img",{className:Pu.logo,src:qL}),ce("div",{children:[E("div",{className:Pu.name,children:e.config.name}),E(YL,{status:e.status})]})]})),Rl=({Icon:e,text:t,style:n})=>ce("div",{style:{display:"flex",alignItems:"center",...n},children:[E(e,{theme:"outline",size:"14",style:{display:"inline-flex",alignItems:"center",marginRight:2}}),E("span",{children:t})]}),s6=e=>{if(!e.status)return null;switch(e.status.status){case"connected":return ce("div",{style:{display:"flex"},children:[E(Rl,{Icon:AC,style:{marginRight:4},text:e.status.upload??0}),E(Rl,{Icon:MC,style:{marginRight:4},text:e.status.download??0}),E(Rl,{Icon:RC,text:e.status.ignore??0})]});case"running":return ce("div",{style:{display:"flex"},children:[E(Rl,{Icon:AC,style:{marginRight:4},text:e.status.upload??0}),E(Rl,{Icon:MC,style:{marginRight:4},text:e.status.download??0}),E(Rl,{Icon:RC,text:e.status.ignore??0})]});case"disconnected":return E("div",{children:e.status.errorMessage})}},a6="_form-item_6kl62_1",l6="_form-item-label_6kl62_5",c6="_form-item-right_6kl62_17",Qv={"form-item":"_form-item_6kl62_1",formItem:a6,"form-item-label":"_form-item-label_6kl62_5",formItemLabel:l6,"form-item-right":"_form-item-right_6kl62_17",formItemRight:c6},Ml=e=>ce("div",{className:Te(Qv.formItem,e.className),children:[ce("div",{className:Qv.formItemLabel,children:[e.label,e.label?":":""]}),E("div",{className:Qv.formItemRight,children:e.children})]}),u6="_form-padding_1ugxc_1",d6="_status-form_1ugxc_5",f6="_status-container_1ugxc_9",Tl={"form-padding":"_form-padding_1ugxc_1",formPadding:u6,"status-form":"_status-form_1ugxc_5",statusForm:d6,"status-container":"_status-container_1ugxc_9",statusContainer:f6},h6=e=>{if(!e.status)return null;switch(e.status.status){case"connected":return E("div",{children:E(pr,{type:"primary",onClick:()=>{e.onSync()},children:z("remote_sync","Sync")})});case"running":return E("div",{children:E(pr,{type:"primary",onClick:()=>{e.onStopSync()},children:z("remote_stop_sync","Stop Sync")})});case"disconnected":return E("div",{children:E(pr,{type:"primary",onClick:()=>{e.onConnect()},children:z("remote_reconnect","Reconnect")})})}},p6=e=>{const[t,n]=v.useState(e.initValue);v.useEffect(()=>{n(e.initValue)},[e.initValue]);const r=(o,s)=>{if(!t)return;const a={...t};a[o]=s,n(a)},i=e.initValue!==t;return ce("div",{children:[E(Ml,{className:Tl.statusForm,label:"Status",children:ce("div",{className:Tl.statusContainer,children:[E(YL,{status:e.status}),E(s6,{status:e.status})]})},"status"),E(Ml,{className:Tl.formPadding,label:z("form.name","Name"),children:E(ta,{value:t.name,size:"small",placeholder:z("remotes_editor.placeholder_name","name"),onChange:o=>r("name",o)})},"name"),E(Ml,{className:Tl.formPadding,label:z("form.Entrypoint","Entrypoint"),children:E(ta,{value:t.entrypoint,size:"small",placeholder:z("remotes_editor.placeholder_entrypoint","entrypoint"),onChange:o=>r("entrypoint",o)})},"endpoint"),E(Ml,{className:Tl.formPadding,label:z("form.token","Token"),children:E(ta,{value:t.token,size:"small",placeholder:z("remotes_editor.placeholder_token","token"),onChange:o=>r("token",o)})},"token"),i&&E(Ml,{className:Tl.formPadding,label:"",children:ce("div",{children:[E(pr,{type:"text",style:{marginRight:8},onClick:()=>{n(e.initValue)},children:z("remote_cancel","Cancel")}),E(pr,{type:"primary",onClick:()=>{e.onSave(t)},children:z("remote_save","Save")})]})},"save"),!i&&E(Ml,{label:"",children:E(h6,{status:e.status,onConnect:e.onConnect,onSync:e.onSync,onStopSync:e.onStopSync})},"save")]})},g6="_container_j5y8f_1",m6="_left-container_j5y8f_6",v6="_left-tool-container_j5y8f_14",_6="_left-icon_j5y8f_22",y6="_right-container_j5y8f_27",Ll={container:g6,"left-container":"_left-container_j5y8f_6",leftContainer:m6,"left-tool-container":"_left-tool-container_j5y8f_14",leftToolContainer:v6,"left-icon":"_left-icon_j5y8f_22",leftIcon:_6,"right-container":"_right-container_j5y8f_27",rightContainer:y6};var XL=v.forwardRef(function(e,t){var n=e.height,r=e.offset,i=e.children,o=e.prefixCls,s=e.onInnerResize,a=e.innerProps,l={},c={display:"flex",flexDirection:"column"};return r!==void 0&&(l={height:n,position:"relative",overflow:"hidden"},c=he(he({},c),{},{transform:"translateY(".concat(r,"px)"),position:"absolute",left:0,right:0,top:0})),v.createElement("div",{style:l},v.createElement(ba,{onResize:function(h){var p=h.offsetHeight;p&&s&&s()}},v.createElement("div",ot({style:c,className:Te(Ee({},"".concat(o,"-holder-inner"),o)),ref:t},a),i)))});XL.displayName="Filler";var b6=20;function cx(e){return"touches"in e?e.touches[0].pageY:e.pageY}var S6=function(e){kf(n,e);var t=If(n);function n(){var r;eu(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=t.call.apply(t,[this].concat(o)),r.moveRaf=null,r.scrollbarRef=v.createRef(),r.thumbRef=v.createRef(),r.visibleTimeout=null,r.state={dragging:!1,pageY:null,startTop:null,visible:!1},r.delayHidden=function(){clearTimeout(r.visibleTimeout),r.setState({visible:!0}),r.visibleTimeout=setTimeout(function(){r.setState({visible:!1})},2e3)},r.onScrollbarTouchStart=function(a){a.preventDefault()},r.onContainerMouseDown=function(a){a.stopPropagation(),a.preventDefault()},r.patchEvents=function(){window.addEventListener("mousemove",r.onMouseMove),window.addEventListener("mouseup",r.onMouseUp),r.thumbRef.current.addEventListener("touchmove",r.onMouseMove),r.thumbRef.current.addEventListener("touchend",r.onMouseUp)},r.removeEvents=function(){var a;window.removeEventListener("mousemove",r.onMouseMove),window.removeEventListener("mouseup",r.onMouseUp),(a=r.scrollbarRef.current)===null||a===void 0||a.removeEventListener("touchstart",r.onScrollbarTouchStart),r.thumbRef.current&&(r.thumbRef.current.removeEventListener("touchstart",r.onMouseDown),r.thumbRef.current.removeEventListener("touchmove",r.onMouseMove),r.thumbRef.current.removeEventListener("touchend",r.onMouseUp)),Gn.cancel(r.moveRaf)},r.onMouseDown=function(a){var l=r.props.onStartMove;r.setState({dragging:!0,pageY:cx(a),startTop:r.getTop()}),l(),r.patchEvents(),a.stopPropagation(),a.preventDefault()},r.onMouseMove=function(a){var l=r.state,c=l.dragging,d=l.pageY,h=l.startTop,p=r.props.onScroll;if(Gn.cancel(r.moveRaf),c){var g=cx(a)-d,b=h+g,k=r.getEnableScrollRange(),y=r.getEnableHeightRange(),_=y?b/y:0,w=Math.ceil(_*k);r.moveRaf=Gn(function(){p(w)})}},r.onMouseUp=function(){var a=r.props.onStopMove;r.setState({dragging:!1}),a(),r.removeEvents()},r.getSpinHeight=function(){var a=r.props,l=a.height,c=a.count,d=l/c*10;return d=Math.max(d,b6),d=Math.min(d,l/2),Math.floor(d)},r.getEnableScrollRange=function(){var a=r.props,l=a.scrollHeight,c=a.height;return l-c||0},r.getEnableHeightRange=function(){var a=r.props.height,l=r.getSpinHeight();return a-l||0},r.getTop=function(){var a=r.props.scrollTop,l=r.getEnableScrollRange(),c=r.getEnableHeightRange();if(a===0||l===0)return 0;var d=a/l;return d*c},r.showScroll=function(){var a=r.props,l=a.height,c=a.scrollHeight;return c>l},r}return tu(n,[{key:"componentDidMount",value:function(){this.scrollbarRef.current.addEventListener("touchstart",this.onScrollbarTouchStart),this.thumbRef.current.addEventListener("touchstart",this.onMouseDown)}},{key:"componentDidUpdate",value:function(i){i.scrollTop!==this.props.scrollTop&&this.delayHidden()}},{key:"componentWillUnmount",value:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)}},{key:"render",value:function(){var i=this.state,o=i.dragging,s=i.visible,a=this.props.prefixCls,l=this.getSpinHeight(),c=this.getTop(),d=this.showScroll(),h=d&&s;return v.createElement("div",{ref:this.scrollbarRef,className:Te("".concat(a,"-scrollbar"),Ee({},"".concat(a,"-scrollbar-show"),d)),style:{width:8,top:0,bottom:0,right:0,position:"absolute",display:h?null:"none"},onMouseDown:this.onContainerMouseDown,onMouseMove:this.delayHidden},v.createElement("div",{ref:this.thumbRef,className:Te("".concat(a,"-scrollbar-thumb"),Ee({},"".concat(a,"-scrollbar-thumb-moving"),o)),style:{width:"100%",height:l,top:c,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"},onMouseDown:this.onMouseDown}))}}]),n}(v.Component);function w6(e){var t=e.children,n=e.setRef,r=v.useCallback(function(i){n(i)},[]);return v.cloneElement(t,{ref:r})}function E6(e,t,n,r,i,o){var s=o.getKey;return e.slice(t,n+1).map(function(a,l){var c=t+l,d=i(a,c,{}),h=s(a);return v.createElement(w6,{key:h,setRef:function(g){return r(a,g)}},d)})}var C6=function(){function e(){eu(this,e),this.maps=void 0,this.maps=Object.create(null)}return tu(e,[{key:"set",value:function(n,r){this.maps[n]=r}},{key:"get",value:function(n){return this.maps[n]}}]),e}();function x6(e,t,n){var r=v.useState(0),i=_e(r,2),o=i[0],s=i[1],a=v.useRef(new Map),l=v.useRef(new C6),c=v.useRef();function d(){Gn.cancel(c.current)}function h(){d(),c.current=Gn(function(){a.current.forEach(function(g,b){if(g&&g.offsetParent){var k=Qd(g),y=k.offsetHeight;l.current.get(b)!==y&&l.current.set(b,k.offsetHeight)}}),s(function(g){return g+1})})}function p(g,b){var k=e(g),y=a.current.get(k);b?(a.current.set(k,b),h()):a.current.delete(k),!y!=!b&&(b?t==null||t(g):n==null||n(g))}return v.useEffect(function(){return d},[]),[p,h,l.current,o]}function k6(e,t,n,r,i,o,s,a){var l=v.useRef();return function(c){if(c==null){a();return}if(Gn.cancel(l.current),typeof c=="number")s(c);else if(c&&Tn(c)==="object"){var d,h=c.align;"index"in c?d=c.index:d=t.findIndex(function(k){return i(k)===c.key});var p=c.offset,g=p===void 0?0:p,b=function k(y,_){if(!(y<0||!e.current)){var w=e.current.clientHeight,x=!1,C=_;if(w){for(var F=_||h,M=0,L=0,N=0,V=Math.min(t.length,d),Y=0;Y<=V;Y+=1){var J=i(t[Y]);L=M;var H=n.get(J);N=L+(H===void 0?r:H),M=N,Y===d&&H===void 0&&(x=!0)}var D=null;switch(F){case"top":D=L-g;break;case"bottom":D=N-w+g;break;default:{var T=e.current.scrollTop,W=T+w;L<T?C="top":N>W&&(C="bottom")}}D!==null&&D!==e.current.scrollTop&&s(D)}l.current=Gn(function(){x&&o(),k(y-1,C)},2)}};b(3)}}}function I6(e,t,n){var r=e.length,i=t.length,o,s;if(r===0&&i===0)return null;r<i?(o=e,s=t):(o=t,s=e);var a={__EMPTY_ITEM__:!0};function l(b){return b!==void 0?n(b):a}for(var c=null,d=Math.abs(r-i)!==1,h=0;h<s.length;h+=1){var p=l(o[h]),g=l(s[h]);if(p!==g){c=h,d=d||p!==l(s[h+1]);break}}return c===null?null:{index:c,multiple:d}}function R6(e,t,n){var r=v.useState(e),i=_e(r,2),o=i[0],s=i[1],a=v.useState(null),l=_e(a,2),c=l[0],d=l[1];return v.useEffect(function(){var h=I6(o||[],e||[],t);(h==null?void 0:h.index)!==void 0&&(n==null||n(h.index),d(e[h.index])),s(e)},[e]),[c]}var M6=(typeof navigator>"u"?"undefined":Tn(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const ZL=function(e,t){var n=v.useRef(!1),r=v.useRef(null);function i(){clearTimeout(r.current),n.current=!0,r.current=setTimeout(function(){n.current=!1},50)}var o=v.useRef({top:e,bottom:t});return o.current.top=e,o.current.bottom=t,function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=s<0&&o.current.top||s>0&&o.current.bottom;return a&&l?(clearTimeout(r.current),n.current=!1):(!l||n.current)&&i(),!n.current&&l}};function T6(e,t,n,r){var i=v.useRef(0),o=v.useRef(null),s=v.useRef(null),a=v.useRef(!1),l=ZL(t,n);function c(h){if(e){Gn.cancel(o.current);var p=h.deltaY;i.current+=p,s.current=p,!l(p)&&(M6||h.preventDefault(),o.current=Gn(function(){var g=a.current?10:1;r(i.current*g),i.current=0}))}}function d(h){e&&(a.current=h.detail===s.current)}return[c,d]}var L6=14/15;function A6(e,t,n){var r=v.useRef(!1),i=v.useRef(0),o=v.useRef(null),s=v.useRef(null),a,l=function(p){if(r.current){var g=Math.ceil(p.touches[0].pageY),b=i.current-g;i.current=g,n(b)&&p.preventDefault(),clearInterval(s.current),s.current=setInterval(function(){b*=L6,(!n(b,!0)||Math.abs(b)<=.1)&&clearInterval(s.current)},16)}},c=function(){r.current=!1,a()},d=function(p){a(),p.touches.length===1&&!r.current&&(r.current=!0,i.current=Math.ceil(p.touches[0].pageY),o.current=p.target,o.current.addEventListener("touchmove",l),o.current.addEventListener("touchend",c))};a=function(){o.current&&(o.current.removeEventListener("touchmove",l),o.current.removeEventListener("touchend",c))},Cn(function(){return e&&t.current.addEventListener("touchstart",d),function(){var h;(h=t.current)===null||h===void 0||h.removeEventListener("touchstart",d),a(),clearInterval(s.current)}},[e])}var O6=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","component","onScroll","onVisibleChange","innerProps"],P6=[],N6={overflowY:"auto",overflowAnchor:"none"};function D6(e,t){var n=e.prefixCls,r=n===void 0?"rc-virtual-list":n,i=e.className,o=e.height,s=e.itemHeight,a=e.fullHeight,l=a===void 0?!0:a,c=e.style,d=e.data,h=e.children,p=e.itemKey,g=e.virtual,b=e.component,k=b===void 0?"div":b,y=e.onScroll,_=e.onVisibleChange,w=e.innerProps,x=Un(e,O6),C=!!(g!==!1&&o&&s),F=C&&d&&s*d.length>o,M=v.useState(0),L=_e(M,2),N=L[0],V=L[1],Y=v.useState(!1),J=_e(Y,2),H=J[0],D=J[1],T=Te(r,i),W=d||P6,B=v.useRef(),G=v.useRef(),te=v.useRef(),re=v.useCallback(function(qe){return typeof p=="function"?p(qe):qe==null?void 0:qe[p]},[p]),ae={getKey:re};function K(qe){V(function(Qe){var bt;typeof qe=="function"?bt=qe(Qe):bt=qe;var Ht=Le(bt);return B.current.scrollTop=Ht,Ht})}var R=v.useRef({start:0,end:W.length}),O=v.useRef(),j=R6(W,re),Z=_e(j,1),le=Z[0];O.current=le;var ee=x6(re,null,null),ie=_e(ee,4),fe=ie[0],ge=ie[1],we=ie[2],Ne=ie[3],be=v.useMemo(function(){if(!C)return{scrollHeight:void 0,start:0,end:W.length-1,offset:void 0};if(!F){var qe;return{scrollHeight:((qe=G.current)===null||qe===void 0?void 0:qe.offsetHeight)||0,start:0,end:W.length-1,offset:void 0}}for(var Qe=0,bt,Ht,Ot,mn=W.length,Vt=0;Vt<mn;Vt+=1){var vn=W[Vt],qt=re(vn),_n=we.get(qt),Pt=Qe+(_n===void 0?s:_n);Pt>=N&&bt===void 0&&(bt=Vt,Ht=Qe),Pt>N+o&&Ot===void 0&&(Ot=Vt),Qe=Pt}return bt===void 0&&(bt=0,Ht=0,Ot=Math.ceil(o/s)),Ot===void 0&&(Ot=W.length-1),Ot=Math.min(Ot+1,W.length),{scrollHeight:Qe,start:bt,end:Ot,offset:Ht}},[F,C,N,W,Ne,o]),Ye=be.scrollHeight,Pe=be.start,$e=be.end,it=be.offset;R.current.start=Pe,R.current.end=$e;var ht=Ye-o,at=v.useRef(ht);at.current=ht;function Le(qe){var Qe=qe;return Number.isNaN(at.current)||(Qe=Math.min(Qe,at.current)),Qe=Math.max(Qe,0),Qe}var st=N<=0,nt=N>=ht,Xe=ZL(st,nt);function ze(qe){var Qe=qe;K(Qe)}function rt(qe){var Qe=qe.currentTarget.scrollTop;Qe!==N&&K(Qe),y==null||y(qe)}var et=T6(C,st,nt,function(qe){K(function(Qe){var bt=Qe+qe;return bt})}),pt=_e(et,2),wt=pt[0],Mt=pt[1];A6(C,B,function(qe,Qe){return Xe(qe,Qe)?!1:(wt({preventDefault:function(){},deltaY:qe}),!0)}),Cn(function(){function qe(Qe){C&&Qe.preventDefault()}return B.current.addEventListener("wheel",wt),B.current.addEventListener("DOMMouseScroll",Mt),B.current.addEventListener("MozMousePixelScroll",qe),function(){B.current&&(B.current.removeEventListener("wheel",wt),B.current.removeEventListener("DOMMouseScroll",Mt),B.current.removeEventListener("MozMousePixelScroll",qe))}},[C]);var yt=k6(B,W,we,s,re,ge,K,function(){var qe;(qe=te.current)===null||qe===void 0||qe.delayHidden()});v.useImperativeHandle(t,function(){return{scrollTo:yt}}),Cn(function(){if(_){var qe=W.slice(Pe,$e+1);_(qe,W)}},[Pe,$e,W]);var sn=E6(W,Pe,$e,fe,h,ae),$n=null;return o&&($n=he(Ee({},l?"height":"maxHeight",o),N6),C&&($n.overflowY="hidden",H&&($n.pointerEvents="none"))),v.createElement("div",ot({style:he(he({},c),{},{position:"relative"}),className:T},x),v.createElement(k,{className:"".concat(r,"-holder"),style:$n,ref:B,onScroll:rt},v.createElement(XL,{prefixCls:r,height:Ye,offset:it,onInnerResize:ge,ref:G,innerProps:w},sn)),C&&v.createElement(S6,{ref:te,prefixCls:r,scrollTop:N,height:o,scrollHeight:Ye,count:W.length,onScroll:ze,onStartMove:function(){D(!0)},onStopMove:function(){D(!1)}}))}var pm=v.forwardRef(D6);pm.displayName="List";function ns(e,t,...n){v.useLayoutEffect(()=>{if(e)return e(t).dispose},[e,t,...n])}De.registerCommandAndKeybindingRule({id:VV,weight:Fe.WorkbenchContrib+5,when:Fg,primary:U.DownArrow,handler:e=>{const t=e.get(Wc).getFocusList();t&&t.selectNext()}});De.registerCommandAndKeybindingRule({id:UV,weight:Fe.WorkbenchContrib+5,when:Fg,primary:U.UpArrow,handler:e=>{const t=e.get(Wc).getFocusList();t&&t.selectPrevious()}});De.registerCommandAndKeybindingRule({id:$V,weight:Fe.WorkbenchContrib+5,when:Lt.and(Fg,Vg),primary:U.Backspace|ft.CtrlCmd,handler:e=>{const n=e.get(Wc).getFocusList();n&&n.currentItemId&&n.delete(n.currentItemId)}});const F6="_container_h0flt_1",V6="_virtual-list-container_h0flt_11",ux={container:F6,"virtual-list-container":"_virtual-list-container_h0flt_11",virtualListContainer:V6},gm=function(e){const t=e.list,n=v.useRef(null),[r,i]=v.useState(300),o=Ft(Fo),s=v.useRef(null),a=v.useRef(t.scrollStatus),l=v.useRef(t.scrollStatus?Array.from(t.scrollStatus.elements):[]),c=v.useRef(!1);function d(){if(c.current)return;const b=n.current,k=l.current;if(!b||k.length===0){a.current=null;return}const y=k[0],_=b.querySelector(`[data-virtual-list-item-id-id="${y}"]`);if(!_)return;const w=_.getBoundingClientRect().top,x=b.getBoundingClientRect().top,C=t.items.findIndex(M=>M.id===y);let F=parseInt(window.getComputedStyle(b).paddingTop.replace("px",""));F=isNaN(F)?0:F,a.current={index:C,offset:w-x-F,elements:new Set(k)}}v.useEffect(()=>{var k;t.isFocused&&((k=n.current)==null||k.focus()),c.current=!0;const b=s.current;if(b){if(t.scrollStatus)b.scrollTo({index:t.scrollStatus.index,align:"top",offset:t.scrollStatus.offset});else if(t.currentItemId){const y=t.items.findIndex(_=>_.id===t.currentItemId);y!==-1&&b.scrollTo({index:y,align:"top",offset:r/2-e.itemHeight/2})}}return c.current=!1,()=>{t.setScrollStatus(a.current)}},[t]),ns(t.onSelectItemChange,b=>{if(e.customScoll)return;const k=s.current;if(!k)return;const y=t.items.findIndex(_=>_.id===b.selectItem.id);if(y!==-1){if(b.preferPosition==="middle"){k.scrollTo({index:y,align:"top",offset:r/2-e.itemHeight/2});return}k.scrollTo({index:y,align:"auto"})}}),Q.useLayoutEffect(()=>{if(n.current){const b=o.createScoped(n.current),{dispose:k}=t.bindTo(b);return k}},[t]),ns(t.onBlur,b=>{var k;b!==Ku.dom&&((k=n.current)==null||k.blur(),t.updateFocusStatus(!1))}),ns(t.onFocus,b=>{var k;if(b!==Ku.dom){if(t.isFocused)return;(k=n.current)==null||k.focus(),t.updateFocusStatus(!0)}}),ut(t.onBlur),ut(t.onFocus),ut(t.onSelectItemChange);const h=()=>{t.updateFocusStatus(!1),t.blur(Ku.dom)},p=()=>{t.updateFocusStatus(!0),t.focus(Ku.dom)},g=t.items.length===0&&e.empty;return E("div",{ref:n,tabIndex:3,className:Te(ux.container,e.className),onBlur:h,onFocus:()=>p(),children:E(ba,{onResize:b=>i(b.height),children:g?E("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:e.empty}):E("div",{className:ux.virtualListContainer,children:E(pm,{onVisibleChange:b=>{l.current=b.map(k=>k.id)},ref:s,data:t.items,height:r,itemHeight:e.itemHeight,itemKey:"id",onScroll:()=>d(),children:(b,k)=>e.renderListItem(b,{virtualList:s.current,focused:t.isFocused,nextItem:t.items[k+1],listHeight:r,virtualListItemId:b.id})})})})})},U6=()=>{const e=Ft(F0);return ut(e.onStatusChange),v.useEffect(()=>{e.init()},[]),ce("div",{className:Ll.container,children:[ce("div",{className:Ll.leftContainer,children:[ce("div",{className:Ll.leftToolContainer,children:[E(ki,{title:z("remotes_panel.add","Add"),className:Ll.leftIcon,onClick:()=>{e.create()},renderIcon:t=>E(VS,{size:t})},"plus"),E(ki,{title:z("remotes_panel.delete","Delete"),className:Ll.leftIcon,onClick:()=>{var n;const t=(n=e.currentService)==null?void 0:n.config.id;t&&e.delete(t)},renderIcon:t=>E(eL,{size:t})},"minus")]}),E("div",{style:{flex:1},children:E(gm,{itemHeight:64,list:e.list,renderListItem:(t,{focused:n})=>E(o6,{focused:n,selected:t.id===e.list.selectId,config:t,status:e.getStatus(t.id),id:t.id,onClick:()=>e.list.select(t.id)},t.id)})})]}),ce("div",{className:Ll.rightContainer,children:[!e.currentService&&E("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:z("not_selected","Not selected remote")}),!!e.currentService&&E(p6,{initValue:e.currentService.config,status:e.currentService.status,onSave:async t=>{await e.update(e.currentService.config.id,t)},onConnect:async()=>{e.reconnect(e.currentService.config.id)},onSync:async()=>{e.start(e.currentService.config.id)},onStopSync:async()=>{e.stop(e.currentService.config.id)}})]})]})},$6="_description_1tbcv_1",W6={description:$6},Oc=({children:e})=>E("p",{className:Te(W6.description),children:e}),z6="_title_1sx0d_1",B6={title:z6},JL=({children:e})=>E("div",{className:B6.title,children:e});var eA={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Mg,function(){return function(n,r,i){n=n||{};var o=r.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(c,d,h,p){return o.fromToBase(c,d,h,p)}i.en.relativeTime=s,o.fromToBase=function(c,d,h,p,g){for(var b,k,y,_=h.$locale().relativeTime||s,w=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],x=w.length,C=0;C<x;C+=1){var F=w[C];F.d&&(b=p?i(c).diff(h,F.d,!0):h.diff(c,F.d,!0));var M=(n.rounding||Math.round)(Math.abs(b));if(y=b>0,M<=F.r||!F.r){M<=1&&C>0&&(F=w[C-1]);var L=_[F.l];g&&(M=g(""+M)),k=typeof L=="string"?L.replace("%d",M):L(M,d,F.l,y);break}}if(d)return k;var N=y?_.future:_.past;return typeof N=="function"?N(k):N.replace("%s",k)},o.to=function(c,d){return a(c,d,this,!0)},o.from=function(c,d){return a(c,d,this)};var l=function(c){return c.$u?i.utc():i()};o.toNow=function(c){return this.to(l(this),c)},o.fromNow=function(c){return this.from(l(this),c)}}})})(eA);var H6=eA.exports;const j6=rl(H6),K6=7858,G6="settings.action.generateToken",tA=new At("apiInputFocus",!1);De.registerCommandAndKeybindingRule({id:G6,weight:Fe.WorkbenchContrib+5,when:tA,primary:U.Enter,handler:e=>{const t=e.get(Wp);t.userInputValue&&t.createToken()}});const Y6="_setting-page_19mii_1",q6="_tab-container_19mii_11",Q6="_tab-selectors_19mii_17",X6="_tab-columns_19mii_24",Z6="_tab-selector_19mii_17",J6="_selected_19mii_44",eB="_tab-content_19mii_51",tB="_tab-content-remote_19mii_54",nB="_setting-item_19mii_60",rB="_item-right_19mii_68",iB="_item-content_19mii_72",oB="_token-container_19mii_81",sB="_token-button_19mii_85",aB="_token-content_19mii_96",lB="_token-left_19mii_105",cB="_token-right_19mii_110",Fr={"setting-page":"_setting-page_19mii_1",settingPage:Y6,"tab-container":"_tab-container_19mii_11",tabContainer:q6,"tab-selectors":"_tab-selectors_19mii_17",tabSelectors:Q6,"tab-columns":"_tab-columns_19mii_24",tabColumns:X6,"tab-selector":"_tab-selector_19mii_17",tabSelector:Z6,selected:J6,"tab-content":"_tab-content_19mii_51",tabContent:eB,"tab-content-remote":"_tab-content-remote_19mii_54",tabContentRemote:tB,"setting-item":"_setting-item_19mii_60",settingItem:nB,"item-right":"_item-right_19mii_68",itemRight:rB,"item-content":"_item-content_19mii_72",itemContent:iB,"token-container":"_token-container_19mii_81",tokenContainer:oB,"token-button":"_token-button_19mii_85",tokenButton:sB,"token-content":"_token-content_19mii_96",tokenContent:aB,"token-left":"_token-left_19mii_105",tokenLeft:lB,"token-right":"_token-right_19mii_110",tokenRight:cB};Oo.extend(j6);const nA=()=>{const e=Ft(qa),t=Ft(sa);return{copyText:r=>{e.writeText(r).then(()=>{t.showInformationMessage(z("copy_success","Copy Success"))})}}},uB=()=>{const e=Ft(Ng);ut(e.onDidStatusChange);const{copyText:t}=nA();v.useEffect(()=>{e.init()},[]);const n=e.status;if(!n)return E("div",{});let r=!1,i;switch(n.status){case nd.running:{r=!0;const s=eR(n.serverType,window.location,{port:String(n.port),ip:n.ip});i=ce($s,{title:z("settings_api.api_server","API Server"),subtitle:z("settings_api.server_status_running","Server is running at {0}",s),children:[E(pr,{type:"primary",onClick:async()=>{t(s)},children:z("settings_api.copy","Copy")}),n.stoppable&&E(pr,{type:"primary",style:{marginLeft:"10px"},onClick:async()=>{await e.stop()},disabled:!n.stoppable,children:z("settings_api.stop_server","Stop API Server")})]});break}case nd.stop:{i=E($s,{title:z("settings_api.api_server","API Server"),subtitle:z("settings_api.server_status_stop","Server is stopped"),children:E(pr,{type:"primary",onClick:async()=>{await e.startServer()},children:z("settings_api.start_server","Start API Server")})});break}case nd.error:{i=E($s,{title:z("settings_api.server_error","Server Start Error"),subtitle:n.errorMessage,children:E(pr,{type:"primary",onClick:async()=>{await e.startServer()},children:z("settings_api.start_server","Start API Server")})});break}}const o=n.serverType===Td.selfhosted;return ce(tm,{children:[!o&&E($s,{title:z("settings_api.port","Port"),subtitle:z("settings_api.port_subtitle","Server Port"),children:E(ta,{disabled:r,title:r?z("settings_api.port_input_disabled_title","Please stop the API server before changing the port."):String(e.port),placeholder:String(K6),value:e.port,onChange:s=>e.updatePort(s)})}),i]})},dB=()=>{const e=Ft(Wp);ut(e.onTokensChanged),ut(e.onUserInputValue);const{copyText:t}=nA(),n=fa(tA);return ce(tm,{children:[E(uB,{}),ce($s,{title:z("settings_api.personal_api_tokens","Personal API Tokens"),subtitle:z("settings_api.personal_api_tokens_subtile","You can use these tokens to access your data from other applications."),childrenDisplay:"content",children:[ce("div",{style:{marginTop:8,display:"flex"},children:[E(ta,{id:"api-token-input",style:{flex:1,marginRight:12},placeholder:z("api_token.placeholder","Enter a label for the token"),value:e.userInputValue,onFocus:()=>{n.set(!0)},onBlur:()=>{n.set(!1)},onChange:r=>{e.setUserInputValue(r)}}),E(pr,{type:"primary",className:Fr.tokenButton,disabled:!e.userInputValue,onClick:()=>{e.createToken()},children:z("settings_api.create_token","Create Token")})]}),E("div",{className:Fr.tokenContainer,children:e.tokens.map(r=>ce("div",{className:Fr.tokenContent,children:[ce("div",{className:Fr.tokenLeft,children:[E(JL,{children:r.label}),E(Oc,{children:r.token})]}),ce("div",{className:Fr.tokenRight,children:[E(pr,{type:"primary",size:"small",style:{marginRight:8},onClick:()=>{t(r.token)},children:z("settings_api.copy","Copy")}),E(pr,{danger:!0,type:"text",size:"small",onClick:()=>{e.deleteToken(r.token)},children:z("settings_api.delete","Delete")}),E(Oc,{children:Oo(r.createdAt).fromNow()})]})]},r.token))})]})]})},fB="hamsterbase",hB="HamsterBase",pB="hamsterbase-desktop",gB="0.7.1",mB={name:"hamsterbase",email:"admin@hamsterbase.com",url:"https://hamsterbase.com/"},vB="com.hamsterbase.hamsterbase-desktop",_B="hamsterbase/hamsterbase",yB="hamsterbase/hamsterbase-dev",dx={applicationName:fB,desktopProductName:hB,desktopFileName:pB,version:gB,author:mB,bundleIdentifier:vB,dockerRepository:_B,dockerRepositoryDev:yB},bB="_about_glvp4_1",SB="_logo_glvp4_10",wB="_product-name_glvp4_15",EB="_version_glvp4_21",CB="_legal_glvp4_28",Nu={about:bB,logo:SB,"product-name":"_product-name_glvp4_15",productName:wB,version:EB,legal:CB},xB="_link_qelh3_1",kB="_primary_qelh3_15",fx={link:xB,primary:kB},kb=({text:e,href:t,onClick:n,type:r})=>E("a",{className:Te(fx.link,r&&fx[r]),href:t||"#",onClick:n,target:"_blank",children:e});function Xv(e){return URL.createObjectURL(new Blob([e],{type:"text/html"}))}const IB=()=>{const e=Ft($p),t=[{href:Xv(e.currentTermsDocument),label:z("legal.eula","EULA")},{href:Xv(e.currentPrivacyDocument),label:z("legal.privacy_policy","Privacy Policy")},{href:Xv(e.currentCreditsDocument),label:z("legal.credits","Credits")}];return ce("div",{className:Nu.about,children:[E("img",{className:Nu.logo,src:qL}),E("p",{className:Nu.productName,children:dx.desktopProductName}),E("a",{className:Nu.version,onClick:()=>{window.open(tc("changelog"),"_blank")},children:dx.version}),E("p",{className:Nu.legal,children:t.map(n=>E(kb,{text:n.label,href:n.href}))})]})};var Ce={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var n=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||n>=Ce.F1&&n<=Ce.F12)return!1;switch(n){case Ce.ALT:case Ce.CAPS_LOCK:case Ce.CONTEXT_MENU:case Ce.CTRL:case Ce.DOWN:case Ce.END:case Ce.ESC:case Ce.HOME:case Ce.INSERT:case Ce.LEFT:case Ce.MAC_FF_META:case Ce.META:case Ce.NUMLOCK:case Ce.NUM_CENTER:case Ce.PAGE_DOWN:case Ce.PAGE_UP:case Ce.PAUSE:case Ce.PRINT_SCREEN:case Ce.RIGHT:case Ce.SHIFT:case Ce.UP:case Ce.WIN_KEY:case Ce.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Ce.ZERO&&t<=Ce.NINE||t>=Ce.NUM_ZERO&&t<=Ce.NUM_MULTIPLY||t>=Ce.A&&t<=Ce.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Ce.SPACE:case Ce.QUESTION_MARK:case Ce.NUM_PLUS:case Ce.NUM_MINUS:case Ce.NUM_PERIOD:case Ce.NUM_DIVISION:case Ce.SEMICOLON:case Ce.DASH:case Ce.EQUALS:case Ce.COMMA:case Ce.PERIOD:case Ce.SLASH:case Ce.APOSTROPHE:case Ce.SINGLE_QUOTE:case Ce.OPEN_SQUARE_BRACKET:case Ce.BACKSLASH:case Ce.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},rA=v.createContext(null);function RB(){return v.useContext(rA)}function MB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=v.useState(!1),n=_e(t,2),r=n[0],i=n[1],o=v.useRef(null),s=function(){window.clearTimeout(o.current)};v.useEffect(function(){return s},[]);var a=function(c,d){s(),o.current=window.setTimeout(function(){i(c),d&&d()},e)};return[r,a,s]}function iA(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,t=v.useRef(null),n=v.useRef(null);v.useEffect(function(){return function(){window.clearTimeout(n.current)}},[]);function r(i){(i||t.current===null)&&(t.current=i),window.clearTimeout(n.current),n.current=window.setTimeout(function(){t.current=null},e)}return[function(){return t.current},r]}function TB(e,t,n,r){var i=v.useRef(null);i.current={open:t,triggerOpen:n,customizedTrigger:r},v.useEffect(function(){function o(s){var a;if(!((a=i.current)!==null&&a!==void 0&&a.customizedTrigger)){var l=s.target;l.shadowRoot&&s.composed&&(l=s.composedPath()[0]||l),i.current.open&&e().filter(function(c){return c}).every(function(c){return!c.contains(l)&&c!==l})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",o),function(){return window.removeEventListener("mousedown",o)}},[])}var LB=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,AB=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,OB="".concat(LB," ").concat(AB).split(/[\s\n]+/),PB="aria-",NB="data-";function hx(e,t){return e.indexOf(t)===0}function vg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;t===!1?n={aria:!0,data:!0,attr:!0}:t===!0?n={aria:!0}:n=he({},t);var r={};return Object.keys(e).forEach(function(i){(n.aria&&(i==="role"||hx(i,PB))||n.data&&hx(i,NB)||n.attr&&OB.includes(i))&&(r[i]=e[i])}),r}var DB=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Al=void 0;function FB(e,t){var n=e.prefixCls,r=e.invalidate,i=e.item,o=e.renderItem,s=e.responsive,a=e.responsiveDisabled,l=e.registerSize,c=e.itemKey,d=e.className,h=e.style,p=e.children,g=e.display,b=e.order,k=e.component,y=k===void 0?"div":k,_=Un(e,DB),w=s&&!g;function x(N){l(c,N)}v.useEffect(function(){return function(){x(null)}},[]);var C=o&&i!==Al?o(i):p,F;r||(F={opacity:w?0:1,height:w?0:Al,overflowY:w?"hidden":Al,order:s?b:Al,pointerEvents:w?"none":Al,position:w?"absolute":Al});var M={};w&&(M["aria-hidden"]=!0);var L=v.createElement(y,ot({className:Te(!r&&n,d),style:he(he({},F),h)},M,_,{ref:t}),C);return s&&(L=v.createElement(ba,{onResize:function(V){var Y=V.offsetWidth;x(Y)},disabled:a},L)),L}var Cd=v.forwardRef(FB);Cd.displayName="Item";function VB(e){if(typeof MessageChannel>"u")Gn(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function UB(){var e=v.useRef(null),t=function(r){e.current||(e.current=[],VB(function(){NS.unstable_batchedUpdates(function(){e.current.forEach(function(i){i()}),e.current=null})})),e.current.push(r)};return t}function Du(e,t){var n=v.useState(t),r=_e(n,2),i=r[0],o=r[1],s=Co(function(a){e(function(){o(a)})});return[i,s]}var $B=["component"],WB=["className"],zB=["className"],BB=function(t,n){var r=v.useContext(_g);if(!r){var i=t.component,o=i===void 0?"div":i,s=Un(t,$B);return v.createElement(o,ot({},s,{ref:n}))}var a=r.className,l=Un(r,WB),c=t.className,d=Un(t,zB);return v.createElement(_g.Provider,{value:null},v.createElement(Cd,ot({ref:n,className:Te(a,c)},l,d)))},oA=v.forwardRef(BB);oA.displayName="RawItem";var HB=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],_g=v.createContext(null),sA="responsive",aA="invalidate";function jB(e){return"+ ".concat(e.length," ...")}function KB(e,t){var n=e.prefixCls,r=n===void 0?"rc-overflow":n,i=e.data,o=i===void 0?[]:i,s=e.renderItem,a=e.renderRawItem,l=e.itemKey,c=e.itemWidth,d=c===void 0?10:c,h=e.ssr,p=e.style,g=e.className,b=e.maxCount,k=e.renderRest,y=e.renderRawRest,_=e.suffix,w=e.component,x=w===void 0?"div":w,C=e.itemComponent,F=e.onVisibleChange,M=Un(e,HB),L=h==="full",N=UB(),V=Du(N,null),Y=_e(V,2),J=Y[0],H=Y[1],D=J||0,T=Du(N,new Map),W=_e(T,2),B=W[0],G=W[1],te=Du(N,0),re=_e(te,2),ae=re[0],K=re[1],R=Du(N,0),O=_e(R,2),j=O[0],Z=O[1],le=Du(N,0),ee=_e(le,2),ie=ee[0],fe=ee[1],ge=v.useState(null),we=_e(ge,2),Ne=we[0],be=we[1],Ye=v.useState(null),Pe=_e(Ye,2),$e=Pe[0],it=Pe[1],ht=v.useMemo(function(){return $e===null&&L?Number.MAX_SAFE_INTEGER:$e||0},[$e,J]),at=v.useState(!1),Le=_e(at,2),st=Le[0],nt=Le[1],Xe="".concat(r,"-item"),ze=Math.max(ae,j),rt=b===sA,et=o.length&&rt,pt=b===aA,wt=et||typeof b=="number"&&o.length>b,Mt=v.useMemo(function(){var ye=o;return et?J===null&&L?ye=o:ye=o.slice(0,Math.min(o.length,D/d)):typeof b=="number"&&(ye=o.slice(0,b)),ye},[o,d,J,b,et]),yt=v.useMemo(function(){return et?o.slice(ht+1):o.slice(Mt.length)},[o,Mt,et,ht]),sn=v.useCallback(function(ye,xe){var ve;return typeof l=="function"?l(ye):(ve=l&&(ye==null?void 0:ye[l]))!==null&&ve!==void 0?ve:xe},[l]),$n=v.useCallback(s||function(ye){return ye},[s]);function qe(ye,xe,ve){$e===ye&&(xe===void 0||xe===Ne)||(it(ye),ve||(nt(ye<o.length-1),F==null||F(ye)),xe!==void 0&&be(xe))}function Qe(ye,xe){H(xe.clientWidth)}function bt(ye,xe){G(function(ve){var Ge=new Map(ve);return xe===null?Ge.delete(ye):Ge.set(ye,xe),Ge})}function Ht(ye,xe){Z(xe),K(j)}function Ot(ye,xe){fe(xe)}function mn(ye){return B.get(sn(Mt[ye],ye))}Cn(function(){if(D&&typeof ze=="number"&&Mt){var ye=ie,xe=Mt.length,ve=xe-1;if(!xe){qe(0,null);return}for(var Ge=0;Ge<xe;Ge+=1){var Je=mn(Ge);if(L&&(Je=Je||0),Je===void 0){qe(Ge-1,void 0,!0);break}if(ye+=Je,ve===0&&ye<=D||Ge===ve-1&&ye+mn(ve)<=D){qe(ve,null);break}else if(ye+ze>D){qe(Ge-1,ye-Je-ie+j);break}}_&&mn(0)+ie>D&&be(null)}},[D,B,j,ie,sn,Mt]);var Vt=st&&!!yt.length,vn={};Ne!==null&&et&&(vn={position:"absolute",left:Ne,top:0});var qt={prefixCls:Xe,responsive:et,component:C,invalidate:pt},_n=a?function(ye,xe){var ve=sn(ye,xe);return v.createElement(_g.Provider,{key:ve,value:he(he({},qt),{},{order:xe,item:ye,itemKey:ve,registerSize:bt,display:xe<=ht})},a(ye,xe))}:function(ye,xe){var ve=sn(ye,xe);return v.createElement(Cd,ot({},qt,{order:xe,key:ve,item:ye,renderItem:$n,itemKey:ve,registerSize:bt,display:xe<=ht}))},Pt,zr={order:Vt?ht:Number.MAX_SAFE_INTEGER,className:"".concat(Xe,"-rest"),registerSize:Ht,display:Vt};if(y)y&&(Pt=v.createElement(_g.Provider,{value:he(he({},qt),zr)},y(yt)));else{var ar=k||jB;Pt=v.createElement(Cd,ot({},qt,zr),typeof ar=="function"?ar(yt):ar)}var qn=v.createElement(x,ot({className:Te(!pt&&r,g),style:p,ref:t},M),Mt.map(_n),wt?Pt:null,_&&v.createElement(Cd,ot({},qt,{responsive:rt,responsiveDisabled:!et,order:ht,className:"".concat(Xe,"-suffix"),registerSize:Ot,display:!0,style:vn}),_));return rt&&(qn=v.createElement(ba,{onResize:Qe,disabled:!et},qn)),qn}var Mf=v.forwardRef(KB);Mf.displayName="Overflow";Mf.Item=oA;Mf.RESPONSIVE=sA;Mf.INVALIDATE=aA;var yg=function(t){var n=t.className,r=t.customizeIcon,i=t.customizeIconProps,o=t.onMouseDown,s=t.onClick,a=t.children,l;return typeof r=="function"?l=r(i):l=r,v.createElement("span",{className:n,onMouseDown:function(d){d.preventDefault(),o&&o(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:s,"aria-hidden":!0},l!==void 0?l:v.createElement("span",{className:Te(n.split(/\s+/).map(function(c){return"".concat(c,"-icon")}))},a))},GB=function(t,n){var r,i,o=t.prefixCls,s=t.id,a=t.inputElement,l=t.disabled,c=t.tabIndex,d=t.autoFocus,h=t.autoComplete,p=t.editable,g=t.activeDescendantId,b=t.value,k=t.maxLength,y=t.onKeyDown,_=t.onMouseDown,w=t.onChange,x=t.onPaste,C=t.onCompositionStart,F=t.onCompositionEnd,M=t.open,L=t.attrs,N=a||v.createElement("input",null),V=N,Y=V.ref,J=V.props,H=J.onKeyDown,D=J.onChange,T=J.onMouseDown,W=J.onCompositionStart,B=J.onCompositionEnd,G=J.style;return"maxLength"in N.props,N=v.cloneElement(N,he(he(he({type:"search"},J),{},{id:s,ref:Jc(n,Y),disabled:l,tabIndex:c,autoComplete:h||"off",autoFocus:d,className:Te("".concat(o,"-selection-search-input"),(r=N)===null||r===void 0||(i=r.props)===null||i===void 0?void 0:i.className),role:"combobox","aria-expanded":M,"aria-haspopup":"listbox","aria-owns":"".concat(s,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(s,"_list"),"aria-activedescendant":g},L),{},{value:p?b:"",maxLength:k,readOnly:!p,unselectable:p?null:"on",style:he(he({},G),{},{opacity:p?null:0}),onKeyDown:function(re){y(re),H&&H(re)},onMouseDown:function(re){_(re),T&&T(re)},onChange:function(re){w(re),D&&D(re)},onCompositionStart:function(re){C(re),W&&W(re)},onCompositionEnd:function(re){F(re),B&&B(re)},onPaste:x})),N},XS=v.forwardRef(GB);XS.displayName="Input";function lA(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var YB=typeof window<"u"&&window.document&&window.document.documentElement,qB=YB;function QB(e){return e!=null}function px(e){return["string","number"].includes(Tn(e))}function cA(e){var t=void 0;return e&&(px(e.title)?t=e.title.toString():px(e.label)&&(t=e.label.toString())),t}function XB(e,t){qB?v.useLayoutEffect(e,t):v.useEffect(e,t)}function ZB(e){var t;return(t=e.key)!==null&&t!==void 0?t:e.value}var gx=function(t){t.preventDefault(),t.stopPropagation()},JB=function(t){var n=t.id,r=t.prefixCls,i=t.values,o=t.open,s=t.searchValue,a=t.autoClearSearchValue,l=t.inputRef,c=t.placeholder,d=t.disabled,h=t.mode,p=t.showSearch,g=t.autoFocus,b=t.autoComplete,k=t.activeDescendantId,y=t.tabIndex,_=t.removeIcon,w=t.maxTagCount,x=t.maxTagTextLength,C=t.maxTagPlaceholder,F=C===void 0?function(be){return"+ ".concat(be.length," ...")}:C,M=t.tagRender,L=t.onToggleOpen,N=t.onRemove,V=t.onInputChange,Y=t.onInputPaste,J=t.onInputKeyDown,H=t.onInputMouseDown,D=t.onInputCompositionStart,T=t.onInputCompositionEnd,W=v.useRef(null),B=v.useState(0),G=_e(B,2),te=G[0],re=G[1],ae=v.useState(!1),K=_e(ae,2),R=K[0],O=K[1],j="".concat(r,"-selection"),Z=o||h==="multiple"&&a===!1||h==="tags"?s:"",le=h==="tags"||h==="multiple"&&a===!1||p&&(o||R);XB(function(){re(W.current.scrollWidth)},[Z]);function ee(be,Ye,Pe,$e,it){return v.createElement("span",{className:Te("".concat(j,"-item"),Ee({},"".concat(j,"-item-disabled"),Pe)),title:cA(be)},v.createElement("span",{className:"".concat(j,"-item-content")},Ye),$e&&v.createElement(yg,{className:"".concat(j,"-item-remove"),onMouseDown:gx,onClick:it,customizeIcon:_},"×"))}function ie(be,Ye,Pe,$e,it){var ht=function(Le){gx(Le),L(!o)};return v.createElement("span",{onMouseDown:ht},M({label:Ye,value:be,disabled:Pe,closable:$e,onClose:it}))}function fe(be){var Ye=be.disabled,Pe=be.label,$e=be.value,it=!d&&!Ye,ht=Pe;if(typeof x=="number"&&(typeof Pe=="string"||typeof Pe=="number")){var at=String(ht);at.length>x&&(ht="".concat(at.slice(0,x),"..."))}var Le=function(nt){nt&&nt.stopPropagation(),N(be)};return typeof M=="function"?ie($e,ht,Ye,it,Le):ee(be,ht,Ye,it,Le)}function ge(be){var Ye=typeof F=="function"?F(be):F;return ee({title:Ye},Ye,!1)}var we=v.createElement("div",{className:"".concat(j,"-search"),style:{width:te},onFocus:function(){O(!0)},onBlur:function(){O(!1)}},v.createElement(XS,{ref:l,open:o,prefixCls:r,id:n,inputElement:null,disabled:d,autoFocus:g,autoComplete:b,editable:le,activeDescendantId:k,value:Z,onKeyDown:J,onMouseDown:H,onChange:V,onPaste:Y,onCompositionStart:D,onCompositionEnd:T,tabIndex:y,attrs:vg(t,!0)}),v.createElement("span",{ref:W,className:"".concat(j,"-search-mirror"),"aria-hidden":!0},Z," ")),Ne=v.createElement(Mf,{prefixCls:"".concat(j,"-overflow"),data:i,renderItem:fe,renderRest:ge,suffix:we,itemKey:ZB,maxCount:w});return v.createElement(v.Fragment,null,Ne,!i.length&&!Z&&v.createElement("span",{className:"".concat(j,"-placeholder")},c))},eH=function(t){var n=t.inputElement,r=t.prefixCls,i=t.id,o=t.inputRef,s=t.disabled,a=t.autoFocus,l=t.autoComplete,c=t.activeDescendantId,d=t.mode,h=t.open,p=t.values,g=t.placeholder,b=t.tabIndex,k=t.showSearch,y=t.searchValue,_=t.activeValue,w=t.maxLength,x=t.onInputKeyDown,C=t.onInputMouseDown,F=t.onInputChange,M=t.onInputPaste,L=t.onInputCompositionStart,N=t.onInputCompositionEnd,V=t.title,Y=v.useState(!1),J=_e(Y,2),H=J[0],D=J[1],T=d==="combobox",W=T||k,B=p[0],G=y||"";T&&_&&!H&&(G=_),v.useEffect(function(){T&&D(!1)},[T,_]);var te=d!=="combobox"&&!h&&!k?!1:!!G,re=V===void 0?cA(B):V,ae=function(){if(B)return null;var R=te?{visibility:"hidden"}:void 0;return v.createElement("span",{className:"".concat(r,"-selection-placeholder"),style:R},g)};return v.createElement(v.Fragment,null,v.createElement("span",{className:"".concat(r,"-selection-search")},v.createElement(XS,{ref:o,prefixCls:r,id:i,open:h,inputElement:n,disabled:s,autoFocus:a,autoComplete:l,editable:W,activeDescendantId:c,value:G,onKeyDown:x,onMouseDown:C,onChange:function(R){D(!0),F(R)},onPaste:M,onCompositionStart:L,onCompositionEnd:N,tabIndex:b,attrs:vg(t,!0),maxLength:T?w:void 0})),!T&&B?v.createElement("span",{className:"".concat(r,"-selection-item"),title:re,style:te?{visibility:"hidden"}:void 0},B.label):null,ae())};function tH(e){return![Ce.ESC,Ce.SHIFT,Ce.BACKSPACE,Ce.TAB,Ce.WIN_KEY,Ce.ALT,Ce.META,Ce.WIN_KEY_RIGHT,Ce.CTRL,Ce.SEMICOLON,Ce.EQUALS,Ce.CAPS_LOCK,Ce.CONTEXT_MENU,Ce.F1,Ce.F2,Ce.F3,Ce.F4,Ce.F5,Ce.F6,Ce.F7,Ce.F8,Ce.F9,Ce.F10,Ce.F11,Ce.F12].includes(e)}var nH=function(t,n){var r=v.useRef(null),i=v.useRef(!1),o=t.prefixCls,s=t.open,a=t.mode,l=t.showSearch,c=t.tokenWithEnter,d=t.autoClearSearchValue,h=t.onSearch,p=t.onSearchSubmit,g=t.onToggleOpen,b=t.onInputKeyDown,k=t.domRef;v.useImperativeHandle(n,function(){return{focus:function(){r.current.focus()},blur:function(){r.current.blur()}}});var y=iA(0),_=_e(y,2),w=_[0],x=_[1],C=function(G){var te=G.which;(te===Ce.UP||te===Ce.DOWN)&&G.preventDefault(),b&&b(G),te===Ce.ENTER&&a==="tags"&&!i.current&&!s&&(p==null||p(G.target.value)),tH(te)&&g(!0)},F=function(){x(!0)},M=v.useRef(null),L=function(G){h(G,!0,i.current)!==!1&&g(!0)},N=function(){i.current=!0},V=function(G){i.current=!1,a!=="combobox"&&L(G.target.value)},Y=function(G){var te=G.target.value;if(c&&M.current&&/[\r\n]/.test(M.current)){var re=M.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");te=te.replace(re,M.current)}M.current=null,L(te)},J=function(G){var te=G.clipboardData,re=te.getData("text");M.current=re},H=function(G){var te=G.target;if(te!==r.current){var re=document.body.style.msTouchAction!==void 0;re?setTimeout(function(){r.current.focus()}):r.current.focus()}},D=function(G){var te=w();G.target!==r.current&&!te&&a!=="combobox"&&G.preventDefault(),(a!=="combobox"&&(!l||!te)||!s)&&(s&&d!==!1&&h("",!0,!1),g())},T={inputRef:r,onInputKeyDown:C,onInputMouseDown:F,onInputChange:Y,onInputPaste:J,onInputCompositionStart:N,onInputCompositionEnd:V},W=a==="multiple"||a==="tags"?v.createElement(JB,ot({},t,T)):v.createElement(eH,ot({},t,T));return v.createElement("div",{ref:k,className:"".concat(o,"-selector"),onClick:H,onMouseDown:D},W)},uA=v.forwardRef(nH);uA.displayName="Selector";var rH=["prefixCls","disabled","visible","children","popupElement","containerWidth","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],iH=function(t){var n=t===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"}}},oH=function(t,n){var r=t.prefixCls;t.disabled;var i=t.visible,o=t.children,s=t.popupElement,a=t.containerWidth,l=t.animation,c=t.transitionName,d=t.dropdownStyle,h=t.dropdownClassName,p=t.direction,g=p===void 0?"ltr":p,b=t.placement,k=t.builtinPlacements,y=t.dropdownMatchSelectWidth,_=t.dropdownRender,w=t.dropdownAlign,x=t.getPopupContainer,C=t.empty,F=t.getTriggerDOMNode,M=t.onPopupVisibleChange,L=t.onPopupMouseEnter,N=Un(t,rH),V="".concat(r,"-dropdown"),Y=s;_&&(Y=_(s));var J=v.useMemo(function(){return k||iH(y)},[k,y]),H=l?"".concat(V,"-").concat(l):c,D=v.useRef(null);v.useImperativeHandle(n,function(){return{getPopupElement:function(){return D.current}}});var T=he({minWidth:a},d);return typeof y=="number"?T.width=y:y&&(T.width=a),v.createElement(GL,ot({},N,{showAction:M?["click"]:[],hideAction:M?["click"]:[],popupPlacement:b||(g==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:J,prefixCls:V,popupTransitionName:H,popup:v.createElement("div",{ref:D,onMouseEnter:L},Y),popupAlign:w,popupVisible:i,getPopupContainer:x,popupClassName:Te(h,Ee({},"".concat(V,"-empty"),C)),popupStyle:T,getTriggerDOMNode:F,onPopupVisibleChange:M}),o)},dA=v.forwardRef(oH);dA.displayName="SelectTrigger";function sH(e){return hL(e)||fL(e)||$S(e)||pL()}function mx(e,t){var n=e.key,r;return"value"in e&&(r=e.value),n??(r!==void 0?r:"rc-index-key-".concat(t))}function fA(e,t){var n=e||{},r=n.label,i=n.value,o=n.options;return{label:r||(t?"children":"label"),value:i||"value",options:o||"options"}}function aH(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.fieldNames,r=t.childrenAsData,i=[],o=fA(n,!1),s=o.label,a=o.value,l=o.options;function c(d,h){d.forEach(function(p){var g=p[s];if(h||!(l in p)){var b=p[a];i.push({key:mx(p,i.length),groupOption:h,data:p,label:g,value:b})}else{var k=g;k===void 0&&r&&(k=p.label),i.push({key:mx(p,i.length),group:!0,data:p,label:k}),c(p[l],!0)}})}return c(e,!1),i}function Ib(e){var t=he({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Zc(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}function lH(e,t){if(!t||!t.length)return null;var n=!1;function r(o,s){var a=sH(s),l=a[0],c=a.slice(1);if(!l)return[o];var d=o.split(l);return n=n||d.length>1,d.reduce(function(h,p){return[].concat(tr(h),tr(r(p,c)))},[]).filter(function(h){return h})}var i=r(e,t);return n?i:null}var cH=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","showArrow","inputIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],uH=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"];function Rb(e){return e==="tags"||e==="multiple"}var dH=v.forwardRef(function(e,t){var n,r,i=e.id,o=e.prefixCls,s=e.className,a=e.showSearch,l=e.tagRender,c=e.direction,d=e.omitDomProps,h=e.displayValues,p=e.onDisplayValuesChange,g=e.emptyOptions,b=e.notFoundContent,k=b===void 0?"Not Found":b,y=e.onClear,_=e.mode,w=e.disabled,x=e.loading,C=e.getInputElement,F=e.getRawInputElement,M=e.open,L=e.defaultOpen,N=e.onDropdownVisibleChange,V=e.activeValue,Y=e.onActiveValueChange,J=e.activeDescendantId,H=e.searchValue,D=e.autoClearSearchValue,T=e.onSearch,W=e.onSearchSplit,B=e.tokenSeparators,G=e.allowClear,te=e.showArrow,re=e.inputIcon,ae=e.clearIcon,K=e.OptionList,R=e.animation,O=e.transitionName,j=e.dropdownStyle,Z=e.dropdownClassName,le=e.dropdownMatchSelectWidth,ee=e.dropdownRender,ie=e.dropdownAlign,fe=e.placement,ge=e.builtinPlacements,we=e.getPopupContainer,Ne=e.showAction,be=Ne===void 0?[]:Ne,Ye=e.onFocus,Pe=e.onBlur,$e=e.onKeyUp,it=e.onKeyDown,ht=e.onMouseDown,at=Un(e,cH),Le=Rb(_),st=(a!==void 0?a:Le)||_==="combobox",nt=he({},at);uH.forEach(function(Ae){delete nt[Ae]}),d==null||d.forEach(function(Ae){delete nt[Ae]});var Xe=v.useState(!1),ze=_e(Xe,2),rt=ze[0],et=ze[1];v.useEffect(function(){et(KS())},[]);var pt=v.useRef(null),wt=v.useRef(null),Mt=v.useRef(null),yt=v.useRef(null),sn=v.useRef(null),$n=MB(),qe=_e($n,3),Qe=qe[0],bt=qe[1],Ht=qe[2];v.useImperativeHandle(t,function(){var Ae,Re;return{focus:(Ae=yt.current)===null||Ae===void 0?void 0:Ae.focus,blur:(Re=yt.current)===null||Re===void 0?void 0:Re.blur,scrollTo:function(ln){var Tt;return(Tt=sn.current)===null||Tt===void 0?void 0:Tt.scrollTo(ln)}}});var Ot=v.useMemo(function(){var Ae;if(_!=="combobox")return H;var Re=(Ae=h[0])===null||Ae===void 0?void 0:Ae.value;return typeof Re=="string"||typeof Re=="number"?String(Re):""},[H,_,h]),mn=_==="combobox"&&typeof C=="function"&&C()||null,Vt=typeof F=="function"&&F(),vn=jS(wt,Vt==null||(n=Vt.props)===null||n===void 0?void 0:n.ref),qt=v.useState(!1),_n=_e(qt,2),Pt=_n[0],zr=_n[1];Cn(function(){zr(!0)},[]);var ar=Lc(!1,{defaultValue:L,value:M}),qn=_e(ar,2),ye=qn[0],xe=qn[1],ve=Pt?ye:!1,Ge=!k&&g;(w||Ge&&ve&&_==="combobox")&&(ve=!1);var Je=Ge?!1:ve,dt=v.useCallback(function(Ae){var Re=Ae!==void 0?Ae:!ve;w||(xe(Re),ve!==Re&&(N==null||N(Re)))},[w,ve,xe,N]),an=v.useMemo(function(){return(B||[]).some(function(Ae){return[`
`,`\r
`].includes(Ae)})},[B]),yn=function(Re,bn,ln){var Tt=!0,Dt=Re;Y==null||Y(null);var Xt=ln?null:lH(Re,B);return _!=="combobox"&&Xt&&(Dt="",W==null||W(Xt),dt(!1),Tt=!1),T&&Ot!==Dt&&T(Dt,{source:bn?"typing":"effect"}),Tt},mr=function(Re){!Re||!Re.trim()||T(Re,{source:"submit"})};v.useEffect(function(){!ve&&!Le&&_!=="combobox"&&yn("",!1,!1)},[ve]),v.useEffect(function(){ye&&w&&xe(!1),w&&bt(!1)},[w]);var Ut=iA(),Nt=_e(Ut,2),Br=Nt[0],Li=Nt[1],Jr=function(Re){var bn=Br(),ln=Re.which;if(ln===Ce.ENTER&&(_!=="combobox"&&Re.preventDefault(),ve||dt(!0)),Li(!!Ot),ln===Ce.BACKSPACE&&!bn&&Le&&!Ot&&h.length){for(var Tt=tr(h),Dt=null,Xt=Tt.length-1;Xt>=0;Xt-=1){var Wn=Tt[Xt];if(!Wn.disabled){Tt.splice(Xt,1),Dt=Wn;break}}Dt&&p(Tt,{type:"remove",values:[Dt]})}for(var Xn=arguments.length,jr=new Array(Xn>1?Xn-1:0),ur=1;ur<Xn;ur++)jr[ur-1]=arguments[ur];if(ve&&sn.current){var Kr;(Kr=sn.current).onKeyDown.apply(Kr,[Re].concat(jr))}it==null||it.apply(void 0,[Re].concat(jr))},Qn=function(Re){for(var bn=arguments.length,ln=new Array(bn>1?bn-1:0),Tt=1;Tt<bn;Tt++)ln[Tt-1]=arguments[Tt];if(ve&&sn.current){var Dt;(Dt=sn.current).onKeyUp.apply(Dt,[Re].concat(ln))}$e==null||$e.apply(void 0,[Re].concat(ln))},Yt=function(Re){var bn=h.filter(function(ln){return ln!==Re});p(bn,{type:"remove",values:[Re]})},_i=v.useRef(!1),X=function(){bt(!0),w||(Ye&&!_i.current&&Ye.apply(void 0,arguments),be.includes("focus")&&dt(!0)),_i.current=!0},oe=function(){bt(!1,function(){_i.current=!1,dt(!1)}),!w&&(Ot&&(_==="tags"?T(Ot,{source:"submit"}):_==="multiple"&&T("",{source:"blur"})),Pe&&Pe.apply(void 0,arguments))},Se=[];v.useEffect(function(){return function(){Se.forEach(function(Ae){return clearTimeout(Ae)}),Se.splice(0,Se.length)}},[]);var Be=function(Re){var bn,ln=Re.target,Tt=(bn=Mt.current)===null||bn===void 0?void 0:bn.getPopupElement();if(Tt&&Tt.contains(ln)){var Dt=setTimeout(function(){var jr=Se.indexOf(Dt);if(jr!==-1&&Se.splice(jr,1),Ht(),!rt&&!Tt.contains(document.activeElement)){var ur;(ur=yt.current)===null||ur===void 0||ur.focus()}});Se.push(Dt)}for(var Xt=arguments.length,Wn=new Array(Xt>1?Xt-1:0),Xn=1;Xn<Xt;Xn++)Wn[Xn-1]=arguments[Xn];ht==null||ht.apply(void 0,[Re].concat(Wn))},Wt=v.useState(null),vt=_e(Wt,2),tn=vt[0],fn=vt[1],An=v.useState({}),jt=_e(An,2),Qt=jt[1];function hn(){Qt({})}Cn(function(){if(Je){var Ae,Re=Math.ceil((Ae=pt.current)===null||Ae===void 0?void 0:Ae.offsetWidth);tn!==Re&&!Number.isNaN(Re)&&fn(Re)}},[Je]);var lr;Vt&&(lr=function(Re){dt(Re)}),TB(function(){var Ae;return[pt.current,(Ae=Mt.current)===null||Ae===void 0?void 0:Ae.getPopupElement()]},Je,dt,!!Vt);var On=v.useMemo(function(){return he(he({},e),{},{notFoundContent:k,open:ve,triggerOpen:Je,id:i,showSearch:st,multiple:Le,toggleOpen:dt})},[e,k,Je,ve,i,st,Le,dt]),vr=te!==void 0?te:x||!Le&&_!=="combobox",Hr;vr&&(Hr=v.createElement(yg,{className:Te("".concat(o,"-arrow"),Ee({},"".concat(o,"-arrow-loading"),x)),customizeIcon:re,customizeIconProps:{loading:x,searchValue:Ot,open:ve,focused:Qe,showSearch:st}}));var ei,ti=function(){var Re;y==null||y(),(Re=yt.current)===null||Re===void 0||Re.focus(),p([],{type:"clear",values:h}),yn("",!1,!1)};!w&&G&&(h.length||Ot)&&!(_==="combobox"&&Ot==="")&&(ei=v.createElement(yg,{className:"".concat(o,"-clear"),onMouseDown:ti,customizeIcon:ae},"×"));var ni=v.createElement(K,{ref:sn}),Xi=Te(o,s,(r={},Ee(r,"".concat(o,"-focused"),Qe),Ee(r,"".concat(o,"-multiple"),Le),Ee(r,"".concat(o,"-single"),!Le),Ee(r,"".concat(o,"-allow-clear"),G),Ee(r,"".concat(o,"-show-arrow"),vr),Ee(r,"".concat(o,"-disabled"),w),Ee(r,"".concat(o,"-loading"),x),Ee(r,"".concat(o,"-open"),ve),Ee(r,"".concat(o,"-customize-input"),mn),Ee(r,"".concat(o,"-show-search"),st),r)),Uo=v.createElement(dA,{ref:Mt,disabled:w,prefixCls:o,visible:Je,popupElement:ni,containerWidth:tn,animation:R,transitionName:O,dropdownStyle:j,dropdownClassName:Z,direction:c,dropdownMatchSelectWidth:le,dropdownRender:ee,dropdownAlign:ie,placement:fe,builtinPlacements:ge,getPopupContainer:we,empty:g,getTriggerDOMNode:function(){return wt.current},onPopupVisibleChange:lr,onPopupMouseEnter:hn},Vt?v.cloneElement(Vt,{ref:vn}):v.createElement(uA,ot({},e,{domRef:wt,prefixCls:o,inputElement:mn,ref:yt,id:i,showSearch:st,autoClearSearchValue:D,mode:_,activeDescendantId:J,tagRender:l,values:h,open:ve,onToggleOpen:dt,activeValue:V,searchValue:Ot,onSearch:yn,onSearchSubmit:mr,onRemove:Yt,tokenWithEnter:an}))),cr;return Vt?cr=Uo:cr=v.createElement("div",ot({className:Xi},nt,{ref:pt,onMouseDown:Be,onKeyDown:Jr,onKeyUp:Qn,onFocus:X,onBlur:oe}),Qe&&!ve&&v.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0},"aria-live":"polite"},"".concat(h.map(function(Ae){var Re=Ae.label,bn=Ae.value;return["number","string"].includes(Tn(Re))?Re:bn}).join(", "))),Uo,Hr,ei),v.createElement(rA.Provider,{value:On},cr)});const fH=function(e,t){var n=v.useRef({values:new Map,options:new Map}),r=v.useMemo(function(){var o=n.current,s=o.values,a=o.options,l=e.map(function(h){if(h.label===void 0){var p;return he(he({},h),{},{label:(p=s.get(h.value))===null||p===void 0?void 0:p.label})}return h}),c=new Map,d=new Map;return l.forEach(function(h){c.set(h.value,h),d.set(h.value,t.get(h.value)||a.get(h.value))}),n.current.values=c,n.current.options=d,l},[e,t]),i=v.useCallback(function(o){return t.get(o)||n.current.options.get(o)},[t]);return[r,i]};function Zv(e,t){return lA(e).join("").toUpperCase().includes(t)}const hH=function(e,t,n,r,i){return v.useMemo(function(){if(!n||r===!1)return e;var o=t.options,s=t.label,a=t.value,l=[],c=typeof r=="function",d=n.toUpperCase(),h=c?r:function(g,b){return i?Zv(b[i],d):b[o]?Zv(b[s!=="children"?s:"label"],d):Zv(b[a],d)},p=c?function(g){return Ib(g)}:function(g){return g};return e.forEach(function(g){if(g[o]){var b=h(n,p(g));if(b)l.push(g);else{var k=g[o].filter(function(y){return h(n,p(y))});k.length&&l.push(he(he({},g),{},Ee({},o,k)))}return}h(n,p(g))&&l.push(g)}),l},[e,r,i,n,t])};var vx=0,pH=go();function gH(){var e;return pH?(e=vx,vx+=1):e="TEST_OR_SSR",e}function mH(e){var t=v.useState(),n=_e(t,2),r=n[0],i=n[1];return v.useEffect(function(){i("rc_select_".concat(gH()))},[]),e||r}var vH=["children","value"],_H=["children"];function yH(e){var t=e,n=t.key,r=t.props,i=r.children,o=r.value,s=Un(r,vH);return he({key:n,value:o!==void 0?o:n,children:i},s)}function hA(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return dg(e).map(function(n,r){if(!v.isValidElement(n)||!n.type)return null;var i=n,o=i.type.isSelectOptGroup,s=i.key,a=i.props,l=a.children,c=Un(a,_H);return t||!o?yH(n):he(he({key:"__RC_SELECT_GRP__".concat(s===null?r:s,"__"),label:s},c),{},{options:hA(l)})}).filter(function(n){return n})}function bH(e,t,n,r,i){return v.useMemo(function(){var o=e,s=!e;s&&(o=hA(t));var a=new Map,l=new Map,c=function(p,g,b){b&&typeof b=="string"&&p.set(g[b],g)};function d(h){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=0;g<h.length;g+=1){var b=h[g];!b[n.options]||p?(a.set(b[n.value],b),c(l,b,n.label),c(l,b,r),c(l,b,i)):d(b[n.options],!0)}}return d(o),{options:o,valueOptions:a,labelOptions:l}},[e,t,n,r,i])}function _x(e){var t=v.useRef();t.current=e;var n=v.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}var pA=function(){return null};pA.isSelectOptGroup=!0;var gA=function(){return null};gA.isSelectOption=!0;var mA=v.createContext(null);function SH(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var wH=["disabled","title","children","style","className"];function yx(e){return typeof e=="string"||typeof e=="number"}var EH=function(t,n){var r=RB(),i=r.prefixCls,o=r.id,s=r.open,a=r.multiple,l=r.mode,c=r.searchValue,d=r.toggleOpen,h=r.notFoundContent,p=r.onPopupScroll,g=v.useContext(mA),b=g.flattenOptions,k=g.onActiveValue,y=g.defaultActiveFirstOption,_=g.onSelect,w=g.menuItemSelectedIcon,x=g.rawValues,C=g.fieldNames,F=g.virtual,M=g.listHeight,L=g.listItemHeight,N="".concat(i,"-item"),V=bL(function(){return b},[s,b],function(le,ee){return ee[0]&&le[1]!==ee[1]}),Y=v.useRef(null),J=function(ee){ee.preventDefault()},H=function(ee){Y.current&&Y.current.scrollTo(typeof ee=="number"?{index:ee}:ee)},D=function(ee){for(var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,fe=V.length,ge=0;ge<fe;ge+=1){var we=(ee+ge*ie+fe)%fe,Ne=V[we],be=Ne.group,Ye=Ne.data;if(!be&&!Ye.disabled)return we}return-1},T=v.useState(function(){return D(0)}),W=_e(T,2),B=W[0],G=W[1],te=function(ee){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;G(ee);var fe={source:ie?"keyboard":"mouse"},ge=V[ee];if(!ge){k(null,-1,fe);return}k(ge.value,ee,fe)};v.useEffect(function(){te(y!==!1?D(0):-1)},[V.length,c]);var re=v.useCallback(function(le){return x.has(le)&&l!=="combobox"},[l,tr(x).toString(),x.size]);v.useEffect(function(){var le=setTimeout(function(){if(!a&&s&&x.size===1){var ie=Array.from(x)[0],fe=V.findIndex(function(ge){var we=ge.data;return we.value===ie});fe!==-1&&(te(fe),H(fe))}});if(s){var ee;(ee=Y.current)===null||ee===void 0||ee.scrollTo(void 0)}return function(){return clearTimeout(le)}},[s,c,b.length]);var ae=function(ee){ee!==void 0&&_(ee,{selected:!x.has(ee)}),a||d(!1)};if(v.useImperativeHandle(n,function(){return{onKeyDown:function(ee){var ie=ee.which,fe=ee.ctrlKey;switch(ie){case Ce.N:case Ce.P:case Ce.UP:case Ce.DOWN:{var ge=0;if(ie===Ce.UP?ge=-1:ie===Ce.DOWN?ge=1:SH()&&fe&&(ie===Ce.N?ge=1:ie===Ce.P&&(ge=-1)),ge!==0){var we=D(B+ge,ge);H(we),te(we,!0)}break}case Ce.ENTER:{var Ne=V[B];Ne&&!Ne.data.disabled?ae(Ne.value):ae(void 0),s&&ee.preventDefault();break}case Ce.ESC:d(!1),s&&ee.stopPropagation()}},onKeyUp:function(){},scrollTo:function(ee){H(ee)}}}),V.length===0)return v.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(N,"-empty"),onMouseDown:J},h);var K=Object.keys(C).map(function(le){return C[le]}),R=function(ee){return ee.label};function O(le,ee){var ie=le.group;return{role:ie?"presentation":"option",id:"".concat(o,"_list_").concat(ee)}}var j=function(ee){var ie=V[ee];if(!ie)return null;var fe=ie.data||{},ge=fe.value,we=ie.group,Ne=vg(fe,!0),be=R(ie);return ie?v.createElement("div",ot({"aria-label":typeof be=="string"&&!we?be:null},Ne,{key:ee},O(ie,ee),{"aria-selected":re(ge)}),ge):null},Z={role:"listbox",id:"".concat(o,"_list")};return v.createElement(v.Fragment,null,F&&v.createElement("div",ot({},Z,{style:{height:0,width:0,overflow:"hidden"}}),j(B-1),j(B),j(B+1)),v.createElement(pm,{itemKey:"key",ref:Y,data:V,height:M,itemHeight:L,fullHeight:!1,onMouseDown:J,onScroll:p,virtual:F,innerProps:F?null:Z},function(le,ee){var ie,fe=le.group,ge=le.groupOption,we=le.data,Ne=le.label,be=le.value,Ye=we.key;if(fe){var Pe,$e=(Pe=we.title)!==null&&Pe!==void 0?Pe:yx(Ne)?Ne.toString():void 0;return v.createElement("div",{className:Te(N,"".concat(N,"-group")),title:$e},Ne!==void 0?Ne:Ye)}var it=we.disabled,ht=we.title;we.children;var at=we.style,Le=we.className,st=Un(we,wH),nt=gL(st,K),Xe=re(be),ze="".concat(N,"-option"),rt=Te(N,ze,Le,(ie={},Ee(ie,"".concat(ze,"-grouped"),ge),Ee(ie,"".concat(ze,"-active"),B===ee&&!it),Ee(ie,"".concat(ze,"-disabled"),it),Ee(ie,"".concat(ze,"-selected"),Xe),ie)),et=R(le),pt=!w||typeof w=="function"||Xe,wt=typeof et=="number"?et:et||be,Mt=yx(wt)?wt.toString():void 0;return ht!==void 0&&(Mt=ht),v.createElement("div",ot({},vg(nt),F?{}:O(le,ee),{"aria-selected":Xe,className:rt,title:Mt,onMouseMove:function(){B===ee||it||te(ee)},onClick:function(){it||ae(be)},style:at}),v.createElement("div",{className:"".concat(ze,"-content")},wt),v.isValidElement(w)||Xe,pt&&v.createElement(yg,{className:"".concat(N,"-option-state"),customizeIcon:w,customizeIconProps:{isSelected:Xe}},Xe?"✓":null))}))},vA=v.forwardRef(EH);vA.displayName="OptionList";var CH=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"],xH=["inputValue"];function kH(e){return!e||Tn(e)!=="object"}var IH=v.forwardRef(function(e,t){var n=e.id,r=e.mode,i=e.prefixCls,o=i===void 0?"rc-select":i,s=e.backfill,a=e.fieldNames,l=e.inputValue,c=e.searchValue,d=e.onSearch,h=e.autoClearSearchValue,p=h===void 0?!0:h,g=e.onSelect,b=e.onDeselect,k=e.dropdownMatchSelectWidth,y=k===void 0?!0:k,_=e.filterOption,w=e.filterSort,x=e.optionFilterProp,C=e.optionLabelProp,F=e.options,M=e.children,L=e.defaultActiveFirstOption,N=e.menuItemSelectedIcon,V=e.virtual,Y=e.listHeight,J=Y===void 0?200:Y,H=e.listItemHeight,D=H===void 0?20:H,T=e.value,W=e.defaultValue,B=e.labelInValue,G=e.onChange,te=Un(e,CH),re=mH(n),ae=Rb(r),K=!!(!F&&M),R=v.useMemo(function(){return _===void 0&&r==="combobox"?!1:_},[_,r]),O=v.useMemo(function(){return fA(a,K)},[JSON.stringify(a),K]),j=Lc("",{value:c!==void 0?c:l,postState:function(xe){return xe||""}}),Z=_e(j,2),le=Z[0],ee=Z[1],ie=bH(F,M,O,x,C),fe=ie.valueOptions,ge=ie.labelOptions,we=ie.options,Ne=v.useCallback(function(ye){var xe=lA(ye);return xe.map(function(ve){var Ge,Je,dt,an,yn;if(kH(ve))Ge=ve;else{var mr;dt=ve.key,Je=ve.label,Ge=(mr=ve.value)!==null&&mr!==void 0?mr:dt}var Ut=fe.get(Ge);if(Ut){var Nt;Je===void 0&&(Je=Ut==null?void 0:Ut[C||O.label]),dt===void 0&&(dt=(Nt=Ut==null?void 0:Ut.key)!==null&&Nt!==void 0?Nt:Ge),an=Ut==null?void 0:Ut.disabled,yn=Ut==null?void 0:Ut.title}return{label:Je,value:Ge,key:dt,disabled:an,title:yn}})},[O,C,fe]),be=Lc(W,{value:T}),Ye=_e(be,2),Pe=Ye[0],$e=Ye[1],it=v.useMemo(function(){var ye,xe=Ne(Pe);return r==="combobox"&&!((ye=xe[0])!==null&&ye!==void 0&&ye.value)?[]:xe},[Pe,Ne,r]),ht=fH(it,fe),at=_e(ht,2),Le=at[0],st=at[1],nt=v.useMemo(function(){if(!r&&Le.length===1){var ye=Le[0];if(ye.value===null&&(ye.label===null||ye.label===void 0))return[]}return Le.map(function(xe){var ve;return he(he({},xe),{},{label:(ve=xe.label)!==null&&ve!==void 0?ve:xe.value})})},[r,Le]),Xe=v.useMemo(function(){return new Set(Le.map(function(ye){return ye.value}))},[Le]);v.useEffect(function(){if(r==="combobox"){var ye,xe=(ye=Le[0])===null||ye===void 0?void 0:ye.value;ee(QB(xe)?String(xe):"")}},[Le]);var ze=_x(function(ye,xe){var ve,Ge=xe??ye;return ve={},Ee(ve,O.value,ye),Ee(ve,O.label,Ge),ve}),rt=v.useMemo(function(){if(r!=="tags")return we;var ye=tr(we),xe=function(Ge){return fe.has(Ge)};return tr(Le).sort(function(ve,Ge){return ve.value<Ge.value?-1:1}).forEach(function(ve){var Ge=ve.value;xe(Ge)||ye.push(ze(Ge,ve.label))}),ye},[ze,we,fe,Le,r]),et=hH(rt,O,le,R,x),pt=v.useMemo(function(){return r!=="tags"||!le||et.some(function(ye){return ye[x||"value"]===le})?et:[ze(le)].concat(tr(et))},[ze,x,r,et,le]),wt=v.useMemo(function(){return w?tr(pt).sort(function(ye,xe){return w(ye,xe)}):pt},[pt,w]),Mt=v.useMemo(function(){return aH(wt,{fieldNames:O,childrenAsData:K})},[wt,O,K]),yt=function(xe){var ve=Ne(xe);if($e(ve),G&&(ve.length!==Le.length||ve.some(function(dt,an){var yn;return((yn=Le[an])===null||yn===void 0?void 0:yn.value)!==(dt==null?void 0:dt.value)}))){var Ge=B?ve:ve.map(function(dt){return dt.value}),Je=ve.map(function(dt){return Ib(st(dt.value))});G(ae?Ge:Ge[0],ae?Je:Je[0])}},sn=v.useState(null),$n=_e(sn,2),qe=$n[0],Qe=$n[1],bt=v.useState(0),Ht=_e(bt,2),Ot=Ht[0],mn=Ht[1],Vt=L!==void 0?L:r!=="combobox",vn=v.useCallback(function(ye,xe){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ge=ve.source,Je=Ge===void 0?"keyboard":Ge;mn(xe),s&&r==="combobox"&&ye!==null&&Je==="keyboard"&&Qe(String(ye))},[s,r]),qt=function(xe,ve,Ge){var Je=function(){var Qn,Yt=st(xe);return[B?{label:Yt==null?void 0:Yt[O.label],value:xe,key:(Qn=Yt==null?void 0:Yt.key)!==null&&Qn!==void 0?Qn:xe}:xe,Ib(Yt)]};if(ve&&g){var dt=Je(),an=_e(dt,2),yn=an[0],mr=an[1];g(yn,mr)}else if(!ve&&b&&Ge!=="clear"){var Ut=Je(),Nt=_e(Ut,2),Br=Nt[0],Li=Nt[1];b(Br,Li)}},_n=_x(function(ye,xe){var ve,Ge=ae?xe.selected:!0;Ge?ve=ae?[].concat(tr(Le),[ye]):[ye]:ve=Le.filter(function(Je){return Je.value!==ye}),yt(ve),qt(ye,Ge),r==="combobox"?Qe(""):(!Rb||p)&&(ee(""),Qe(""))}),Pt=function(xe,ve){yt(xe);var Ge=ve.type,Je=ve.values;(Ge==="remove"||Ge==="clear")&&Je.forEach(function(dt){qt(dt.value,!1,Ge)})},zr=function(xe,ve){if(ee(xe),Qe(null),ve.source==="submit"){var Ge=(xe||"").trim();if(Ge){var Je=Array.from(new Set([].concat(tr(Xe),[Ge])));yt(Je),qt(Ge,!0),ee("")}return}ve.source!=="blur"&&(r==="combobox"&&yt(xe),d==null||d(xe))},ar=function(xe){var ve=xe;r!=="tags"&&(ve=xe.map(function(Je){var dt=ge.get(Je);return dt==null?void 0:dt.value}).filter(function(Je){return Je!==void 0}));var Ge=Array.from(new Set([].concat(tr(Xe),tr(ve))));yt(Ge),Ge.forEach(function(Je){qt(Je,!0)})},qn=v.useMemo(function(){var ye=V!==!1&&y!==!1;return he(he({},ie),{},{flattenOptions:Mt,onActiveValue:vn,defaultActiveFirstOption:Vt,onSelect:_n,menuItemSelectedIcon:N,rawValues:Xe,fieldNames:O,virtual:ye,listHeight:J,listItemHeight:D,childrenAsData:K})},[ie,Mt,vn,Vt,_n,N,Xe,O,V,y,J,D,K]);return v.createElement(mA.Provider,{value:qn},v.createElement(dH,ot({},te,{id:re,prefixCls:o,ref:t,omitDomProps:xH,mode:r,displayValues:nt,onDisplayValuesChange:Pt,searchValue:le,onSearch:zr,autoClearSearchValue:p,onSearchSplit:ar,dropdownMatchSelectWidth:y,OptionList:vA,emptyOptions:!Mt.length,activeValue:qe,activeDescendantId:"".concat(re,"_list_").concat(Ot)})))}),ZS=IH;ZS.Option=gA;ZS.OptGroup=pA;const bx=e=>E(ZS,{open:e.open,placement:"bottomRight",style:e.style,options:e.options,value:e.value,onChange:e.onChange}),RH=()=>{const e=Ft(gf);return ut(e.onThemeConfigChanged),ce(Q.Fragment,{children:[E($s,{title:z("settings_appearance.theme","Theme"),subtitle:z("settings_appearance.theme_subtitle","Change the theme of the application"),children:E(bx,{options:[{label:z("settings_appearance.light","Light"),value:"light"},{label:z("settings_appearance.dark","Dark"),value:"dark"},{label:z("settings_appearance.auto","Auto"),value:"auto"}],value:e.themeConfig,onChange:t=>{e.setThemeConfig(t)}})}),E($s,{title:z("settings_about.language","Language"),subtitle:z("settings_about.language_subtitle","language of the application"),children:E(bx,{value:globalThis.language,options:[{label:"English",value:"en-US"},{label:"简体中文",value:"zh-CN"}],onChange:t=>{localStorage.setItem("hamsterbase-locale",t),window.location.reload()}})})]})},MH=e=>{const t=e.controller;return ut(t.onSettingsTabChange),E("div",{className:Fr.tabSelectors,children:t.tabs.map(n=>E("div",{"data-test-id":`menu-settings-${n.key}`,className:Te(Fr.tabSelector,{[Fr.selected]:t.currentTab.key===n.key}),onClick:()=>{t.selectTab(n.key)},children:n.label},n.key))})},$s=({title:e,subtitle:t,childrenDisplay:n="right",children:r})=>ce("div",{className:Fr.settingItem,children:[ce("div",{className:Fr.itemLeft,children:[E(JL,{children:e}),E(Oc,{children:t})]}),E("div",{className:n==="right"?Fr.itemRight:Fr.itemContent,children:r})]}),TH=e=>{const t=e.controller;ut(t.onSettingsTabChange);const n=Ft(gf);return ut(n.onThemeConfigChanged),E("div",{className:Fr.settingPage,children:ce("div",{className:Fr.tabContainer,children:[E(MH,{controller:t}),ce("div",{className:Te(Fr.tabContent,t.currentTab.key==="remotes"&&Fr.tabContentRemote),children:[t.currentTab.key==="api"&&E(dB,{}),t.currentTab.key==="remotes"&&E(U6,{}),t.currentTab.key==="appearance"&&E(RH,{}),t.currentTab.key==="about"&&ce(Q.Fragment,{children:[E(IB,{}),E($s,{title:z("settings_about.guide","Guide"),subtitle:z("settings_about.guide_subtitle","Visit the guide of hamsterbase"),children:E(pr,{type:"primary",onClick:()=>{window.open(tc("guide"),"_blank")},children:z("settings_about.open","Open")})})]})]})]})})},LH="_modal-container_1vbbw_1",AH="_tab-mask_1vbbw_13",Sx={"modal-container":"_modal-container_1vbbw_1",modalContainer:LH,"tab-mask":"_tab-mask_1vbbw_13",tabMask:AH},OH=e=>e.open?ce("div",{children:[E("div",{className:Sx.modalContainer,children:e.children}),E("div",{className:Sx.tabMask,onClick:()=>{e.handleClose()}})]}):null,PH="_container_ij6h5_1",NH={container:PH},DH="_check-box_z0exw_1",FH="_check-mark_z0exw_14",VH="_small_z0exw_39",Jv={"check-box":"_check-box_z0exw_1",checkBox:DH,"check-mark":"_check-mark_z0exw_14",checkMark:FH,small:VH},_A=e=>ce("label",{style:e.style,className:Te(Jv.checkBox,Jv[e.size||""]),children:[E("span",{children:e.children}),E("input",{type:"checkbox",checked:e.checked,onChange:e.onChange}),E("span",{className:Jv.checkMark})]}),UH=()=>{const[e,t]=v.useState(!1),[n,r]=v.useState(0),i=Ft($p),o=i.currentPrivacyVersion,s=i.currentTermsVersion,a=i.show,l=URL.createObjectURL(new Blob([i.currentPrivacyDocument],{type:"text/html"})),c=URL.createObjectURL(new Blob([i.currentTermsDocument],{type:"text/html"}));return E(OH,{open:a,handleClose:()=>{},children:ce("div",{className:NH.container,children:[E(_A,{size:"small",checked:e,onChange:d=>{t(d.target.checked)}}),ce("span",{children:[z("license.agree_part_1","I have read and agree to the"),E(kb,{type:"primary",text:z("legal.eula","EULA"),href:c}),z("license.agree_part_2","and"),E(kb,{type:"primary",text:z("legal.privacy_policy","Privacy Policy"),href:l})]}),E(pr,{type:"primary",size:"small",disabled:!e,onClick:async()=>{await i.agree({termsVersion:o,privacyVersion:s}),await i.init(),r(d=>d+1)},children:z("license.agree_ok","Ok")})]})})};class wx{constructor(t,n,r){this.desc=t,this.model=n,this.index=r,this._onStateChange=new Oe,this.onStateChange=this._onStateChange.event,this._searchQuery=null,this.focusItem=0}get searchQuery(){return this._searchQuery??""}updateFilterQuery(t){this._searchQuery=t,this.focusItem=0,this._onStateChange.fire()}get rightOperands(){return this.desc.rightOperands.filter(t=>this.searchQuery?t.labels.toLocaleLowerCase().includes(this.searchQuery.toLocaleLowerCase()):!0)}select(t){this.notInModel?this.model.addFilter(this.desc.initValue(t)):this.model.updateFilter(this.index,{rightOperand:t})}selectPrevious(){this.focusItem=Math.max(this.focusItem-1,0),this._onStateChange.fire()}selectNext(){this.focusItem=Math.min(this.focusItem+1,this.rightOperands.length-1),this._onStateChange.fire()}setFocusItem(t){this.focusItem=t,this._onStateChange.fire()}get notInModel(){return this.index===void 0}}class Ex{constructor(t,n,r){this.desc=t,this.model=n,this.index=r,this._onDispose=new Oe,this.onDispose=this._onDispose.event;let i=[];typeof r=="number"&&(i=this.model.filters[r].rightOperand),this.controller=new eM(i,t.selections.map(o=>({label:o,id:o}))),this.controller.onItemStatusChange(o=>{this.notInModel?this.index=this.model.addFilter({type:xt.multiple_selection,key:this.desc.key,rightOperand:o.currentOptions,operator:!0}):this.model.updateFilter(this.index,{rightOperand:o.currentOptions})}),this.controller.onMultipleSelectDispose(()=>{this.dispose()})}get notInModel(){return this.index===void 0}dispose(){this._onDispose.fire()}}class vi{constructor(t,n){this.model=t,this.desc=n,this.showPanel=!1,this.showListPanel=!1,this.pos=null,this._searchQuery=null,this.widget=null,this.currentIndex=null,this._onDidViewStateChange=new Oe,this.onDidViewStateChange=this._onDidViewStateChange.event,this._onSave=new Oe,this.onSave=this._onSave.event,this.show=this.show.bind(this),this.hide=this.hide.bind(this),this._activeDesc=0}get filterDesc(){return this.desc.filter(t=>this._searchQuery?[t.label,t.key].some(n=>n.toLocaleLowerCase().includes(this._searchQuery.toLocaleLowerCase())):!0)}get searchQuery(){return this._searchQuery??""}updateFilterQuery(t){this._searchQuery=t,this._activeDesc=0,this._onDidViewStateChange.fire()}get activeDescIndex(){return this._activeDesc}cleanAll(){this.model.empty()}selectNextDesc(){this._activeDesc=Math.min(this._activeDesc+1,this.filterDesc.length-1),this._onDidViewStateChange.fire()}FocusDesc(t){this._activeDesc=t,this._onDidViewStateChange.fire()}selectPreviousDesc(){this._activeDesc=Math.max(0,this._activeDesc-1),this._onDidViewStateChange.fire()}show(t){this.pos=t,this.showPanel=!0,this._activeDesc=0,this._searchQuery=null,this._onDidViewStateChange.fire()}hide(){this.showPanel=!1,this._onDidViewStateChange.fire()}complete(){this.widget=null,this._onDidViewStateChange.fire()}updateDesc(t){this.desc=t}select(t){switch(t.type){case xt.constant:{this.model.addFilter({type:xt.constant,key:t.key,operator:!0});break}case xt.multiple_selection:{this.widget=new Ex(t,this.model),this.widget.onDispose(()=>{this.complete()});break}case xt.select:{this.widget=new wx(t,this.model);break}}this.showPanel=!1,this._onDidViewStateChange.fire()}switchOperator(t){const n=this.model.getFilter(t);switch(n.type){case xt.constant:{this.model.updateFilter(t,{operator:!n.operator});break}case xt.multiple_selection:{const r=this.desc.find(i=>i.key===n.key);this.model.updateFilter(t,r.changeOperator(n));break}case xt.select:{const r=this.desc.find(i=>i.key===n.key);this.model.updateFilter(t,r.changeOperator(n));break}}}edit(t,n){this.pos=n;const r=this.model.getFilter(t),i=this.desc.find(o=>o.key===r.key);switch(i.type){case xt.multiple_selection:{this.widget=new Ex(i,this.model,t),this.widget.onDispose(()=>{this.complete()});break}case xt.select:{this.widget=new wx(i,this.model,t);break}}this._onDidViewStateChange.fire()}delete(t){this.model.deleteFilter(t)}get showSave(){return this.model.filters.length>0}get showMatch(){return!0}get MatchAll(){return this.model.match==="and"}save(){this._onSave.fire()}}vi.id="FilterPanelView";De.registerCommandAndKeybindingRule({id:dV,weight:Fe.WorkbenchContrib+5,when:Lt.and(k0,Lt.not(Dg)),primary:U.KEY_F,handler:e=>{const t=e.get(It).getViewWithId(vi.id);if(t){const n=document.getElementById("add-filter-icon");if(n){const r=n.getBoundingClientRect(),i={x:r.left,y:r.top+34};t.show(i)}}}});De.registerCommandAndKeybindingRule({id:fV,weight:Fe.WorkbenchContrib+5,when:Lt.and(k0,qI),primary:U.KEY_S|ft.CtrlCmd,handler:e=>{const t=e.get(It).getViewWithId(vi.id);t&&t.save()}});De.registerCommandAndKeybindingRule({id:pV,weight:Fe.WorkbenchContrib+5,when:df,primary:U.DownArrow,handler:e=>{const t=e.get(It).getViewWithId(vi.id);t&&t.selectNextDesc()}});De.registerCommandAndKeybindingRule({id:gV,weight:Fe.WorkbenchContrib+5,when:df,primary:U.UpArrow,handler:e=>{const t=e.get(It).getViewWithId(vi.id);t&&t.selectPreviousDesc()}});De.registerCommandAndKeybindingRule({id:bV,weight:Fe.WorkbenchContrib+5,when:Lt.and(Pg,df),primary:U.Enter,handler:e=>{const t=e.get(It).getViewWithId(vi.id);if(t){const n=t.filterDesc[t.activeDescIndex];n&&t.select(n)}}});De.registerCommandAndKeybindingRule({id:hV,weight:Fe.WorkbenchContrib+5,when:Lt.and(Pg,df),primary:U.Escape,handler:e=>{const t=e.get(It).getViewWithId(vi.id);t&&t.hide()}});De.registerCommandAndKeybindingRule({id:mV,weight:Fe.WorkbenchContrib+5,when:uf,primary:U.DownArrow,handler:e=>{const t=e.get(It).getViewWithId(vi.id);if(t){const n=t.widget;n&&n.selectNext()}}});De.registerCommandAndKeybindingRule({id:vV,weight:Fe.WorkbenchContrib+5,when:uf,primary:U.UpArrow,handler:e=>{const t=e.get(It).getViewWithId(vi.id);if(t){const n=t.widget;n&&n.selectPrevious()}}});De.registerCommandAndKeybindingRule({id:_V,weight:Fe.WorkbenchContrib+5,when:uf,primary:U.Enter,handler:e=>{const t=e.get(It).getViewWithId(vi.id);if(t){const n=t.widget;n&&n.rightOperands.length>0&&n.select(n.rightOperands[n.focusItem].count),t.complete()}}});De.registerCommandAndKeybindingRule({id:yV,weight:Fe.WorkbenchContrib+5,when:uf,primary:U.Escape,handler:e=>{const t=e.get(It).getViewWithId(vi.id);t&&t.complete()}});De.registerCommandAndKeybindingRule({id:YI,weight:Fe.WorkbenchContrib+5,handler:e=>{const t=e.get(It).getViewWithId(vi.id);t&&t.cleanAll()}});var yA={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Mg,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,i,o){var s=i.prototype,a=s.format;o.en.formats=n,s.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,d=function(h,p){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(g,b,k){var y=k&&k.toUpperCase();return b||p[k]||n[k]||p[y].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(_,w,x){return w||x.slice(1)})})}(l,c===void 0?{}:c);return a.call(this,d)}}})})(yA);var $H=yA.exports;const WH=rl($H);var zH=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,BH=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],e_={},Vi;function HH(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&e_[n])return e_[n];var r=window.getComputedStyle(e),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),s=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),a=BH.map(function(c){return"".concat(c,":").concat(r.getPropertyValue(c))}).join(";"),l={sizingStyle:a,paddingSize:o,borderSize:s,boxSizing:i};return t&&n&&(e_[n]=l),l}function jH(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Vi||(Vi=document.createElement("textarea"),Vi.setAttribute("tab-index","-1"),Vi.setAttribute("aria-hidden","true"),document.body.appendChild(Vi)),e.getAttribute("wrap")?Vi.setAttribute("wrap",e.getAttribute("wrap")):Vi.removeAttribute("wrap");var i=HH(e,t),o=i.paddingSize,s=i.borderSize,a=i.boxSizing,l=i.sizingStyle;Vi.setAttribute("style","".concat(l,";").concat(zH)),Vi.value=e.value||e.placeholder||"";var c=void 0,d=void 0,h,p=Vi.scrollHeight;if(a==="border-box"?p+=s:a==="content-box"&&(p-=o),n!==null||r!==null){Vi.value=" ";var g=Vi.scrollHeight-o;n!==null&&(c=g*n,a==="border-box"&&(c=c+o+s),p=Math.max(c,p)),r!==null&&(d=g*r,a==="border-box"&&(d=d+o+s),h=p>d?"":"hidden",p=Math.min(d,p))}var b={height:p,overflowY:h,resize:"none"};return c&&(b.minHeight=c),d&&(b.maxHeight=d),b}var KH=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],t_=0,n_=1,r_=2,GH=v.forwardRef(function(e,t){var n=e,r=n.prefixCls;n.onPressEnter;var i=n.defaultValue,o=n.value,s=n.autoSize,a=n.onResize,l=n.className,c=n.style,d=n.disabled,h=n.onChange;n.onInternalAutoSize;var p=Un(n,KH),g=Lc(i,{value:o,postState:function(j){return j??""}}),b=_e(g,2),k=b[0],y=b[1],_=function(j){y(j.target.value),h==null||h(j)},w=v.useRef();v.useImperativeHandle(t,function(){return{textArea:w.current}});var x=v.useMemo(function(){return s&&Tn(s)==="object"?[s.minRows,s.maxRows]:[]},[s]),C=_e(x,2),F=C[0],M=C[1],L=!!s,N=function(){try{if(document.activeElement===w.current){var j=w.current,Z=j.selectionStart,le=j.selectionEnd,ee=j.scrollTop;w.current.setSelectionRange(Z,le),w.current.scrollTop=ee}}catch{}},V=v.useState(r_),Y=_e(V,2),J=Y[0],H=Y[1],D=v.useState(),T=_e(D,2),W=T[0],B=T[1],G=function(){H(t_)};Cn(function(){L&&G()},[o,F,M,L]),Cn(function(){if(J===t_)H(n_);else if(J===n_){var O=jH(w.current,!1,F,M);H(r_),B(O)}else N()},[J]);var te=v.useRef(),re=function(){Gn.cancel(te.current)},ae=function(j){J===r_&&(a==null||a(j),s&&(re(),te.current=Gn(function(){G()})))};v.useEffect(function(){return re},[]);var K=L?W:null,R=he(he({},c),K);return(J===t_||J===n_)&&(R.overflowY="hidden",R.overflowX="hidden"),v.createElement(ba,{onResize:ae,disabled:!(s||a)},v.createElement("textarea",ot({},p,{ref:w,style:R,className:Te(r,l,Ee({},"".concat(r,"-disabled"),d)),disabled:d,value:k,onChange:_})))}),YH=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function bA(e,t){return tr(e||"").slice(0,t).join("")}function Cx(e,t,n,r){var i=n;return e?i=bA(n,r):tr(t||"").length<n.length&&tr(n||"").length>r&&(i=t),i}var qH=Q.forwardRef(function(e,t){var n,r=e.defaultValue,i=e.value,o=e.onFocus,s=e.onBlur,a=e.onChange,l=e.allowClear,c=e.maxLength,d=e.onCompositionStart,h=e.onCompositionEnd,p=e.suffix,g=e.prefixCls,b=g===void 0?"rc-textarea":g,k=e.classes,y=e.showCount,_=e.className,w=e.style,x=e.disabled,C=e.hidden,F=e.classNames,M=e.styles,L=e.onResize,N=Un(e,YH),V=Lc(r,{value:i,defaultValue:r}),Y=_e(V,2),J=Y[0],H=Y[1],D=v.useRef(null),T=Q.useState(!1),W=_e(T,2),B=W[0],G=W[1],te=Q.useState(!1),re=_e(te,2),ae=re[0],K=re[1],R=Q.useRef(),O=Q.useRef(0),j=Q.useState(null),Z=_e(j,2),le=Z[0],ee=Z[1],ie=function(){D.current.textArea.focus()};v.useImperativeHandle(t,function(){return{resizableTextArea:D.current,focus:ie,blur:function(){D.current.textArea.blur()}}}),v.useEffect(function(){G(function(Xe){return!x&&Xe})},[x]);var fe=Number(c)>0,ge=function(ze){K(!0),R.current=J,O.current=ze.currentTarget.selectionStart,d==null||d(ze)},we=function(ze){K(!1);var rt=ze.currentTarget.value;if(fe){var et,pt=O.current>=c+1||O.current===((et=R.current)===null||et===void 0?void 0:et.length);rt=Cx(pt,R.current,rt,c)}rt!==J&&(H(rt),wd(ze.currentTarget,ze,a,rt)),h==null||h(ze)},Ne=function(ze){var rt=ze.target.value;if(!ae&&fe){var et=ze.target.selectionStart>=c+1||ze.target.selectionStart===rt.length||!ze.target.selectionStart;rt=Cx(et,J,rt,c)}H(rt),wd(ze.currentTarget,ze,a,rt)},be=function(ze){var rt=N.onPressEnter,et=N.onKeyDown;ze.key==="Enter"&&rt&&rt(ze),et==null||et(ze)},Ye=function(ze){G(!0),o==null||o(ze)},Pe=function(ze){G(!1),s==null||s(ze)},$e=function(ze){H(""),ie(),wd(D.current.textArea,ze,a)},it=pb(J);!ae&&fe&&i==null&&(it=bA(it,c));var ht=p,at;if(y){var Le=tr(it).length;Tn(y)==="object"?at=y.formatter({value:it,count:Le,maxLength:c}):at="".concat(Le).concat(fe?" / ".concat(c):""),ht=ce(tm,{children:[ht,E("span",{className:Te("".concat(b,"-data-count"),F==null?void 0:F.count),style:M==null?void 0:M.count,children:at})]})}var st=function(ze){L==null||L(ze),le===null?ee("mounted"):le==="mounted"&&ee("resized")},nt=E(dL,{value:it,allowClear:l,handleReset:$e,suffix:ht,prefixCls:b,classes:{affixWrapper:Te(k==null?void 0:k.affixWrapper,(n={},Ee(n,"".concat(b,"-show-count"),y),Ee(n,"".concat(b,"-textarea-allow-clear"),l),n))},disabled:x,focused:B,className:_,style:he(he({},w),le==="resized"?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof at=="string"?at:void 0}},hidden:C,inputElement:E(GH,{...N,onKeyDown:be,onChange:Ne,onFocus:Ye,onBlur:Pe,onCompositionStart:ge,onCompositionEnd:we,className:F==null?void 0:F.textarea,style:he(he({},M==null?void 0:M.textarea),{},{resize:w==null?void 0:w.resize}),disabled:x,prefixCls:b,onResize:st,ref:D})});return nt});const Mb=Q.forwardRef((e,t)=>E(qH,{prefixCls:"bc-textarea",value:e.value,onChange:e.onChange,ref:t,autoSize:e.autoSize,onFocus:e.onFocus,className:e.className,onBlur:e.onBlur})),QH="_add-button_a85u3_1",XH="_add-label-widget-container_a85u3_15",xx={"add-button":"_add-button_a85u3_1",addButton:QH,"add-label-widget-container":"_add-label-widget-container_a85u3_15",addLabelWidgetContainer:XH},JS=e=>{const t=v.useRef(null),n=v.useRef(null),r=v.useRef(!1);return v.useEffect(()=>{function i(){r.current=!0}function o(){r.current=!1;const c=t.current;c&&setTimeout(()=>{c.focus()})}const s=n.current;s&&(s.addEventListener("mousedown",i,!0),s.addEventListener("mouseup",o,!0));const a=t.current,l=()=>{r.current||e.onClose()};return a&&a.addEventListener("blur",l),()=>{s&&(s.removeEventListener("mousedown",i),s.removeEventListener("mouseup",o)),a&&a.removeEventListener("blur",l)}},[]),v.useEffect(()=>{var i;(i=t.current)==null||i.focus()},[]),{inputRef:t,containerRef:n}},Sa="MultipleSelectSelect",ZH="multipleSelect.action.selectNext",JH="multipleSelect.action.selectPrevious",ej="multipleSelect.action.toggleCheckbox",tj="multipleSelect.action.spaceAddOption",nj="multipleSelect.action.addOptionAndClose",rj="multipleSelect.action.checkOptionAndClose",ij="multipleSelect.action.close",wa=new At("multipleSelectViewVisible",!1,z("ContextKey.multipleSelectViewVisible","when multiple select widget is visible")),Tf=new At("multipleSelectCursorOnOption",!0);new At("multipleSelectSomethingWaitForAdd",!0);De.registerCommandAndKeybindingRule({id:ZH,weight:Fe.WorkbenchContrib+5,when:wa,primary:U.DownArrow,handler:e=>{const t=e.get(It).getViewWithId(Sa);t&&t.cursorMoveDown()}});De.registerCommandAndKeybindingRule({id:JH,weight:Fe.WorkbenchContrib+5,when:wa,primary:U.UpArrow,handler:e=>{const t=e.get(It).getViewWithId(Sa);t&&t.cursorMoveUp()}});De.registerCommandAndKeybindingRule({id:ej,weight:Fe.WorkbenchContrib+5,when:Lt.and(wa,Tf),primary:U.Space,handler:e=>{const t=e.get(It).getViewWithId(Sa);t&&t.cursorId&&t.toggleOption(t.cursorId)}});De.registerCommandAndKeybindingRule({id:tj,weight:Fe.WorkbenchContrib+5,when:Lt.and(wa,Tf.negate()),primary:U.Space,handler:e=>{const t=e.get(It).getViewWithId(Sa);t&&t.waitForAdd&&t.addOption()}});De.registerCommandAndKeybindingRule({id:nj,weight:Fe.WorkbenchContrib+5,when:Lt.and(wa,Tf.negate()),primary:U.Enter,handler:e=>{const t=e.get(It).getViewWithId(Sa);t&&t.waitForAdd&&t.addOption().then(()=>{t.dispose()})}});De.registerCommandAndKeybindingRule({id:rj,weight:Fe.WorkbenchContrib+5,when:Lt.and(wa,Tf),primary:U.Enter,handler:e=>{const t=e.get(It).getViewWithId(Sa);t&&t.cursorId&&(t.selectOption(t.cursorId),t.dispose())}});De.registerCommandAndKeybindingRule({id:ij,weight:Fe.WorkbenchContrib+5,when:wa,primary:U.Escape,handler:e=>{const t=e.get(It).getViewWithId(Sa);t&&t.dispose()}});const oj="_multiple-select-container_blds4_1",sj="_option_blds4_19",aj="_option-text_blds4_26",lj="_add-option_blds4_34",cj="_option-active_blds4_45",uj="_content_blds4_50",Ts={"multiple-select-container":"_multiple-select-container_blds4_1",multipleSelectContainer:oj,option:sj,"option-text":"_option-text_blds4_26",optionText:aj,"add-option":"_add-option_blds4_34",addOption:lj,"option-active":"_option-active_blds4_45",optionActive:cj,content:uj},SA=e=>{const{controller:t}=e,{inputRef:n,containerRef:r}=JS({onClose:()=>{t.dispose()}}),i=g=>{t.updateSearchQuery(g.target.value)},o=v.useRef(null);Po(wa);const s=fa(Tf);ut(t.onCursorChange),ut(t.onOptionsChange),ut(t.onItemStatusChange);const a=Ft(It);v.useEffect(()=>{a.registerView(Sa,t)},[t]),s.set(t.cursorId!==null);const l=()=>t.addOption().then(()=>{t.dispose()}),c=v.useRef();v.useLayoutEffect(()=>(document.activeElement instanceof HTMLElement&&(c.current=document.activeElement),()=>{setTimeout(()=>{var g;(g=c.current)==null||g.focus()},10)}),[]),v.useEffect(()=>{t.cursorId&&o.current.scrollTo({key:t.cursorId,align:"auto"})},[t.cursorId]);const d=Math.min(7*32+16,t.options.length*32),h=g=>Te(Ts.option,{[Ts.optionActive]:t.cursorId===g}),p=Te(Ts.addOption,{[Ts.optionActive]:t.cursorId===null});return ce("div",{className:Ts.multipleSelectContainer,children:[E("input",{autoComplete:"off",ref:n,value:t.searchQuery,onChange:i}),ce("div",{className:Ts.content,ref:r,children:[E(pm,{ref:o,data:t.options,height:d,itemHeight:100,itemKey:"id",children:g=>ce("div",{"data-multiple-select-id":g.id,onMouseEnter:()=>t.cursorMoveTo(g.id),className:h(g.id),onClick:()=>t.toggleOption(g.id),children:[E(_A,{size:"small",checked:t.isOptionSelected(g.id),onChange:b=>t.toggleOption(g.id)}),E("div",{title:g.label,className:Ts.optionText,children:g.label})]})}),t.waitForAdd!==null&&E("div",{style:{borderTop:"1px solid rgba(22, 24, 35, 0.1)"},children:ce("div",{onMouseEnter:()=>t.cursorMoveTo(null),className:p,children:[E(VS,{theme:"filled",size:"12"}),ce("div",{className:Ts.optionText,onClick:()=>l(),children:['create new label: "',t.waitForAdd,'"']})]})})]})]})},dj=e=>{const t=e.model,n=Ft(ma);ut(n.onWebpagesDidChange),ut(t==null?void 0:t.textModel.onModelChanged),ut(t==null?void 0:t.onStateChange);const r=v.useRef(null),[i,o]=v.useState({x:0,y:0});return v.useEffect(()=>{if(r.current){const s=r.current.getBoundingClientRect();o({x:s.x??10,y:s.y??10})}},[t==null?void 0:t.tagEditController]),ce("div",{children:[(t==null?void 0:t.tagEditController)&&E("div",{className:xx.addLabelWidgetContainer,style:{top:i.y,left:i.x-10},children:E(SA,{controller:t==null?void 0:t.tagEditController})}),E(No,{placement:"right",title:z("webpage_detail.add_label","Add Label"),keyCode:U.KEY_T,children:ce("div",{ref:r,className:xx.addButton,onClick:()=>{t==null||t.startEditTag()},children:[E(VS,{theme:"filled",size:"12"}),z("webpage_detail.add_label","Add Label")]})})]})},fj="_container_nkd6q_1",hj="_item_nkd6q_6",pj="_item-title_nkd6q_9",gj="_empty_nkd6q_25",xr={container:fj,item:hj,"item-title":"_item-title_nkd6q_9",itemTitle:pj,empty:gj},mj="_tag_17a22_3",vj="_label_17a22_11",_j="_close-icon-container_17a22_15",yj="_close-icon_17a22_15",bj="_tag-container_17a22_28",Fu={tag:mj,label:vj,"close-icon-container":"_close-icon-container_17a22_15",closeIconContainer:_j,"close-icon":"_close-icon_17a22_15",closeIcon:yj,"tag-container":"_tag-container_17a22_28",tagContainer:bj},Sj=e=>{const t=e.model;if(ut(t==null?void 0:t.textModel.onModelChanged),!(t!=null&&t.textModel))return null;const n=t.textModel.labels;return E("div",{className:Fu.tagContainer,children:n.map(r=>ce("div",{className:Fu.tag,children:[E("p",{className:Fu.label,children:r}),E("div",{className:Fu.closeIconContainer,onClick:()=>{t.textModel.deleteLabel(r)},children:E(Ef,{theme:"filled",size:"12",className:Fu.closeIcon})})]},r))})};Oo.extend(WH);function wj(e){if(!e)return!1;try{return new URL(e),!1}catch{return!0}}function Ej(e,t=!1,n=1){const r=t?1e3:1024;if(Math.abs(e)<r)return e+" B";const i=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let o=-1;const s=10**n;do e/=r,++o;while(Math.round(Math.abs(e)*s)/s>=r&&o<i.length-1);return e.toFixed(n)+" "+i[o]}const Cj=e=>{const t=e.model,[n,r]=v.useState(""),[i,o]=v.useState("");if(ut(t==null?void 0:t.textModel.onModelChanged),v.useEffect(()=>{t!=null&&t.textModel&&(r(t.textModel.getProperty().title),o(t.textModel.getProperty().link??""))},[t==null?void 0:t.textModel]),Po(uR),!t)return ce("div",{className:xr.empty,children:[E("p",{children:z("info_empty.title","No webpage selected")}),E("p",{children:z("info_empty.sub_title","Select a webpage to see its details")})]});const s=t.textModel.getProperty();return E("div",{className:xr.container,children:ce("div",{className:xr.content,children:[ce("div",{className:xr.item,children:[E("div",{className:xr.itemTitle,children:z("webpage_detail.title","Title")}),E(Mb,{value:n,autoSize:{maxRows:100},onBlur:()=>{t.textModel.title=n},onChange:a=>r(a.target.value)})]}),ce("div",{className:xr.item,children:[E("div",{className:xr.itemTitle,children:z("webpage_detail.read_status","ReadStatus")}),E("div",{onClick:()=>{t.textModel.read=!t.textModel.read},children:s.read?z("webpage_detail.read","Read"):z("webpage_detail.unread","Unread")})]}),ce("div",{className:xr.item,children:[E("div",{className:xr.itemTitle,children:z("webpage_detail.labels","Labels")}),E(Sj,{model:t}),E(dj,{model:t})]}),ce("div",{className:xr.item,children:[E("div",{className:xr.itemTitle,children:z("webpage_detail.link","Link")}),E(Mb,{autoSize:{maxRows:100},onChange:a=>o(a.target.value),value:i??"",onBlur:()=>{wj(i)||(t.textModel.link=i)}})]}),ce("div",{className:xr.item,children:[E("div",{className:xr.itemTitle,children:z("webpage_detail.added","Added")}),E("div",{children:Oo(t.textModel.getProperty().firstAddTime).format("lll")})]}),ce("div",{className:xr.item,children:[E("div",{className:xr.itemTitle,children:z("webpage_detail.size","Size")}),E("div",{children:Ej(t.textModel.getProperty().size)})]}),ce("div",{className:xr.item,children:[E("div",{className:xr.itemTitle,children:z("webpage_detail.format","File format")}),E("div",{children:t.textModel.getProperty().ext})]})]})})};function Zu(e,t,n,r){var i=as.unstable_batchedUpdates?function(s){as.unstable_batchedUpdates(n,s)}:n;return e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,i,r)}}}var xj=v.forwardRef(function(e,t){var n=e.didUpdate,r=e.getContainer,i=e.children,o=v.useRef(),s=v.useRef();v.useImperativeHandle(t,function(){return{}});var a=v.useRef(!1);return!a.current&&go()&&(s.current=r(),o.current=s.current.parentNode,a.current=!0),v.useEffect(function(){n==null||n(e)}),v.useEffect(function(){return s.current.parentNode===null&&o.current!==null&&o.current.appendChild(s.current),function(){var l,c;(l=s.current)===null||l===void 0||(c=l.parentNode)===null||c===void 0||c.removeChild(s.current)}},[]),s.current?as.createPortal(i,s.current):null});function kj(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Ij(e,t,n){var r=e[t]||{};return he(he({},r),n)}function Rj(e,t,n,r){for(var i=n.points,o=Object.keys(e),s=0;s<o.length;s+=1){var a=o[s];if(kj(e[a].points,i,r))return"".concat(t,"-placement-").concat(a)}return""}function wA(e){var t=e.prefixCls,n=e.motion,r=e.animation,i=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:i?{motionName:i}:null)}function Mj(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,i=e.mask,o=e.maskMotion,s=e.maskAnimation,a=e.maskTransitionName;if(!i)return null;var l={};return(o||a||s)&&(l=he({motionAppear:!0},wA({motion:o,prefixCls:t,transitionName:a,animation:s}))),v.createElement(nu,ot({},l,{visible:n,removeOnLeave:!0}),function(c){var d=c.className;return v.createElement("div",{style:{zIndex:r},className:Te("".concat(t,"-mask"),d)})})}function kx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ix(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kx(Object(n),!0).forEach(function(r){Tj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tb(e){return Tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tb(e)}function Tj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vu,Lj={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function bg(){if(Vu!==void 0)return Vu;Vu="";var e=document.createElement("p").style,t="Transform";for(var n in Lj)n+t in e&&(Vu=n);return Vu}function EA(){return bg()?"".concat(bg(),"TransitionProperty"):"transitionProperty"}function mm(){return bg()?"".concat(bg(),"Transform"):"transform"}function Rx(e,t){var n=EA();n&&(e.style[n]=t,n!=="transitionProperty"&&(e.style.transitionProperty=t))}function i_(e,t){var n=mm();n&&(e.style[n]=t,n!=="transform"&&(e.style.transform=t))}function Aj(e){return e.style.transitionProperty||e.style[EA()]}function Oj(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(mm());if(n&&n!=="none"){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}var Pj=/matrix\((.*)\)/,Nj=/matrix3d\((.*)\)/;function Dj(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(mm());if(r&&r!=="none"){var i,o=r.match(Pj);if(o)o=o[1],i=o.split(",").map(function(a){return parseFloat(a,10)}),i[4]=t.x,i[5]=t.y,i_(e,"matrix(".concat(i.join(","),")"));else{var s=r.match(Nj)[1];i=s.split(",").map(function(a){return parseFloat(a,10)}),i[12]=t.x,i[13]=t.y,i_(e,"matrix3d(".concat(i.join(","),")"))}}else i_(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var Fj=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Lf;function Mx(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function vc(e,t,n){var r=n;if(Tb(t)==="object"){for(var i in t)t.hasOwnProperty(i)&&vc(e,i,t[i]);return}if(typeof r<"u"){typeof r=="number"&&(r="".concat(r,"px")),e.style[t]=r;return}return Lf(e,t)}function Vj(e){var t,n,r,i=e.ownerDocument,o=i.body,s=i&&i.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),n-=s.clientLeft||o.clientLeft||0,r-=s.clientTop||o.clientTop||0,{left:n,top:r}}function CA(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if(typeof n!="number"){var i=e.document;n=i.documentElement[r],typeof n!="number"&&(n=i.body[r])}return n}function xA(e){return CA(e)}function kA(e){return CA(e,!0)}function Xd(e){var t=Vj(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=xA(r),t.top+=kA(r),t}function ew(e){return e!=null&&e==e.window}function IA(e){return ew(e)?e.document:e.nodeType===9?e:e.ownerDocument}function Uj(e,t,n){var r=n,i="",o=IA(e);return r=r||o.defaultView.getComputedStyle(e,null),r&&(i=r.getPropertyValue(t)||r[t]),i}var $j=new RegExp("^(".concat(Fj,")(?!px)[a-z%]+$"),"i"),Wj=/^(top|right|bottom|left)$/,o_="currentStyle",s_="runtimeStyle",Ma="left",zj="px";function Bj(e,t){var n=e[o_]&&e[o_][t];if($j.test(n)&&!Wj.test(t)){var r=e.style,i=r[Ma],o=e[s_][Ma];e[s_][Ma]=e[o_][Ma],r[Ma]=t==="fontSize"?"1em":n||0,n=r.pixelLeft+zj,r[Ma]=i,e[s_][Ma]=o}return n===""?"auto":n}typeof window<"u"&&(Lf=window.getComputedStyle?Uj:Bj);function wh(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function Tx(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function Lx(e,t,n){vc(e,"position")==="static"&&(e.style.position="relative");var r=-999,i=-999,o=wh("left",n),s=wh("top",n),a=Tx(o),l=Tx(s);o!=="left"&&(r=999),s!=="top"&&(i=999);var c="",d=Xd(e);("left"in t||"top"in t)&&(c=Aj(e)||"",Rx(e,"none")),"left"in t&&(e.style[a]="",e.style[o]="".concat(r,"px")),"top"in t&&(e.style[l]="",e.style[s]="".concat(i,"px")),Mx(e);var h=Xd(e),p={};for(var g in t)if(t.hasOwnProperty(g)){var b=wh(g,n),k=g==="left"?r:i,y=d[g]-h[g];b===g?p[b]=k+y:p[b]=k-y}vc(e,p),Mx(e),("left"in t||"top"in t)&&Rx(e,c);var _={};for(var w in t)if(t.hasOwnProperty(w)){var x=wh(w,n),C=t[w]-d[w];w===x?_[x]=p[x]+C:_[x]=p[x]-C}vc(e,_)}function Hj(e,t){var n=Xd(e),r=Oj(e),i={x:r.x,y:r.y};"left"in t&&(i.x=r.x+t.left-n.left),"top"in t&&(i.y=r.y+t.top-n.top),Dj(e,i)}function jj(e,t,n){if(n.ignoreShake){var r=Xd(e),i=r.left.toFixed(0),o=r.top.toFixed(0),s=t.left.toFixed(0),a=t.top.toFixed(0);if(i===s&&o===a)return}n.useCssRight||n.useCssBottom?Lx(e,t,n):n.useCssTransform&&mm()in document.body.style?Hj(e,t):Lx(e,t,n)}function tw(e,t){for(var n=0;n<e.length;n++)t(e[n])}function RA(e){return Lf(e,"boxSizing")==="border-box"}var Kj=["margin","border","padding"],Lb=-1,Gj=2,Ab=1,Yj=0;function qj(e,t,n){var r={},i=e.style,o;for(o in t)t.hasOwnProperty(o)&&(r[o]=i[o],i[o]=t[o]);n.call(e);for(o in t)t.hasOwnProperty(o)&&(i[o]=r[o])}function Ju(e,t,n){var r=0,i,o,s;for(o=0;o<t.length;o++)if(i=t[o],i)for(s=0;s<n.length;s++){var a=void 0;i==="border"?a="".concat(i).concat(n[s],"Width"):a=i+n[s],r+=parseFloat(Lf(e,a))||0}return r}var Ro={getParent:function(t){var n=t;do n.nodeType===11&&n.host?n=n.host:n=n.parentNode;while(n&&n.nodeType!==1&&n.nodeType!==9);return n}};tw(["Width","Height"],function(e){Ro["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],Ro["viewport".concat(e)](n))},Ro["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,i=r.body,o=r.documentElement,s=o[n];return r.compatMode==="CSS1Compat"&&s||i&&i[n]||s}});function Ax(e,t,n){var r=n;if(ew(e))return t==="width"?Ro.viewportWidth(e):Ro.viewportHeight(e);if(e.nodeType===9)return t==="width"?Ro.docWidth(e):Ro.docHeight(e);var i=t==="width"?["Left","Right"]:["Top","Bottom"],o=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),s=RA(e),a=0;(o==null||o<=0)&&(o=void 0,a=Lf(e,t),(a==null||Number(a)<0)&&(a=e.style[t]||0),a=Math.floor(parseFloat(a))||0),r===void 0&&(r=s?Ab:Lb);var l=o!==void 0||s,c=o||a;return r===Lb?l?c-Ju(e,["border","padding"],i):a:l?r===Ab?c:c+(r===Gj?-Ju(e,["border"],i):Ju(e,["margin"],i)):a+Ju(e,Kj.slice(r),i)}var Qj={position:"absolute",visibility:"hidden",display:"block"};function Ox(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return i.offsetWidth!==0?r=Ax.apply(void 0,t):qj(i,Qj,function(){r=Ax.apply(void 0,t)}),r}tw(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Ro["outer".concat(t)]=function(r,i){return r&&Ox(r,e,i?Yj:Ab)};var n=e==="width"?["Left","Right"]:["Top","Bottom"];Ro[e]=function(r,i){var o=i;if(o!==void 0){if(r){var s=RA(r);return s&&(o+=Ju(r,["padding","border"],n)),vc(r,e,o)}return}return r&&Ox(r,e,Lb)}});function MA(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var _t={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var n=t.ownerDocument||t;return n.defaultView||n.parentWindow},getDocument:IA,offset:function(t,n,r){if(typeof n<"u")jj(t,n,r||{});else return Xd(t)},isWindow:ew,each:tw,css:vc,clone:function(t){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);var i=t.overflow;if(i)for(n in t)t.hasOwnProperty(n)&&(r.overflow[n]=t.overflow[n]);return r},mix:MA,getWindowScrollLeft:function(t){return xA(t)},getWindowScrollTop:function(t){return kA(t)},merge:function(){for(var t={},n=0;n<arguments.length;n++)_t.mix(t,n<0||arguments.length<=n?void 0:arguments[n]);return t},viewportWidth:0,viewportHeight:0};MA(_t,Ro);var a_=_t.getParent;function Ob(e){if(_t.isWindow(e)||e.nodeType===9)return null;var t=_t.getDocument(e),n=t.body,r,i=_t.css(e,"position"),o=i==="fixed"||i==="absolute";if(!o)return e.nodeName.toLowerCase()==="html"?null:a_(e);for(r=a_(e);r&&r!==n&&r.nodeType!==9;r=a_(r))if(i=_t.css(r,"position"),i!=="static")return r;return null}var Px=_t.getParent;function Xj(e){if(_t.isWindow(e)||e.nodeType===9)return!1;var t=_t.getDocument(e),n=t.body,r=null;for(r=Px(e);r&&r!==n&&r!==t;r=Px(r)){var i=_t.css(r,"position");if(i==="fixed")return!0}return!1}function nw(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=Ob(e),i=_t.getDocument(e),o=i.defaultView||i.parentWindow,s=i.body,a=i.documentElement;r;){if((navigator.userAgent.indexOf("MSIE")===-1||r.clientWidth!==0)&&r!==s&&r!==a&&_t.css(r,"overflow")!=="visible"){var l=_t.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}else if(r===s||r===a)break;r=Ob(r)}var c=null;if(!_t.isWindow(e)&&e.nodeType!==9){c=e.style.position;var d=_t.css(e,"position");d==="absolute"&&(e.style.position="fixed")}var h=_t.getWindowScrollLeft(o),p=_t.getWindowScrollTop(o),g=_t.viewportWidth(o),b=_t.viewportHeight(o),k=a.scrollWidth,y=a.scrollHeight,_=window.getComputedStyle(s);if(_.overflowX==="hidden"&&(k=o.innerWidth),_.overflowY==="hidden"&&(y=o.innerHeight),e.style&&(e.style.position=c),t||Xj(e))n.left=Math.max(n.left,h),n.top=Math.max(n.top,p),n.right=Math.min(n.right,h+g),n.bottom=Math.min(n.bottom,p+b);else{var w=Math.max(k,h+g);n.right=Math.min(n.right,w);var x=Math.max(y,p+b);n.bottom=Math.min(n.bottom,x)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function Zj(e,t,n,r){var i=_t.clone(e),o={width:t.width,height:t.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),_t.mix(i,o)}function rw(e){var t,n,r;if(!_t.isWindow(e)&&e.nodeType!==9)t=_t.offset(e),n=_t.outerWidth(e),r=_t.outerHeight(e);else{var i=_t.getWindow(e);t={left:_t.getWindowScrollLeft(i),top:_t.getWindowScrollTop(i)},n=_t.viewportWidth(i),r=_t.viewportHeight(i)}return t.width=n,t.height=r,t}function Nx(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.width,o=e.height,s=e.left,a=e.top;return n==="c"?a+=o/2:n==="b"&&(a+=o),r==="c"?s+=i/2:r==="r"&&(s+=i),{left:s,top:a}}function Eh(e,t,n,r,i){var o=Nx(t,n[1]),s=Nx(e,n[0]),a=[s.left-o.left,s.top-o.top];return{left:Math.round(e.left-a[0]+r[0]-i[0]),top:Math.round(e.top-a[1]+r[1]-i[1])}}function Dx(e,t,n){return e.left<n.left||e.left+t.width>n.right}function Fx(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function Jj(e,t,n){return e.left>n.right||e.left+t.width<n.left}function e9(e,t,n){return e.top>n.bottom||e.top+t.height<n.top}function Ch(e,t,n){var r=[];return _t.each(e,function(i){r.push(i.replace(t,function(o){return n[o]}))}),r}function xh(e,t){return e[t]=-e[t],e}function Vx(e,t){var n;return/%$/.test(e)?n=parseInt(e.substring(0,e.length-1),10)/100*t:n=parseInt(e,10),n||0}function Ux(e,t){e[0]=Vx(e[0],t.width),e[1]=Vx(e[1],t.height)}function TA(e,t,n,r){var i=n.points,o=n.offset||[0,0],s=n.targetOffset||[0,0],a=n.overflow,l=n.source||e;o=[].concat(o),s=[].concat(s),a=a||{};var c={},d=0,h=!!(a&&a.alwaysByViewport),p=nw(l,h),g=rw(l);Ux(o,g),Ux(s,t);var b=Eh(g,t,i,o,s),k=_t.merge(g,b);if(p&&(a.adjustX||a.adjustY)&&r){if(a.adjustX&&Dx(b,g,p)){var y=Ch(i,/[lr]/gi,{l:"r",r:"l"}),_=xh(o,0),w=xh(s,0),x=Eh(g,t,y,_,w);Jj(x,g,p)||(d=1,i=y,o=_,s=w)}if(a.adjustY&&Fx(b,g,p)){var C=Ch(i,/[tb]/gi,{t:"b",b:"t"}),F=xh(o,1),M=xh(s,1),L=Eh(g,t,C,F,M);e9(L,g,p)||(d=1,i=C,o=F,s=M)}d&&(b=Eh(g,t,i,o,s),_t.mix(k,b));var N=Dx(b,g,p),V=Fx(b,g,p);if(N||V){var Y=i;N&&(Y=Ch(i,/[lr]/gi,{l:"r",r:"l"})),V&&(Y=Ch(i,/[tb]/gi,{t:"b",b:"t"})),i=Y,o=n.offset||[0,0],s=n.targetOffset||[0,0]}c.adjustX=a.adjustX&&N,c.adjustY=a.adjustY&&V,(c.adjustX||c.adjustY)&&(k=Zj(b,g,p,c))}return k.width!==g.width&&_t.css(l,"width",_t.width(l)+k.width-g.width),k.height!==g.height&&_t.css(l,"height",_t.height(l)+k.height-g.height),_t.offset(l,{left:k.left,top:k.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:s,overflow:c}}function t9(e,t){var n=nw(e,t),r=rw(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}function iw(e,t,n){var r=n.target||t,i=rw(r),o=!t9(r,n.overflow&&n.overflow.alwaysByViewport);return TA(e,i,n,o)}iw.__getOffsetParent=Ob;iw.__getVisibleRectForElement=nw;function n9(e,t,n){var r,i,o=_t.getDocument(e),s=o.defaultView||o.parentWindow,a=_t.getWindowScrollLeft(s),l=_t.getWindowScrollTop(s),c=_t.viewportWidth(s),d=_t.viewportHeight(s);"pageX"in t?r=t.pageX:r=a+t.clientX,"pageY"in t?i=t.pageY:i=l+t.clientY;var h={left:r,top:i,width:0,height:0},p=r>=0&&r<=a+c&&i>=0&&i<=l+d,g=[n.points[0],"cc"];return TA(e,h,Ix(Ix({},n),{},{points:g}),p)}function r9(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function i(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=r.has(o);if(Zc(!l,"Warning: There may be circular references"),l)return!1;if(o===s)return!0;if(n&&a>1)return!1;r.add(o);var c=a+1;if(Array.isArray(o)){if(!Array.isArray(s)||o.length!==s.length)return!1;for(var d=0;d<o.length;d++)if(!i(o[d],s[d],c))return!1;return!0}if(o&&s&&Tn(o)==="object"&&Tn(s)==="object"){var h=Object.keys(o);return h.length!==Object.keys(s).length?!1:h.every(function(p){return i(o[p],s[p],c)})}return!1}return i(e,t)}const i9=function(e,t){var n=Q.useRef(!1),r=Q.useRef(null);function i(){window.clearTimeout(r.current)}function o(s){if(i(),!n.current||s===!0){if(e(s)===!1)return;n.current=!0,r.current=window.setTimeout(function(){n.current=!1},t)}else r.current=window.setTimeout(function(){n.current=!1,o()},t)}return[o,function(){n.current=!1,i()}]};function o9(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function s9(e,t){e!==document.activeElement&&Ed(t,e)&&typeof e.focus=="function"&&e.focus()}function $x(e,t){var n=null,r=null;function i(s){var a=_e(s,1),l=a[0].target;if(document.documentElement.contains(l)){var c=l.getBoundingClientRect(),d=c.width,h=c.height,p=Math.floor(d),g=Math.floor(h);(n!==p||r!==g)&&Promise.resolve().then(function(){t({width:p,height:g})}),n=p,r=g}}var o=new OL(i);return e&&o.observe(e),function(){o.disconnect()}}function Wx(e){return typeof e!="function"?null:e()}function zx(e){return Tn(e)!=="object"||!e?null:e}var a9=function(t,n){var r=t.children,i=t.disabled,o=t.target,s=t.align,a=t.onAlign,l=t.monitorWindowResize,c=t.monitorBufferTime,d=c===void 0?0:c,h=Q.useRef({}),p=Q.useRef(),g=Q.Children.only(r),b=Q.useRef({});b.current.disabled=i,b.current.target=o,b.current.align=s,b.current.onAlign=a;var k=i9(function(){var J=b.current,H=J.disabled,D=J.target,T=J.align,W=J.onAlign,B=p.current;if(!H&&D&&B){var G,te=Wx(D),re=zx(D);h.current.element=te,h.current.point=re,h.current.align=T;var ae=document,K=ae.activeElement;return te&&GS(te)?G=iw(B,te,T):re&&(G=n9(B,re,T)),s9(K,B),W&&G&&W(B,G),!0}return!1},d),y=_e(k,2),_=y[0],w=y[1],x=Q.useState(),C=_e(x,2),F=C[0],M=C[1],L=Q.useState(),N=_e(L,2),V=N[0],Y=N[1];return Cn(function(){M(Wx(o)),Y(zx(o))}),Q.useEffect(function(){(h.current.element!==F||!o9(h.current.point,V)||!r9(h.current.align,s))&&_()}),Q.useEffect(function(){var J=$x(p.current,_);return J},[p.current]),Q.useEffect(function(){var J=$x(F,_);return J},[F]),Q.useEffect(function(){i?w():_()},[i]),Q.useEffect(function(){if(l){var J=Zu(window,"resize",_);return J.remove}},[l]),Q.useEffect(function(){return function(){w()}},[]),Q.useImperativeHandle(n,function(){return{forceAlign:function(){return _(!0)}}}),Q.isValidElement(g)&&(g=Q.cloneElement(g,{ref:Jc(g.ref,p)})),g},LA=Q.forwardRef(a9);LA.displayName="Align";function Pb(){Pb=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(H,D,T){H[D]=T.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(H,D,T){return Object.defineProperty(H,D,{value:T,enumerable:!0,configurable:!0,writable:!0}),H[D]}try{l({},"")}catch{l=function(T,W,B){return T[W]=B}}function c(H,D,T,W){var B=D&&D.prototype instanceof p?D:p,G=Object.create(B.prototype),te=new V(W||[]);return r(G,"_invoke",{value:F(H,T,te)}),G}function d(H,D,T){try{return{type:"normal",arg:H.call(D,T)}}catch(W){return{type:"throw",arg:W}}}e.wrap=c;var h={};function p(){}function g(){}function b(){}var k={};l(k,o,function(){return this});var y=Object.getPrototypeOf,_=y&&y(y(Y([])));_&&_!==t&&n.call(_,o)&&(k=_);var w=b.prototype=p.prototype=Object.create(k);function x(H){["next","throw","return"].forEach(function(D){l(H,D,function(T){return this._invoke(D,T)})})}function C(H,D){function T(B,G,te,re){var ae=d(H[B],H,G);if(ae.type!=="throw"){var K=ae.arg,R=K.value;return R&&Tn(R)=="object"&&n.call(R,"__await")?D.resolve(R.__await).then(function(O){T("next",O,te,re)},function(O){T("throw",O,te,re)}):D.resolve(R).then(function(O){K.value=O,te(K)},function(O){return T("throw",O,te,re)})}re(ae.arg)}var W;r(this,"_invoke",{value:function(G,te){function re(){return new D(function(ae,K){T(G,te,ae,K)})}return W=W?W.then(re,re):re()}})}function F(H,D,T){var W="suspendedStart";return function(B,G){if(W==="executing")throw new Error("Generator is already running");if(W==="completed"){if(B==="throw")throw G;return J()}for(T.method=B,T.arg=G;;){var te=T.delegate;if(te){var re=M(te,T);if(re){if(re===h)continue;return re}}if(T.method==="next")T.sent=T._sent=T.arg;else if(T.method==="throw"){if(W==="suspendedStart")throw W="completed",T.arg;T.dispatchException(T.arg)}else T.method==="return"&&T.abrupt("return",T.arg);W="executing";var ae=d(H,D,T);if(ae.type==="normal"){if(W=T.done?"completed":"suspendedYield",ae.arg===h)continue;return{value:ae.arg,done:T.done}}ae.type==="throw"&&(W="completed",T.method="throw",T.arg=ae.arg)}}}function M(H,D){var T=D.method,W=H.iterator[T];if(W===void 0)return D.delegate=null,T==="throw"&&H.iterator.return&&(D.method="return",D.arg=void 0,M(H,D),D.method==="throw")||T!=="return"&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+T+"' method")),h;var B=d(W,H.iterator,D.arg);if(B.type==="throw")return D.method="throw",D.arg=B.arg,D.delegate=null,h;var G=B.arg;return G?G.done?(D[H.resultName]=G.value,D.next=H.nextLoc,D.method!=="return"&&(D.method="next",D.arg=void 0),D.delegate=null,h):G:(D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,h)}function L(H){var D={tryLoc:H[0]};1 in H&&(D.catchLoc=H[1]),2 in H&&(D.finallyLoc=H[2],D.afterLoc=H[3]),this.tryEntries.push(D)}function N(H){var D=H.completion||{};D.type="normal",delete D.arg,H.completion=D}function V(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(L,this),this.reset(!0)}function Y(H){if(H){var D=H[o];if(D)return D.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var T=-1,W=function B(){for(;++T<H.length;)if(n.call(H,T))return B.value=H[T],B.done=!1,B;return B.value=void 0,B.done=!0,B};return W.next=W}}return{next:J}}function J(){return{value:void 0,done:!0}}return g.prototype=b,r(w,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,a,"GeneratorFunction"),e.isGeneratorFunction=function(H){var D=typeof H=="function"&&H.constructor;return!!D&&(D===g||(D.displayName||D.name)==="GeneratorFunction")},e.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,b):(H.__proto__=b,l(H,a,"GeneratorFunction")),H.prototype=Object.create(w),H},e.awrap=function(H){return{__await:H}},x(C.prototype),l(C.prototype,s,function(){return this}),e.AsyncIterator=C,e.async=function(H,D,T,W,B){B===void 0&&(B=Promise);var G=new C(c(H,D,T,W),B);return e.isGeneratorFunction(D)?G:G.next().then(function(te){return te.done?te.value:G.next()})},x(w),l(w,a,"Generator"),l(w,o,function(){return this}),l(w,"toString",function(){return"[object Generator]"}),e.keys=function(H){var D=Object(H),T=[];for(var W in D)T.push(W);return T.reverse(),function B(){for(;T.length;){var G=T.pop();if(G in D)return B.value=G,B.done=!1,B}return B.done=!0,B}},e.values=Y,V.prototype={constructor:V,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!D)for(var T in this)T.charAt(0)==="t"&&n.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=void 0)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var T=this;function W(K,R){return te.type="throw",te.arg=D,T.next=K,R&&(T.method="next",T.arg=void 0),!!R}for(var B=this.tryEntries.length-1;B>=0;--B){var G=this.tryEntries[B],te=G.completion;if(G.tryLoc==="root")return W("end");if(G.tryLoc<=this.prev){var re=n.call(G,"catchLoc"),ae=n.call(G,"finallyLoc");if(re&&ae){if(this.prev<G.catchLoc)return W(G.catchLoc,!0);if(this.prev<G.finallyLoc)return W(G.finallyLoc)}else if(re){if(this.prev<G.catchLoc)return W(G.catchLoc,!0)}else{if(!ae)throw new Error("try statement without catch or finally");if(this.prev<G.finallyLoc)return W(G.finallyLoc)}}}},abrupt:function(D,T){for(var W=this.tryEntries.length-1;W>=0;--W){var B=this.tryEntries[W];if(B.tryLoc<=this.prev&&n.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var G=B;break}}G&&(D==="break"||D==="continue")&&G.tryLoc<=T&&T<=G.finallyLoc&&(G=null);var te=G?G.completion:{};return te.type=D,te.arg=T,G?(this.method="next",this.next=G.finallyLoc,h):this.complete(te)},complete:function(D,T){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&T&&(this.next=T),h},finish:function(D){for(var T=this.tryEntries.length-1;T>=0;--T){var W=this.tryEntries[T];if(W.finallyLoc===D)return this.complete(W.completion,W.afterLoc),N(W),h}},catch:function(D){for(var T=this.tryEntries.length-1;T>=0;--T){var W=this.tryEntries[T];if(W.tryLoc===D){var B=W.completion;if(B.type==="throw"){var G=B.arg;N(W)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(D,T,W){return this.delegate={iterator:Y(D),resultName:T,nextLoc:W},this.method==="next"&&(this.arg=void 0),h}},e}function Bx(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(c){n(c);return}a.done?t(l):Promise.resolve(l).then(r,i)}function l9(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(l){Bx(o,r,i,s,a,"next",l)}function a(l){Bx(o,r,i,s,a,"throw",l)}s(void 0)})}}var Hx=["measure","alignPre","align",null,"motion"];const c9=function(e,t){var n=Ya(null),r=_e(n,2),i=r[0],o=r[1],s=v.useRef();function a(d){o(d,!0)}function l(){Gn.cancel(s.current)}function c(d){l(),s.current=Gn(function(){a(function(h){switch(i){case"align":return"motion";case"motion":return"stable"}return h}),d==null||d()})}return v.useEffect(function(){a("measure")},[e]),v.useEffect(function(){switch(i){case"measure":t();break}i&&(s.current=Gn(l9(Pb().mark(function d(){var h,p;return Pb().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:h=Hx.indexOf(i),p=Hx[h+1],p&&h!==-1&&a(p);case 3:case"end":return b.stop()}},d)}))))},[i]),v.useEffect(function(){return function(){l()}},[]),[i,c]},u9=function(e){var t=v.useState({width:0,height:0}),n=_e(t,2),r=n[0],i=n[1];function o(a){var l=a.offsetWidth,c=a.offsetHeight,d=a.getBoundingClientRect(),h=d.width,p=d.height;Math.abs(l-h)<1&&Math.abs(c-p)<1&&(l=h,c=p),i({width:l,height:c})}var s=v.useMemo(function(){var a={};if(e){var l=r.width,c=r.height;e.indexOf("height")!==-1&&c?a.height=c:e.indexOf("minHeight")!==-1&&c&&(a.minHeight=c),e.indexOf("width")!==-1&&l?a.width=l:e.indexOf("minWidth")!==-1&&l&&(a.minWidth=l)}return a},[e,r]);return[s,o]};var AA=v.forwardRef(function(e,t){var n=e.visible,r=e.prefixCls,i=e.className,o=e.style,s=e.children,a=e.zIndex,l=e.stretch,c=e.destroyPopupOnHide,d=e.forceRender,h=e.align,p=e.point,g=e.getRootDomNode,b=e.getClassNameFromAlign,k=e.onAlign,y=e.onMouseEnter,_=e.onMouseLeave,w=e.onMouseDown,x=e.onTouchStart,C=e.onClick,F=v.useRef(),M=v.useRef(),L=v.useState(),N=_e(L,2),V=N[0],Y=N[1],J=u9(l),H=_e(J,2),D=H[0],T=H[1];function W(){l&&T(g())}var B=c9(n,W),G=_e(B,2),te=G[0],re=G[1],ae=v.useState(0),K=_e(ae,2),R=K[0],O=K[1],j=v.useRef();Cn(function(){te==="alignPre"&&O(0)},[te]);function Z(){return p||g}function le(){var be;(be=F.current)===null||be===void 0||be.forceAlign()}function ee(be,Ye){var Pe=b(Ye);V!==Pe&&Y(Pe),O(function($e){return $e+1}),te==="align"&&(k==null||k(be,Ye))}Cn(function(){te==="align"&&(R<3?le():re(function(){var be;(be=j.current)===null||be===void 0||be.call(j)}))},[R]);var ie=he({},wA(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(be){var Ye=ie[be];ie[be]=function(Pe,$e){return re(),Ye==null?void 0:Ye(Pe,$e)}});function fe(){return new Promise(function(be){j.current=be})}v.useEffect(function(){!ie.motionName&&te==="motion"&&re()},[ie.motionName,te]),v.useImperativeHandle(t,function(){return{forceAlign:le,getElement:function(){return M.current}}});var ge=he(he({},D),{},{zIndex:a,opacity:te==="motion"||te==="stable"||!n?void 0:0,pointerEvents:!n&&te!=="stable"?"none":void 0},o),we=!0;h!=null&&h.points&&(te==="align"||te==="stable")&&(we=!1);var Ne=s;return v.Children.count(s)>1&&(Ne=v.createElement("div",{className:"".concat(r,"-content")},s)),v.createElement(nu,ot({visible:n,ref:M,leavedClassName:"".concat(r,"-hidden")},ie,{onAppearPrepare:fe,onEnterPrepare:fe,removeOnLeave:c,forceRender:d}),function(be,Ye){var Pe=be.className,$e=be.style,it=Te(r,i,V,Pe);return v.createElement(LA,{target:Z(),key:"popup",ref:F,monitorWindowResize:!0,disabled:we,align:h,onAlign:ee},v.createElement("div",{ref:Ye,className:it,onMouseEnter:y,onMouseLeave:_,onMouseDownCapture:w,onTouchStartCapture:x,onClick:C,style:he(he({},$e),ge)},Ne))})});AA.displayName="PopupInner";var OA=v.forwardRef(function(e,t){var n=e.prefixCls,r=e.visible,i=e.zIndex,o=e.children,s=e.mobile;s=s===void 0?{}:s;var a=s.popupClassName,l=s.popupStyle,c=s.popupMotion,d=c===void 0?{}:c,h=s.popupRender,p=e.onClick,g=v.useRef();v.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return g.current}}});var b=he({zIndex:i},l),k=o;return v.Children.count(o)>1&&(k=v.createElement("div",{className:"".concat(n,"-content")},o)),h&&(k=h(k)),v.createElement(nu,ot({visible:r,ref:g,removeOnLeave:!0},d),function(y,_){var w=y.className,x=y.style,C=Te(n,a,w);return v.createElement("div",{ref:_,className:C,onClick:p,style:he(he({},x),b)},k)})});OA.displayName="MobilePopupInner";var d9=["visible","mobile"],PA=v.forwardRef(function(e,t){var n=e.visible,r=e.mobile,i=Un(e,d9),o=v.useState(n),s=_e(o,2),a=s[0],l=s[1],c=v.useState(!1),d=_e(c,2),h=d[0],p=d[1],g=he(he({},i),{},{visible:a});v.useEffect(function(){l(n),n&&r&&p(KS())},[n,r]);var b=h?v.createElement(OA,ot({},g,{mobile:r,ref:t})):v.createElement(AA,ot({},g,{ref:t}));return v.createElement("div",null,v.createElement(Mj,g),b)});PA.displayName="Popup";var jx=v.createContext(null);function l_(){}function f9(){return""}function h9(e){return e?e.ownerDocument:window.document}var p9=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function g9(e){var t=function(n){kf(i,n);var r=If(i);function i(o){var s;eu(this,i),s=r.call(this,o),Ee(Ct(s),"popupRef",v.createRef()),Ee(Ct(s),"triggerRef",v.createRef()),Ee(Ct(s),"portalContainer",void 0),Ee(Ct(s),"attachId",void 0),Ee(Ct(s),"clickOutsideHandler",void 0),Ee(Ct(s),"touchOutsideHandler",void 0),Ee(Ct(s),"contextMenuOutsideHandler1",void 0),Ee(Ct(s),"contextMenuOutsideHandler2",void 0),Ee(Ct(s),"mouseDownTimeout",void 0),Ee(Ct(s),"focusTime",void 0),Ee(Ct(s),"preClickTime",void 0),Ee(Ct(s),"preTouchTime",void 0),Ee(Ct(s),"delayTimer",void 0),Ee(Ct(s),"hasPopupMouseDown",void 0),Ee(Ct(s),"onMouseEnter",function(l){var c=s.props.mouseEnterDelay;s.fireEvents("onMouseEnter",l),s.delaySetPopupVisible(!0,c,c?null:l)}),Ee(Ct(s),"onMouseMove",function(l){s.fireEvents("onMouseMove",l),s.setPoint(l)}),Ee(Ct(s),"onMouseLeave",function(l){s.fireEvents("onMouseLeave",l),s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)}),Ee(Ct(s),"onPopupMouseEnter",function(){s.clearDelayTimer()}),Ee(Ct(s),"onPopupMouseLeave",function(l){var c;l.relatedTarget&&!l.relatedTarget.setTimeout&&Ed((c=s.popupRef.current)===null||c===void 0?void 0:c.getElement(),l.relatedTarget)||s.delaySetPopupVisible(!1,s.props.mouseLeaveDelay)}),Ee(Ct(s),"onFocus",function(l){s.fireEvents("onFocus",l),s.clearDelayTimer(),s.isFocusToShow()&&(s.focusTime=Date.now(),s.delaySetPopupVisible(!0,s.props.focusDelay))}),Ee(Ct(s),"onMouseDown",function(l){s.fireEvents("onMouseDown",l),s.preClickTime=Date.now()}),Ee(Ct(s),"onTouchStart",function(l){s.fireEvents("onTouchStart",l),s.preTouchTime=Date.now()}),Ee(Ct(s),"onBlur",function(l){s.fireEvents("onBlur",l),s.clearDelayTimer(),s.isBlurToHide()&&s.delaySetPopupVisible(!1,s.props.blurDelay)}),Ee(Ct(s),"onContextMenu",function(l){l.preventDefault(),s.fireEvents("onContextMenu",l),s.setPopupVisible(!0,l)}),Ee(Ct(s),"onContextMenuClose",function(){s.isContextMenuToShow()&&s.close()}),Ee(Ct(s),"onClick",function(l){if(s.fireEvents("onClick",l),s.focusTime){var c;if(s.preClickTime&&s.preTouchTime?c=Math.min(s.preClickTime,s.preTouchTime):s.preClickTime?c=s.preClickTime:s.preTouchTime&&(c=s.preTouchTime),Math.abs(c-s.focusTime)<20)return;s.focusTime=0}s.preClickTime=0,s.preTouchTime=0,s.isClickToShow()&&(s.isClickToHide()||s.isBlurToHide())&&l&&l.preventDefault&&l.preventDefault();var d=!s.state.popupVisible;(s.isClickToHide()&&!d||d&&s.isClickToShow())&&s.setPopupVisible(!s.state.popupVisible,l)}),Ee(Ct(s),"onPopupMouseDown",function(){if(s.hasPopupMouseDown=!0,clearTimeout(s.mouseDownTimeout),s.mouseDownTimeout=window.setTimeout(function(){s.hasPopupMouseDown=!1},0),s.context){var l;(l=s.context).onPopupMouseDown.apply(l,arguments)}}),Ee(Ct(s),"onDocumentClick",function(l){if(!(s.props.mask&&!s.props.maskClosable)){var c=l.target,d=s.getRootDomNode(),h=s.getPopupDomNode();(!Ed(d,c)||s.isContextMenuOnly())&&!Ed(h,c)&&!s.hasPopupMouseDown&&s.close()}}),Ee(Ct(s),"getRootDomNode",function(){var l=s.props.getTriggerDOMNode;if(l)return l(s.triggerRef.current);try{var c=Qd(s.triggerRef.current);if(c)return c}catch{}return as.findDOMNode(Ct(s))}),Ee(Ct(s),"getPopupClassNameFromAlign",function(l){var c=[],d=s.props,h=d.popupPlacement,p=d.builtinPlacements,g=d.prefixCls,b=d.alignPoint,k=d.getPopupClassNameFromAlign;return h&&p&&c.push(Rj(p,g,l,b)),k&&c.push(k(l)),c.join(" ")}),Ee(Ct(s),"getComponent",function(){var l=s.props,c=l.prefixCls,d=l.destroyPopupOnHide,h=l.popupClassName,p=l.onPopupAlign,g=l.popupMotion,b=l.popupAnimation,k=l.popupTransitionName,y=l.popupStyle,_=l.mask,w=l.maskAnimation,x=l.maskTransitionName,C=l.maskMotion,F=l.zIndex,M=l.popup,L=l.stretch,N=l.alignPoint,V=l.mobile,Y=l.forceRender,J=l.onPopupClick,H=s.state,D=H.popupVisible,T=H.point,W=s.getPopupAlign(),B={};return s.isMouseEnterToShow()&&(B.onMouseEnter=s.onPopupMouseEnter),s.isMouseLeaveToHide()&&(B.onMouseLeave=s.onPopupMouseLeave),B.onMouseDown=s.onPopupMouseDown,B.onTouchStart=s.onPopupMouseDown,v.createElement(PA,ot({prefixCls:c,destroyPopupOnHide:d,visible:D,point:N&&T,className:h,align:W,onAlign:p,animation:b,getClassNameFromAlign:s.getPopupClassNameFromAlign},B,{stretch:L,getRootDomNode:s.getRootDomNode,style:y,mask:_,zIndex:F,transitionName:k,maskAnimation:w,maskTransitionName:x,maskMotion:C,ref:s.popupRef,motion:g,mobile:V,forceRender:Y,onClick:J}),typeof M=="function"?M():M)}),Ee(Ct(s),"attachParent",function(l){Gn.cancel(s.attachId);var c=s.props,d=c.getPopupContainer,h=c.getDocument,p=s.getRootDomNode(),g;d?(p||d.length===0)&&(g=d(p)):g=h(s.getRootDomNode()).body,g?g.appendChild(l):s.attachId=Gn(function(){s.attachParent(l)})}),Ee(Ct(s),"getContainer",function(){if(!s.portalContainer){var l=s.props.getDocument,c=l(s.getRootDomNode()).createElement("div");c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="100%",s.portalContainer=c}return s.attachParent(s.portalContainer),s.portalContainer}),Ee(Ct(s),"setPoint",function(l){var c=s.props.alignPoint;!c||!l||s.setState({point:{pageX:l.pageX,pageY:l.pageY}})}),Ee(Ct(s),"handlePortalUpdate",function(){s.state.prevPopupVisible!==s.state.popupVisible&&s.props.afterPopupVisibleChange(s.state.popupVisible)}),Ee(Ct(s),"triggerContextValue",{onPopupMouseDown:s.onPopupMouseDown});var a;return"popupVisible"in o?a=!!o.popupVisible:a=!!o.defaultPopupVisible,s.state={prevPopupVisible:a,popupVisible:a},p9.forEach(function(l){s["fire".concat(l)]=function(c){s.fireEvents(l,c)}}),s}return tu(i,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var s=this.props,a=this.state;if(a.popupVisible){var l;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(l=s.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Zu(l,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(l=l||s.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Zu(l,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(l=l||s.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Zu(l,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Zu(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Gn.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var s;return((s=this.popupRef.current)===null||s===void 0?void 0:s.getElement())||null}},{key:"getPopupAlign",value:function(){var s=this.props,a=s.popupPlacement,l=s.popupAlign,c=s.builtinPlacements;return a&&c?Ij(c,a,l):l}},{key:"setPopupVisible",value:function(s,a){var l=this.props.alignPoint,c=this.state.popupVisible;this.clearDelayTimer(),c!==s&&("popupVisible"in this.props||this.setState({popupVisible:s,prevPopupVisible:c}),this.props.onPopupVisibleChange(s)),l&&a&&s&&this.setPoint(a)}},{key:"delaySetPopupVisible",value:function(s,a,l){var c=this,d=a*1e3;if(this.clearDelayTimer(),d){var h=l?{pageX:l.pageX,pageY:l.pageY}:null;this.delayTimer=window.setTimeout(function(){c.setPopupVisible(s,h),c.clearDelayTimer()},d)}else this.setPopupVisible(s,l)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(s){var a=this.props.children.props,l=this.props;return a[s]&&l[s]?this["fire".concat(s)]:a[s]||l[s]}},{key:"isClickToShow",value:function(){var s=this.props,a=s.action,l=s.showAction;return a.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var s=this.props.action;return s==="contextMenu"||s.length===1&&s[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var s=this.props,a=s.action,l=s.showAction;return a.indexOf("contextMenu")!==-1||l.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var s=this.props,a=s.action,l=s.hideAction;return a.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var s=this.props,a=s.action,l=s.showAction;return a.indexOf("hover")!==-1||l.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var s=this.props,a=s.action,l=s.hideAction;return a.indexOf("hover")!==-1||l.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var s=this.props,a=s.action,l=s.showAction;return a.indexOf("focus")!==-1||l.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var s=this.props,a=s.action,l=s.hideAction;return a.indexOf("focus")!==-1||l.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var s;(s=this.popupRef.current)===null||s===void 0||s.forceAlign()}}},{key:"fireEvents",value:function(s,a){var l=this.props.children.props[s];l&&l(a);var c=this.props[s];c&&c(a)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var s=this.state.popupVisible,a=this.props,l=a.children,c=a.forceRender,d=a.alignPoint,h=a.className,p=a.autoDestroy,g=v.Children.only(l),b={key:"trigger"};this.isContextMenuToShow()?b.onContextMenu=this.onContextMenu:b.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(b.onClick=this.onClick,b.onMouseDown=this.onMouseDown,b.onTouchStart=this.onTouchStart):(b.onClick=this.createTwoChains("onClick"),b.onMouseDown=this.createTwoChains("onMouseDown"),b.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(b.onMouseEnter=this.onMouseEnter,d&&(b.onMouseMove=this.onMouseMove)):b.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?b.onMouseLeave=this.onMouseLeave:b.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(b.onFocus=this.onFocus,b.onBlur=this.onBlur):(b.onFocus=this.createTwoChains("onFocus"),b.onBlur=this.createTwoChains("onBlur"));var k=Te(g&&g.props&&g.props.className,h);k&&(b.className=k);var y=he({},b);xf(g)&&(y.ref=Jc(this.triggerRef,g.ref));var _=v.cloneElement(g,y),w;return(s||this.popupRef.current||c)&&(w=v.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!s&&p&&(w=null),v.createElement(jx.Provider,{value:this.triggerContextValue},_,w)}}],[{key:"getDerivedStateFromProps",value:function(s,a){var l=s.popupVisible,c={};return l!==void 0&&a.popupVisible!==l&&(c.popupVisible=l,c.prevPopupVisible=a.popupVisible),c}}]),i}(v.Component);return Ee(t,"contextType",jx),Ee(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:f9,getDocument:h9,onPopupVisibleChange:l_,afterPopupVisibleChange:l_,onPopupAlign:l_,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}const m9=g9(xj);var Ol={adjustX:1,adjustY:1},Pl=[0,0],v9={topLeft:{points:["bl","tl"],overflow:Ol,offset:[0,-4],targetOffset:Pl},topCenter:{points:["bc","tc"],overflow:Ol,offset:[0,-4],targetOffset:Pl},topRight:{points:["br","tr"],overflow:Ol,offset:[0,-4],targetOffset:Pl},bottomLeft:{points:["tl","bl"],overflow:Ol,offset:[0,4],targetOffset:Pl},bottomCenter:{points:["tc","bc"],overflow:Ol,offset:[0,4],targetOffset:Pl},bottomRight:{points:["tr","br"],overflow:Ol,offset:[0,4],targetOffset:Pl}};function Kx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(GS(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||n==="a"&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),o=Number(i),s=null;return i&&!Number.isNaN(o)?s=o:r&&s===null&&(s=0),r&&e.disabled&&(s=null),s!==null&&(s>=0||t&&s<0)}return!1}function _9(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=tr(e.querySelectorAll("*")).filter(function(r){return Kx(r,t)});return Kx(e,t)&&n.unshift(e),n}var y9=Ce.ESC,b9=Ce.TAB;function S9(e){var t=e.visible,n=e.setTriggerVisible,r=e.triggerRef,i=e.onVisibleChange,o=e.autoFocus,s=v.useRef(!1),a=function(){if(t&&r.current){var h,p,g,b;(h=r.current)===null||h===void 0||(p=h.triggerRef)===null||p===void 0||(g=p.current)===null||g===void 0||(b=g.focus)===null||b===void 0||b.call(g),n(!1),typeof i=="function"&&i(!1)}},l=function(){var h,p,g,b,k=_9((h=r.current)===null||h===void 0||(p=h.popupRef)===null||p===void 0||(g=p.current)===null||g===void 0||(b=g.getElement)===null||b===void 0?void 0:b.call(g)),y=k[0];return y!=null&&y.focus?(y.focus(),s.current=!0,!0):!1},c=function(h){switch(h.keyCode){case y9:a();break;case b9:{var p=!1;s.current||(p=l()),p?h.preventDefault():a();break}}};v.useEffect(function(){return t?(window.addEventListener("keydown",c),o&&Gn(l,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}},[t])}var w9=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function E9(e,t){var n=e.arrow,r=n===void 0?!1:n,i=e.prefixCls,o=i===void 0?"rc-dropdown":i,s=e.transitionName,a=e.animation,l=e.align,c=e.placement,d=c===void 0?"bottomLeft":c,h=e.placements,p=h===void 0?v9:h,g=e.getPopupContainer,b=e.showAction,k=e.hideAction,y=e.overlayClassName,_=e.overlayStyle,w=e.visible,x=e.trigger,C=x===void 0?["hover"]:x,F=e.autoFocus,M=Un(e,w9),L=v.useState(),N=_e(L,2),V=N[0],Y=N[1],J="visible"in e?w:V,H=v.useRef(null);v.useImperativeHandle(t,function(){return H.current}),S9({visible:J,setTriggerVisible:Y,triggerRef:H,onVisibleChange:e.onVisibleChange,autoFocus:F});var D=function(){var O=e.overlay,j;return typeof O=="function"?j=O():j=O,j},T=function(O){var j=e.onOverlayClick;Y(!1),j&&j(O)},W=function(O){var j=e.onVisibleChange;Y(O),typeof j=="function"&&j(O)},B=function(){var O=D();return v.createElement(v.Fragment,null,r&&v.createElement("div",{className:"".concat(o,"-arrow")}),O)},G=function(){var O=e.overlay;return typeof O=="function"?B:B()},te=function(){var O=e.minOverlayWidthMatchTrigger,j=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?O:!j},re=function(){var O=e.openClassName;return O!==void 0?O:"".concat(o,"-open")},ae=function(){var O=e.children,j=O.props?O.props:{},Z=Te(j.className,re());return J&&O?v.cloneElement(O,{className:Z}):O},K=k;return!K&&C.indexOf("contextMenu")!==-1&&(K=["click"]),v.createElement(m9,he(he({builtinPlacements:p},M),{},{prefixCls:o,ref:H,popupClassName:Te(y,Ee({},"".concat(o,"-show-arrow"),r)),popupStyle:_,action:C,showAction:b,hideAction:K||[],popupPlacement:d,popupAlign:l,popupTransitionName:s,popupAnimation:a,popupVisible:J,stretch:te()?"minWidth":"",popup:G(),onPopupVisibleChange:W,onPopupClick:T,getPopupContainer:g}),ae())}const C9=v.forwardRef(E9),ru=new At("hb.dropdown.visible",!1),ow=new At("hb.dropdown.select_submenu",!1),x9="hb.dropdown.selectNext",k9="hb.dropdown.previous",Nb="hb.dropdown.runCommand",I9="hb.dropdown.showSubmenu",R9="hb.dropdown.closeSubmenu";function Pc(e){return!!Array.isArray(e.submenuArgs)}class ha{constructor(t){this._onStateChange=new Oe,this.onStateChange=this._onStateChange.event,this._onHide=new Oe,this.onHide=this._onHide.event,this.menus=t,this.currentIndex=-1,this.submenuIndex=-1,this.submenuOpen=!1}get selectedMenu(){return this.menus[this.currentIndex]??null}get selectedSubMenu(){return this.isSubMenuOpen?this.selectedMenu.submenuArgs[this.submenuIndex]??null:null}get isSubMenuOpen(){return this.submenuOpen&&!!this.selectedMenu&&Pc(this.selectedMenu)}selectMenuByCommandId(t,n){const r=this.menus.findIndex(o=>o.commandId===t);if(r===-1)return;this.currentIndex=r;const i=this.menus[this.currentIndex];if(Pc(i)){if(this.submenuOpen=!0,typeof n<"u"){const o=i.submenuArgs.findIndex(s=>s.key===n);this.submenuIndex=o}}else this.submenuOpen=!1;this._onStateChange.fire()}selectNextMenu(){if(this.isSubMenuOpen){const t=this.selectedMenu;this.submenuIndex=Math.min(this.submenuIndex+1,t.submenuArgs.length-1)}else this.submenuIndex=-1,this.submenuOpen=!1,this.currentIndex=Math.min(this.currentIndex+1,this.menus.length-1);this._onStateChange.fire()}selectPreviousMenu(){this.isSubMenuOpen?this.submenuIndex=Math.max(this.submenuIndex-1,0):(this.submenuIndex=-1,this.submenuOpen=!1,this.currentIndex=Math.max(this.currentIndex-1,0)),this._onStateChange.fire()}hide(){this.submenuOpen=!1,this.currentIndex=-1,this.submenuIndex=-1,this._onHide.fire()}openSubmenu(){this.submenuOpen=!0,this.submenuIndex=0,this._onStateChange.fire()}closeSubmenu(){this.submenuOpen=!1,this.submenuIndex=-1,this._onStateChange.fire()}}ha.id="DropdownController";const M9="_menu-item_1xcie_1",T9="_shortcut_1xcie_13",L9="_menu-item-active_1xcie_26",A9="_active_1xcie_30",O9="_hb-menu_1xcie_34",P9="_hb-menu-item_1xcie_45",N9="_hb-submenu_1xcie_56",D9="_hb-submenu-item_1xcie_67",F9="_front-icon_1xcie_72",jo={"menu-item":"_menu-item_1xcie_1",menuItem:M9,shortcut:T9,"menu-item-active":"_menu-item-active_1xcie_26",menuItemActive:L9,active:A9,"hb-menu":"_hb-menu_1xcie_34",hbMenu:O9,"hb-menu-item":"_hb-menu-item_1xcie_45",hbMenuItem:P9,"hb-submenu":"_hb-submenu_1xcie_56",hbSubmenu:N9,"hb-submenu-item":"_hb-submenu-item_1xcie_67",hbSubmenuItem:D9,"front-icon":"_front-icon_1xcie_72",frontIcon:F9};De.registerCommandAndKeybindingRule({id:x9,weight:Fe.WorkbenchContrib+10,when:ru,primary:U.DownArrow,handler:e=>{const t=e.get(It).getViewWithId(ha.id);t&&t.selectNextMenu()}});De.registerCommandAndKeybindingRule({id:k9,weight:Fe.WorkbenchContrib+10,when:ru,primary:U.UpArrow,handler:e=>{const t=e.get(It).getViewWithId(ha.id);t&&t.selectPreviousMenu()}});De.registerCommandAndKeybindingRule({id:Nb,weight:Fe.WorkbenchContrib+10,when:ru,primary:U.Enter,handler:async e=>{const t=e.get(It).getViewWithId(ha.id);if(t){let n=()=>{};const r=t.selectedMenu;if(r){const i=e.get(us);if(Pc(r)&&!t.selectedSubMenu){t.openSubmenu();return}if(Pc(r)){const o=t.selectedSubMenu;o&&(n=()=>{i.executeCommand(r.commandId,...(o==null?void 0:o.args)??[])})}else n=()=>{i.executeCommand(r.commandId,...r.args??[])};t.hide(),await hI(100),n()}}}});De.registerCommandAndKeybindingRule({id:I9,weight:Fe.WorkbenchContrib+10,when:Lt.and(ru,ow),primary:U.RightArrow,handler:async e=>{const t=e.get(It).getViewWithId(ha.id);t&&t.openSubmenu()}});De.registerCommandAndKeybindingRule({id:R9,weight:Fe.WorkbenchContrib+10,when:Lt.and(ru,ow),primary:U.LeftArrow,handler:async e=>{const t=e.get(It).getViewWithId(ha.id);t&&t.closeSubmenu()}});const V9=e=>{var s,a;const n=QS()(e.option.keyCode),r=Ft(us),o=((s=e.controller.selectedMenu)==null?void 0:s.commandId)===e.option.commandId&&e.controller.isSubMenuOpen;return ce("li",{onMouseEnter:()=>e.controller.selectMenuByCommandId(e.option.commandId),className:Te(jo.menuItem,{[jo.hbMenuItem]:!0,[jo.menuItemActive]:((a=e.controller.selectedMenu)==null?void 0:a.commandId)===e.option.commandId}),onClick:l=>{l.preventDefault(),l.stopPropagation(),r.executeCommand(Nb)},children:[o&&E("ul",{className:jo.hbSubmenu,children:e.option.submenuArgs.map(l=>{var c;return ce("li",{className:Te({[jo.hbSubmenuItem]:!0,[jo.active]:((c=e.controller.selectedSubMenu)==null?void 0:c.key)===l.key}),onClick:d=>{d.preventDefault(),d.stopPropagation(),r.executeCommand(Nb)},onMouseEnter:d=>{d.stopPropagation(),e.controller.selectMenuByCommandId(e.option.commandId,l.key)},children:[E("span",{className:jo.frontIcon,children:!!l.checked&&E(N5,{})}),l.label]},l.key)})}),E("span",{style:{flex:1,display:"inline-block"},children:e.option.label}),E("span",{style:{display:"inline-flex",width:20,alignItems:"center"},children:Pc(e.option)&&E(X5,{})}),n.map(l=>E("span",{className:jo.shortcut,children:l},l))]},e.option.commandId)},U9=e=>{const t=Ft(It),n=v.useRef(null),r=v.useRef(null);r.current||(r.current=new ha(e.options)),fa(ru).set(e.visible),ut(r.current.onStateChange),fa(ow).set(!!r.current.selectedMenu&&Pc(r.current.selectedMenu)),ns(r.current.onHide,()=>{e.onVisibleChange&&e.onVisibleChange(!1)}),v.useEffect(()=>{e.visible&&t.registerView(ha.id,r.current)},[e.visible,n]);const s=v.useRef(null);return v.useLayoutEffect(()=>{var a;e.visible?(s.current=document.activeElement,setTimeout(()=>{var l;(l=n.current)==null||l.focus()},10)):((a=n.current)==null||a.blur(),r.current=null,setTimeout(()=>{var l;(l=s.current)==null||l.focus()},10))},[e.visible,n,s]),E("ul",{role:"menu",className:jo.hbMenu,tabIndex:33,ref:n,onBlur:a=>{var l;(l=r.current)==null||l.hide()},children:e.options.map(a=>E(V9,{option:a,controller:r.current},a.commandId))})},NA=e=>E(C9,{autoFocus:!1,visible:e.visible,onVisibleChange:e.onVisibleChange,placement:"bottomRight",overlay:()=>E(U9,{options:e.options,visible:e.visible,onVisibleChange:e.onVisibleChange}),children:e.children}),$9="_highlight-card_1nnel_1",W9="_highlight-card-header_1nnel_10",z9="_time_1nnel_15",B9="_highlight-text_1nnel_23",H9="_highlight-card-input_1nnel_28",j9="_highlight-card-focus_1nnel_39",K9="_highlight-card-focus-select_1nnel_43",Ta={"highlight-card":"_highlight-card_1nnel_1",highlightCard:$9,"highlight-card-header":"_highlight-card-header_1nnel_10",highlightCardHeader:W9,time:z9,"highlight-text":"_highlight-text_1nnel_23",highlightText:B9,"highlight-card-input":"_highlight-card-input_1nnel_28",highlightCardInput:H9,"highlight-card-focus":"_highlight-card-focus_1nnel_39",highlightCardFocus:j9,"highlight-card-focus-select":"_highlight-card-focus-select_1nnel_43",highlightCardFocusSelect:K9},G9=Q.forwardRef((e,t)=>{const{highlightId:n,controller:r,text:i,note:o}=e,s=e.selected,a=e.focused,[l,c]=v.useState(o);v.useEffect(()=>{c(o)},[o]),ut(r.onStatusChange);const d=v.useRef(null);return ns(r.onEditNote,()=>{var h,p;s&&(r.idEditing?(h=d.current)==null||h.focus():(p=d.current)==null||p.blur())},[s,d]),ce("div",{"data-virtual-list-item-id-id":e.id,className:Te({[Ta.highlightCard]:!0,[Ta.highlightCardFocus]:s,[Ta.highlightCardFocusSelect]:a&&s}),onClick:()=>{e.onSelect()},children:[ce("div",{className:Ta.highlightCardHeader,children:[E("div",{className:Ta.time,children:Oo(e.editTime).format("YYYY-MM-DD HH:MM:ss")}),E(NA,{getPopupContainer:()=>t==null?void 0:t.current,visible:n===r.visibleMenuId,onVisibleChange:h=>{h?r.setVisibleMenuId(n):r.setVisibleMenuId(null)},options:[{keyCode:U.KEY_C|ft.CtrlCmd,commandId:XR,args:[n],label:z("highlight.action.copyText","Copy Highlight Text")},{commandId:ZR,args:[n],label:z("highlight.action.copyUrl","Copy Highlight URL")},{keyCode:U.KEY_C|ft.CtrlCmd|ft.Shift,commandId:JR,args:[n],label:z("highlight.action.copyNote","Copy Note")},{keyCode:U.KEY_N,commandId:QR,args:[n],label:z("highlight.action.EditNote","Edit Note")},{keyCode:U.Backspace,commandId:o3,args:[n],label:z("highlight.action.delete","Delete")}],children:E("div",{children:E(No,{keyCode:U.KEY_M,placement:"left",title:z("highlight.menu","Highlight Menu"),children:E(Y5,{size:16})})})})]}),E("div",{className:Te([Ta.highlightText,"text"]),style:{position:"relative"},children:i}),E(Mb,{autoSize:{maxRows:100},value:l,onChange:h=>{c(h.target.value)},onFocus:()=>{r.editNote(!0)},ref:d,className:Ta.highlightCardInput,onBlur:()=>{r.updateNote(n,l??"")}})]},n)});const Y9="_highlights-container_x6uf3_1",q9={"highlights-container":"_highlights-container_x6uf3_1",highlightsContainer:Y9},Q9=e=>{const t=e.model,n=t==null?void 0:t.highlightsListController;return ut(t==null?void 0:t.onModelChanged),ut(n==null?void 0:n.list.onSelectItemChange),ut(n==null?void 0:n.onStatusChange),!n||n.highlights.length===0?ce("div",{className:"empty",children:[E("p",{children:z("highlight_empty.title","No annotation.")}),E("p",{children:z("highlight_empty.sub_title","Create one by selecting some text and clicking the highlight button.")})]}):E("div",{className:q9.highlightsContainer,tabIndex:3,children:E(gm,{itemHeight:150,list:n.list,renderListItem:(r,{focused:i})=>E(G9,{id:r.id,editTime:r.editTime,focused:i,controller:n,highlightId:r.highlightId,text:r.text,note:r.note,selected:r.id===n.list.selectId,onSelect:()=>{n.list.select(r.id)}},r.id)})})},X9="_container_1ucys_1",Z9={container:X9},DA=e=>(ut(e.controller.onStatusChange),e.controller.rightPanel===null?null:ce("div",{className:Z9.container,children:[e.controller.rightPanel==="info"&&E(Cj,{model:e.model}),e.controller.rightPanel==="notes"&&E(Q9,{model:e.model})]}));De.registerCommandAndKeybindingRule({id:aR,weight:Fe.WorkbenchContrib+5,when:zc,handler:e=>{const n=e.get(It).getViewWithId(Fn.id);n&&n.editView()}});De.registerCommandAndKeybindingRule({id:rR,weight:Fe.WorkbenchContrib+5,when:zc,primary:U.KEY_F|ft.Alt,handler:e=>{const n=e.get(It).getViewWithId(Fn.id);n&&n.toggleShowFilter()}});De.registerCommandAndKeybindingRule({id:XV,weight:Fe.WorkbenchContrib+5,when:zc,primary:U.KEY_1|ft.Alt,handler:e=>{const n=e.get(It).getViewWithId(Fn.id);n&&n.setLayout("column")}});De.registerCommandAndKeybindingRule({id:QV,weight:Fe.WorkbenchContrib+5,when:zc,primary:U.KEY_2|ft.Alt,handler:e=>{const n=e.get(It).getViewWithId(Fn.id);n&&n.setLayout("list")}});De.registerCommandAndKeybindingRule({id:iR,weight:Fe.WorkbenchContrib+5,handler:async e=>{const t=e.get(hs),r=e.get(It).getViewWithId(Fn.id);if(!r)return;const i=await t.show({title:z("prompt.limit_count","Limit Count"),items:[{type:"input",label:z("prompt.limit","Limit"),key:"limit",required:!0,validate:[s=>{const a=parseInt(s,10);if(isNaN(a)||a<0)return z("prompt.limit.invalid","Limit is invalid")}]}]});if(!i)return;const o=parseInt(i.limit,10);r.enableLimit(o)}});De.registerCommandAndKeybindingRule({id:oR,weight:Fe.WorkbenchContrib+5,handler:async e=>{const n=e.get(It).getViewWithId(Fn.id);n&&n.disableLimit()}});De.registerCommandAndKeybindingRule({id:M0,weight:Fe.WorkbenchContrib+5,handler:async e=>{const t=e.get(hs),r=e.get(It).getViewWithId(Fn.id);if(!r)return;const i=await t.show({title:z("prompt.limit_count","Limit Count"),items:[{type:"input",label:z("prompt.limit","Limit"),key:"limit",defaultValue:String(r.filter.limit.count),required:!0,validate:[s=>{const a=parseInt(s,10);if(isNaN(a)||a<0)return z("prompt.limit.invalid","Limit is invalid")}]}]});if(!i)return;const o=parseInt(i.limit,10);r.enableLimit(o)}});De.registerCommandAndKeybindingRule({id:sR,weight:Fe.WorkbenchContrib+5,handler:async(e,t)=>{const r=e.get(It).getViewWithId(Fn.id);r&&r.filter.updateSort(t)}});De.registerCommandAndKeybindingRule({id:lR,weight:Fe.WorkbenchContrib+5,handler:async(e,t)=>{const r=e.get(It).getViewWithId(Fn.id);!r||!r.rssUrl||window.open(r.rssUrl)}});De.registerCommandAndKeybindingRule({id:T0,weight:Fe.WorkbenchContrib+5,handler:async(e,t)=>{const n=e.get(wc),r=e.get(hs),i=e.get(Yn),o=await r.show({title:z("view_prompt.create_view","Create View"),items:[{label:z("view_prompt.title","Title"),key:"title",type:"input",required:!0},{label:z("view_prompt.description","Description"),key:"description",type:"input"}]});if(!o)return;const{title:s,description:a}=o,l=Qo.create();l.title=s,typeof a=="string"&&(l.description=a),await n.saveWebpageView(l),i.go("webpage_view",{viewId:l.id})}});const Gx=/嘦巭(.*?)嫑勥/s,J9=/(嘦巭.*?嫑勥)/s;function e7(e){return e.split(J9).map(n=>Gx.test(n)?{type:"mark",content:Gx.exec(n)[1]}:{type:"text",content:n})}const t7="_container_xhvgy_3",n7="_title_xhvgy_9",r7="_subtitle_xhvgy_25",i7="_container-selected_xhvgy_41",o7="_container-selected-focused_xhvgy_45",s7="_highlight-mark_xhvgy_49",a7="_title-container_xhvgy_62",l7="_title-number_xhvgy_70",yo={container:t7,title:n7,subtitle:r7,"container-selected":"_container-selected_xhvgy_41",containerSelected:i7,"container-selected-focused":"_container-selected-focused_xhvgy_45",containerSelectedFocused:o7,"highlight-mark":"_highlight-mark_xhvgy_49",highlightMark:s7,"title-container":"_title-container_xhvgy_62",titleContainer:a7,"title-number":"_title-number_xhvgy_70",titleNumber:l7};function Yx(e){if(!e)return null;try{return new URL(e).host}catch{return null}}function c7({text:e}){const t=e7(e);return E(Q.Fragment,{children:t.map((n,r)=>{const i={};return n.type==="mark"&&(i.color="#30cccc",i.fontWeight="bold"),E("span",{style:i,children:n.content},r++)})})}const u7=Q.forwardRef((e,t)=>{const n=e.focused,r=e.currentItem;return ut(e.list.onTreeListStateChange),ns(e.list.onTreeListStateChange,({state:i,preferPosition:o})=>{const s=i;if(s.currentIndex===null)return null;const a=e.list.items[s.currentIndex];if(a.id!==r.id)return;const l=s.currentGroupIndex===null?`[data-search-result-item-title="${r.id}"]`:`[data-search-result-item-mark="${r.id}-${s.currentGroupIndex}"]`,c=document.querySelector(l);if(c){let d=c==null?void 0:c.parentElement;for(;d&&(d=d==null?void 0:d.parentElement,(d==null?void 0:d.className)!=="rc-virtual-list-holder"););if(d){const h=d.getBoundingClientRect(),p=c.getBoundingClientRect();if(p.bottom<h.bottom&&p.top>h.top)return}}switch(o){case"top":{let d=0;s.currentGroupIndex!==null&&(d=-s.currentGroupIndex*19),e.virtualList.scrollTo({key:a.id,align:"top",offset:d});return}case"bottom":{console.log("bottom",e.listHeight),e.virtualList.scrollTo({key:a.id,align:"top",offset:e.listHeight-(s.currentGroupIndex??0)*19-100});return}}}),ce("div",{ref:t,id:r.id,className:Te({[yo.container]:!0}),children:[ce("div",{"data-search-result-item-title":`${r.id}`,className:Te({[yo.titleContainer]:!0,[yo.containerSelected]:e.list.isSelected(r.id,null)&&!n,[yo.containerSelectedFocused]:e.list.isSelected(r.id,null)&&n}),onClick:()=>{e.list.select(r.id,null)},children:[E("div",{className:yo.title,children:E(c7,{text:r.title})}),E("div",{className:yo.titleNumber,children:r.marks.length})]}),E("div",{children:r.marks.map((i,o)=>ce("div",{"data-search-result-item-mark":`${r.id}-${o}`,onClick:()=>{e.list.select(r.id,o)},className:Te({[yo.highlightMark]:!0,[yo.containerSelected]:e.list.isSelected(r.id,o)&&!n,[yo.containerSelectedFocused]:e.list.isSelected(r.id,o)&&n}),children:[i.prefix,E("span",{style:{color:"#30cccc",fontWeight:500},children:i.content}),i.suffix]},o))}),ce("div",{className:yo.subtitle,children:[E("span",{children:E("img",{src:QL})}),E("span",{children:Yx(r.link)&&Yx(r.link)}),E("span",{children:" · "}),E("span",{children:Oo(r.first_add_time).format("YYYY-MM-DD")})]})]},r.id)}),d7="toolbar.action.showMenu",FA=new At("toolbarVisible",!1),sw=Lt.and(FA,Lt.not(Dg)),f7="webpages_toolbar.action.showNotes",h7="webpages_toolbar.action.showInfo";De.registerCommandAndKeybindingRule({id:d7,weight:Fe.WorkbenchContrib+5,when:sw,primary:ft.Alt|U.KEY_M,handler:e=>{const n=e.get(Yn).pageInstance;(n instanceof os||n instanceof Fn)&&n.setShowMenu(!0)}});De.registerCommandAndKeybindingRule({id:f7,weight:Fe.WorkbenchContrib+5,when:sw,primary:ft.Alt|U.KEY_N,handler:e=>{const n=e.get(Yn).pageInstance;(n instanceof Fn||n instanceof os)&&n.toolbar.toggleRightPanel("notes")}});De.registerCommandAndKeybindingRule({id:h7,weight:Fe.WorkbenchContrib+5,when:sw,primary:ft.Alt|U.KEY_I,handler:e=>{const n=e.get(Yn).pageInstance;(n instanceof Fn||n instanceof os)&&n.toolbar.toggleRightPanel("info")}});const p7="_tool-bar_yzf4x_1",g7="_tool-bar-left_yzf4x_9",m7="_tool-bar-right_yzf4x_19",c_={"tool-bar":"_tool-bar_yzf4x_1",toolBar:p7,"tool-bar-left":"_tool-bar-left_yzf4x_9",toolBarLeft:g7,"tool-bar-right":"_tool-bar-right_yzf4x_19",toolBarRight:m7},VA=e=>{ut(e.toolbarController.onStatusChange),Po(FA);const t=Ft(us);return E("div",{children:ce("div",{className:c_.toolBar,children:[E("div",{className:c_.toolBarLeft,children:e.leftElement}),ce("div",{className:c_.toolBarRight,children:[ce("div",{style:{display:"flex",paddingLeft:12},children:[E(ki,{disabled:e.noWebpageSelect,title:z("webpages_layout.delete_webpage","Delete Webpage"),onClick:()=>{t.executeCommand(hR)},renderIcon:n=>E(JT,{size:n})},"delete"),E("div",{style:{width:4}}),E(ki,{disabled:e.noWebpageSelect,title:z("webpages_layout.like","Like"),keyCode:U.KEY_L,onClick:()=>{t.executeCommand(dR)},renderIcon:n=>e.liked?E(LC,{size:n,theme:"filled",fill:"#ff4880"}):E(LC,{size:n})},"liked"),E("div",{style:{width:4}}),E(ki,{disabled:e.noWebpageSelect,title:e.read?z("webpages_layout.mark_unread","Mark as UnRead"):z("webpages_layout.mark_read","Mark as Read"),keyCode:U.KEY_R,onClick:()=>{t.executeCommand(fR)},renderIcon:n=>e.read?E(z5,{size:n,theme:"filled"}):E(Z5,{size:n})},"unread")]}),ce("div",{style:{display:"flex"},children:[E(ki,{placement:"bottomRight",title:z("webpages.toolbar.notes","Notes"),keyCode:U.KEY_N|ft.Alt,active:e.toolbarController.rightPanel==="notes",onClick:()=>{e.toolbarController.toggleRightPanel("notes")},renderIcon:n=>E(q5,{size:n})}),E("div",{style:{width:4}}),E(ki,{title:z("webpages.toolbar.info","Info"),keyCode:U.KEY_I|ft.Alt,active:e.toolbarController.rightPanel==="info",onClick:()=>{e.toolbarController.toggleRightPanel("info")},renderIcon:n=>E(H5,{size:n}),placement:"bottomRight"}),E("div",{style:{width:4}}),E(NA,{visible:e.showMenu,onVisibleChange:n=>{e.setShowMenu(n)},options:e.menus,children:E("div",{children:E(ki,{placement:"left",title:z("webpages.toolbar.more","More"),keyCode:U.KEY_M|ft.Alt,renderIcon:n=>E(G5,{size:n})})})})]})]})]})})};function xd(){return xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xd.apply(this,arguments)}var u_,Db={};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/u_={get exports(){return Db},set exports(e){Db=e}},function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if(o==="string"||o==="number")n.push(i);else if(Array.isArray(i)){if(i.length){var s=t.apply(null,i);s&&n.push(s)}}else if(o==="object")if(i.toString===Object.prototype.toString)for(var a in i)e.call(i,a)&&i[a]&&n.push(a);else n.push(i.toString())}}return n.join(" ")}u_.exports?(t.default=t,u_.exports=t):window.classNames=t}();var Fb=Db,v7=/^\s+|\s+$/g,_7=/^[-+]0x[0-9a-f]+$/i,y7=/^0b[01]+$/i,b7=/^0o[0-7]+$/i,S7=parseInt,w7=Object.prototype.toString;function qx(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function d_(e){if(typeof e=="number")return e;if(function(r){return typeof r=="symbol"||function(i){return!!i&&typeof i=="object"}(r)&&w7.call(r)=="[object Symbol]"}(e))return NaN;if(qx(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=qx(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(v7,"");var n=y7.test(e);return n||b7.test(e)?S7(e.slice(2),n?2:8):_7.test(e)?NaN:+e}var so=function(t,n,r){return r===void 0&&(r=n,n=void 0),r!==void 0&&(r=(r=d_(r))==r?r:0),n!==void 0&&(n=(n=d_(n))==n?n:0),function(i,o,s){return i==i&&(s!==void 0&&(i=i<=s?i:s),o!==void 0&&(i=i>=o?i:o)),i}(d_(t),n,r)},Ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hp={};(function(e,t){var n="__lodash_hash_undefined__",r=9007199254740991,i="[object Arguments]",o="[object Array]",s="[object Boolean]",a="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",g="[object Promise]",b="[object RegExp]",k="[object Set]",y="[object String]",_="[object Symbol]",w="[object WeakMap]",x="[object ArrayBuffer]",C="[object DataView]",F=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[i]=L[o]=L[x]=L[s]=L[C]=L[a]=L[l]=L[c]=L[d]=L[h]=L[p]=L[b]=L[k]=L[y]=L[w]=!1;var N=typeof Ws=="object"&&Ws&&Ws.Object===Object&&Ws,V=typeof self=="object"&&self&&self.Object===Object&&self,Y=N||V||Function("return this")(),J=t&&!t.nodeType&&t,H=J&&e&&!e.nodeType&&e,D=H&&H.exports===J,T=D&&N.process,W=function(){try{return T&&T.binding&&T.binding("util")}catch{}}(),B=W&&W.isTypedArray;function G(X,oe){for(var Se=-1,Be=X==null?0:X.length;++Se<Be;)if(oe(X[Se],Se,X))return!0;return!1}function te(X){var oe=-1,Se=Array(X.size);return X.forEach(function(Be,Wt){Se[++oe]=[Wt,Be]}),Se}function re(X){var oe=-1,Se=Array(X.size);return X.forEach(function(Be){Se[++oe]=Be}),Se}var ae,K,R,O=Array.prototype,j=Function.prototype,Z=Object.prototype,le=Y["__core-js_shared__"],ee=j.toString,ie=Z.hasOwnProperty,fe=(ae=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+ae:"",ge=Z.toString,we=RegExp("^"+ee.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=D?Y.Buffer:void 0,be=Y.Symbol,Ye=Y.Uint8Array,Pe=Z.propertyIsEnumerable,$e=O.splice,it=be?be.toStringTag:void 0,ht=Object.getOwnPropertySymbols,at=Ne?Ne.isBuffer:void 0,Le=(K=Object.keys,R=Object,function(X){return K(R(X))}),st=ve(Y,"DataView"),nt=ve(Y,"Map"),Xe=ve(Y,"Promise"),ze=ve(Y,"Set"),rt=ve(Y,"WeakMap"),et=ve(Object,"create"),pt=an(st),wt=an(nt),Mt=an(Xe),yt=an(ze),sn=an(rt),$n=be?be.prototype:void 0,qe=$n?$n.valueOf:void 0;function Qe(X){var oe=-1,Se=X==null?0:X.length;for(this.clear();++oe<Se;){var Be=X[oe];this.set(Be[0],Be[1])}}function bt(X){var oe=-1,Se=X==null?0:X.length;for(this.clear();++oe<Se;){var Be=X[oe];this.set(Be[0],Be[1])}}function Ht(X){var oe=-1,Se=X==null?0:X.length;for(this.clear();++oe<Se;){var Be=X[oe];this.set(Be[0],Be[1])}}function Ot(X){var oe=-1,Se=X==null?0:X.length;for(this.__data__=new Ht;++oe<Se;)this.add(X[oe])}function mn(X){var oe=this.__data__=new bt(X);this.size=oe.size}function Vt(X,oe){var Se=Ut(X),Be=!Se&&mr(X),Wt=!Se&&!Be&&Nt(X),vt=!Se&&!Be&&!Wt&&Yt(X),tn=Se||Be||Wt||vt,fn=tn?function(Qt,hn){for(var lr=-1,On=Array(Qt);++lr<Qt;)On[lr]=hn(lr);return On}(X.length,String):[],An=fn.length;for(var jt in X)!oe&&!ie.call(X,jt)||tn&&(jt=="length"||Wt&&(jt=="offset"||jt=="parent")||vt&&(jt=="buffer"||jt=="byteLength"||jt=="byteOffset")||dt(jt,An))||fn.push(jt);return fn}function vn(X,oe){for(var Se=X.length;Se--;)if(yn(X[Se][0],oe))return Se;return-1}function qt(X){return X==null?X===void 0?"[object Undefined]":"[object Null]":it&&it in Object(X)?function(oe){var Se=ie.call(oe,it),Be=oe[it];try{oe[it]=void 0;var Wt=!0}catch{}var vt=ge.call(oe);return Wt&&(Se?oe[it]=Be:delete oe[it]),vt}(X):function(oe){return ge.call(oe)}(X)}function _n(X){return Qn(X)&&qt(X)==i}function Pt(X,oe,Se,Be,Wt){return X===oe||(X==null||oe==null||!Qn(X)&&!Qn(oe)?X!=X&&oe!=oe:function(vt,tn,fn,An,jt,Qt){var hn=Ut(vt),lr=Ut(tn),On=hn?o:Je(vt),vr=lr?o:Je(tn),Hr=(On=On==i?p:On)==p,ei=(vr=vr==i?p:vr)==p,ti=On==vr;if(ti&&Nt(vt)){if(!Nt(tn))return!1;hn=!0,Hr=!1}if(ti&&!Hr)return Qt||(Qt=new mn),hn||Yt(vt)?qn(vt,tn,fn,An,jt,Qt):function(Ae,Re,bn,ln,Tt,Dt,Xt){switch(bn){case C:if(Ae.byteLength!=Re.byteLength||Ae.byteOffset!=Re.byteOffset)return!1;Ae=Ae.buffer,Re=Re.buffer;case x:return!(Ae.byteLength!=Re.byteLength||!Dt(new Ye(Ae),new Ye(Re)));case s:case a:case h:return yn(+Ae,+Re);case l:return Ae.name==Re.name&&Ae.message==Re.message;case b:case y:return Ae==Re+"";case d:var Wn=te;case k:var Xn=1&ln;if(Wn||(Wn=re),Ae.size!=Re.size&&!Xn)return!1;var jr=Xt.get(Ae);if(jr)return jr==Re;ln|=2,Xt.set(Ae,Re);var ur=qn(Wn(Ae),Wn(Re),ln,Tt,Dt,Xt);return Xt.delete(Ae),ur;case _:if(qe)return qe.call(Ae)==qe.call(Re)}return!1}(vt,tn,On,fn,An,jt,Qt);if(!(1&fn)){var ni=Hr&&ie.call(vt,"__wrapped__"),Xi=ei&&ie.call(tn,"__wrapped__");if(ni||Xi){var Uo=ni?vt.value():vt,cr=Xi?tn.value():tn;return Qt||(Qt=new mn),jt(Uo,cr,fn,An,Qt)}}return ti?(Qt||(Qt=new mn),function(Ae,Re,bn,ln,Tt,Dt){var Xt=1&bn,Wn=ye(Ae),Xn=Wn.length,jr=ye(Re).length;if(Xn!=jr&&!Xt)return!1;for(var ur=Xn;ur--;){var Kr=Wn[ur];if(!(Xt?Kr in Re:ie.call(Re,Kr)))return!1}var Zi=Dt.get(Ae);if(Zi&&Dt.get(Re))return Zi==Re;var vo=!0;Dt.set(Ae,Re),Dt.set(Re,Ae);for(var gs=Xt;++ur<Xn;){var _o=Ae[Kr=Wn[ur]],ms=Re[Kr];if(ln)var Ca=Xt?ln(ms,_o,Kr,Re,Ae,Dt):ln(_o,ms,Kr,Ae,Re,Dt);if(!(Ca===void 0?_o===ms||Tt(_o,ms,bn,ln,Dt):Ca)){vo=!1;break}gs||(gs=Kr=="constructor")}if(vo&&!gs){var Ze=Ae.constructor,We=Re.constructor;Ze==We||!("constructor"in Ae)||!("constructor"in Re)||typeof Ze=="function"&&Ze instanceof Ze&&typeof We=="function"&&We instanceof We||(vo=!1)}return Dt.delete(Ae),Dt.delete(Re),vo}(vt,tn,fn,An,jt,Qt)):!1}(X,oe,Se,Be,Pt,Wt))}function zr(X){return!(!Jr(X)||function(oe){return!!fe&&fe in oe}(X))&&(Br(X)?we:F).test(an(X))}function ar(X){if(Se=(oe=X)&&oe.constructor,Be=typeof Se=="function"&&Se.prototype||Z,oe!==Be)return Le(X);var oe,Se,Be,Wt=[];for(var vt in Object(X))ie.call(X,vt)&&vt!="constructor"&&Wt.push(vt);return Wt}function qn(X,oe,Se,Be,Wt,vt){var tn=1&Se,fn=X.length,An=oe.length;if(fn!=An&&!(tn&&An>fn))return!1;var jt=vt.get(X);if(jt&&vt.get(oe))return jt==oe;var Qt=-1,hn=!0,lr=2&Se?new Ot:void 0;for(vt.set(X,oe),vt.set(oe,X);++Qt<fn;){var On=X[Qt],vr=oe[Qt];if(Be)var Hr=tn?Be(vr,On,Qt,oe,X,vt):Be(On,vr,Qt,X,oe,vt);if(Hr!==void 0){if(Hr)continue;hn=!1;break}if(lr){if(!G(oe,function(ei,ti){if(ni=ti,!lr.has(ni)&&(On===ei||Wt(On,ei,Se,Be,vt)))return lr.push(ti);var ni})){hn=!1;break}}else if(On!==vr&&!Wt(On,vr,Se,Be,vt)){hn=!1;break}}return vt.delete(X),vt.delete(oe),hn}function ye(X){return function(oe,Se,Be){var Wt=Se(oe);return Ut(oe)?Wt:function(vt,tn){for(var fn=-1,An=tn.length,jt=vt.length;++fn<An;)vt[jt+fn]=tn[fn];return vt}(Wt,Be(oe))}(X,_i,Ge)}function xe(X,oe){var Se,Be,Wt=X.__data__;return((Be=typeof(Se=oe))=="string"||Be=="number"||Be=="symbol"||Be=="boolean"?Se!=="__proto__":Se===null)?Wt[typeof oe=="string"?"string":"hash"]:Wt.map}function ve(X,oe){var Se=function(Be,Wt){return Be==null?void 0:Be[Wt]}(X,oe);return zr(Se)?Se:void 0}Qe.prototype.clear=function(){this.__data__=et?et(null):{},this.size=0},Qe.prototype.delete=function(X){var oe=this.has(X)&&delete this.__data__[X];return this.size-=oe?1:0,oe},Qe.prototype.get=function(X){var oe=this.__data__;if(et){var Se=oe[X];return Se===n?void 0:Se}return ie.call(oe,X)?oe[X]:void 0},Qe.prototype.has=function(X){var oe=this.__data__;return et?oe[X]!==void 0:ie.call(oe,X)},Qe.prototype.set=function(X,oe){var Se=this.__data__;return this.size+=this.has(X)?0:1,Se[X]=et&&oe===void 0?n:oe,this},bt.prototype.clear=function(){this.__data__=[],this.size=0},bt.prototype.delete=function(X){var oe=this.__data__,Se=vn(oe,X);return!(Se<0)&&(Se==oe.length-1?oe.pop():$e.call(oe,Se,1),--this.size,!0)},bt.prototype.get=function(X){var oe=this.__data__,Se=vn(oe,X);return Se<0?void 0:oe[Se][1]},bt.prototype.has=function(X){return vn(this.__data__,X)>-1},bt.prototype.set=function(X,oe){var Se=this.__data__,Be=vn(Se,X);return Be<0?(++this.size,Se.push([X,oe])):Se[Be][1]=oe,this},Ht.prototype.clear=function(){this.size=0,this.__data__={hash:new Qe,map:new(nt||bt),string:new Qe}},Ht.prototype.delete=function(X){var oe=xe(this,X).delete(X);return this.size-=oe?1:0,oe},Ht.prototype.get=function(X){return xe(this,X).get(X)},Ht.prototype.has=function(X){return xe(this,X).has(X)},Ht.prototype.set=function(X,oe){var Se=xe(this,X),Be=Se.size;return Se.set(X,oe),this.size+=Se.size==Be?0:1,this},Ot.prototype.add=Ot.prototype.push=function(X){return this.__data__.set(X,n),this},Ot.prototype.has=function(X){return this.__data__.has(X)},mn.prototype.clear=function(){this.__data__=new bt,this.size=0},mn.prototype.delete=function(X){var oe=this.__data__,Se=oe.delete(X);return this.size=oe.size,Se},mn.prototype.get=function(X){return this.__data__.get(X)},mn.prototype.has=function(X){return this.__data__.has(X)},mn.prototype.set=function(X,oe){var Se=this.__data__;if(Se instanceof bt){var Be=Se.__data__;if(!nt||Be.length<199)return Be.push([X,oe]),this.size=++Se.size,this;Se=this.__data__=new Ht(Be)}return Se.set(X,oe),this.size=Se.size,this};var Ge=ht?function(X){return X==null?[]:(X=Object(X),function(oe,Se){for(var Be=-1,Wt=oe==null?0:oe.length,vt=0,tn=[];++Be<Wt;){var fn=oe[Be];Se(fn,Be,oe)&&(tn[vt++]=fn)}return tn}(ht(X),function(oe){return Pe.call(X,oe)}))}:function(){return[]},Je=qt;function dt(X,oe){return!!(oe=oe??r)&&(typeof X=="number"||M.test(X))&&X>-1&&X%1==0&&X<oe}function an(X){if(X!=null){try{return ee.call(X)}catch{}try{return X+""}catch{}}return""}function yn(X,oe){return X===oe||X!=X&&oe!=oe}(st&&Je(new st(new ArrayBuffer(1)))!=C||nt&&Je(new nt)!=d||Xe&&Je(Xe.resolve())!=g||ze&&Je(new ze)!=k||rt&&Je(new rt)!=w)&&(Je=function(X){var oe=qt(X),Se=oe==p?X.constructor:void 0,Be=Se?an(Se):"";if(Be)switch(Be){case pt:return C;case wt:return d;case Mt:return g;case yt:return k;case sn:return w}return oe});var mr=_n(function(){return arguments}())?_n:function(X){return Qn(X)&&ie.call(X,"callee")&&!Pe.call(X,"callee")},Ut=Array.isArray,Nt=at||function(){return!1};function Br(X){if(!Jr(X))return!1;var oe=qt(X);return oe==c||oe=="[object GeneratorFunction]"||oe=="[object AsyncFunction]"||oe=="[object Proxy]"}function Li(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=r}function Jr(X){var oe=typeof X;return X!=null&&(oe=="object"||oe=="function")}function Qn(X){return X!=null&&typeof X=="object"}var Yt=B?function(X){return function(oe){return X(oe)}}(B):function(X){return Qn(X)&&Li(X.length)&&!!L[qt(X)]};function _i(X){return(oe=X)!=null&&Li(oe.length)&&!Br(oe)?Vt(X):ar(X);var oe}e.exports=function(X,oe){return Pt(X,oe)}})({get exports(){return hp},set exports(e){hp=e}},hp);var E7=hp;function Qx(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}function C7(e){e===void 0&&(e={});var t=e.onResize,n=v.useRef(void 0);n.current=t;var r=e.round||Math.round,i=v.useRef(),o=v.useState({width:void 0,height:void 0}),s=o[0],a=o[1],l=v.useRef(!1);v.useEffect(function(){return l.current=!1,function(){l.current=!0}},[]);var c=v.useRef({width:void 0,height:void 0}),d=function(h,p){var g=v.useRef(null),b=v.useRef(null);b.current=p;var k=v.useRef(null);v.useEffect(function(){y()});var y=v.useCallback(function(){var _=k.current,w=b.current,x=_||(w?w instanceof Element?w:w.current:null);g.current&&g.current.element===x&&g.current.subscriber===h||(g.current&&g.current.cleanup&&g.current.cleanup(),g.current={element:x,subscriber:h,cleanup:x?h(x):void 0})},[h]);return v.useEffect(function(){return function(){g.current&&g.current.cleanup&&(g.current.cleanup(),g.current=null)}},[]),v.useCallback(function(_){k.current=_,y()},[y])}(v.useCallback(function(h){return i.current&&i.current.box===e.box&&i.current.round===r||(i.current={box:e.box,round:r,instance:new ResizeObserver(function(p){var g=p[0],b=e.box==="border-box"?"borderBoxSize":e.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",k=Qx(g,b,"inlineSize"),y=Qx(g,b,"blockSize"),_=k?r(k):void 0,w=y?r(y):void 0;if(c.current.width!==_||c.current.height!==w){var x={width:_,height:w};c.current.width=_,c.current.height=w,n.current?n.current(x):l.current||a(x)}})}),i.current.instance.observe(h,{box:e.box}),function(){i.current&&i.current.instance.unobserve(h)}},[e.box,r]),e.ref);return v.useMemo(function(){return{ref:d,width:s.width,height:s.height}},[d,s.width,s.height])}var x7="allotment-module_splitView__L-yRc",k7="allotment-module_sashContainer__fzwJF",I7="allotment-module_splitViewContainer__rQnVa",UA="allotment-module_splitViewView__MGZ6O",R7="allotment-module_vertical__WSwwa",M7="allotment-module_horizontal__7doS8",T7="allotment-module_separatorBorder__x-rDS";let Uu,$A=!1,WA=!1;typeof navigator=="object"&&(Uu=navigator.userAgent,WA=Uu.indexOf("Macintosh")>=0,$A=(Uu.indexOf("Macintosh")>=0||Uu.indexOf("iPad")>=0||Uu.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const zA=$A,L7=WA,f_=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?v.useLayoutEffect:v.useEffect;class A7{constructor(){this._size=void 0}getSize(){return this._size}setSize(t){this._size=t}}function kh(e,t){const n=e.length,r=n-t.length;return r>=0&&e.slice(r,n)===t}var Zd={};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function o(l,c,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new i(d,h||l,p),b=n?n+c:c;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],g]:l._events[b].push(g):(l._events[b]=g,l._eventsCount++),l}function s(l,c){--l._eventsCount==0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),a.prototype.eventNames=function(){var l,c,d=[];if(this._eventsCount===0)return d;for(c in l=this._events)t.call(l,c)&&d.push(n?c.slice(1):c);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(l)):d},a.prototype.listeners=function(l){var c=n?n+l:l,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,g=new Array(p);h<p;h++)g[h]=d[h].fn;return g},a.prototype.listenerCount=function(l){var c=n?n+l:l,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,c,d,h,p,g){var b=n?n+l:l;if(!this._events[b])return!1;var k,y,_=this._events[b],w=arguments.length;if(_.fn){switch(_.once&&this.removeListener(l,_.fn,void 0,!0),w){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,c),!0;case 3:return _.fn.call(_.context,c,d),!0;case 4:return _.fn.call(_.context,c,d,h),!0;case 5:return _.fn.call(_.context,c,d,h,p),!0;case 6:return _.fn.call(_.context,c,d,h,p,g),!0}for(y=1,k=new Array(w-1);y<w;y++)k[y-1]=arguments[y];_.fn.apply(_.context,k)}else{var x,C=_.length;for(y=0;y<C;y++)switch(_[y].once&&this.removeListener(l,_[y].fn,void 0,!0),w){case 1:_[y].fn.call(_[y].context);break;case 2:_[y].fn.call(_[y].context,c);break;case 3:_[y].fn.call(_[y].context,c,d);break;case 4:_[y].fn.call(_[y].context,c,d,h);break;default:if(!k)for(x=1,k=new Array(w-1);x<w;x++)k[x-1]=arguments[x];_[y].fn.apply(_[y].context,k)}}return!0},a.prototype.on=function(l,c,d){return o(this,l,c,d,!1)},a.prototype.once=function(l,c,d){return o(this,l,c,d,!0)},a.prototype.removeListener=function(l,c,d,h){var p=n?n+l:l;if(!this._events[p])return this;if(!c)return s(this,p),this;var g=this._events[p];if(g.fn)g.fn!==c||h&&!g.once||d&&g.context!==d||s(this,p);else{for(var b=0,k=[],y=g.length;b<y;b++)(g[b].fn!==c||h&&!g[b].once||d&&g[b].context!==d)&&k.push(g[b]);k.length?this._events[p]=k.length===1?k[0]:k:s(this,p)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&s(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})({get exports(){return Zd},set exports(e){Zd=e}});function Xx(e,t){const n=e.indexOf(t);n>-1&&(e.splice(n,1),e.unshift(t))}function h_(e,t){const n=e.indexOf(t);n>-1&&(e.splice(n,1),e.push(t))}function Ui(e,t,n=1){const r=Math.max(0,Math.ceil((t-e)/n)),i=new Array(r);let o=-1;for(;++o<r;)i[o]=e+o*n;return i}var O7=/^\s+|\s+$/g,P7=/^[-+]0x[0-9a-f]+$/i,N7=/^0b[01]+$/i,D7=/^0o[0-7]+$/i,F7=parseInt,V7=typeof Ws=="object"&&Ws&&Ws.Object===Object&&Ws,U7=typeof self=="object"&&self&&self.Object===Object&&self,$7=V7||U7||Function("return this")(),W7=Object.prototype.toString,z7=Math.max,B7=Math.min,p_=function(){return $7.Date.now()};function Vb(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Zx(e){if(typeof e=="number")return e;if(function(r){return typeof r=="symbol"||function(i){return!!i&&typeof i=="object"}(r)&&W7.call(r)=="[object Symbol]"}(e))return NaN;if(Vb(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Vb(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(O7,"");var n=N7.test(e);return n||D7.test(e)?F7(e.slice(2),n?2:8):P7.test(e)?NaN:+e}var H7=function(t,n,r){var i,o,s,a,l,c,d=0,h=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError("Expected a function");function b(C){var F=i,M=o;return i=o=void 0,d=C,a=t.apply(M,F)}function k(C){return d=C,l=setTimeout(_,n),h?b(C):a}function y(C){var F=C-c;return c===void 0||F>=n||F<0||p&&C-d>=s}function _(){var C=p_();if(y(C))return w(C);l=setTimeout(_,function(F){var M=n-(F-c);return p?B7(M,s-(F-d)):M}(C))}function w(C){return l=void 0,g&&i?b(C):(i=o=void 0,a)}function x(){var C=p_(),F=y(C);if(i=arguments,o=this,c=C,F){if(l===void 0)return k(c);if(p)return l=setTimeout(_,n),b(c)}return l===void 0&&(l=setTimeout(_,n)),a}return n=Zx(n)||0,Vb(r)&&(h=!!r.leading,s=(p="maxWait"in r)?z7(Zx(r.maxWait)||0,n):s,g="trailing"in r?!!r.trailing:g),x.cancel=function(){l!==void 0&&clearTimeout(l),d=0,i=c=o=l=void 0},x.flush=function(){return l===void 0?a:w(p_())},x},j7="sash-module_sash__K-9lB",K7="sash-module_disabled__Hm-wx",G7="sash-module_mac__Jf6OJ",Jx="sash-module_vertical__pB-rs",Y7="sash-module_minimum__-UKxp",q7="sash-module_maximum__TCWxD",ek="sash-module_horizontal__kFbiw",g_="sash-module_hover__80W6I",m_="sash-module_active__bJspD";let Wi=function(e){return e.Vertical="VERTICAL",e.Horizontal="HORIZONTAL",e}({}),Ci=function(e){return e.Disabled="DISABLED",e.Minimum="MINIMUM",e.Maximum="MAXIMUM",e.Enabled="ENABLED",e}({}),BA=zA?20:8;const HA=new Zd;class tk extends Zd{get state(){return this._state}set state(t){this._state!==t&&(this.el.classList.toggle(K7,t===Ci.Disabled),this.el.classList.toggle("dash-disabled",t===Ci.Disabled),this.el.classList.toggle(Y7,t===Ci.Minimum),this.el.classList.toggle("sash-minimum",t===Ci.Minimum),this.el.classList.toggle(q7,t===Ci.Maximum),this.el.classList.toggle("sash-maximum",t===Ci.Maximum),this._state=t,this.emit("enablementChange",t))}constructor(t,n,r){var i;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=H7(o=>o.classList.add("sash-hover",g_),this.hoverDelay),this._state=Ci.Enabled,this.onPointerStart=o=>{const s=o.pageX,a=o.pageY,l={startX:s,currentX:s,startY:a,currentY:a};this.el.classList.add("sash-active",m_),this.emit("start",l),this.el.setPointerCapture(o.pointerId);const c=h=>{h.preventDefault();const p={startX:s,currentX:h.pageX,startY:a,currentY:h.pageY};this.emit("change",p)},d=h=>{h.preventDefault(),this.el.classList.remove("sash-active",m_),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(h.pointerId),window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d)};window.addEventListener("pointermove",c),window.addEventListener("pointerup",d)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(m_)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",g_)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",g_)},this.el=document.createElement("div"),this.el.classList.add("sash",j7),this.el.dataset.testid="sash",t.append(this.el),L7&&this.el.classList.add("sash-mac",G7),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof r.size=="number"?(this.size=r.size,r.orientation===Wi.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=BA,HA.on("onDidChangeGlobalSize",o=>{this.size=o,this.layout()})),this.layoutProvider=n,this.orientation=(i=r.orientation)!=null?i:Wi.Vertical,this.orientation===Wi.Horizontal?(this.el.classList.add("sash-horizontal",ek),this.el.classList.remove("sash-vertical",Jx)):(this.el.classList.remove("sash-horizontal",ek),this.el.classList.add("sash-vertical",Jx)),this.layout()}layout(){if(this.orientation===Wi.Vertical){const t=this.layoutProvider;this.el.style.left=t.getVerticalSashLeft(this)-this.size/2+"px",t.getVerticalSashTop&&(this.el.style.top=t.getVerticalSashTop(this)+"px"),t.getVerticalSashHeight&&(this.el.style.height=t.getVerticalSashHeight(this)+"px")}else{const t=this.layoutProvider;this.el.style.top=t.getHorizontalSashTop(this)-this.size/2+"px",t.getHorizontalSashLeft&&(this.el.style.left=t.getHorizontalSashLeft(this)+"px"),t.getHorizontalSashWidth&&(this.el.style.width=t.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let Sg;var v_;(v_=Sg||(Sg={})).Distribute={type:"distribute"},v_.Split=function(e){return{type:"split",index:e}},v_.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}};let Yo=function(e){return e.Normal="NORMAL",e.Low="LOW",e.High="HIGH",e}({});class jA{constructor(t,n,r){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=t,this.view=n,this.container.classList.add("split-view-view",UA),this.container.dataset.testid="split-view-view",typeof r=="number"?(this._size=r,this._cachedVisibleSize=void 0,t.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=r.cachedVisibleSize)}set size(t){this._size=t}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(t,n){t!==this.visible&&(t?(this.size=so(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof n=="number"?n:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",t),this.view.setVisible&&this.view.setVisible(t))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(t){this.container.style.pointerEvents=t?"":"none"}layout(t){this.layoutContainer(t),this.view.layout(this.size,t)}}class Q7 extends jA{layoutContainer(t){this.container.style.left=`${t}px`,this.container.style.width=`${this.size}px`}}class X7 extends jA{layoutContainer(t){this.container.style.top=`${t}px`,this.container.style.height=`${this.size}px`}}class Z7 extends Zd{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(t){this._startSnappingEnabled!==t&&(this._startSnappingEnabled=t,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(t){this._endSnappingEnabled!==t&&(this._endSnappingEnabled=t,this.updateSashEnablement())}constructor(t,n={},r,i,o){var s,a;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=l=>{this.emit("sashchange",l),this.saveProportions();for(const c of this.viewItems)c.enabled=!0},this.orientation=(s=n.orientation)!=null?s:Wi.Vertical,this.proportionalLayout=(a=n.proportionalLayout)!=null?a:!0,this.getSashOrthogonalSize=n.getSashOrthogonalSize,r&&(this.onDidChange=r),i&&(this.onDidDragStart=i),o&&(this.onDidDragEnd=o),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",k7),t.prepend(this.sashContainer),n.descriptor){this.size=n.descriptor.size;for(const[l,c]of n.descriptor.views.entries()){const d=c.size,h=c.container,p=c.view;this.addView(h,p,d,l,!0)}this.contentSize=this.viewItems.reduce((l,c)=>l+c.size,0),this.saveProportions()}}addView(t,n,r,i=this.viewItems.length,o){let s;s=typeof r=="number"?r:r.type==="split"?this.getViewSize(r.index)/2:r.type==="invisible"?{cachedVisibleSize:r.cachedVisibleSize}:n.minimumSize;const a=this.orientation===Wi.Vertical?new X7(t,n,s):new Q7(t,n,s);if(this.viewItems.splice(i,0,a),this.viewItems.length>1){const l=this.orientation===Wi.Vertical?new tk(this.sashContainer,{getHorizontalSashTop:h=>this.getSashPosition(h),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:Wi.Horizontal}):new tk(this.sashContainer,{getVerticalSashLeft:h=>this.getSashPosition(h),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:Wi.Vertical}),c=this.orientation===Wi.Vertical?h=>({sash:l,start:h.startY,current:h.currentY}):h=>({sash:l,start:h.startX,current:h.currentX});l.on("start",h=>{var p;this.emit("sashDragStart"),this.onSashStart(c(h));const g=this.viewItems.map(b=>b.size);(p=this.onDidDragStart)==null||p.call(this,g)}),l.on("change",h=>this.onSashChange(c(h))),l.on("end",()=>{var h;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(g=>g.sash===l));const p=this.viewItems.map(g=>g.size);(h=this.onDidDragEnd)==null||h.call(this,p)}),l.on("reset",()=>{const h=this.sashItems.findIndex(y=>y.sash===l),p=Ui(h,-1,-1),g=Ui(h+1,this.viewItems.length),b=this.findFirstSnapIndex(p),k=this.findFirstSnapIndex(g);(typeof b!="number"||this.viewItems[b].visible)&&(typeof k!="number"||this.viewItems[k].visible)&&this.emit("sashreset",h)});const d={sash:l};this.sashItems.splice(i-1,0,d)}o||this.relayout(),o||typeof r=="number"||r.type!=="distribute"||this.distributeViewSizes()}removeView(t,n){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");const r=this.viewItems.splice(t,1)[0].view;if(this.viewItems.length>=1){const i=Math.max(t-1,0);this.sashItems.splice(i,1)[0].sash.dispose()}return this.relayout(),n&&n.type==="distribute"&&this.distributeViewSizes(),r}moveView(t,n,r){const i=this.getViewCachedVisibleSize(n),o=i===void 0?this.getViewSize(n):Sg.Invisible(i),s=this.removeView(n);this.addView(t,s,o,r)}getViewCachedVisibleSize(t){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[t].cachedVisibleSize}layout(t=this.size){const n=Math.max(this.size,this.contentSize);if(this.size=t,this.proportions)for(let r=0;r<this.viewItems.length;r++){const i=this.viewItems[r];i.size=so(Math.round(this.proportions[r]*t),i.minimumSize,i.maximumSize)}else{const r=Ui(0,this.viewItems.length),i=r.filter(s=>this.viewItems[s].priority===Yo.Low),o=r.filter(s=>this.viewItems[s].priority===Yo.High);this.resize(this.viewItems.length-1,t-n,void 0,i,o)}this.distributeEmptySpace(),this.layoutViews()}resizeView(t,n){if(t<0||t>=this.viewItems.length)return;const r=Ui(0,this.viewItems.length).filter(a=>a!==t),i=[...r.filter(a=>this.viewItems[a].priority===Yo.Low),t],o=r.filter(a=>this.viewItems[a].priority===Yo.High),s=this.viewItems[t];n=Math.round(n),n=so(n,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=n,this.relayout(i,o)}resizeViews(t){for(let n=0;n<t.length;n++){const r=this.viewItems[n];let i=t[n];i=Math.round(i),i=so(i,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=i}this.contentSize=this.viewItems.reduce((n,r)=>n+r.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(t){return t<0||t>=this.viewItems.length?-1:this.viewItems[t].size}isViewVisible(t){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[t].visible}setViewVisible(t,n){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[t].setVisible(n),this.distributeEmptySpace(t),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const t=[];let n=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(t.push(a),n+=a.size);const r=Math.floor(n/t.length);for(const a of t)a.size=so(r,a.minimumSize,a.maximumSize);const i=Ui(0,this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===Yo.Low),s=i.filter(a=>this.viewItems[a].priority===Yo.High);this.relayout(o,s)}dispose(){this.sashItems.forEach(t=>t.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(t,n){const r=this.viewItems.reduce((i,o)=>i+o.size,0);this.resize(this.viewItems.length-1,this.size-r,void 0,t,n),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:t,start:n}){const r=this.sashItems.findIndex(i=>i.sash===t);(i=>{const o=this.viewItems.map(w=>w.size);let s,a,l=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;const d=Ui(r,-1,-1),h=Ui(r+1,this.viewItems.length),p=d.reduce((w,x)=>w+(this.viewItems[x].minimumSize-o[x]),0),g=d.reduce((w,x)=>w+(this.viewItems[x].viewMaximumSize-o[x]),0),b=h.length===0?Number.POSITIVE_INFINITY:h.reduce((w,x)=>w+(o[x]-this.viewItems[x].minimumSize),0),k=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((w,x)=>w+(o[x]-this.viewItems[x].viewMaximumSize),0);l=Math.max(p,k),c=Math.min(b,g);const y=this.findFirstSnapIndex(d),_=this.findFirstSnapIndex(h);if(typeof y=="number"){const w=this.viewItems[y],x=Math.floor(w.viewMinimumSize/2);s={index:y,limitDelta:w.visible?l-x:l+x,size:w.size}}if(typeof _=="number"){const w=this.viewItems[_],x=Math.floor(w.viewMinimumSize/2);a={index:_,limitDelta:w.visible?c+x:c-x,size:w.size}}this.sashDragState={start:i,current:i,index:r,sizes:o,minDelta:l,maxDelta:c,snapBefore:s,snapAfter:a}})(n)}onSashChange({current:t}){const{index:n,start:r,sizes:i,minDelta:o,maxDelta:s,snapBefore:a,snapAfter:l}=this.sashDragState;this.sashDragState.current=t;const c=t-r;this.resize(n,c,i,void 0,void 0,o,s,a,l),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(t){let n=0;for(let r=0;r<this.sashItems.length;r++)if(n+=this.viewItems[r].size,this.sashItems[r].sash===t)return n;return 0}resize(t,n,r=this.viewItems.map(d=>d.size),i,o,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(t<0||t>=this.viewItems.length)return 0;const d=Ui(t,-1,-1),h=Ui(t+1,this.viewItems.length);if(o)for(const L of o)Xx(d,L),Xx(h,L);if(i)for(const L of i)h_(d,L),h_(h,L);const p=d.map(L=>this.viewItems[L]),g=d.map(L=>r[L]),b=h.map(L=>this.viewItems[L]),k=h.map(L=>r[L]),y=d.reduce((L,N)=>L+(this.viewItems[N].minimumSize-r[N]),0),_=d.reduce((L,N)=>L+(this.viewItems[N].maximumSize-r[N]),0),w=h.length===0?Number.POSITIVE_INFINITY:h.reduce((L,N)=>L+(r[N]-this.viewItems[N].minimumSize),0),x=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((L,N)=>L+(r[N]-this.viewItems[N].maximumSize),0),C=Math.max(y,x,s),F=Math.min(w,_,a);let M=!1;if(l){const L=this.viewItems[l.index],N=n>=l.limitDelta;M=N!==L.visible,L.setVisible(N,l.size)}if(!M&&c){const L=this.viewItems[c.index],N=n<c.limitDelta;M=N!==L.visible,L.setVisible(N,c.size)}if(M)return this.resize(t,n,r,i,o,s,a);for(let L=0,N=n=so(n,C,F);L<p.length;L++){const V=p[L],Y=so(g[L]+N,V.minimumSize,V.maximumSize);N-=Y-g[L],V.size=Y}for(let L=0,N=n;L<b.length;L++){const V=b[L],Y=so(k[L]-N,V.minimumSize,V.maximumSize);N+=Y-k[L],V.size=Y}return n}distributeEmptySpace(t){const n=this.viewItems.reduce((o,s)=>o+s.size,0);let r=this.size-n;const i=Ui(this.viewItems.length-1,-1,-1);typeof t=="number"&&h_(i,t);for(let o=0;r!==0&&o<i.length;o++){const s=this.viewItems[i[o]],a=so(s.size+r,s.minimumSize,s.maximumSize);r-=a-s.size,s.size=a}}layoutViews(){var t;this.contentSize=this.viewItems.reduce((r,i)=>r+i.size,0);let n=0;for(const r of this.viewItems)r.layout(n),n+=r.size;(t=this.onDidChange)!=null&&t.call(this,this.viewItems.map(r=>r.size)),this.sashItems.forEach(r=>r.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(t=>t.size/this.contentSize))}updateSashEnablement(){let t=!1;const n=this.viewItems.map(l=>t=l.size-l.minimumSize>0||t);t=!1;const r=this.viewItems.map(l=>t=l.maximumSize-l.size>0||t),i=[...this.viewItems].reverse();t=!1;const o=i.map(l=>t=l.size-l.minimumSize>0||t).reverse();t=!1;const s=i.map(l=>t=l.maximumSize-l.size>0||t).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l];a+=this.viewItems[l].size;const d=!(n[l]&&s[l+1]),h=!(r[l]&&o[l+1]);if(d&&h){const p=Ui(l,-1,-1),g=Ui(l+1,this.viewItems.length),b=this.findFirstSnapIndex(p),k=this.findFirstSnapIndex(g),y=typeof b=="number"&&!this.viewItems[b].visible,_=typeof k=="number"&&!this.viewItems[k].visible;y&&o[l]&&(a>0||this.startSnappingEnabled)?c.state=Ci.Minimum:_&&n[l]&&(a<this.contentSize||this.endSnappingEnabled)?c.state=Ci.Maximum:c.state=Ci.Disabled}else c.state=d&&!h?Ci.Minimum:!d&&h?Ci.Maximum:Ci.Enabled}}findFirstSnapIndex(t){for(const n of t){const r=this.viewItems[n];if(r.visible&&r.snap)return n}for(const n of t){const r=this.viewItems[n];if(r.visible&&r.maximumSize-r.minimumSize>0)return;if(!r.visible&&r.snap)return n}}}class Nl{constructor(t){this.size=void 0,this.size=t}getPreferredSize(){return this.size}}class nk{constructor(t,n){this.proportion=void 0,this.layoutService=void 0,this.proportion=t,this.layoutService=n}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class Ih{getPreferredSize(){}}class rk{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(t){if(typeof t=="number")this.layoutStrategy=new Nl(t);else if(typeof t=="string"){const n=t.trim();if(kh(n,"%")){const r=Number(n.slice(0,-1))/100;this.layoutStrategy=new nk(r,this.layoutService)}else if(kh(n,"px")){const r=Number(n.slice(0,-2))/100;this.layoutStrategy=new Nl(r)}else if(typeof Number.parseFloat(n)=="number"){const r=Number.parseFloat(n);this.layoutStrategy=new Nl(r)}else this.layoutStrategy=new Ih}else this.layoutStrategy=new Ih}constructor(t,n){var r;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=t,this.element=n.element,this.minimumSize=typeof n.minimumSize=="number"?n.minimumSize:30,this.maximumSize=typeof n.maximumSize=="number"?n.maximumSize:Number.POSITIVE_INFINITY,typeof n.preferredSize=="number")this.layoutStrategy=new Nl(n.preferredSize);else if(typeof n.preferredSize=="string"){const i=n.preferredSize.trim();if(kh(i,"%")){const o=Number(i.slice(0,-1))/100;this.layoutStrategy=new nk(o,this.layoutService)}else if(kh(i,"px")){const o=Number(i.slice(0,-2));this.layoutStrategy=new Nl(o)}else if(typeof Number.parseFloat(i)=="number"){const o=Number.parseFloat(i);this.layoutStrategy=new Nl(o)}else this.layoutStrategy=new Ih}else this.layoutStrategy=new Ih;this.priority=(r=n.priority)!=null?r:Yo.Normal,this.snap=typeof n.snap=="boolean"&&n.snap}layout(t){}}function ik(e){return e.minSize!==void 0||e.maxSize!==void 0||e.preferredSize!==void 0||e.priority!==void 0||e.visible!==void 0}const aw=v.forwardRef(({className:e,children:t},n)=>E("div",{ref:n,className:Fb("split-view-view",UA,e),children:t}));aw.displayName="Allotment.Pane";const KA=v.forwardRef(({children:e,className:t,maxSize:n=1/0,minSize:r=30,proportionalLayout:i=!0,separator:o=!0,sizes:s,defaultSizes:a=s,snap:l=!1,vertical:c=!1,onChange:d,onReset:h,onVisibleChange:p,onDragStart:g,onDragEnd:b},k)=>{const y=v.useRef(null),_=v.useRef([]),w=v.useRef(new Map),x=v.useRef(null),C=v.useRef(new Map),F=v.useRef(new A7),M=v.useRef([]),[L,N]=v.useState(!1),V=v.useMemo(()=>Q.Children.toArray(e).filter(Q.isValidElement),[e]),Y=v.useCallback(J=>{var H,D;const T=(H=M.current)==null?void 0:H[J];return typeof(T==null?void 0:T.preferredSize)=="number"&&((D=x.current)!=null&&D.resizeView(J,Math.round(T.preferredSize)),!0)},[]);return v.useImperativeHandle(k,()=>({reset:()=>{if(h)h();else{var J;(J=x.current)==null||J.distributeViewSizes();for(let H=0;H<M.current.length;H++)Y(H)}},resize:J=>{var H;(H=x.current)==null||H.resizeViews(J)}})),f_(()=>{let J=!0;a&&C.current.size!==a.length&&(J=!1,console.warn(`Expected ${a.length} children based on defaultSizes but found ${C.current.size}`)),J&&a&&(_.current=V.map(T=>T.key));const H=xd({orientation:c?Wi.Vertical:Wi.Horizontal,proportionalLayout:i},J&&a&&{descriptor:{size:a.reduce((T,W)=>T+W,0),views:a.map((T,W)=>{var B,G,te,re;const ae=w.current.get(_.current[W]),K=new rk(F.current,xd({element:document.createElement("div"),minimumSize:(B=ae==null?void 0:ae.minSize)!=null?B:r,maximumSize:(G=ae==null?void 0:ae.maxSize)!=null?G:n,priority:(te=ae==null?void 0:ae.priority)!=null?te:Yo.Normal},(ae==null?void 0:ae.preferredSize)&&{preferredSize:ae==null?void 0:ae.preferredSize},{snap:(re=ae==null?void 0:ae.snap)!=null?re:l}));return M.current.push(K),{container:[...C.current.values()][W],size:T,view:K}})}});x.current=new Z7(y.current,H,d,g,b),x.current.on("sashDragStart",()=>{var T;(T=y.current)==null||T.classList.add("split-view-sash-dragging")}),x.current.on("sashDragEnd",()=>{var T;(T=y.current)==null||T.classList.remove("split-view-sash-dragging")}),x.current.on("sashchange",T=>{if(p&&x.current){const W=V.map(B=>B.key);for(let B=0;B<W.length;B++){const G=w.current.get(W[B]);(G==null?void 0:G.visible)!==void 0&&G.visible!==x.current.isViewVisible(B)&&p(B,x.current.isViewVisible(B))}}}),x.current.on("sashreset",T=>{if(h)h();else{var W;if(Y(T)||Y(T+1))return;(W=x.current)==null||W.distributeViewSizes()}});const D=x.current;return()=>{D.dispose()}},[]),f_(()=>{if(L){const R=V.map(ee=>ee.key),O=[..._.current],j=R.filter(ee=>!_.current.includes(ee)),Z=R.filter(ee=>_.current.includes(ee)),le=_.current.map(ee=>!R.includes(ee));for(let ee=le.length-1;ee>=0;ee--){var J;le[ee]&&((J=x.current)!=null&&J.removeView(ee),O.splice(ee,1),M.current.splice(ee,1))}for(const ee of j){var H,D,T,W,B;const ie=w.current.get(ee),fe=new rk(F.current,xd({element:document.createElement("div"),minimumSize:(H=ie==null?void 0:ie.minSize)!=null?H:r,maximumSize:(D=ie==null?void 0:ie.maxSize)!=null?D:n,priority:(T=ie==null?void 0:ie.priority)!=null?T:Yo.Normal},(ie==null?void 0:ie.preferredSize)&&{preferredSize:ie==null?void 0:ie.preferredSize},{snap:(W=ie==null?void 0:ie.snap)!=null?W:l}));(B=x.current)!=null&&B.addView(C.current.get(ee),fe,Sg.Distribute,R.findIndex(ge=>ge===ee)),O.splice(R.findIndex(ge=>ge===ee),0,ee),M.current.splice(R.findIndex(ge=>ge===ee),0,fe)}for(;!E7(R,O);)for(const[ee,ie]of R.entries()){const fe=O.findIndex(ge=>ge===ie);if(fe!==ee){var G;(G=x.current)==null||G.moveView(C.current.get(ie),fe,ee);const ge=O[fe];O.splice(fe,1),O.splice(ee,0,ge);break}}for(const ee of j){var te;const ie=R.findIndex(ge=>ge===ee),fe=M.current[ie].preferredSize;fe!==void 0&&((te=x.current)==null||te.resizeView(ie,fe))}for(const ee of[...j,...Z]){var re,ae;const ie=w.current.get(ee),fe=R.findIndex(ge=>ge===ee);ie&&ik(ie)&&ie.visible!==void 0&&((re=x.current)==null?void 0:re.isViewVisible(fe))!==ie.visible&&((ae=x.current)==null||ae.setViewVisible(fe,ie.visible))}for(const ee of Z){const ie=w.current.get(ee),fe=R.findIndex(ge=>ge===ee);if(ie&&ik(ie)){var K;ie.preferredSize!==void 0&&M.current[fe].preferredSize!==ie.preferredSize&&(M.current[fe].preferredSize=ie.preferredSize);let ge=!1;ie.minSize!==void 0&&M.current[fe].minimumSize!==ie.minSize&&(M.current[fe].minimumSize=ie.minSize,ge=!0),ie.maxSize!==void 0&&M.current[fe].maximumSize!==ie.maxSize&&(M.current[fe].maximumSize=ie.maxSize,ge=!0),ge&&((K=x.current)==null||K.layout())}}(j.length>0||le.length>0)&&(_.current=R)}},[V,L,n,r,l]),v.useEffect(()=>{x.current&&(x.current.onDidChange=d)},[d]),v.useEffect(()=>{x.current&&(x.current.onDidDragStart=g)},[g]),v.useEffect(()=>{x.current&&(x.current.onDidDragEnd=b)},[b]),C7({ref:y,onResize:({width:J,height:H})=>{var D;J&&H&&((D=x.current)!=null&&D.layout(c?H:J),F.current.setSize(c?H:J),N(!0))}}),f_(()=>{if(!L){var J;const{height:H,width:D}=y.current.getBoundingClientRect();(J=x.current)!=null&&J.layout(c?H:D),F.current.setSize(c?H:D),N(!0)}},[L,c]),v.useEffect(()=>{zA&&J7(20)},[]),E("div",{ref:y,className:Fb("split-view",c?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":o},x7,c?R7:M7,{[T7]:o},t),children:E("div",{className:Fb("split-view-container",I7),children:Q.Children.toArray(e).map(J=>{if(!Q.isValidElement(J))return null;const H=J.key;return J.type.displayName==="Allotment.Pane"?(w.current.set(H,J.props),Q.cloneElement(J,{key:H,ref:D=>{D?C.current.set(H,D):C.current.delete(H)}})):E(aw,{ref:D=>{D?C.current.set(H,D):C.current.delete(H)},children:J},H)})})})});function J7(e){const t=so(e,4,20),n=so(e,1,8);document.documentElement.style.setProperty("--sash-size",t+"px"),document.documentElement.style.setProperty("--sash-hover-size",n+"px"),function(r){BA=r,HA.emit("onDidChangeGlobalSize",r)}(t)}KA.displayName="Allotment";var ui=Object.assign(KA,{Pane:aw});const eK="_webpage-and-list_zktod_1",tK="_webpage-and-list-open_zktod_7",nK="_column-list_zktod_11",rK="_list-list_zktod_15",iK="_webpage_zktod_1",oK="_full-webpage_zktod_23",sK="_close-icon_zktod_32",__={"webpage-and-list":"_webpage-and-list_zktod_1",webpageAndList:eK,"webpage-and-list-open":"_webpage-and-list-open_zktod_7",webpageAndListOpen:tK,"column-list":"_column-list_zktod_11",columnList:nK,"list-list":"_list-list_zktod_15",listList:rK,webpage:iK,"full-webpage":"_full-webpage_zktod_23",fullWebpage:oK,"close-icon":"_close-icon_zktod_32",closeIcon:sK},GA=e=>{const t=e.layout==="list"&&e.preview;return ce(ui,{vertical:!0,children:[E(ui.Pane,{minSize:40,maxSize:40,children:e.toolbar}),E(ui.Pane,{children:ce(ui,{vertical:!1,children:[E(ui.Pane,{children:ce("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},children:[E("div",{style:{flexGrow:0,flexShrink:0},children:e.filter}),ce("div",{style:{flex:1},children:[e.layout==="column"&&ce(ui,{children:[E(ui.Pane,{minSize:300,maxSize:300,children:e.list}),E(ui.Pane,{children:e.webpage})]}),e.layout==="list"&&E(ui,{className:__.webpageAndList,children:ce(ui.Pane,{children:[!t&&e.list,t&&ce("div",{children:[t&&E("div",{className:__.closeIcon,children:e.closeIcon}),t&&e.preview&&E("div",{className:__.fullWebpage,children:e.webpage})]})]})})]})]})}),!!e.showInfo&&E(ui.Pane,{maxSize:300,preferredSize:250,minSize:200,children:e.info})]})})]})};class lw{constructor(){this.handlersMap=Object.create(null)}on(t,n){return this.handlersMap[t]||(this.handlersMap[t]=[]),this.handlersMap[t].push(n),this}off(t,n){return this.handlersMap[t]&&this.handlersMap[t].splice(this.handlersMap[t].indexOf(n)>>>0,1),this}emit(t,...n){return this.handlersMap[t]&&this.handlersMap[t].slice().forEach(r=>{r(...n)}),this}}const cw=e=>e.split("-").reduce((t,n,r)=>t+(r===0?n:n[0].toUpperCase()+n.slice(1)),""),Jo=";",aK="highlight-mengshou-style",nl="highlight-id",uw="highlight-id-extra",dw="highlight-split-type",Do=cw(nl),fo=cw(uw);cw(dw);const lK="span",wg=()=>({$root:document||document.documentElement,exceptSelectors:void 0,wrapTag:lK,verbose:!1,style:{className:"highlight-mengshou-wrap"},contentWindow:window}),cK=()=>`
    .${wg().style.className} {
        background: #ff9;
        cursor: pointer;
    }
    .${wg().style.className}.active {
        background: #ffb;
    }
`,Ub=-2,uK=-1,Wa="error";class dK extends lw{}const za=new dK,ok=(e,t)=>{var n,r;const i=[e];let o,s=0,a=0;for(;o=i.pop();){const l=o.childNodes;for(let c=l.length-1;c>=0;c--)i.push(l[c]);if(o.nodeType===3&&(a=t-s,s+=(r=(n=o.textContent)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,s>=t))break}return o||(o=e),{$node:o,offset:a}},fK=(e,t)=>{const n=e.startMeta.parentIndex===Ub?t:t.getElementsByTagName(e.startMeta.parentTagName)[e.startMeta.parentIndex],r=e.endMeta.parentIndex===Ub?t:t.getElementsByTagName(e.endMeta.parentTagName)[e.endMeta.parentIndex];return{start:n,end:r}};class fw{constructor(t,n,r,i,o){this.startMeta=t,this.endMeta=n,this.text=r,this.id=i,this.__isHighlightSource={},o&&(this.extra=o)}deSerialize(t,n){const{start:r,end:i}=fK(this,t);let o=ok(r,this.startMeta.textOffset),s=ok(i,this.endMeta.textOffset);if(!n.Serialize.Restore.isEmpty()){const l=n.Serialize.Restore.call(this,o,s)||[];o=l[0]||o,s=l[1]||s}return new pp(o,s,this.text,this.id,!0)}}var Mo;(function(e){e.none="none",e.head="head",e.tail="tail",e.both="both"})(Mo||(Mo={}));var Ao;(function(e){e.DOM_TYPE_ERROR="[DOM] Receive wrong node type.",e.DOM_SELECTION_EMPTY="[DOM] The selection contains no dom node, may be you except them.",e.RANGE_INVALID="[RANGE] Got invalid dom range, can't convert to a valid highlight range.",e.RANGE_NODE_INVALID="[RANGE] Start or end node isn't a text node, it may occur an error.",e.DB_ID_DUPLICATE_ERROR="[STORE] Unique id conflict.",e.CACHE_SET_ERROR="[CACHE] Cache.data can't be set manually, please use .save().",e.SOURCE_TYPE_ERROR="[SOURCE] Object isn't a highlight source instance.",e.HIGHLIGHT_RANGE_FROZEN="[HIGHLIGHT_RANGE] A highlight range must be frozen before render.",e.HIGHLIGHT_SOURCE_RECREATE="[HIGHLIGHT_SOURCE] Recreate highlights from sources error.",e.HIGHLIGHT_SOURCE_NONE_RENDER="[HIGHLIGHT_SOURCE] This highlight source isn't rendered. May be the exception skips it or the dom structure has changed."})(Ao||(Ao={}));var ao;(function(e){e.CREATE="selection:create",e.REMOVE="selection:remove",e.MODIFY="selection:modify",e.HOVER="selection:hover",e.HOVER_OUT="selection:hover-out",e.CLICK="selection:click"})(ao||(ao={}));var Eg;(function(e){e.STORE="from-store",e.INPUT="from-input"})(Eg||(Eg={}));var _c;(function(e){e.text="text",e.span="span"})(_c||(_c={}));var Os;(function(e){e.touchend="touchend",e.mouseup="mouseup",e.touchstart="touchstart",e.click="click",e.mouseover="mouseover"})(Os||(Os={}));const hK=e=>{const t=e.getSelection();return t?t.isCollapsed?(console.debug("no text selected"),null):t.getRangeAt(0):null},pK=e=>{var t;(t=e.getSelection())===null||t===void 0||t.removeAllRanges()};function hw(e){return e?(e^Math.random()*16>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,hw)}const gK=(e,t)=>{const n=e.tagName,r=t.getElementsByTagName(n);for(let i=0;i<r.length;i++)if(e===r[i])return i;return uK},mK=(e,t)=>{var n,r;const i=[e];let o=null,s=0;for(;o=i.pop();){const a=o.childNodes;for(let l=a.length-1;l>=0;l--)i.push(a[l]);if(o===t)break;if(o.nodeType===3&&o!==t)s+=(r=(n=o.textContent)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0;else if(o.nodeType===3)break}return s},vK=e=>{if(e instanceof HTMLElement&&(!e.dataset||!e.dataset[Do]))return e;let t=e.parentNode;for(;t!=null&&t.dataset[Do];)t=t.parentNode;return t},sk=(e,t,n)=>{const r=vK(e),i=r===n?Ub:gK(r,n),o=mK(r,e);return{parentTagName:r.tagName,parentIndex:i,textOffset:o+t}},ak=e=>e.$node.nodeType===3||e.$node.nodeType===4||e.$node.nodeType===8?e:{$node:e.$node.childNodes[e.offset],offset:0};class vm{constructor(t,n,r,i,o=!1){(t.$node.nodeType!==3||n.$node.nodeType!==3)&&za.emit(Wa,{type:Ao.RANGE_NODE_INVALID}),this.start=ak(t),this.end=ak(n),this.text=r,this.frozen=o,this.id=i}static fromSelection(t,n){const r=hK(n);if(!r)return null;const i={$node:r.startContainer,offset:r.startOffset},o={$node:r.endContainer,offset:r.endOffset},s=r.toString();let a=t.call(i,o,s);return a=typeof a<"u"&&a!==null?a:hw(),new vm(i,o,s,a)}serialize(t,n){const r=sk(this.start.$node,this.start.offset,t),i=sk(this.end.$node,this.end.offset,t);let o;return n.Serialize.RecordInfo.isEmpty()||(o=n.Serialize.RecordInfo.call(this.start,this.end,t)),this.frozen=!0,new fw(r,i,this.text,this.id,o)}}vm.removeDomRange=pK;const pp=vm;class Dl{constructor(t){this.name="",this.ops=[],this.name=t}tap(t){return this.ops.indexOf(t)===-1&&this.ops.push(t),()=>{this.remove(t)}}remove(t){const n=this.ops.indexOf(t);n<0||this.ops.splice(n,1)}isEmpty(){return this.ops.length===0}call(...t){let n;return this.ops.forEach(r=>{n=r(...t)}),n}}const _K=/Android|iPhone|BlackBerry|BB10|Opera Mini|Phone|Mobile|Silk|Windows Phone|Mobile(?:.+)Firefox\b/i,yK=e=>_K.test(e),bK=()=>{const e=yK(window.navigator.userAgent);return{PointerEnd:e?Os.touchend:Os.mouseup,PointerTap:e?Os.touchstart:Os.click,PointerOver:e?Os.touchstart:Os.mouseover}};class SK extends lw{constructor(){super(...arguments),this._data=new Map}get data(){return this.getAll()}set data(t){throw Ao.CACHE_SET_ERROR}save(t){if(!Array.isArray(t)){this._data.set(t.id,t);return}t.forEach(n=>this._data.set(n.id,n))}get(t){return this._data.get(t)}remove(t){this._data.delete(t)}getAll(){const t=[];for(const n of this._data)t.push(n[1]);return t}removeAll(){const t=[];for(const n of this._data)t.push(n[0]);return this._data=new Map,t}}const Nc=e=>!!e.dataset&&!!e.dataset[Do],YA=(e,t)=>{let n=!1,r=null;for(;e;){if(Nc(e)&&(r=e),e===t){n=!0;break}e=e.parentNode}return n?r:null},y_=(e,t)=>(e=YA(e,t),e?e.dataset[Do]:""),wK=(e,t)=>(e=YA(e,t),e?e.dataset[fo].split(Jo).filter(n=>n):[]),qA=(e,t)=>{Array.isArray(e)||(e=[e]);const n=[];for(const r of e){const i=r.querySelectorAll(`${t}[data-${nl}]`);n.push.apply(n,i)}return n},EK=(e,t,n)=>{const r=[],i=new RegExp(`(${t}\\${Jo}|\\${Jo}?${t}$)`),o=e.querySelectorAll(`${n}[data-${nl}]`);for(const s of o){const a=s;if(a.dataset[Do]===t){r.push(a);continue}const c=a.dataset[fo];if(i.test(c)){r.push(a);continue}}return r},lk=(e,t)=>{for(let n=0;n<e.length;n++)t(e[n],n,e)},ed=(e,t,n)=>{e.removeEventListener(t,n)},b_=(e,t,n)=>(e.addEventListener(t,n),()=>{ed(e,t,n)}),pw=(e,t)=>{Array.isArray(t)||(t=[t]),e.classList.add(...t)},CK=(e,t)=>{e.classList.remove(t)},QA=e=>{e.className=""},xK=(e,t)=>e.classList.contains(t),kK=e=>{const t=[];for(const n of e)t.indexOf(n)===-1&&t.push(n);return t},XA=(e,t)=>{if(!e)return!1;if(/^\./.test(t)){const r=t.replace(/^\./,"");return e&&xK(e,r)}else if(/^#/.test(t)){const r=t.replace(/^#/,"");return e&&e.id===r}const n=t.toUpperCase();return e&&e.tagName===n},IK=(e,t,n,r)=>{let i=e;const o=a=>r==null?void 0:r.some(l=>XA(a,l));for(;i;){if(i.nodeType===1&&o(i))return[];i=i.parentNode}e.splitText(t);const s=e.nextSibling;return s.splitText(n-t),[{$node:s,type:_c.text,splitType:Mo.both}]},RK=(e,t,n,r)=>{const i=t.$node,o=n.$node,s=t.offset,a=n.offset;if(i===o&&i.nodeType===3)return IK(i,s,a,r);const l=[e],c=[],d=g=>r==null?void 0:r.some(b=>XA(g,b));let h=!1,p;for(;p=l.pop();){if(p.nodeType===1&&d(p))continue;const g=p.childNodes;for(let b=g.length-1;b>=0;b--)l.push(g[b]);if(p===i){if(p.nodeType===3){p.splitText(s);const b=p.nextSibling;c.push({$node:b,type:_c.text,splitType:Mo.head})}h=!0}else if(p===o){if(p.nodeType===3){const b=p;b.splitText(a),c.push({$node:b,type:_c.text,splitType:Mo.tail})}break}else h&&p.nodeType===3&&c.push({$node:p,type:_c.text,splitType:Mo.none})}return c},gw=(e,t)=>{let n=Array.isArray(t)?t:[t];return n=n.length===0?[wg().style.className]:n,n.filter(r=>!!r).forEach(r=>{pw(e,r)}),e},ck=e=>!e||!e.textContent,MK=(e,t,n,r)=>{const i=document.createElement(r);return gw(i,n),i.appendChild(e.$node.cloneNode(!1)),e.$node.parentNode.replaceChild(i,e.$node),i.setAttribute(`data-${nl}`,t.id),i.setAttribute(`data-${dw}`,e.splitType),i.setAttribute(`data-${uw}`,""),i},TK=(e,t,n,r)=>{const i=document.createElement(r),o=e.$node.parentNode,s=e.$node.previousSibling,a=e.$node.nextSibling,l=document.createDocumentFragment(),c=o.dataset[Do],d=o.dataset[fo],h=d?c+Jo+d:c;i.setAttribute(`data-${nl}`,t.id),i.setAttribute(`data-${uw}`,h),i.appendChild(e.$node.cloneNode(!1));let p=!1,g=!1,b;if(s){const y=o.cloneNode(!1);y.textContent=s.textContent,l.appendChild(y),p=!0}const k=[];if(Array.isArray(n)?k.push(...n):k.push(n),gw(i,kK(k)),l.appendChild(i),a){const y=o.cloneNode(!1);y.textContent=a.textContent,l.appendChild(y),g=!0}return p&&g?b=Mo.both:p?b=Mo.head:g?b=Mo.tail:b=Mo.none,i.setAttribute(`data-${dw}`,b),o.parentNode.replaceChild(l,o),i},LK=(e,t,n)=>{const r=e.$node.parentNode,i=r;QA(i),gw(i,n);const o=r.dataset,s=o[Do];return o[Do]=t.id,o[fo]=o[fo]?s+Jo+o[fo]:s,i},AK=(e,t,n,r)=>{const i=e.$node.parentNode,o=e.$node.previousSibling,s=e.$node.nextSibling;let a;return Nc(i)?Nc(i)&&(!ck(o)||!ck(s))?a=TK(e,t,n,r):a=LK(e,t,n):a=MK(e,t,n,r),a},uk=(e,t=!0)=>{if(!e||e.nodeType!==3)return;const n=t?e.nextSibling:e.previousSibling;if(n.nodeType!==3)return;const r=n.nodeValue;e.nodeValue=t?e.nodeValue+r:r+e.nodeValue,n.parentNode.removeChild(n)},OK=()=>{const e=aK;let t=document.getElementById(e);if(!t){const n=document.createTextNode(cK());t=document.createElement("style"),t.id=e,t.appendChild(n),document.head.appendChild(t)}return t};class PK{constructor(t,n){this.options={$root:t.$root,wrapTag:t.wrapTag,exceptSelectors:t.exceptSelectors,className:t.className,contentWindow:t.contentWindow},this.hooks=n,OK()}get document(){return this.options.contentWindow.document}highlightRange(t){if(!t.frozen)throw Ao.HIGHLIGHT_RANGE_FROZEN;const{$root:n,className:r,exceptSelectors:i}=this.options,o=this.hooks;let s=RK(n,t.start,t.end,i);return o.Render.SelectedNodes.isEmpty()||(s=o.Render.SelectedNodes.call(t.id,s)||[]),s.map(a=>{let l=AK(a,t,r,this.options.wrapTag);return o.Render.WrapNode.isEmpty()||(l=o.Render.WrapNode.call(t.id,l)),l})}highlightSource(t){const n=Array.isArray(t)?t:[t],r=[];return n.forEach(i=>{if(!(i instanceof fw)){za.emit(Wa,{type:Ao.SOURCE_TYPE_ERROR});return}const o=i.deSerialize(this.options.$root,this.hooks);this.highlightRange(o).length>0?r.push(i):za.emit(Wa,{type:Ao.HIGHLIGHT_SOURCE_NONE_RENDER,detail:i})}),r}removeHighlight(t){const n=new RegExp(`(${t}\\${Jo}|\\${Jo}?${t}$)`),r=this.hooks,i=this.options.wrapTag,o=this.document.querySelectorAll(`${i}[data-${nl}]`),s=[],a=[],l=[];for(const c of o){const d=c.dataset[Do],h=c.dataset[fo];d===t&&!h?s.push(c):d===t?a.push(c):d!==t&&n.test(h)&&l.push(c)}return s.forEach(c=>{const d=c.parentNode,h=this.document.createDocumentFragment();lk(c.childNodes,b=>h.appendChild(b.cloneNode(!1)));const p=c.previousSibling,g=c.nextSibling;d.replaceChild(h,c),uk(p,!0),uk(g,!1),r.Remove.UpdateNodes.call(t,c,"remove")}),a.forEach(c=>{const d=c.dataset,h=d[fo].split(Jo),p=h.shift(),g=this.document.querySelector(`${i}[data-${nl}="${p}"]`);g&&(QA(c),pw(c,[...g.classList])),d[Do]=p,d[fo]=h.join(Jo),r.Remove.UpdateNodes.call(t,c,"id-update")}),l.forEach(c=>{const d=c.dataset[fo];c.dataset[fo]=d.replace(n,""),r.Remove.UpdateNodes.call(t,c,"extra-update")}),s.length+a.length+l.length!==0}removeAllHighlight(){const{wrapTag:t,$root:n}=this.options;qA(n,t).forEach(i=>{const o=i.parentNode,s=this.document.createDocumentFragment();lk(i.childNodes,a=>s.appendChild(a.cloneNode(!1))),o.replaceChild(s,i)})}}class yc extends lw{constructor(t){super(),this.event=bK(),this.run=()=>b_(this.options.$root,this.event.PointerEnd,this._handleSelection),this.stop=()=>{ed(this.options.$root,this.event.PointerEnd,this._handleSelection)},this.addClass=(r,i)=>{this.getDoms(i).forEach(o=>{pw(o,r)})},this.removeClass=(r,i)=>{this.getDoms(i).forEach(o=>{CK(o,r)})},this.getIdByDom=r=>y_(r,this.options.$root),this.getExtraIdByDom=r=>wK(r,this.options.$root),this.getDoms=r=>r?EK(this.options.$root,r,this.options.wrapTag):qA(this.options.$root,this.options.wrapTag),this.dispose=()=>{const r=this.options.$root;ed(r,this.event.PointerOver,this._handleHighlightHover),ed(r,this.event.PointerEnd,this._handleSelection),ed(r,this.event.PointerTap,this._handleHighlightClick),this.removeAll()},this.setOption=r=>{this.options={...this.options,...r},this.painter=new PK({$root:this.options.$root,wrapTag:this.options.wrapTag,className:this.options.style.className,exceptSelectors:this.options.exceptSelectors,contentWindow:this.options.contentWindow},this.hooks)},this.fromRange=(r,i,o)=>{const s={$node:r.startContainer,offset:r.startOffset},a={$node:r.endContainer,offset:r.endOffset},l=r.toString(),c=new pp(s,a,l,o??hw());return c?this._highlightFromHRange(c,i):(za.emit(Wa,{type:Ao.RANGE_INVALID}),null)},this.fromStore=(r,i,o,s,a)=>{const l=new fw(r,i,o,s,a);try{return this._highlightFromHSource(l),l}catch(c){return za.emit(Wa,{type:Ao.HIGHLIGHT_SOURCE_RECREATE,error:c,detail:l}),null}},this._getHooks=()=>({Render:{UUID:new Dl("Render.UUID"),SelectedNodes:new Dl("Render.SelectedNodes"),WrapNode:new Dl("Render.WrapNode")},Serialize:{Restore:new Dl("Serialize.Restore"),RecordInfo:new Dl("Serialize.RecordInfo")},Remove:{UpdateNodes:new Dl("Remove.UpdateNodes")}}),this._highlightFromHRange=(r,i)=>{const o=r.serialize(this.options.$root,this.hooks);return this.painter.highlightRange(r).length===0?(za.emit(Wa,{type:Ao.DOM_SELECTION_EMPTY}),null):(this.cache.save(o),i!=null&&i.temporary||this.emit(ao.CREATE,{sources:[o],type:Eg.INPUT,meta:i},this),o)},this._handleSelection=()=>{const r=pp.fromSelection(this.hooks.Render.UUID,this.options.contentWindow);r&&(this._highlightFromHRange(r),pp.removeDomRange(this.options.contentWindow))},this._handleHighlightHover=r=>{const i=r.target;if(!Nc(i)){this._hoverId&&this.emit(ao.HOVER_OUT,{id:this._hoverId},this,r),this._hoverId=null;return}const o=y_(i,this.options.$root);this._hoverId!==o&&(this._hoverId&&this.emit(ao.HOVER_OUT,{id:this._hoverId},this,r),this._hoverId=o,this.emit(ao.HOVER,{id:this._hoverId},this,r))},this._handleError=r=>{this.options.verbose&&console.warn(r)},this._handleHighlightClick=r=>{const i=r.target;if(Nc(i)){const o=y_(i,this.options.$root);this.emit(ao.CLICK,{id:o},this,r)}},this.options=wg(),this.hooks=this._getHooks(),this.setOption(t),this.cache=new SK;const n=this.options.$root;b_(n,this.event.PointerOver,this._handleHighlightHover),b_(n,this.event.PointerTap,this._handleHighlightClick),za.on(Wa,this._handleError)}remove(t){if(!t)return;const n=this.painter.removeHighlight(t);this.cache.remove(t),n&&this.emit(ao.REMOVE,{ids:[t]},this)}removeAll(){this.painter.removeAllHighlight();const t=this.cache.removeAll();this.emit(ao.REMOVE,{ids:t},this)}_highlightFromHSource(t=[]){const n=this.painter.highlightSource(t);this.emit(ao.CREATE,{sources:n,type:Eg.STORE},this),this.cache.save(t)}}yc.event=ao;yc.isHighlightWrapNode=Nc;yc.isHighlightSource=e=>!!e.__isHighlightSource;const ZA=55296,NK=56319,DK=56320,FK=127462,VK=127487,UK=127995,$K=127999,WK=65024,zK=65039,BK=8400,HK=8447,jK=8205,KK=[776,2359,2359,2367,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520];function S_(e){if(typeof e!="string")throw new Error("string cannot be undefined or null");const t=[];let n=0,r=0;for(;n<e.length;){if(r+=GK(n+r,e),ZK(e[n+r])&&r++,QK(e[n+r])&&r++,XK(e[n+r])&&r++,JK(e[n+r])){r++;continue}t.push(e.substring(n,n+r)),n+=r,r=0}return t}function GK(e,t){const n=t[e];if(!YK(n)||e===t.length-1)return 1;const r=n+t[e+1];let i=t.substring(e+2,e+5);return dk(r)&&dk(i)||qK(i)?4:2}function YK(e){return e&&Af(e[0].charCodeAt(0),ZA,NK)}function dk(e){return Af(JA(e),FK,VK)}function qK(e){return Af(JA(e),UK,$K)}function QK(e){return typeof e=="string"&&Af(e.charCodeAt(0),WK,zK)}function XK(e){return typeof e=="string"&&Af(e.charCodeAt(0),BK,HK)}function ZK(e){return typeof e=="string"&&KK.indexOf(e.charCodeAt(0))!==-1}function JK(e){return typeof e=="string"&&e.charCodeAt(0)===jK}function JA(e){const t=e.charCodeAt(0)-ZA,n=e.charCodeAt(1)-DK;return(t<<10)+n+65536}function Af(e,t,n){return e>=t&&e<=n}class eG{constructor(t,n){this.isBlackListedElementNode=t,this.normalizeText=n}findLastChildTextNode(t){if(!t)return null;if(t.nodeType===Node.TEXT_NODE)return t;if(t.childNodes)for(let n=t.childNodes.length-1;n>=0;n--){if(this.isBlackListedElementNode(t.childNodes[n]))continue;const r=this.findLastChildTextNode(t.childNodes[n]);if(r!==null)return r}return null}findPreviousTextNodeInDomTree(t){for(;t;){for(;this.isBlackListedElementNode((t==null?void 0:t.previousSibling)||null);)t=(t==null?void 0:t.previousSibling)||null;for(;t!=null&&t.previousSibling;){const n=this.findLastChildTextNode((t==null?void 0:t.previousSibling)||null);if(n)return n;t=t.previousSibling}t=(t==null?void 0:t.parentElement)||null}return null}findNextTextNodeInDomTree(t){for(;t;){for(;this.isBlackListedElementNode((t==null?void 0:t.nextSibling)||null);)t=(t==null?void 0:t.nextSibling)||null;for(;t!=null&&t.nextSibling;){if(this.isBlackListedElementNode(t==null?void 0:t.nextSibling)){t=t.nextSibling;continue}const n=this.findFirstChildTextNode(t.nextSibling);if(n)return n;t=t.nextSibling}t=(t==null?void 0:t.parentElement)||null}return null}findFirstChildTextNode(t){if(t.nodeType===Node.TEXT_NODE)return t;if(t.childNodes)for(let n=0;n<t.childNodes.length;n++){if(this.isBlackListedElementNode(t.childNodes[n]))continue;const r=this.findFirstChildTextNode(t.childNodes[n]);if(r!==null)return r}return null}getInnerText(t){var n;if(this.isBlackListedElementNode(t))return"";if(t.nodeType===Node.TEXT_NODE)return(n=t.textContent)!==null&&n!==void 0?n:"";if(typeof t.innerText>"u"){let r="";for(let i=0;i<t.childNodes.length;i++)r+=this.getInnerText(t.childNodes[i]);return r}else return t.innerText}getNormalizedInnerText(t){return this.normalizeText(this.getInnerText(t))}findElementAtOffset(t,n){if(t.nodeType===Node.TEXT_NODE)return{element:t,offset:n};{let r=0;for(let i=0;i<t.childNodes.length;i++){if(this.isBlackListedElementNode(t.childNodes[i]))continue;const o=this.getNormalizedInnerText(t.childNodes[i]).length;if(r+=o,!(r<n))return this.findElementAtOffset(t.childNodes[i],n-(r-o))}throw new Error("failed to findElementAtOffset")}}getRealOffset(t,n){const r=t.textContent||"";let i=0;for(let o=0;o<r.length;o++){for(;o<r.length&&!this.normalizeText(r.substr(o,1));)o++;if(i===n)return o;i++}if(i===n)return r.length;throw new Error("failed to get real offset")}getBlackListedParent(t){let n=t,r=null;for(;n;)this.isBlackListedElementNode(n)&&(r=n),n=n.parentElement;return r}}function tG(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=getComputedStyle(e);if(t.display==="none"||t.visibility==="hidden")return!0;const n=e.className;if(n&&n.indexOf&&n.indexOf("HighlightBlacklistedElementClassName")>=0)return!0;const r=e.tagName;return r==="STYLE"||r==="SCRIPT"||r==="TITLE"||r==="NOSCRIPT"}const nG=[{textBefore:!0,textAfter:!0},{textBefore:!1,textAfter:!0},{textBefore:!0,textAfter:!1},{textBefore:!1,textAfter:!1}];function rG(e,t){const{text:n,textAfter:r,textBefore:i}=t;for(let o of nG){const s=(o.textBefore?i:"")+n+(o.textAfter?r:""),a=e.indexOf(s);if(a>=0){const l=a+(o.textBefore?i.length:0),c=l+n.length;return[l,c]}}return null}function $u(e){return e.replace(/\s/g,"").toLowerCase()}class iG{constructor(t){this.options=t,this.options=t,this.domUtils=new eG(tG,$u)}getRangeAroundBlackListedElement(t){const n=this.domUtils.getBlackListedParent(t.startContainer),r=this.domUtils.getBlackListedParent(t.endContainer);if(n&&r&&n===r)return null;const i=this.options.document.createRange();if(i.setStart(t.startContainer,t.startOffset),i.setEnd(t.endContainer,t.endOffset),n&&i.setStart(this.domUtils.findNextTextNodeInDomTree(n),0),r){let o=this.domUtils.findPreviousTextNodeInDomTree(r);i.setEnd(o,this.domUtils.getInnerText(o).length)}return i}trimRangeSpaces(t){let n=this.domUtils.getInnerText(t.startContainer).slice(t.startOffset),r=n.trimStart();t.setStart(t.startContainer,t.startOffset+(n.length-r.length));let i=this.domUtils.getInnerText(t.endContainer).slice(0,t.endOffset),o=i.trimEnd();t.setEnd(t.endContainer,t.endOffset-(i.length-o.length))}serializeRange(t){if(!this.getRangeAroundBlackListedElement(t))return null;const r=this.options.charsToKeep;let i=t.toString();if($u(i)){let s="",a="";{s=s+this.domUtils.getInnerText(t.startContainer).slice(0,t.startOffset);let l=t.startContainer;for(;s.length<r&&(l=this.domUtils.findPreviousTextNodeInDomTree(l),!!l);)s=l.textContent+s;s.length>r&&(s=S_(s).slice(S_(s).length-r).join(""))}{a=a+this.domUtils.getInnerText(t.endContainer).slice(t.endOffset);let l=t.endContainer;for(;a.length<r&&(l=this.domUtils.findNextTextNodeInDomTree(l),!!l);)a=a+l.textContent;a.length>r&&(a=S_(a).slice(0,r).join(""))}return{text:i,textAfter:a,textBefore:s}}return null}batchDeserializeRange(t){const n={},r={},i=this.domUtils.getNormalizedInnerText(this.options.rootElement);for(let o=0;o<t.length;o++)try{const s=rG(i,{text:$u(t[o].text),textAfter:$u(t[o].textAfter),textBefore:$u(t[o].textBefore)});if(!s)throw new Error("");const[a,l]=s,c=this.domUtils.findElementAtOffset(this.options.rootElement,a),d=this.domUtils.findElementAtOffset(this.options.rootElement,l),h=document.createRange();h.setStart(c.element,this.domUtils.getRealOffset(c.element,c.offset)),h.setEnd(d.element,this.domUtils.getRealOffset(d.element,d.offset)),this.trimRangeSpaces(h),n[o]={range:h,tenThousandth:Math.floor(s[0]*1e4/i.length)}}catch(s){r[o]=s}return{results:n,errors:r}}deserializeRange(t){const{results:n,errors:r}=this.batchDeserializeRange([t]);if(r[0])throw r[0];return n[0].range}}De.registerCommandAndKeybindingRule({id:"WebpageListLayoutOpenUrl",weight:Fe.WorkbenchContrib+5,handler:e=>{var r;const n=(r=e.get(gr).currentWebsite)==null?void 0:r.textModel;n&&n.getProperty().link&&window.open(n.getProperty().link,"_blank")}});var oG=Object.defineProperty,sG=Object.getOwnPropertyDescriptor,aG=(e,t,n,r)=>{for(var i=r>1?void 0:r?sG(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&oG(t,n,i),i},lG=(e,t)=>(n,r)=>t(n,r,e);let $b=class{constructor(e,t,n,r){this.contentWindow=e,this.webModel=t,this.highlighToolbarContainer=n,this.instantiationService=r,this.highlightIdMap=new Map,this._onCreateHighlight=new Oe,this.onCreateHighlight=this._onCreateHighlight.event,this._onClickHighlight=new Oe,this.onClickHighlight=this._onClickHighlight.event,this.ignoreListEvent=!1,this.webpageHighlightFromRange=s=>{let a;const l=this.instantiationService.invokeFunction(d=>d.get(qa)),c=this.instantiationService.invokeFunction(d=>d.get(sa));return{createHighlight:()=>{const d=this.highlight(s,this.marker.serializeRange(s)),h=this.highlightIdMap.get(d);return h&&(this.ignoreListEvent=!0,this._onCreateHighlight.fire(h),this.ignoreListEvent=!1),a=h,h},updateNote:d=>{a&&this.webModel.textModel.updateHighlightNote(a,d)},deleteHighlight:()=>{throw new Error("not support")},copyText(){l.writeText(s.toString()),c.showInformationMessage("拷贝成功")}}},this.webpageHighlightFromExist=(s,a,l)=>{const c=this.instantiationService.invokeFunction(h=>h.get(qa)),d=this.instantiationService.invokeFunction(h=>h.get(sa));return{highlightId:s,note:l,createHighlight:()=>{throw new Error("not support")},updateNote:h=>{this.webModel.textModel.updateHighlightNote(s,h)},deleteHighlight:()=>{this.removeHighlight(s),this.webModel.textModel.deleteHighlight(s)},copyText(){c.writeText(a),d.showInformationMessage("拷贝成功")}}};const i=e.document;this.iframeDocument=i,this.highlighter=new yc({$root:i.documentElement,wrapTag:"span",style:{className:"highlight-class"},exceptSelectors:["pre"],contentWindow:e}),this.marker=new iG({rootElement:this.iframeDocument.body,document:this.iframeDocument,charsToKeep:32}),this.load(),this.initMouse(),this.webModel.highlightsListController.list.onItemDelete(s=>{this.removeHighlight(s.highlightId)}),new Gi(s=>{const a=this.webModel.highlightsListController.list.onSelectItemChange(({selectItem:l})=>{this.ignoreListEvent||!l.id||s.next(l.highlightId)});return()=>{a.dispose()}}).pipe($R(300)).subscribe(s=>{this.focus(s)})}calculatePos(e){const t=this.marker.batchDeserializeRange(e),n=[];for(let r=0;r<e.length;r++){const i=t.results[r];i?n.push(i.tenThousandth):n.push(1e4)}return n}get markerController(){return this.highlighToolbarContainer.markerController}load(){const e=this.webModel.textModel.highlights.map(i=>({text:i.text,textBefore:i.marker.meta.textBefore,textAfter:i.marker.meta.textAfter,highlight:i.highlightId,meta:i.marker.meta})),t=this.marker.batchDeserializeRange(e);let n=[];for(let i=0;i<e.length;i++){const o=e[i],s=t.results[i];s&&(n.push({id:o.highlight,tenThousandth:s.tenThousandth}),this.highlighter.fromRange(s.range,o.meta,o.highlight))}this.webModel.textModel.updateTenThousandth(n);const r=this;this.highlighter.on(yc.event.CLICK,(...i)=>{const o=i[0].id;r.ignoreListEvent=!0,this._onClickHighlight.fire(o),r.ignoreListEvent=!1;const s=i[2];s.preventDefault(),s.stopPropagation(),this.highlighToolbarContainer&&this.highlighToolbarContainer.dispose();const a=s.clientX,l=s.clientY,c=s.target,d=this.contentWindow.getComputedStyle(c,":after");let h=!1;if(d&&d.content&&d.content!=="none"){const g=this.contentWindow.document.createElement("span");g.classList.add("pseudo-placeholder"),c.classList.add("no-pseudo-content"),c.appendChild(g);const{bottom:b,height:k,left:y,width:_}=g.getBoundingClientRect(),w=[y,y+_],x=[b-k,b];a>=w[0]&&a<=w[1]&&l>=x[0]&&l<=x[1]&&(h=!0),g.remove(),c.classList.remove("no-pseudo-content")}const p=this.webModel.textModel.highlights.find(g=>g.highlightId===o);p&&this.highlighToolbarContainer.init({pageX:s.pageX,pageY:s.pageY},this.webpageHighlightFromExist(o,p.text,p.note??""),h)}),this.highlighter.on(yc.event.CREATE,(...i)=>{if(i[0].type==="from-input"){const{text:o,startMeta:s,endMeta:a,id:l}=i[0].sources[0],{textAfter:c,textBefore:d}=i[0].meta,h=this.marker.batchDeserializeRange([{text:o,textAfter:c,textBefore:d}]);let p;h.results[0]&&(p=h.results[0].tenThousandth);const g=this.webModel.textModel.addHighlight({text:o,marker:{start:s,end:a,meta:i[0].meta},tenThousandth:p});this.highlighter.remove(l),this.highlighter.fromStore(s,a,o,g),this.highlightIdMap.set(l,g)}})}removeHighlight(e){this.highlighter.remove(e)}removeTemp(e){this.highlighter.remove(e)}focusElement(e){e&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",inline:"center",block:"center"})},10)}focus(e){const n=this.iframeDocument.querySelector(`[data-highlight-id='${e}']`);this.focusElement(n)}focusAndScroll(e){try{const t=this.marker.deserializeRange({textBefore:e.textBefore,textAfter:e.textAfter,text:e.text}),n=this.highlighter.fromRange(t,{textBefore:e.textBefore,textAfter:e.textAfter,temporary:!0});this.focus(n.id),setTimeout(()=>{this.highlighter.remove(n.id)},1e3)}catch{}}highlight(e,t){return this.highlighter.fromRange(e,t).id}initMouse(){const e=this.iframeDocument;let t=null;e.addEventListener("mouseup",n=>{const r=this.contentWindow.getSelection();if(!r)return null;if(this.highlighToolbarContainer.ifContainer(n.target)||this.highlighToolbarContainer.displayNoteEditor)return;if(this.highlighToolbarContainer&&this.highlighToolbarContainer.dispose(),r.isCollapsed)return null;const i=r.getRangeAt(0);t!==i&&(r.removeAllRanges(),r.addRange(i),t=i,this.highlighToolbarContainer.init({pageX:n.pageX,pageY:n.pageY},this.webpageHighlightFromRange(i),!1))})}};$b=aG([lG(3,Or)],$b);const Of=new At("highlighterToolVisible",!1),mw=new At("highlighterToolEditorVisible",!1),cG="workbench_highlighter.action.highlight",uG="workbench_highlighter.action.addNote",dG="workbench_highlighter.action.cancelEditNote",fG="workbench_highlighter.action.saveNote";class hG{constructor(t,n,r){this.pos=t,this.highlightImpl=n,this.editNote=r,this._onDispose=new Oe,this.onDispose=this._onDispose.event,this._onStatusChange=new Oe,this.onStatusChange=this._onStatusChange.event,this._displayNoteEditor=!1,this._note="",this._displayNoteEditor=this.editNote,this._note=this.highlightImpl.note||""}get containerPos(){return this.pos}get displayNoteEditor(){return this._displayNoteEditor}get highlightId(){return this.highlightImpl.highlightId}get highlightNote(){return this._note}highlight(){this.highlightImpl.createHighlight(),this.dispose()}deleteHighlight(){this.highlightImpl.deleteHighlight(),this.dispose()}highlightAndTakeNote(){this.highlightId||this.highlightImpl.createHighlight(),this._displayNoteEditor=!0,this._onStatusChange.fire()}updateNote(t){this._note=t,this._onStatusChange.fire()}copy(){this.highlightImpl.copyText(),this.dispose()}saveNote(){this.highlightImpl.updateNote(this._note),this.dispose()}dispose(){this._onDispose.fire()}}const pG=`.highlighter-tool-container{--yellow: #ffdd83;--green: #30cccc;--green-active: #2bb8b8;--dark-green: #405983;--light-gray: #f5f5f5;--gray: #a8a8a8;--danger: #d0021b;position:absolute;box-shadow:#0000001a 0 0 12px;z-index:10000;border:1px solid var(--light-gray);border-radius:8px;background:white}.box{display:flex;width:fit-content;box-sizing:border-box;padding:0 2px;color:#000}.item{width:28px;height:28px;display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer;margin:4px 2px;border-radius:50%}.item .highlight-tooltip-container{background:#fff;border:1px solid #f7f8fa;height:28px;box-sizing:border-box;display:flex;padding:0 8px;border-radius:4px;color:#666;align-items:center;font-style:normal;font-weight:500;font-size:14px;white-space:nowrap;margin-bottom:8px;position:absolute;z-index:100;bottom:100%;visibility:hidden}.item .highlight-tooltip-container .highlight-tooltip-label{display:inline-block;margin-right:8px}.item .highlight-tooltip-container .highlight-tooltip-shortcut-container{display:inline-flex}.item .highlight-tooltip-container .highlight-tooltip-shortcut-key{display:inline-flex;background:#f7f8fa;min-width:16px;box-sizing:border-box;height:16px;padding:4px;align-items:center;justify-content:center;border-radius:2px;margin-left:4px}.item:hover{background:var(--green-active);color:#fff;transition:all .2s}.item.delete-highlight:hover{background:var(--danger)}.item:hover .highlight-tooltip-container{visibility:visible}.highlight-note{width:300px;border:none;resize:none;overflow-y:hidden;border-radius:2px;padding:4px;outline:none}.input-note{margin-top:10px;position:absolute;top:100%;background:#fff;border-radius:8px;box-shadow:#0000001a 0 0 12px;padding:4px}.input-note .footer{display:flex;padding:8px 0 4px;justify-content:flex-end}.input-note button{padding:6px 8px;background:none;border:none;cursor:pointer;border-radius:4px}.input-note button:hover{background:var(--light-gray)}.save-button{color:var(--green)}.delete-line{position:absolute;bottom:-1px;right:0;transform:scaleX(1.5);transform:rotate(45deg) scaleX(2)}.delete-icon{position:relative}
`;De.registerCommandAndKeybindingRule({id:cG,weight:Fe.WorkbenchContrib+5,when:Of,primary:U.KEY_H,handler:e=>{var r,i;const n=(i=(r=e.get(gr).currentWebsite)==null?void 0:r.highlightInstance)==null?void 0:i.markerController;n&&(n.highlightId?n.deleteHighlight():n.highlight())}});De.registerCommandAndKeybindingRule({id:uG,weight:Fe.WorkbenchContrib+5,when:Of,primary:U.KEY_N,handler:e=>{var r,i;const n=(i=(r=e.get(gr).currentWebsite)==null?void 0:r.highlightInstance)==null?void 0:i.markerController;n&&n.highlightAndTakeNote()}});De.registerCommandAndKeybindingRule({id:dG,weight:Fe.WorkbenchContrib+5,when:Lt.and(Of,mw),primary:U.Escape,handler:e=>{var r,i;const n=(i=(r=e.get(gr).currentWebsite)==null?void 0:r.highlightInstance)==null?void 0:i.markerController;n&&n.dispose()}});De.registerCommandAndKeybindingRule({id:fG,weight:Fe.WorkbenchContrib+5,when:Lt.and(Of,mw),primary:U.Enter|ft.CtrlCmd,handler:e=>{var r,i;const n=(i=(r=e.get(gr).currentWebsite)==null?void 0:r.highlightInstance)==null?void 0:i.markerController;n&&n.saveNote()}});const gG=e=>{ut(e.controller.onStatusChange);const t=v.useRef(null);return v.useEffect(()=>{t&&t.current&&(t.current.focus(),t.current.setSelectionRange(t.current.value.length,t.current.value.length))},[]),v.useEffect(()=>{t&&t.current&&e.controller.highlightNote&&(t.current.style.height="auto",t.current.style.height=t.current.scrollHeight+"px")},[e.controller.highlightNote]),ce("div",{className:"input-note",children:[E("textarea",{ref:t,className:"highlight-note",value:e.controller.highlightNote,onInput:n=>{n.stopPropagation(),n.target.style.height="auto",n.target.style.height=n.target.scrollHeight+"px"},onChange:n=>e.controller.updateNote(n.target.value)}),ce("div",{className:"footer",children:[E("button",{onClick:()=>e.controller.dispose(),children:z("highlight_tool.cancel","Cancel")}),E("button",{className:"save-button",onClick:()=>{e.controller.saveNote()},children:z("highlight_tool.save","Save")})]})]})};function mG(e,t){return[e?{key:"delete-highlight",title:z("highlight_tool.delete_highlight","Delete highlight"),keyCode:U.KEY_H,icon:ce("div",{className:"delete-icon",children:[E(TC,{}),E("span",{className:"delete-line",children:E(eL,{})})]})}:{key:"highlight",keyCode:U.KEY_H,title:z("highlight_tool.add_highlight","Add highlight"),icon:E(TC,{})},{key:"note",keyCode:U.KEY_N,title:t?z("highlight_tool.edit_note","Edit note"):z("highlight_tool.take_note","Take note"),icon:E(Q5,{})},{key:"copy",keyCode:ft.CtrlCmd|U.KEY_C,title:z("highlight_tool.copy_text","Copy Text"),icon:E(U5,{})}]}const vG=e=>{ut(e.controller.onStatusChange);const t=e.controller.containerPos,n=QS(),r=mG(!!e.controller.highlightId,!!e.controller.highlightNote),i=e.width-(e.controller.displayNoteEditor?300:100);return ce("div",{className:"highlighter-tool-container",style:{top:t.y,left:Math.min(t.x,i)},children:[E("style",{children:pG}),e.controller.displayNoteEditor&&E(gG,{controller:e.controller}),!e.controller.displayNoteEditor&&E("div",{className:"box",children:r.map(o=>ce("div",{className:`item ${o.key}`,onClick:s=>{switch(o.key){case"highlight":{e.controller.highlight();break}case"delete-highlight":{e.controller.deleteHighlight();break}case"note":{e.controller.highlightAndTakeNote();break}case"copy":{e.controller.copy();break}}s.preventDefault(),s.stopPropagation()},children:[ce("div",{className:"highlight-tooltip-container",children:[E("span",{className:"highlight-tooltip-label",children:o.title}),E("div",{className:"highlight-tooltip-shortcut-container",children:n(o.keyCode).map(s=>E("span",{className:"highlight-tooltip-shortcut-key",children:s},s))})]}),o.icon]}))})]})};function _G(e,t,n,r){as.render(E(DS.Provider,{value:{instantiationService:e},children:E(vG,{controller:t,width:n.body.clientWidth})}),r)}var yG=Object.defineProperty,bG=Object.getOwnPropertyDescriptor,SG=(e,t,n,r)=>{for(var i=r>1?void 0:r?bG(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&yG(t,n,i),i},fk=(e,t)=>(n,r)=>t(n,r,e);let Wb=class{constructor(e,t,n){this.document=e,this.contextKeyService=t,this.instantiationService=n,this.markerController=null,this._highlighterToolVisible=Of.bindTo(this.contextKeyService),this._highlighterToolEditorVisible=mw.bindTo(this.contextKeyService)}ifContainer(e){let t=e;for(;t;){if(t.nodeType===1&&t.getAttribute("highlighter"))return!0;t=t.parentNode}return!1}get displayNoteEditor(){var e;return(e=this.markerController)==null?void 0:e.displayNoteEditor}init(e,t,n){const r=e.pageX+10,i=e.pageY+10,o=this.document,s=o.createElement("div");s.setAttribute("highlighter","true"),o.body.appendChild(s);const a=o.createElement("div");s.attachShadow({mode:"open"}).appendChild(a);const c=new hG({x:r,y:i},t,n);_G(this.instantiationService,c,o,a),this._highlighterToolVisible.set(!0),c.onDispose(()=>{this._highlighterToolVisible.set(!1),this.markerController=null,as.unmountComponentAtNode(a),a.remove()}),c.onStatusChange(()=>{this._highlighterToolEditorVisible.set(this.displayNoteEditor??!1)}),this.markerController=c}dispose(){this.markerController&&this.markerController.dispose()}};Wb=SG([fk(1,Fo),fk(2,Or)],Wb);const wG=`.highlight-class{background:#fffd99}[data-highlight-split-type=head]:after{content:""!important}[data-highlight-split-type=none]:after{content:""!important}.pseudo-placeholder:after{font-family:icon;content:""}.no-pseudo-content:after{content:""!important}
`;var EG=Object.defineProperty,CG=Object.getOwnPropertyDescriptor,xG=(e,t,n,r)=>{for(var i=r>1?void 0:r?CG(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&EG(t,n,i),i},hk=(e,t)=>(n,r)=>t(n,r,e);let zb=class{constructor(e,t,n,r){this.element=e,this.previewModel=t,this.instantiationService=n,this.keybindingService=r,this._highlightInstance=null,e.addEventListener("load",i=>{this.load()})}get highlightInstance(){if(!this._highlightInstance)throw new Error("");return this._highlightInstance}async load(){if(!this.element.contentWindow)return;const e=this.element.contentWindow;e.addEventListener("scroll",()=>this.setRead()),e.addEventListener("keydown",o=>{const s=new oy(o);this.keybindingService.dispatchEvent(s,s.target)&&(s.preventDefault(),s.stopPropagation())});const t=this.instantiationService.createInstance(Wb,e.document),n=this.instantiationService.createInstance(new Jt($b,[e,this.previewModel,t]));this._highlightInstance=n;const r=this.previewModel.link;e.document.querySelectorAll("a").forEach(o=>{o.addEventListener("click",s=>{let a=s.target||s.srcElement;if(s.preventDefault(),!(a!=null&&a.getAttribute("data-highlight-id"))&&r){const l=new URL(a.getAttribute("href")??"",r??"").toString();window.open(l)}})}),this.previewModel.setFrame(this),this.registerStyle(e)}async registerStyle(e){const t=e.URL.createObjectURL,n=t(await fetch(i6).then(r=>r.blob()));this.injectStyle(n,this.previewModel.textModel.id,e.document,this.previewModel.textModel.highlights),this.previewModel.textModel.onModelChanged(()=>{this.injectStyle(n,this.previewModel.textModel.id,e.document,this.previewModel.textModel.highlights)})}setRead(){this.previewModel.textModel.getProperty().read||(this.previewModel.textModel.read=!0)}injectStyle(e,t,n,r){const i=`highlight-style-${t}`;let o=wG;const a=r.filter(d=>!!d.note&&!!String(d.note).trim()).map(d=>d.highlightId).map(d=>{const h=`
          [data-highlight-id='${d}'][data-highlight-split-type="both"],
          [data-highlight-id='${d}'][data-highlight-split-type="tail"]
          `.trim();if(n.querySelector(h))return`
            [data-highlight-id='${d}'][data-highlight-split-type="both"]::after,
            [data-highlight-id='${d}'][data-highlight-split-type="tail"]::after {
              font-family: 'icon';
              content: '\\e600';
            }
            `}).join(`
`);o=`
      ${o}
      ${a}
      @font-face {
        font-family: 'icon';
        src: url('${e}') format('woff2');
      }
      `;const l=n.getElementById(i);l&&l.remove();const c=n.createElement("style");c.setAttribute("id",i),c.textContent=o,n.body.append(c)}};zb=xG([hk(2,Or),hk(3,E0)],zb);var eO=(e=>(e[e.text=0]="text",e[e.base64=1]="base64",e))(eO||{}),vw={exports:{}},In=String,tO=function(){return{isColorSupported:!1,reset:In,bold:In,dim:In,italic:In,underline:In,inverse:In,hidden:In,strikethrough:In,black:In,red:In,green:In,yellow:In,blue:In,magenta:In,cyan:In,white:In,gray:In,bgBlack:In,bgRed:In,bgGreen:In,bgYellow:In,bgBlue:In,bgMagenta:In,bgCyan:In,bgWhite:In}};vw.exports=tO();vw.exports.createColors=tO;var kG=vw.exports;const IG={},RG=Object.freeze(Object.defineProperty({__proto__:null,default:IG},Symbol.toStringTag,{value:"Module"})),mo=NN(RG);let pk=kG,gk=mo,Bb=class nO extends Error{constructor(t,n,r,i,o,s){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),i&&(this.source=i),s&&(this.plugin=s),typeof n<"u"&&typeof r<"u"&&(typeof n=="number"?(this.line=n,this.column=r):(this.line=n.line,this.column=n.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,nO)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(t){if(!this.source)return"";let n=this.source;t==null&&(t=pk.isColorSupported),gk&&t&&(n=gk(n));let r=n.split(/\r?\n/),i=Math.max(this.line-3,0),o=Math.min(this.line+2,r.length),s=String(o).length,a,l;if(t){let{bold:c,red:d,gray:h}=pk.createColors(!0);a=p=>c(d(p)),l=p=>h(p)}else a=l=c=>c;return r.slice(i,o).map((c,d)=>{let h=i+1+d,p=" "+(" "+h).slice(-s)+" | ";if(h===this.line){let g=l(p.replace(/\d/g," "))+c.slice(0,this.column-1).replace(/[^\t]/g," ");return a(">")+l(p)+c+`
 `+g+a("^")}return" "+l(p)+c}).join(`
`)}toString(){let t=this.showSourceCode();return t&&(t=`

`+t+`
`),this.name+": "+this.message+t}};var _w=Bb;Bb.default=Bb;var Pf={};Pf.isClean=Symbol("isClean");Pf.my=Symbol("my");const mk={colon:": ",indent:"    ",beforeDecl:`
`,beforeRule:`
`,beforeOpen:" ",beforeClose:`
`,beforeComment:`
`,after:`
`,emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1};function MG(e){return e[0].toUpperCase()+e.slice(1)}let Hb=class{constructor(t){this.builder=t}stringify(t,n){if(!this[t.type])throw new Error("Unknown AST node type "+t.type+". Maybe you need to change PostCSS stringifier.");this[t.type](t,n)}document(t){this.body(t)}root(t){this.body(t),t.raws.after&&this.builder(t.raws.after)}comment(t){let n=this.raw(t,"left","commentLeft"),r=this.raw(t,"right","commentRight");this.builder("/*"+n+t.text+r+"*/",t)}decl(t,n){let r=this.raw(t,"between","colon"),i=t.prop+r+this.rawValue(t,"value");t.important&&(i+=t.raws.important||" !important"),n&&(i+=";"),this.builder(i,t)}rule(t){this.block(t,this.rawValue(t,"selector")),t.raws.ownSemicolon&&this.builder(t.raws.ownSemicolon,t,"end")}atrule(t,n){let r="@"+t.name,i=t.params?this.rawValue(t,"params"):"";if(typeof t.raws.afterName<"u"?r+=t.raws.afterName:i&&(r+=" "),t.nodes)this.block(t,r+i);else{let o=(t.raws.between||"")+(n?";":"");this.builder(r+i+o,t)}}body(t){let n=t.nodes.length-1;for(;n>0&&t.nodes[n].type==="comment";)n-=1;let r=this.raw(t,"semicolon");for(let i=0;i<t.nodes.length;i++){let o=t.nodes[i],s=this.raw(o,"before");s&&this.builder(s),this.stringify(o,n!==i||r)}}block(t,n){let r=this.raw(t,"between","beforeOpen");this.builder(n+r+"{",t,"start");let i;t.nodes&&t.nodes.length?(this.body(t),i=this.raw(t,"after")):i=this.raw(t,"after","emptyBody"),i&&this.builder(i),this.builder("}",t,"end")}raw(t,n,r){let i;if(r||(r=n),n&&(i=t.raws[n],typeof i<"u"))return i;let o=t.parent;if(r==="before"&&(!o||o.type==="root"&&o.first===t||o&&o.type==="document"))return"";if(!o)return mk[r];let s=t.root();if(s.rawCache||(s.rawCache={}),typeof s.rawCache[r]<"u")return s.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(t,r);{let a="raw"+MG(r);this[a]?i=this[a](s,t):s.walk(l=>{if(i=l.raws[n],typeof i<"u")return!1})}return typeof i>"u"&&(i=mk[r]),s.rawCache[r]=i,i}rawSemicolon(t){let n;return t.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(n=r.raws.semicolon,typeof n<"u"))return!1}),n}rawEmptyBody(t){let n;return t.walk(r=>{if(r.nodes&&r.nodes.length===0&&(n=r.raws.after,typeof n<"u"))return!1}),n}rawIndent(t){if(t.raws.indent)return t.raws.indent;let n;return t.walk(r=>{let i=r.parent;if(i&&i!==t&&i.parent&&i.parent===t&&typeof r.raws.before<"u"){let o=r.raws.before.split(`
`);return n=o[o.length-1],n=n.replace(/\S/g,""),!1}}),n}rawBeforeComment(t,n){let r;return t.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(n,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(t,n){let r;return t.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(n,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeRule(t){let n;return t.walk(r=>{if(r.nodes&&(r.parent!==t||t.first!==r)&&typeof r.raws.before<"u")return n=r.raws.before,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeClose(t){let n;return t.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return n=r.raws.after,n.includes(`
`)&&(n=n.replace(/[^\n]+$/,"")),!1}),n&&(n=n.replace(/\S/g,"")),n}rawBeforeOpen(t){let n;return t.walk(r=>{if(r.type!=="decl"&&(n=r.raws.between,typeof n<"u"))return!1}),n}rawColon(t){let n;return t.walkDecls(r=>{if(typeof r.raws.between<"u")return n=r.raws.between.replace(/[^\s:]/g,""),!1}),n}beforeAfter(t,n){let r;t.type==="decl"?r=this.raw(t,null,"beforeDecl"):t.type==="comment"?r=this.raw(t,null,"beforeComment"):n==="before"?r=this.raw(t,null,"beforeRule"):r=this.raw(t,null,"beforeClose");let i=t.parent,o=0;for(;i&&i.type!=="root";)o+=1,i=i.parent;if(r.includes(`
`)){let s=this.raw(t,null,"indent");if(s.length)for(let a=0;a<o;a++)r+=s}return r}rawValue(t,n){let r=t[n],i=t.raws[n];return i&&i.value===r?i.raw:r}};var rO=Hb;Hb.default=Hb;let TG=rO;function jb(e,t){new TG(t).stringify(e)}var _m=jb;jb.default=jb;let{isClean:Rh,my:LG}=Pf,AG=_w,OG=rO,PG=_m;function Kb(e,t){let n=new e.constructor;for(let r in e){if(!Object.prototype.hasOwnProperty.call(e,r)||r==="proxyCache")continue;let i=e[r],o=typeof i;r==="parent"&&o==="object"?t&&(n[r]=t):r==="source"?n[r]=i:Array.isArray(i)?n[r]=i.map(s=>Kb(s,n)):(o==="object"&&i!==null&&(i=Kb(i)),n[r]=i)}return n}let Gb=class{constructor(t={}){this.raws={},this[Rh]=!1,this[LG]=!0;for(let n in t)if(n==="nodes"){this.nodes=[];for(let r of t[n])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[n]=t[n]}error(t,n={}){if(this.source){let{start:r,end:i}=this.rangeBy(n);return this.source.input.error(t,{line:r.line,column:r.column},{line:i.line,column:i.column},n)}return new AG(t)}warn(t,n,r){let i={node:this};for(let o in r)i[o]=r[o];return t.warn(n,i)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}toString(t=PG){t.stringify&&(t=t.stringify);let n="";return t(this,r=>{n+=r}),n}assign(t={}){for(let n in t)this[n]=t[n];return this}clone(t={}){let n=Kb(this);for(let r in t)n[r]=t[r];return n}cloneBefore(t={}){let n=this.clone(t);return this.parent.insertBefore(this,n),n}cloneAfter(t={}){let n=this.clone(t);return this.parent.insertAfter(this,n),n}replaceWith(...t){if(this.parent){let n=this,r=!1;for(let i of t)i===this?r=!0:r?(this.parent.insertAfter(n,i),n=i):this.parent.insertBefore(n,i);r||this.remove()}return this}next(){if(!this.parent)return;let t=this.parent.index(this);return this.parent.nodes[t+1]}prev(){if(!this.parent)return;let t=this.parent.index(this);return this.parent.nodes[t-1]}before(t){return this.parent.insertBefore(this,t),this}after(t){return this.parent.insertAfter(this,t),this}root(){let t=this;for(;t.parent&&t.parent.type!=="document";)t=t.parent;return t}raw(t,n){return new OG().raw(this,t,n)}cleanRaws(t){delete this.raws.before,delete this.raws.after,t||delete this.raws.between}toJSON(t,n){let r={},i=n==null;n=n||new Map;let o=0;for(let s in this){if(!Object.prototype.hasOwnProperty.call(this,s)||s==="parent"||s==="proxyCache")continue;let a=this[s];if(Array.isArray(a))r[s]=a.map(l=>typeof l=="object"&&l.toJSON?l.toJSON(null,n):l);else if(typeof a=="object"&&a.toJSON)r[s]=a.toJSON(null,n);else if(s==="source"){let l=n.get(a.input);l==null&&(l=o,n.set(a.input,o),o++),r[s]={inputId:l,start:a.start,end:a.end}}else r[s]=a}return i&&(r.inputs=[...n.keys()].map(s=>s.toJSON())),r}positionInside(t){let n=this.toString(),r=this.source.start.column,i=this.source.start.line;for(let o=0;o<t;o++)n[o]===`
`?(r=1,i+=1):r+=1;return{line:i,column:r}}positionBy(t){let n=this.source.start;if(t.index)n=this.positionInside(t.index);else if(t.word){let r=this.toString().indexOf(t.word);r!==-1&&(n=this.positionInside(r))}return n}rangeBy(t){let n={line:this.source.start.line,column:this.source.start.column},r=this.source.end?{line:this.source.end.line,column:this.source.end.column+1}:{line:n.line,column:n.column+1};if(t.word){let i=this.toString().indexOf(t.word);i!==-1&&(n=this.positionInside(i),r=this.positionInside(i+t.word.length))}else t.start?n={line:t.start.line,column:t.start.column}:t.index&&(n=this.positionInside(t.index)),t.end?r={line:t.end.line,column:t.end.column}:t.endIndex?r=this.positionInside(t.endIndex):t.index&&(r=this.positionInside(t.index+1));return(r.line<n.line||r.line===n.line&&r.column<=n.column)&&(r={line:n.line,column:n.column+1}),{start:n,end:r}}getProxyProcessor(){return{set(t,n,r){return t[n]===r||(t[n]=r,(n==="prop"||n==="value"||n==="name"||n==="params"||n==="important"||n==="text")&&t.markDirty()),!0},get(t,n){return n==="proxyOf"?t:n==="root"?()=>t.root().toProxy():t[n]}}}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}addToError(t){if(t.postcssNode=this,t.stack&&this.source&&/\n\s{4}at /.test(t.stack)){let n=this.source;t.stack=t.stack.replace(/\n\s{4}at /,`$&${n.input.from}:${n.start.line}:${n.start.column}$&`)}return t}markDirty(){if(this[Rh]){this[Rh]=!1;let t=this;for(;t=t.parent;)t[Rh]=!1}}get proxyOf(){return this}};var ym=Gb;Gb.default=Gb;let NG=ym,Yb=class extends NG{constructor(t){t&&typeof t.value<"u"&&typeof t.value!="string"&&(t={...t,value:String(t.value)}),super(t),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}};var bm=Yb;Yb.default=Yb;let DG="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",FG=(e,t=21)=>(n=t)=>{let r="",i=n;for(;i--;)r+=e[Math.random()*e.length|0];return r},VG=(e=21)=>{let t="",n=e;for(;n--;)t+=DG[Math.random()*64|0];return t};var UG={nanoid:VG,customAlphabet:FG};let{SourceMapConsumer:vk,SourceMapGenerator:_k}=mo,{existsSync:$G,readFileSync:WG}=mo,{dirname:w_,join:zG}=mo;function BG(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}let qb=class{constructor(t,n){if(n.map===!1)return;this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:");let r=n.map?n.map.prev:void 0,i=this.loadMap(n.from,r);!this.mapFile&&n.from&&(this.mapFile=n.from),this.mapFile&&(this.root=w_(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new vk(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(t,n){return t?t.substr(0,n.length)===n:!1}getAnnotationURL(t){return t.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(t){let n=t.match(/\/\*\s*# sourceMappingURL=/gm);if(!n)return;let r=t.lastIndexOf(n.pop()),i=t.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(t.substring(r,i)))}decodeInline(t){let n=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,o=/^data:application\/json,/;if(i.test(t)||o.test(t))return decodeURIComponent(t.substr(RegExp.lastMatch.length));if(n.test(t)||r.test(t))return BG(t.substr(RegExp.lastMatch.length));let s=t.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+s)}loadFile(t){if(this.root=w_(t),$G(t))return this.mapFile=t,WG(t,"utf-8").toString().trim()}loadMap(t,n){if(n===!1)return!1;if(n){if(typeof n=="string")return n;if(typeof n=="function"){let r=n(t);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(n instanceof vk)return _k.fromSourceMap(n).toString();if(n instanceof _k)return n.toString();if(this.isMap(n))return JSON.stringify(n);throw new Error("Unsupported previous source map format: "+n.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return t&&(r=zG(w_(t),r)),this.loadFile(r)}}}isMap(t){return typeof t!="object"?!1:typeof t.mappings=="string"||typeof t._mappings=="string"||Array.isArray(t.sections)}};var iO=qb;qb.default=qb;let{SourceMapConsumer:HG,SourceMapGenerator:jG}=mo,{fileURLToPath:yk,pathToFileURL:Mh}=mo,{resolve:Qb,isAbsolute:Xb}=mo,{nanoid:KG}=UG,E_=mo,bk=_w,GG=iO,C_=Symbol("fromOffsetCache"),YG=!!(HG&&jG),Sk=!!(Qb&&Xb),Cg=class{constructor(t,n={}){if(t===null||typeof t>"u"||typeof t=="object"&&!t.toString)throw new Error(`PostCSS received ${t} instead of CSS string`);if(this.css=t.toString(),this.css[0]==="\uFEFF"||this.css[0]==="￾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,n.from&&(!Sk||/^\w+:\/\//.test(n.from)||Xb(n.from)?this.file=n.from:this.file=Qb(n.from)),Sk&&YG){let r=new GG(this.css,n);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+KG(6)+">"),this.map&&(this.map.file=this.from)}fromOffset(t){let n,r;if(this[C_])r=this[C_];else{let o=this.css.split(`
`);r=new Array(o.length);let s=0;for(let a=0,l=o.length;a<l;a++)r[a]=s,s+=o[a].length+1;this[C_]=r}n=r[r.length-1];let i=0;if(t>=n)i=r.length-1;else{let o=r.length-2,s;for(;i<o;)if(s=i+(o-i>>1),t<r[s])o=s-1;else if(t>=r[s+1])i=s+1;else{i=s;break}}return{line:i+1,col:t-r[i]+1}}error(t,n,r,i={}){let o,s,a;if(n&&typeof n=="object"){let c=n,d=r;if(typeof n.offset=="number"){let h=this.fromOffset(c.offset);n=h.line,r=h.col}else n=c.line,r=c.column;if(typeof d.offset=="number"){let h=this.fromOffset(d.offset);s=h.line,a=h.col}else s=d.line,a=d.column}else if(!r){let c=this.fromOffset(n);n=c.line,r=c.col}let l=this.origin(n,r,s,a);return l?o=new bk(t,l.endLine===void 0?l.line:{line:l.line,column:l.column},l.endLine===void 0?l.column:{line:l.endLine,column:l.endColumn},l.source,l.file,i.plugin):o=new bk(t,s===void 0?n:{line:n,column:r},s===void 0?r:{line:s,column:a},this.css,this.file,i.plugin),o.input={line:n,column:r,endLine:s,endColumn:a,source:this.css},this.file&&(Mh&&(o.input.url=Mh(this.file).toString()),o.input.file=this.file),o}origin(t,n,r,i){if(!this.map)return!1;let o=this.map.consumer(),s=o.originalPositionFor({line:t,column:n});if(!s.source)return!1;let a;typeof r=="number"&&(a=o.originalPositionFor({line:r,column:i}));let l;Xb(s.source)?l=Mh(s.source):l=new URL(s.source,this.map.consumer().sourceRoot||Mh(this.map.mapFile));let c={url:l.toString(),line:s.line,column:s.column,endLine:a&&a.line,endColumn:a&&a.column};if(l.protocol==="file:")if(yk)c.file=yk(l);else throw new Error("file: protocol is not available in this PostCSS build");let d=o.sourceContentFor(s.source);return d&&(c.source=d),c}mapResolve(t){return/^\w+:\/\//.test(t)?t:Qb(this.map.consumer().sourceRoot||this.map.root||".",t)}get from(){return this.file||this.id}toJSON(){let t={};for(let n of["hasBOM","css","file","id"])this[n]!=null&&(t[n]=this[n]);return this.map&&(t.map={...this.map},t.map.consumerCache&&(t.map.consumerCache=void 0)),t}};var Sm=Cg;Cg.default=Cg;E_&&E_.registerInput&&E_.registerInput(Cg);let{SourceMapConsumer:oO,SourceMapGenerator:gp}=mo,{dirname:mp,resolve:sO,relative:aO,sep:lO}=mo,{pathToFileURL:wk}=mo,qG=Sm,QG=!!(oO&&gp),XG=!!(mp&&sO&&aO&&lO),ZG=class{constructor(t,n,r,i){this.stringify=t,this.mapOpts=r.map||{},this.root=n,this.opts=r,this.css=i}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(t=>{if(t.source&&t.source.input.map){let n=t.source.input.map;this.previousMaps.includes(n)||this.previousMaps.push(n)}});else{let t=new qG(this.css,this.opts);t.map&&this.previousMaps.push(t.map)}return this.previousMaps}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let t=this.mapOpts.annotation;return typeof t<"u"&&t!==!0?!1:this.previous().length?this.previous().some(n=>n.inline):!0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(t=>t.withContent()):!0}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let t;for(let n=this.root.nodes.length-1;n>=0;n--)t=this.root.nodes[n],t.type==="comment"&&t.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(n)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}setSourcesContent(){let t={};if(this.root)this.root.walk(n=>{if(n.source){let r=n.source.input.from;r&&!t[r]&&(t[r]=!0,this.map.setSourceContent(this.toUrl(this.path(r)),n.source.input.css))}});else if(this.css){let n=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(n,this.css)}}applyPrevMaps(){for(let t of this.previous()){let n=this.toUrl(this.path(t.file)),r=t.root||mp(t.file),i;this.mapOpts.sourcesContent===!1?(i=new oO(t.text),i.sourcesContent&&(i.sourcesContent=i.sourcesContent.map(()=>null))):i=t.consumer(),this.map.applySourceMap(i,n,this.toUrl(this.path(r)))}}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(t=>t.annotation):!0}toBase64(t){return Buffer?Buffer.from(t).toString("base64"):window.btoa(unescape(encodeURIComponent(t)))}addAnnotation(){let t;this.isInline()?t="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?t=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?t=this.mapOpts.annotation(this.opts.to,this.root):t=this.outputFile()+".map";let n=`
`;this.css.includes(`\r
`)&&(n=`\r
`),this.css+=n+"/*# sourceMappingURL="+t+" */"}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let t=this.previous()[0].consumer();t.file=this.outputFile(),this.map=gp.fromSourceMap(t)}else this.map=new gp({file:this.outputFile()}),this.map.addMapping({source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>",generated:{line:1,column:0},original:{line:1,column:0}});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}path(t){if(t.indexOf("<")===0||/^\w+:\/\//.test(t)||this.mapOpts.absolute)return t;let n=this.opts.to?mp(this.opts.to):".";return typeof this.mapOpts.annotation=="string"&&(n=mp(sO(n,this.mapOpts.annotation))),t=aO(n,t),t}toUrl(t){return lO==="\\"&&(t=t.replace(/\\/g,"/")),encodeURI(t).replace(/[#?]/g,encodeURIComponent)}sourcePath(t){if(this.mapOpts.from)return this.toUrl(this.mapOpts.from);if(this.mapOpts.absolute){if(wk)return wk(t.source.input.from).toString();throw new Error("`map.absolute` option is not available in this PostCSS build")}else return this.toUrl(this.path(t.source.input.from))}generateString(){this.css="",this.map=new gp({file:this.outputFile()});let t=1,n=1,r="<no source>",i={source:"",generated:{line:0,column:0},original:{line:0,column:0}},o,s;this.stringify(this.root,(a,l,c)=>{if(this.css+=a,l&&c!=="end"&&(i.generated.line=t,i.generated.column=n-1,l.source&&l.source.start?(i.source=this.sourcePath(l),i.original.line=l.source.start.line,i.original.column=l.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=a.match(/\n/g),o?(t+=o.length,s=a.lastIndexOf(`
`),n=a.length-s):n+=a.length,l&&c!=="start"){let d=l.parent||{raws:{}};(l.type!=="decl"||l!==d.last||d.raws.semicolon)&&(l.source&&l.source.end?(i.source=this.sourcePath(l),i.original.line=l.source.end.line,i.original.column=l.source.end.column-1,i.generated.line=t,i.generated.column=n-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=t,i.generated.column=n-1,this.map.addMapping(i)))}})}generate(){if(this.clearAnnotation(),XG&&QG&&this.isMap())return this.generateMap();{let t="";return this.stringify(this.root,n=>{t+=n}),[t]}}};var cO=ZG;let JG=ym,Zb=class extends JG{constructor(t){super(t),this.type="comment"}};var wm=Zb;Zb.default=Zb;let{isClean:uO,my:dO}=Pf,fO=bm,hO=wm,eY=ym,pO,yw,bw,gO;function mO(e){return e.map(t=>(t.nodes&&(t.nodes=mO(t.nodes)),delete t.source,t))}function vO(e){if(e[uO]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)vO(t)}let ls=class _O extends eY{push(t){return t.parent=this,this.proxyOf.nodes.push(t),this}each(t){if(!this.proxyOf.nodes)return;let n=this.getIterator(),r,i;for(;this.indexes[n]<this.proxyOf.nodes.length&&(r=this.indexes[n],i=t(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[n]+=1;return delete this.indexes[n],i}walk(t){return this.each((n,r)=>{let i;try{i=t(n,r)}catch(o){throw n.addToError(o)}return i!==!1&&n.walk&&(i=n.walk(t)),i})}walkDecls(t,n){return n?t instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&t.test(r.prop))return n(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===t)return n(r,i)}):(n=t,this.walk((r,i)=>{if(r.type==="decl")return n(r,i)}))}walkRules(t,n){return n?t instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&t.test(r.selector))return n(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===t)return n(r,i)}):(n=t,this.walk((r,i)=>{if(r.type==="rule")return n(r,i)}))}walkAtRules(t,n){return n?t instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&t.test(r.name))return n(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===t)return n(r,i)}):(n=t,this.walk((r,i)=>{if(r.type==="atrule")return n(r,i)}))}walkComments(t){return this.walk((n,r)=>{if(n.type==="comment")return t(n,r)})}append(...t){for(let n of t){let r=this.normalize(n,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}prepend(...t){t=t.reverse();for(let n of t){let r=this.normalize(n,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}cleanRaws(t){if(super.cleanRaws(t),this.nodes)for(let n of this.nodes)n.cleanRaws(t)}insertBefore(t,n){t=this.index(t);let r=t===0?"prepend":!1,i=this.normalize(n,this.proxyOf.nodes[t],r).reverse();for(let s of i)this.proxyOf.nodes.splice(t,0,s);let o;for(let s in this.indexes)o=this.indexes[s],t<=o&&(this.indexes[s]=o+i.length);return this.markDirty(),this}insertAfter(t,n){t=this.index(t);let r=this.normalize(n,this.proxyOf.nodes[t]).reverse();for(let o of r)this.proxyOf.nodes.splice(t+1,0,o);let i;for(let o in this.indexes)i=this.indexes[o],t<i&&(this.indexes[o]=i+r.length);return this.markDirty(),this}removeChild(t){t=this.index(t),this.proxyOf.nodes[t].parent=void 0,this.proxyOf.nodes.splice(t,1);let n;for(let r in this.indexes)n=this.indexes[r],n>=t&&(this.indexes[r]=n-1);return this.markDirty(),this}removeAll(){for(let t of this.proxyOf.nodes)t.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}replaceValues(t,n,r){return r||(r=n,n={}),this.walkDecls(i=>{n.props&&!n.props.includes(i.prop)||n.fast&&!i.value.includes(n.fast)||(i.value=i.value.replace(t,r))}),this.markDirty(),this}every(t){return this.nodes.every(t)}some(t){return this.nodes.some(t)}index(t){return typeof t=="number"?t:(t.proxyOf&&(t=t.proxyOf),this.proxyOf.nodes.indexOf(t))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}normalize(t,n){if(typeof t=="string")t=mO(pO(t).nodes);else if(Array.isArray(t)){t=t.slice(0);for(let i of t)i.parent&&i.parent.removeChild(i,"ignore")}else if(t.type==="root"&&this.type!=="document"){t=t.nodes.slice(0);for(let i of t)i.parent&&i.parent.removeChild(i,"ignore")}else if(t.type)t=[t];else if(t.prop){if(typeof t.value>"u")throw new Error("Value field is missed in node creation");typeof t.value!="string"&&(t.value=String(t.value)),t=[new fO(t)]}else if(t.selector)t=[new yw(t)];else if(t.name)t=[new bw(t)];else if(t.text)t=[new hO(t)];else throw new Error("Unknown node type in node creation");return t.map(i=>(i[dO]||_O.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[uO]&&vO(i),typeof i.raws.before>"u"&&n&&typeof n.raws.before<"u"&&(i.raws.before=n.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}getProxyProcessor(){return{set(t,n,r){return t[n]===r||(t[n]=r,(n==="name"||n==="params"||n==="selector")&&t.markDirty()),!0},get(t,n){return n==="proxyOf"?t:t[n]?n==="each"||typeof n=="string"&&n.startsWith("walk")?(...r)=>t[n](...r.map(i=>typeof i=="function"?(o,s)=>i(o.toProxy(),s):i)):n==="every"||n==="some"?r=>t[n]((i,...o)=>r(i.toProxy(),...o)):n==="root"?()=>t.root().toProxy():n==="nodes"?t.nodes.map(r=>r.toProxy()):n==="first"||n==="last"?t[n].toProxy():t[n]:t[n]}}}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let t=this.lastEach;return this.indexes[t]=0,t}};ls.registerParse=e=>{pO=e};ls.registerRule=e=>{yw=e};ls.registerAtRule=e=>{bw=e};ls.registerRoot=e=>{gO=e};var dl=ls;ls.default=ls;ls.rebuild=e=>{e.type==="atrule"?Object.setPrototypeOf(e,bw.prototype):e.type==="rule"?Object.setPrototypeOf(e,yw.prototype):e.type==="decl"?Object.setPrototypeOf(e,fO.prototype):e.type==="comment"?Object.setPrototypeOf(e,hO.prototype):e.type==="root"&&Object.setPrototypeOf(e,gO.prototype),e[dO]=!0,e.nodes&&e.nodes.forEach(t=>{ls.rebuild(t)})};let tY=dl,yO,bO,Jd=class extends tY{constructor(t){super({type:"document",...t}),this.nodes||(this.nodes=[])}toResult(t={}){return new yO(new bO,this,t).stringify()}};Jd.registerLazyResult=e=>{yO=e};Jd.registerProcessor=e=>{bO=e};var Sw=Jd;Jd.default=Jd;let Jb=class{constructor(t,n={}){if(this.type="warning",this.text=t,n.node&&n.node.source){let r=n.node.rangeBy(n);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in n)this[r]=n[r]}toString(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var SO=Jb;Jb.default=Jb;let nY=SO,e0=class{constructor(t,n,r){this.processor=t,this.messages=[],this.root=n,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(t,n={}){n.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(n.plugin=this.lastPlugin.postcssPlugin);let r=new nY(t,n);return this.messages.push(r),r}warnings(){return this.messages.filter(t=>t.type==="warning")}get content(){return this.css}};var ww=e0;e0.default=e0;const x_="'".charCodeAt(0),Ek='"'.charCodeAt(0),Th="\\".charCodeAt(0),Ck="/".charCodeAt(0),Lh=`
`.charCodeAt(0),Wu=" ".charCodeAt(0),Ah="\f".charCodeAt(0),Oh="	".charCodeAt(0),Ph="\r".charCodeAt(0),rY="[".charCodeAt(0),iY="]".charCodeAt(0),oY="(".charCodeAt(0),sY=")".charCodeAt(0),aY="{".charCodeAt(0),lY="}".charCodeAt(0),cY=";".charCodeAt(0),uY="*".charCodeAt(0),dY=":".charCodeAt(0),fY="@".charCodeAt(0),Nh=/[\t\n\f\r "#'()/;[\\\]{}]/g,Dh=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,hY=/.[\n"'(/\\]/,xk=/[\da-f]/i;var pY=function(t,n={}){let r=t.css.valueOf(),i=n.ignoreErrors,o,s,a,l,c,d,h,p,g,b,k=r.length,y=0,_=[],w=[];function x(){return y}function C(N){throw t.error("Unclosed "+N,y)}function F(){return w.length===0&&y>=k}function M(N){if(w.length)return w.pop();if(y>=k)return;let V=N?N.ignoreUnclosed:!1;switch(o=r.charCodeAt(y),o){case Lh:case Wu:case Oh:case Ph:case Ah:{s=y;do s+=1,o=r.charCodeAt(s);while(o===Wu||o===Lh||o===Oh||o===Ph||o===Ah);b=["space",r.slice(y,s)],y=s-1;break}case rY:case iY:case aY:case lY:case dY:case cY:case sY:{let Y=String.fromCharCode(o);b=[Y,Y,y];break}case oY:{if(p=_.length?_.pop()[1]:"",g=r.charCodeAt(y+1),p==="url"&&g!==x_&&g!==Ek&&g!==Wu&&g!==Lh&&g!==Oh&&g!==Ah&&g!==Ph){s=y;do{if(d=!1,s=r.indexOf(")",s+1),s===-1)if(i||V){s=y;break}else C("bracket");for(h=s;r.charCodeAt(h-1)===Th;)h-=1,d=!d}while(d);b=["brackets",r.slice(y,s+1),y,s],y=s}else s=r.indexOf(")",y+1),l=r.slice(y,s+1),s===-1||hY.test(l)?b=["(","(",y]:(b=["brackets",l,y,s],y=s);break}case x_:case Ek:{a=o===x_?"'":'"',s=y;do{if(d=!1,s=r.indexOf(a,s+1),s===-1)if(i||V){s=y+1;break}else C("string");for(h=s;r.charCodeAt(h-1)===Th;)h-=1,d=!d}while(d);b=["string",r.slice(y,s+1),y,s],y=s;break}case fY:{Nh.lastIndex=y+1,Nh.test(r),Nh.lastIndex===0?s=r.length-1:s=Nh.lastIndex-2,b=["at-word",r.slice(y,s+1),y,s],y=s;break}case Th:{for(s=y,c=!0;r.charCodeAt(s+1)===Th;)s+=1,c=!c;if(o=r.charCodeAt(s+1),c&&o!==Ck&&o!==Wu&&o!==Lh&&o!==Oh&&o!==Ph&&o!==Ah&&(s+=1,xk.test(r.charAt(s)))){for(;xk.test(r.charAt(s+1));)s+=1;r.charCodeAt(s+1)===Wu&&(s+=1)}b=["word",r.slice(y,s+1),y,s],y=s;break}default:{o===Ck&&r.charCodeAt(y+1)===uY?(s=r.indexOf("*/",y+2)+1,s===0&&(i||V?s=r.length:C("comment")),b=["comment",r.slice(y,s+1),y,s],y=s):(Dh.lastIndex=y+1,Dh.test(r),Dh.lastIndex===0?s=r.length-1:s=Dh.lastIndex-2,b=["word",r.slice(y,s+1),y,s],_.push(b),y=s);break}}return y++,b}function L(N){w.push(N)}return{back:L,nextToken:M,endOfFile:F,position:x}};let wO=dl,xg=class extends wO{constructor(t){super(t),this.type="atrule"}append(...t){return this.proxyOf.nodes||(this.nodes=[]),super.append(...t)}prepend(...t){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...t)}};var Ew=xg;xg.default=xg;wO.registerAtRule(xg);let EO=dl,CO,xO,Dc=class extends EO{constructor(t){super(t),this.type="root",this.nodes||(this.nodes=[])}removeChild(t,n){let r=this.index(t);return!n&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(t)}normalize(t,n,r){let i=super.normalize(t);if(n){if(r==="prepend")this.nodes.length>1?n.raws.before=this.nodes[1].raws.before:delete n.raws.before;else if(this.first!==n)for(let o of i)o.raws.before=n.raws.before}return i}toResult(t={}){return new CO(new xO,this,t).stringify()}};Dc.registerLazyResult=e=>{CO=e};Dc.registerProcessor=e=>{xO=e};var Nf=Dc;Dc.default=Dc;EO.registerRoot(Dc);let ef={split(e,t,n){let r=[],i="",o=!1,s=0,a=!1,l="",c=!1;for(let d of e)c?c=!1:d==="\\"?c=!0:a?d===l&&(a=!1):d==='"'||d==="'"?(a=!0,l=d):d==="("?s+=1:d===")"?s>0&&(s-=1):s===0&&t.includes(d)&&(o=!0),o?(i!==""&&r.push(i.trim()),i="",o=!1):i+=d;return(n||i!=="")&&r.push(i.trim()),r},space(e){let t=[" ",`
`,"	"];return ef.split(e,t)},comma(e){return ef.split(e,[","],!0)}};var kO=ef;ef.default=ef;let IO=dl,gY=kO,kg=class extends IO{constructor(t){super(t),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return gY.comma(this.selector)}set selectors(t){let n=this.selector?this.selector.match(/,\s*/):null,r=n?n[0]:","+this.raw("between","beforeOpen");this.selector=t.join(r)}};var Cw=kg;kg.default=kg;IO.registerRule(kg);let mY=bm,vY=pY,_Y=wm,yY=Ew,bY=Nf,kk=Cw;const Ik={empty:!0,space:!0};function SY(e){for(let t=e.length-1;t>=0;t--){let n=e[t],r=n[3]||n[2];if(r)return r}}let wY=class{constructor(t){this.input=t,this.root=new bY,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:t,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=vY(this.input)}parse(){let t;for(;!this.tokenizer.endOfFile();)switch(t=this.tokenizer.nextToken(),t[0]){case"space":this.spaces+=t[1];break;case";":this.freeSemicolon(t);break;case"}":this.end(t);break;case"comment":this.comment(t);break;case"at-word":this.atrule(t);break;case"{":this.emptyRule(t);break;default:this.other(t);break}this.endFile()}comment(t){let n=new _Y;this.init(n,t[2]),n.source.end=this.getPosition(t[3]||t[2]);let r=t[1].slice(2,-2);if(/^\s*$/.test(r))n.text="",n.raws.left=r,n.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);n.text=i[2],n.raws.left=i[1],n.raws.right=i[3]}}emptyRule(t){let n=new kk;this.init(n,t[2]),n.selector="",n.raws.between="",this.current=n}other(t){let n=!1,r=null,i=!1,o=null,s=[],a=t[1].startsWith("--"),l=[],c=t;for(;c;){if(r=c[0],l.push(c),r==="("||r==="[")o||(o=c),s.push(r==="("?")":"]");else if(a&&i&&r==="{")o||(o=c),s.push("}");else if(s.length===0)if(r===";")if(i){this.decl(l,a);return}else break;else if(r==="{"){this.rule(l);return}else if(r==="}"){this.tokenizer.back(l.pop()),n=!0;break}else r===":"&&(i=!0);else r===s[s.length-1]&&(s.pop(),s.length===0&&(o=null));c=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(n=!0),s.length>0&&this.unclosedBracket(o),n&&i){if(!a)for(;l.length&&(c=l[l.length-1][0],!(c!=="space"&&c!=="comment"));)this.tokenizer.back(l.pop());this.decl(l,a)}else this.unknownWord(l)}rule(t){t.pop();let n=new kk;this.init(n,t[0][2]),n.raws.between=this.spacesAndCommentsFromEnd(t),this.raw(n,"selector",t),this.current=n}decl(t,n){let r=new mY;this.init(r,t[0][2]);let i=t[t.length-1];for(i[0]===";"&&(this.semicolon=!0,t.pop()),r.source.end=this.getPosition(i[3]||i[2]||SY(t));t[0][0]!=="word";)t.length===1&&this.unknownWord(t),r.raws.before+=t.shift()[1];for(r.source.start=this.getPosition(t[0][2]),r.prop="";t.length;){let c=t[0][0];if(c===":"||c==="space"||c==="comment")break;r.prop+=t.shift()[1]}r.raws.between="";let o;for(;t.length;)if(o=t.shift(),o[0]===":"){r.raws.between+=o[1];break}else o[0]==="word"&&/\w/.test(o[1])&&this.unknownWord([o]),r.raws.between+=o[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let s=[],a;for(;t.length&&(a=t[0][0],!(a!=="space"&&a!=="comment"));)s.push(t.shift());this.precheckMissedSemicolon(t);for(let c=t.length-1;c>=0;c--){if(o=t[c],o[1].toLowerCase()==="!important"){r.important=!0;let d=this.stringFrom(t,c);d=this.spacesFromEnd(t)+d,d!==" !important"&&(r.raws.important=d);break}else if(o[1].toLowerCase()==="important"){let d=t.slice(0),h="";for(let p=c;p>0;p--){let g=d[p][0];if(h.trim().indexOf("!")===0&&g!=="space")break;h=d.pop()[1]+h}h.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=h,t=d)}if(o[0]!=="space"&&o[0]!=="comment")break}t.some(c=>c[0]!=="space"&&c[0]!=="comment")&&(r.raws.between+=s.map(c=>c[1]).join(""),s=[]),this.raw(r,"value",s.concat(t),n),r.value.includes(":")&&!n&&this.checkMissedSemicolon(t)}atrule(t){let n=new yY;n.name=t[1].slice(1),n.name===""&&this.unnamedAtrule(n,t),this.init(n,t[2]);let r,i,o,s=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(t=this.tokenizer.nextToken(),r=t[0],r==="("||r==="["?c.push(r==="("?")":"]"):r==="{"&&c.length>0?c.push("}"):r===c[c.length-1]&&c.pop(),c.length===0)if(r===";"){n.source.end=this.getPosition(t[2]),this.semicolon=!0;break}else if(r==="{"){a=!0;break}else if(r==="}"){if(l.length>0){for(o=l.length-1,i=l[o];i&&i[0]==="space";)i=l[--o];i&&(n.source.end=this.getPosition(i[3]||i[2]))}this.end(t);break}else l.push(t);else l.push(t);if(this.tokenizer.endOfFile()){s=!0;break}}n.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(n.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(n,"params",l),s&&(t=l[l.length-1],n.source.end=this.getPosition(t[3]||t[2]),this.spaces=n.raws.between,n.raws.between="")):(n.raws.afterName="",n.params=""),a&&(n.nodes=[],this.current=n)}end(t){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(t[2]),this.current=this.current.parent):this.unexpectedClose(t)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(t){if(this.spaces+=t[1],this.current.nodes){let n=this.current.nodes[this.current.nodes.length-1];n&&n.type==="rule"&&!n.raws.ownSemicolon&&(n.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(t){let n=this.input.fromOffset(t);return{offset:t,line:n.line,column:n.col}}init(t,n){this.current.push(t),t.source={start:this.getPosition(n),input:this.input},t.raws.before=this.spaces,this.spaces="",t.type!=="comment"&&(this.semicolon=!1)}raw(t,n,r,i){let o,s,a=r.length,l="",c=!0,d,h;for(let p=0;p<a;p+=1)o=r[p],s=o[0],s==="space"&&p===a-1&&!i?c=!1:s==="comment"?(h=r[p-1]?r[p-1][0]:"empty",d=r[p+1]?r[p+1][0]:"empty",!Ik[h]&&!Ik[d]?l.slice(-1)===","?c=!1:l+=o[1]:c=!1):l+=o[1];if(!c){let p=r.reduce((g,b)=>g+b[1],"");t.raws[n]={value:l,raw:p}}t[n]=l}spacesAndCommentsFromEnd(t){let n,r="";for(;t.length&&(n=t[t.length-1][0],!(n!=="space"&&n!=="comment"));)r=t.pop()[1]+r;return r}spacesAndCommentsFromStart(t){let n,r="";for(;t.length&&(n=t[0][0],!(n!=="space"&&n!=="comment"));)r+=t.shift()[1];return r}spacesFromEnd(t){let n,r="";for(;t.length&&(n=t[t.length-1][0],n==="space");)r=t.pop()[1]+r;return r}stringFrom(t,n){let r="";for(let i=n;i<t.length;i++)r+=t[i][1];return t.splice(n,t.length-n),r}colon(t){let n=0,r,i,o;for(let[s,a]of t.entries()){if(r=a,i=r[0],i==="("&&(n+=1),i===")"&&(n-=1),n===0&&i===":")if(!o)this.doubleColon(r);else{if(o[0]==="word"&&o[1]==="progid")continue;return s}o=r}return!1}unclosedBracket(t){throw this.input.error("Unclosed bracket",{offset:t[2]},{offset:t[2]+1})}unknownWord(t){throw this.input.error("Unknown word",{offset:t[0][2]},{offset:t[0][2]+t[0][1].length})}unexpectedClose(t){throw this.input.error("Unexpected }",{offset:t[2]},{offset:t[2]+1})}unclosedBlock(){let t=this.current.source.start;throw this.input.error("Unclosed block",t.line,t.column)}doubleColon(t){throw this.input.error("Double colon",{offset:t[2]},{offset:t[2]+t[1].length})}unnamedAtrule(t,n){throw this.input.error("At-rule without name",{offset:n[2]},{offset:n[2]+n[1].length})}precheckMissedSemicolon(){}checkMissedSemicolon(t){let n=this.colon(t);if(n===!1)return;let r=0,i;for(let o=n-1;o>=0&&(i=t[o],!(i[0]!=="space"&&(r+=1,r===2)));o--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}};var EY=wY;let CY=dl,xY=EY,kY=Sm;function Ig(e,t){let n=new kY(e,t),r=new xY(n);try{r.parse()}catch(i){throw i}return r.root}var xw=Ig;Ig.default=Ig;CY.registerParse(Ig);let{isClean:bo,my:IY}=Pf,RY=cO,MY=_m,TY=dl,LY=Sw,Rk=ww,AY=xw,OY=Nf;const PY={document:"Document",root:"Root",atrule:"AtRule",rule:"Rule",decl:"Declaration",comment:"Comment"},NY={postcssPlugin:!0,prepare:!0,Once:!0,Document:!0,Root:!0,Declaration:!0,Rule:!0,AtRule:!0,Comment:!0,DeclarationExit:!0,RuleExit:!0,AtRuleExit:!0,CommentExit:!0,RootExit:!0,DocumentExit:!0,OnceExit:!0},DY={postcssPlugin:!0,prepare:!0,Once:!0},Fc=0;function zu(e){return typeof e=="object"&&typeof e.then=="function"}function RO(e){let t=!1,n=PY[e.type];return e.type==="decl"?t=e.prop.toLowerCase():e.type==="atrule"&&(t=e.name.toLowerCase()),t&&e.append?[n,n+"-"+t,Fc,n+"Exit",n+"Exit-"+t]:t?[n,n+"-"+t,n+"Exit",n+"Exit-"+t]:e.append?[n,Fc,n+"Exit"]:[n,n+"Exit"]}function Mk(e){let t;return e.type==="document"?t=["Document",Fc,"DocumentExit"]:e.type==="root"?t=["Root",Fc,"RootExit"]:t=RO(e),{node:e,events:t,eventIndex:0,visitors:[],visitorIndex:0,iterator:0}}function t0(e){return e[bo]=!1,e.nodes&&e.nodes.forEach(t=>t0(t)),e}let n0={},Vc=class MO{constructor(t,n,r){this.stringified=!1,this.processed=!1;let i;if(typeof n=="object"&&n!==null&&(n.type==="root"||n.type==="document"))i=t0(n);else if(n instanceof MO||n instanceof Rk)i=t0(n.root),n.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=n.map);else{let o=AY;r.syntax&&(o=r.syntax.parse),r.parser&&(o=r.parser),o.parse&&(o=o.parse);try{i=o(n,r)}catch(s){this.processed=!0,this.error=s}i&&!i[IY]&&TY.rebuild(i)}this.result=new Rk(t,i,r),this.helpers={...n0,result:this.result,postcss:n0},this.plugins=this.processor.plugins.map(o=>typeof o=="object"&&o.prepare?{...o,...o.prepare(this.result)}:o)}get[Symbol.toStringTag](){return"LazyResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.stringify().css}get content(){return this.stringify().content}get map(){return this.stringify().map}get root(){return this.sync().root}get messages(){return this.sync().messages}warnings(){return this.sync().warnings()}toString(){return this.css}then(t,n){return this.async().then(t,n)}catch(t){return this.async().catch(t)}finally(t){return this.async().then(t,t)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let t of this.plugins){let n=this.runOnRoot(t);if(zu(n))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[bo];)t[bo]=!0,this.walkSync(t);if(this.listeners.OnceExit)if(t.type==="document")for(let n of t.nodes)this.visitSync(this.listeners.OnceExit,n);else this.visitSync(this.listeners.OnceExit,t)}return this.result}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let t=this.result.opts,n=MY;t.syntax&&(n=t.syntax.stringify),t.stringifier&&(n=t.stringifier),n.stringify&&(n=n.stringify);let i=new RY(n,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}walkSync(t){t[bo]=!0;let n=RO(t);for(let r of n)if(r===Fc)t.nodes&&t.each(i=>{i[bo]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,t.toProxy()))return}}visitSync(t,n){for(let[r,i]of t){this.result.lastPlugin=r;let o;try{o=i(n,this.helpers)}catch(s){throw this.handleError(s,n.proxyOf)}if(n.type!=="root"&&n.type!=="document"&&!n.parent)return!0;if(zu(o))throw this.getAsyncError()}}runOnRoot(t){this.result.lastPlugin=t;try{if(typeof t=="object"&&t.Once){if(this.result.root.type==="document"){let n=this.result.root.nodes.map(r=>t.Once(r,this.helpers));return zu(n[0])?Promise.all(n):n}return t.Once(this.result.root,this.helpers)}else if(typeof t=="function")return t(this.result.root,this.result)}catch(n){throw this.handleError(n)}}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(t,n){let r=this.result.lastPlugin;try{n&&n.addToError(t),this.error=t,t.name==="CssSyntaxError"&&!t.plugin?(t.plugin=r.postcssPlugin,t.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return t}async runAsync(){this.plugin=0;for(let t=0;t<this.plugins.length;t++){let n=this.plugins[t],r=this.runOnRoot(n);if(zu(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let t=this.result.root;for(;!t[bo];){t[bo]=!0;let n=[Mk(t)];for(;n.length>0;){let r=this.visitTick(n);if(zu(r))try{await r}catch(i){let o=n[n.length-1].node;throw this.handleError(i,o)}}}if(this.listeners.OnceExit)for(let[n,r]of this.listeners.OnceExit){this.result.lastPlugin=n;try{if(t.type==="document"){let i=t.nodes.map(o=>r(o,this.helpers));await Promise.all(i)}else await r(t,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}prepareVisitors(){this.listeners={};let t=(n,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([n,i])};for(let n of this.plugins)if(typeof n=="object")for(let r in n){if(!NY[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${n.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!DY[r])if(typeof n[r]=="object")for(let i in n[r])i==="*"?t(n,r,n[r][i]):t(n,r+"-"+i.toLowerCase(),n[r][i]);else typeof n[r]=="function"&&t(n,r,n[r])}this.hasListener=Object.keys(this.listeners).length>0}visitTick(t){let n=t[t.length-1],{node:r,visitors:i}=n;if(r.type!=="root"&&r.type!=="document"&&!r.parent){t.pop();return}if(i.length>0&&n.visitorIndex<i.length){let[s,a]=i[n.visitorIndex];n.visitorIndex+=1,n.visitorIndex===i.length&&(n.visitors=[],n.visitorIndex=0),this.result.lastPlugin=s;try{return a(r.toProxy(),this.helpers)}catch(l){throw this.handleError(l,r)}}if(n.iterator!==0){let s=n.iterator,a;for(;a=r.nodes[r.indexes[s]];)if(r.indexes[s]+=1,!a[bo]){a[bo]=!0,t.push(Mk(a));return}n.iterator=0,delete r.indexes[s]}let o=n.events;for(;n.eventIndex<o.length;){let s=o[n.eventIndex];if(n.eventIndex+=1,s===Fc){r.nodes&&r.nodes.length&&(r[bo]=!0,n.iterator=r.getIterator());return}else if(this.listeners[s]){n.visitors=this.listeners[s];return}}t.pop()}};Vc.registerPostcss=e=>{n0=e};var TO=Vc;Vc.default=Vc;OY.registerLazyResult(Vc);LY.registerLazyResult(Vc);let FY=cO,VY=_m,UY=xw;const $Y=ww;let r0=class{constructor(t,n,r){n=n.toString(),this.stringified=!1,this._processor=t,this._css=n,this._opts=r,this._map=void 0;let i,o=VY;this.result=new $Y(this._processor,i,this._opts),this.result.css=n;let s=this;Object.defineProperty(this.result,"root",{get(){return s.root}});let a=new FY(o,i,this._opts,n);if(a.isMap()){let[l,c]=a.generate();l&&(this.result.css=l),c&&(this.result.map=c)}}get[Symbol.toStringTag](){return"NoWorkResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.result.css}get content(){return this.result.css}get map(){return this.result.map}get root(){if(this._root)return this._root;let t,n=UY;try{t=n(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=t,t}get messages(){return[]}warnings(){return[]}toString(){return this._css}then(t,n){return this.async().then(t,n)}catch(t){return this.async().catch(t)}finally(t){return this.async().then(t,t)}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}sync(){if(this.error)throw this.error;return this.result}};var WY=r0;r0.default=r0;let zY=WY,BY=TO,HY=Sw,jY=Nf,tf=class{constructor(t=[]){this.version="8.4.16",this.plugins=this.normalize(t)}use(t){return this.plugins=this.plugins.concat(this.normalize([t])),this}process(t,n={}){return this.plugins.length===0&&typeof n.parser>"u"&&typeof n.stringifier>"u"&&typeof n.syntax>"u"?new zY(this,t,n):new BY(this,t,n)}normalize(t){let n=[];for(let r of t)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))n=n.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)n.push(r);else if(typeof r=="function")n.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return n}};var KY=tf;tf.default=tf;jY.registerProcessor(tf);HY.registerProcessor(tf);let GY=bm,YY=iO,qY=wm,QY=Ew,XY=Sm,ZY=Nf,JY=Cw;function nf(e,t){if(Array.isArray(e))return e.map(i=>nf(i));let{inputs:n,...r}=e;if(n){t=[];for(let i of n){let o={...i,__proto__:XY.prototype};o.map&&(o.map={...o.map,__proto__:YY.prototype}),t.push(o)}}if(r.nodes&&(r.nodes=e.nodes.map(i=>nf(i,t))),r.source){let{inputId:i,...o}=r.source;r.source=o,i!=null&&(r.source.input=t[i])}if(r.type==="root")return new ZY(r);if(r.type==="decl")return new GY(r);if(r.type==="rule")return new JY(r);if(r.type==="comment")return new qY(r);if(r.type==="atrule")return new QY(r);throw new Error("Unknown node type: "+e.type)}var eq=nf;nf.default=nf;let tq=_w,LO=bm,nq=TO,rq=dl,kw=KY,iq=_m,oq=eq,AO=Sw,sq=SO,OO=wm,PO=Ew,aq=ww,lq=Sm,cq=xw,uq=kO,NO=Cw,DO=Nf,dq=ym;function rn(...e){return e.length===1&&Array.isArray(e[0])&&(e=e[0]),new kw(e)}rn.plugin=function(t,n){let r=!1;function i(...s){console&&console.warn&&!r&&(r=!0,console.warn(t+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),{}.LANG&&{}.LANG.startsWith("cn")&&console.warn(t+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let a=n(...s);return a.postcssPlugin=t,a.postcssVersion=new kw().version,a}let o;return Object.defineProperty(i,"postcss",{get(){return o||(o=i()),o}}),i.process=function(s,a,l){return rn([i(l)]).process(s,a)},i};rn.stringify=iq;rn.parse=cq;rn.fromJSON=oq;rn.list=uq;rn.comment=e=>new OO(e);rn.atRule=e=>new PO(e);rn.decl=e=>new LO(e);rn.rule=e=>new NO(e);rn.root=e=>new DO(e);rn.document=e=>new AO(e);rn.CssSyntaxError=tq;rn.Declaration=LO;rn.Container=rq;rn.Processor=kw;rn.Document=AO;rn.Comment=OO;rn.Warning=sq;rn.AtRule=PO;rn.Result=aq;rn.Input=lq;rn.Rule=NO;rn.Root=DO;rn.Node=dq;nq.registerPostcss(rn);var fq=rn;rn.default=rn;const Ln=rl(fq);Ln.stringify;Ln.fromJSON;Ln.plugin;Ln.parse;Ln.list;Ln.document;Ln.comment;Ln.atRule;Ln.rule;Ln.decl;Ln.root;Ln.CssSyntaxError;Ln.Declaration;Ln.Container;Ln.Processor;Ln.Document;Ln.Comment;Ln.Warning;Ln.AtRule;Ln.Result;Ln.Input;Ln.Rule;Ln.Root;Ln.Node;function Tk(e){const t=()=>({postcssPlugin:"rest",Once(n){n.walkDecls(r=>{if(r.prop==="background-image"){const i=r.value.match(/url\("?(.*)"?\)/);if(i&&i[1]){const o=i[1],s=e(o);r.value=`url('${s}')`}}})}});return n=>{try{return!n.match(/url\("?(.*)"?\)/)||n.length>1e4?n:Ln([t()]).process(n,{from:void 0}).css}catch{return n}}}const hq=`/**
 * Dark Reader v4.9.57
 * https://darkreader.org/
 */

(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['exports'], factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.DarkReader = {}));
})(this, (function (exports) { 'use strict';

    /******************************************************************************\r
    Copyright (c) Microsoft Corporation.\r
\r
    Permission to use, copy, modify, and/or distribute this software for any\r
    purpose with or without fee is hereby granted.\r
\r
    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r
    PERFORMANCE OF THIS SOFTWARE.\r
    ***************************************************************************** */\r
\r
    var __assign = function() {\r
        __assign = Object.assign || function __assign(t) {\r
            for (var s, i = 1, n = arguments.length; i < n; i++) {\r
                s = arguments[i];\r
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r
            }\r
            return t;\r
        };\r
        return __assign.apply(this, arguments);\r
    };\r
\r
    function __awaiter(thisArg, _arguments, P, generator) {\r
        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r
        return new (P || (P = Promise))(function (resolve, reject) {\r
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r
            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r
            step((generator = generator.apply(thisArg, _arguments || [])).next());\r
        });\r
    }\r
\r
    function __generator(thisArg, body) {\r
        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\r
        function verb(n) { return function (v) { return step([n, v]); }; }\r
        function step(op) {\r
            if (f) throw new TypeError("Generator is already executing.");\r
            while (_) try {\r
                if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r
                if (y = 0, t) op = [op[0] & 2, t.value];\r
                switch (op[0]) {\r
                    case 0: case 1: t = op; break;\r
                    case 4: _.label++; return { value: op[1], done: false };\r
                    case 5: _.label++; y = op[1]; op = [0]; continue;\r
                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r
                    default:\r
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r
                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r
                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r
                        if (t[2]) _.ops.pop();\r
                        _.trys.pop(); continue;\r
                }\r
                op = body.call(thisArg, _);\r
            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r
            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r
        }\r
    }\r
\r
    function __values(o) {\r
        var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;\r
        if (m) return m.call(o);\r
        if (o && typeof o.length === "number") return {\r
            next: function () {\r
                if (o && i >= o.length) o = void 0;\r
                return { value: o && o[i++], done: !o };\r
            }\r
        };\r
        throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");\r
    }\r
\r
    function __read(o, n) {\r
        var m = typeof Symbol === "function" && o[Symbol.iterator];\r
        if (!m) return o;\r
        var i = m.call(o), r, ar = [], e;\r
        try {\r
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r
        }\r
        catch (error) { e = { error: error }; }\r
        finally {\r
            try {\r
                if (r && !r.done && (m = i["return"])) m.call(i);\r
            }\r
            finally { if (e) throw e.error; }\r
        }\r
        return ar;\r
    }\r
\r
    function __spreadArray(to, from, pack) {\r
        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r
            if (ar || !(i in from)) {\r
                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r
                ar[i] = from[i];\r
            }\r
        }\r
        return to.concat(ar || Array.prototype.slice.call(from));\r
    }

    var MessageType;
    (function (MessageType) {
        MessageType["UI_GET_DATA"] = "ui-get-data";
        MessageType["UI_SUBSCRIBE_TO_CHANGES"] = "ui-subscribe-to-changes";
        MessageType["UI_UNSUBSCRIBE_FROM_CHANGES"] = "ui-unsubscribe-from-changes";
        MessageType["UI_CHANGE_SETTINGS"] = "ui-change-settings";
        MessageType["UI_SET_THEME"] = "ui-set-theme";
        MessageType["UI_SET_SHORTCUT"] = "ui-set-shortcut";
        MessageType["UI_TOGGLE_ACTIVE_TAB"] = "ui-toggle-active-tab";
        MessageType["UI_MARK_NEWS_AS_READ"] = "ui-mark-news-as-read";
        MessageType["UI_MARK_NEWS_AS_DISPLAYED"] = "ui-mark-news-as-displayed";
        MessageType["UI_LOAD_CONFIG"] = "ui-load-config";
        MessageType["UI_APPLY_DEV_DYNAMIC_THEME_FIXES"] = "ui-apply-dev-dynamic-theme-fixes";
        MessageType["UI_RESET_DEV_DYNAMIC_THEME_FIXES"] = "ui-reset-dev-dynamic-theme-fixes";
        MessageType["UI_APPLY_DEV_INVERSION_FIXES"] = "ui-apply-dev-inversion-fixes";
        MessageType["UI_RESET_DEV_INVERSION_FIXES"] = "ui-reset-dev-inversion-fixes";
        MessageType["UI_APPLY_DEV_STATIC_THEMES"] = "ui-apply-dev-static-themes";
        MessageType["UI_RESET_DEV_STATIC_THEMES"] = "ui-reset-dev-static-themes";
        MessageType["UI_SAVE_FILE"] = "ui-save-file";
        MessageType["UI_REQUEST_EXPORT_CSS"] = "ui-request-export-css";
        MessageType["UI_COLOR_SCHEME_CHANGE"] = "ui-color-scheme-change";
        MessageType["BG_CHANGES"] = "bg-changes";
        MessageType["BG_ADD_CSS_FILTER"] = "bg-add-css-filter";
        MessageType["BG_ADD_STATIC_THEME"] = "bg-add-static-theme";
        MessageType["BG_ADD_SVG_FILTER"] = "bg-add-svg-filter";
        MessageType["BG_ADD_DYNAMIC_THEME"] = "bg-add-dynamic-theme";
        MessageType["BG_EXPORT_CSS"] = "bg-export-css";
        MessageType["BG_UNSUPPORTED_SENDER"] = "bg-unsupported-sender";
        MessageType["BG_CLEAN_UP"] = "bg-clean-up";
        MessageType["BG_RELOAD"] = "bg-reload";
        MessageType["BG_FETCH_RESPONSE"] = "bg-fetch-response";
        MessageType["BG_UI_UPDATE"] = "bg-ui-update";
        MessageType["BG_CSS_UPDATE"] = "bg-css-update";
        MessageType["CS_COLOR_SCHEME_CHANGE"] = "cs-color-scheme-change";
        MessageType["CS_FRAME_CONNECT"] = "cs-frame-connect";
        MessageType["CS_FRAME_FORGET"] = "cs-frame-forget";
        MessageType["CS_FRAME_FREEZE"] = "cs-frame-freeze";
        MessageType["CS_FRAME_RESUME"] = "cs-frame-resume";
        MessageType["CS_EXPORT_CSS_RESPONSE"] = "cs-export-css-response";
        MessageType["CS_FETCH"] = "cs-fetch";
        MessageType["CS_DARK_THEME_DETECTED"] = "cs-dark-theme-detected";
        MessageType["CS_DARK_THEME_NOT_DETECTED"] = "cs-dark-theme-not-detected";
        MessageType["CS_LOG"] = "cs-log";
    })(MessageType || (MessageType = {}));

    var isNavigatorDefined = typeof navigator !== 'undefined';
    var userAgent = isNavigatorDefined ? (navigator.userAgentData && Array.isArray(navigator.userAgentData.brands)) ?
        navigator.userAgentData.brands.map(function (brand) { return "".concat(brand.brand.toLowerCase(), " ").concat(brand.version); }).join(' ') : navigator.userAgent.toLowerCase()
        : 'some useragent';
    var platform = isNavigatorDefined ? (navigator.userAgentData && typeof navigator.userAgentData.platform === 'string') ?
        navigator.userAgentData.platform.toLowerCase() : navigator.platform.toLowerCase()
        : 'some platform';
    var isChromium = userAgent.includes('chrome') || userAgent.includes('chromium');
    var isThunderbird = userAgent.includes('thunderbird');
    var isFirefox = userAgent.includes('firefox') || userAgent.includes('librewolf') || isThunderbird;
    userAgent.includes('vivaldi');
    userAgent.includes('yabrowser');
    userAgent.includes('opr') || userAgent.includes('opera');
    userAgent.includes('edg');
    var isSafari = userAgent.includes('safari') && !isChromium;
    var isWindows = platform.startsWith('win');
    var isMacOS = platform.startsWith('mac');
    (isNavigatorDefined && navigator.userAgentData) ? navigator.userAgentData.mobile : userAgent.includes('mobile');
    var isShadowDomSupported = typeof ShadowRoot === 'function';
    var isMatchMediaChangeEventListenerSupported = (typeof MediaQueryList === 'function' &&
        typeof MediaQueryList.prototype.addEventListener === 'function');
    ((function () {
        var m = userAgent.match(/chrom(?:e|ium)(?:\\/| )([^ ]+)/);
        if (m && m[1]) {
            return m[1];
        }
        return '';
    }))();
    ((function () {
        var m = userAgent.match(/(?:firefox|librewolf)(?:\\/| )([^ ]+)/);
        if (m && m[1]) {
            return m[1];
        }
        return '';
    }))();
    var isDefinedSelectorSupported = (function () {
        try {
            document.querySelector(':defined');
            return true;
        }
        catch (err) {
            return false;
        }
    })();
    var isCSSColorSchemePropSupported = (function () {
        if (typeof document === 'undefined') {
            return false;
        }
        var el = document.createElement('div');
        el.setAttribute('style', 'color-scheme: dark');
        return el.style && el.style.colorScheme === 'dark';
    })();

    function getOKResponse(url, mimeType, origin) {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4, fetch(url, {
                            cache: 'force-cache',
                            credentials: 'omit',
                            referrer: origin
                        })];
                    case 1:
                        response = _a.sent();
                        if (isFirefox && mimeType === 'text/css' && url.startsWith('moz-extension://') && url.endsWith('.css')) {
                            return [2, response];
                        }
                        if (mimeType && !response.headers.get('Content-Type').startsWith(mimeType)) {
                            throw new Error("Mime type mismatch when loading ".concat(url));
                        }
                        if (!response.ok) {
                            throw new Error("Unable to load ".concat(url, " ").concat(response.status, " ").concat(response.statusText));
                        }
                        return [2, response];
                }
            });
        });
    }
    function loadAsDataURL(url, mimeType) {
        return __awaiter(this, void 0, void 0, function () {
            var response;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4, getOKResponse(url, mimeType)];
                    case 1:
                        response = _a.sent();
                        return [4, readResponseAsDataURL(response)];
                    case 2: return [2, _a.sent()];
                }
            });
        });
    }
    function readResponseAsDataURL(response) {
        return __awaiter(this, void 0, void 0, function () {
            var blob, dataURL;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4, response.blob()];
                    case 1:
                        blob = _a.sent();
                        return [4, (new Promise(function (resolve) {
                                var reader = new FileReader();
                                reader.onloadend = function () { return resolve(reader.result); };
                                reader.readAsDataURL(blob);
                            }))];
                    case 2:
                        dataURL = _a.sent();
                        return [2, dataURL];
                }
            });
        });
    }

    var throwCORSError = function (url) { return __awaiter(void 0, void 0, void 0, function () {
        return __generator(this, function (_a) {
            return [2, Promise.reject(new Error([
                    'Embedded Dark Reader cannot access a cross-origin resource',
                    url,
                    'Overview your URLs and CORS policies or use',
                    '\`DarkReader.setFetchMethod(fetch: (url) => Promise<Response>))\`.',
                    'See if using \`DarkReader.setFetchMethod(window.fetch)\`',
                    'before \`DarkReader.enable()\` works.'
                ].join(' ')))];
        });
    }); };
    var fetcher = throwCORSError;
    function setFetchMethod$1(fetch) {
        if (fetch) {
            fetcher = fetch;
        }
        else {
            fetcher = throwCORSError;
        }
    }
    function callFetchMethod(url) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4, fetcher(url)];
                    case 1: return [2, _a.sent()];
                }
            });
        });
    }

    if (!window.chrome) {
        window.chrome = {};
    }
    if (!chrome.runtime) {
        chrome.runtime = {};
    }
    var messageListeners = new Set();
    function sendMessage() {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return __awaiter(this, void 0, void 0, function () {
            var id_1, _a, url, responseType, response, text_1, error_1;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!(args[0] && args[0].type === MessageType.CS_FETCH)) return [3, 8];
                        id_1 = args[0].id;
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 7, , 8]);
                        _a = args[0].data, url = _a.url, responseType = _a.responseType;
                        return [4, callFetchMethod(url)];
                    case 2:
                        response = _b.sent();
                        if (!(responseType === 'data-url')) return [3, 4];
                        return [4, readResponseAsDataURL(response)];
                    case 3:
                        text_1 = _b.sent();
                        return [3, 6];
                    case 4: return [4, response.text()];
                    case 5:
                        text_1 = _b.sent();
                        _b.label = 6;
                    case 6:
                        messageListeners.forEach(function (cb) { return cb({ type: MessageType.BG_FETCH_RESPONSE, data: text_1, error: null, id: id_1 }); });
                        return [3, 8];
                    case 7:
                        error_1 = _b.sent();
                        console.error(error_1);
                        messageListeners.forEach(function (cb) { return cb({ type: MessageType.BG_FETCH_RESPONSE, data: null, error: error_1, id: id_1 }); });
                        return [3, 8];
                    case 8: return [2];
                }
            });
        });
    }
    function addMessageListener(callback) {
        messageListeners.add(callback);
    }
    if (typeof chrome.runtime.sendMessage === 'function') {
        var nativeSendMessage_1 = chrome.runtime.sendMessage;
        chrome.runtime.sendMessage = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            sendMessage.apply(void 0, __spreadArray([], __read(args), false));
            nativeSendMessage_1.apply(chrome.runtime, args);
        };
    }
    else {
        chrome.runtime.sendMessage = sendMessage;
    }
    if (!chrome.runtime.onMessage) {
        chrome.runtime.onMessage = {};
    }
    if (typeof chrome.runtime.onMessage.addListener === 'function') {
        var nativeAddListener_1 = chrome.runtime.onMessage.addListener;
        chrome.runtime.onMessage.addListener = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            addMessageListener(args[0]);
            nativeAddListener_1.apply(chrome.runtime.onMessage, args);
        };
    }
    else {
        chrome.runtime.onMessage.addListener = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return addMessageListener(args[0]);
        };
    }

    var ThemeEngines = {
        cssFilter: 'cssFilter',
        svgFilter: 'svgFilter',
        staticTheme: 'staticTheme',
        dynamicTheme: 'dynamicTheme',
    };

    var DEFAULT_COLORS = {
        darkScheme: {
            background: '#181a1b',
            text: '#e8e6e3',
        },
        lightScheme: {
            background: '#dcdad7',
            text: '#181a1b',
        },
    };
    var DEFAULT_THEME = {
        mode: 1,
        brightness: 100,
        contrast: 100,
        grayscale: 0,
        sepia: 0,
        useFont: false,
        fontFamily: isMacOS ? 'Helvetica Neue' : isWindows ? 'Segoe UI' : 'Open Sans',
        textStroke: 0,
        engine: ThemeEngines.dynamicTheme,
        stylesheet: '',
        darkSchemeBackgroundColor: DEFAULT_COLORS.darkScheme.background,
        darkSchemeTextColor: DEFAULT_COLORS.darkScheme.text,
        lightSchemeBackgroundColor: DEFAULT_COLORS.lightScheme.background,
        lightSchemeTextColor: DEFAULT_COLORS.lightScheme.text,
        scrollbarColor: isMacOS ? '' : 'auto',
        selectionColor: 'auto',
        styleSystemControls: !isCSSColorSchemePropSupported,
        lightColorScheme: 'Default',
        darkColorScheme: 'Default',
        immediateModify: false,
    };

    function isArrayLike(items) {
        return items.length != null;
    }
    function forEach(items, iterator) {
        var e_1, _a;
        if (isArrayLike(items)) {
            for (var i = 0, len = items.length; i < len; i++) {
                iterator(items[i]);
            }
        }
        else {
            try {
                for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {
                    var item = items_1_1.value;
                    iterator(item);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
        }
    }
    function push(array, addition) {
        forEach(addition, function (a) { return array.push(a); });
    }
    function toArray(items) {
        var results = [];
        for (var i = 0, len = items.length; i < len; i++) {
            results.push(items[i]);
        }
        return results;
    }

    function logInfo() {
    }
    function logWarn() {
    }

    function throttle(callback) {
        var pending = false;
        var frameId = null;
        var lastArgs;
        var throttled = (function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            lastArgs = args;
            if (frameId) {
                pending = true;
            }
            else {
                callback.apply(void 0, __spreadArray([], __read(lastArgs), false));
                frameId = requestAnimationFrame(function () {
                    frameId = null;
                    if (pending) {
                        callback.apply(void 0, __spreadArray([], __read(lastArgs), false));
                        pending = false;
                    }
                });
            }
        });
        var cancel = function () {
            cancelAnimationFrame(frameId);
            pending = false;
            frameId = null;
        };
        return Object.assign(throttled, { cancel: cancel });
    }
    function createAsyncTasksQueue() {
        var tasks = [];
        var frameId = null;
        function runTasks() {
            var task;
            while ((task = tasks.shift())) {
                task();
            }
            frameId = null;
        }
        function add(task) {
            tasks.push(task);
            if (!frameId) {
                frameId = requestAnimationFrame(runTasks);
            }
        }
        function cancel() {
            tasks.splice(0);
            cancelAnimationFrame(frameId);
            frameId = null;
        }
        return { add: add, cancel: cancel };
    }

    function getDuration(time) {
        var duration = 0;
        if (time.seconds) {
            duration += time.seconds * 1000;
        }
        if (time.minutes) {
            duration += time.minutes * 60 * 1000;
        }
        if (time.hours) {
            duration += time.hours * 60 * 60 * 1000;
        }
        if (time.days) {
            duration += time.days * 24 * 60 * 60 * 1000;
        }
        return duration;
    }

    function removeNode(node) {
        node && node.parentNode && node.parentNode.removeChild(node);
    }
    function watchForNodePosition(node, mode, onRestore) {
        if (onRestore === void 0) { onRestore = Function.prototype; }
        var MAX_ATTEMPTS_COUNT = 10;
        var RETRY_TIMEOUT = getDuration({ seconds: 2 });
        var ATTEMPTS_INTERVAL = getDuration({ seconds: 10 });
        var prevSibling = node.previousSibling;
        var parent = node.parentNode;
        if (!parent) {
            throw new Error('Unable to watch for node position: parent element not found');
        }
        if (mode === 'prev-sibling' && !prevSibling) {
            throw new Error('Unable to watch for node position: there is no previous sibling');
        }
        var attempts = 0;
        var start = null;
        var timeoutId = null;
        var restore = throttle(function () {
            if (timeoutId) {
                return;
            }
            attempts++;
            var now = Date.now();
            if (start == null) {
                start = now;
            }
            else if (attempts >= MAX_ATTEMPTS_COUNT) {
                if (now - start < ATTEMPTS_INTERVAL) {
                    timeoutId = setTimeout(function () {
                        start = null;
                        attempts = 0;
                        timeoutId = null;
                        restore();
                    }, RETRY_TIMEOUT);
                    return;
                }
                start = now;
                attempts = 1;
            }
            if (mode === 'parent') {
                if (prevSibling && prevSibling.parentNode !== parent) {
                    stop();
                    return;
                }
            }
            if (mode === 'prev-sibling') {
                if (prevSibling.parentNode == null) {
                    stop();
                    return;
                }
                if (prevSibling.parentNode !== parent) {
                    updateParent(prevSibling.parentNode);
                }
            }
            parent.insertBefore(node, prevSibling ? prevSibling.nextSibling : parent.firstChild);
            observer.takeRecords();
            onRestore && onRestore();
        });
        var observer = new MutationObserver(function () {
            if ((mode === 'parent' && node.parentNode !== parent) ||
                (mode === 'prev-sibling' && node.previousSibling !== prevSibling)) {
                restore();
            }
        });
        var run = function () {
            observer.observe(parent, { childList: true });
        };
        var stop = function () {
            clearTimeout(timeoutId);
            observer.disconnect();
            restore.cancel();
        };
        var skip = function () {
            observer.takeRecords();
        };
        var updateParent = function (parentNode) {
            parent = parentNode;
            stop();
            run();
        };
        run();
        return { run: run, stop: stop, skip: skip };
    }
    function iterateShadowHosts(root, iterator) {
        if (root == null) {
            return;
        }
        var walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, {
            acceptNode: function (node) {
                return node.shadowRoot == null ? NodeFilter.FILTER_SKIP : NodeFilter.FILTER_ACCEPT;
            }
        });
        for (var node = (root.shadowRoot ? walker.currentNode : walker.nextNode()); node != null; node = walker.nextNode()) {
            if (node.classList.contains('surfingkeys_hints_host')) {
                continue;
            }
            iterator(node);
            iterateShadowHosts(node.shadowRoot, iterator);
        }
    }
    var isDOMReady = function () {
        return document.readyState === 'complete' || document.readyState === 'interactive';
    };
    function setIsDOMReady(newFunc) {
        isDOMReady = newFunc;
    }
    var readyStateListeners = new Set();
    function addDOMReadyListener(listener) {
        isDOMReady() ? listener() : readyStateListeners.add(listener);
    }
    function removeDOMReadyListener(listener) {
        readyStateListeners.delete(listener);
    }
    function isReadyStateComplete() {
        return document.readyState === 'complete';
    }
    var readyStateCompleteListeners = new Set();
    function addReadyStateCompleteListener(listener) {
        isReadyStateComplete() ? listener() : readyStateCompleteListeners.add(listener);
    }
    function cleanReadyStateCompleteListeners() {
        readyStateCompleteListeners.clear();
    }
    if (!isDOMReady()) {
        var onReadyStateChange_1 = function () {
            if (isDOMReady()) {
                readyStateListeners.forEach(function (listener) { return listener(); });
                readyStateListeners.clear();
                if (isReadyStateComplete()) {
                    document.removeEventListener('readystatechange', onReadyStateChange_1);
                    readyStateCompleteListeners.forEach(function (listener) { return listener(); });
                    readyStateCompleteListeners.clear();
                }
            }
        };
        document.addEventListener('readystatechange', onReadyStateChange_1);
    }
    var HUGE_MUTATIONS_COUNT = 1000;
    function isHugeMutation(mutations) {
        if (mutations.length > HUGE_MUTATIONS_COUNT) {
            return true;
        }
        var addedNodesCount = 0;
        for (var i = 0; i < mutations.length; i++) {
            addedNodesCount += mutations[i].addedNodes.length;
            if (addedNodesCount > HUGE_MUTATIONS_COUNT) {
                return true;
            }
        }
        return false;
    }
    function getElementsTreeOperations(mutations) {
        var additions = new Set();
        var deletions = new Set();
        var moves = new Set();
        mutations.forEach(function (m) {
            forEach(m.addedNodes, function (n) {
                if (n instanceof Element && n.isConnected) {
                    additions.add(n);
                }
            });
            forEach(m.removedNodes, function (n) {
                if (n instanceof Element) {
                    if (n.isConnected) {
                        moves.add(n);
                        additions.delete(n);
                    }
                    else {
                        deletions.add(n);
                    }
                }
            });
        });
        var duplicateAdditions = [];
        var duplicateDeletions = [];
        additions.forEach(function (node) {
            if (additions.has(node.parentElement)) {
                duplicateAdditions.push(node);
            }
        });
        deletions.forEach(function (node) {
            if (deletions.has(node.parentElement)) {
                duplicateDeletions.push(node);
            }
        });
        duplicateAdditions.forEach(function (node) { return additions.delete(node); });
        duplicateDeletions.forEach(function (node) { return deletions.delete(node); });
        return { additions: additions, moves: moves, deletions: deletions };
    }
    var optimizedTreeObservers = new Map();
    var optimizedTreeCallbacks = new WeakMap();
    function createOptimizedTreeObserver(root, callbacks) {
        var observer;
        var observerCallbacks;
        var domReadyListener;
        if (optimizedTreeObservers.has(root)) {
            observer = optimizedTreeObservers.get(root);
            observerCallbacks = optimizedTreeCallbacks.get(observer);
        }
        else {
            var hadHugeMutationsBefore_1 = false;
            var subscribedForReadyState_1 = false;
            observer = new MutationObserver(function (mutations) {
                if (isHugeMutation(mutations)) {
                    if (!hadHugeMutationsBefore_1 || isDOMReady()) {
                        observerCallbacks.forEach(function (_a) {
                            var onHugeMutations = _a.onHugeMutations;
                            return onHugeMutations(root);
                        });
                    }
                    else if (!subscribedForReadyState_1) {
                        domReadyListener = function () { return observerCallbacks.forEach(function (_a) {
                            var onHugeMutations = _a.onHugeMutations;
                            return onHugeMutations(root);
                        }); };
                        addDOMReadyListener(domReadyListener);
                        subscribedForReadyState_1 = true;
                    }
                    hadHugeMutationsBefore_1 = true;
                }
                else {
                    var elementsOperations_1 = getElementsTreeOperations(mutations);
                    observerCallbacks.forEach(function (_a) {
                        var onMinorMutations = _a.onMinorMutations;
                        return onMinorMutations(elementsOperations_1);
                    });
                }
            });
            observer.observe(root, { childList: true, subtree: true });
            optimizedTreeObservers.set(root, observer);
            observerCallbacks = new Set();
            optimizedTreeCallbacks.set(observer, observerCallbacks);
        }
        observerCallbacks.add(callbacks);
        return {
            disconnect: function () {
                observerCallbacks.delete(callbacks);
                if (domReadyListener) {
                    removeDOMReadyListener(domReadyListener);
                }
                if (observerCallbacks.size === 0) {
                    observer.disconnect();
                    optimizedTreeCallbacks.delete(observer);
                    optimizedTreeObservers.delete(root);
                }
            },
        };
    }

    var anchor;
    var parsedURLCache = new Map();
    function fixBaseURL($url) {
        if (!anchor) {
            anchor = document.createElement('a');
        }
        anchor.href = $url;
        return anchor.href;
    }
    function parseURL($url, $base) {
        if ($base === void 0) { $base = null; }
        var key = "".concat($url).concat($base ? ";".concat($base) : '');
        if (parsedURLCache.has(key)) {
            return parsedURLCache.get(key);
        }
        if ($base) {
            var parsedURL_1 = new URL($url, fixBaseURL($base));
            parsedURLCache.set(key, parsedURL_1);
            return parsedURL_1;
        }
        var parsedURL = new URL(fixBaseURL($url));
        parsedURLCache.set($url, parsedURL);
        return parsedURL;
    }
    function getAbsoluteURL($base, $relative) {
        if ($relative.match(/^data\\\\?\\:/)) {
            return $relative;
        }
        if (/^\\/\\//.test($relative)) {
            return "".concat(location.protocol).concat($relative);
        }
        var b = parseURL($base);
        var a = parseURL($relative, b.href);
        return a.href;
    }
    function isRelativeHrefOnAbsolutePath(href) {
        if (href.startsWith('data:')) {
            return true;
        }
        var url = parseURL(href);
        if (url.protocol !== location.protocol) {
            return false;
        }
        if (url.hostname !== location.hostname) {
            return false;
        }
        if (url.port !== location.port) {
            return false;
        }
        return url.pathname === location.pathname;
    }

    function iterateCSSRules(rules, iterate, onMediaRuleError) {
        forEach(rules, function (rule) {
            if (rule.selectorText) {
                iterate(rule);
            }
            else if (rule.href) {
                try {
                    iterateCSSRules(rule.styleSheet.cssRules, iterate, onMediaRuleError);
                }
                catch (err) {
                    logInfo("Found a non-loaded link.");
                    onMediaRuleError && onMediaRuleError();
                }
            }
            else if (rule.media) {
                var media = Array.from(rule.media);
                var isScreenOrAllOrQuery = media.some(function (m) { return m.startsWith('screen') || m.startsWith('all') || m.startsWith('('); });
                var isPrintOrSpeech = media.some(function (m) { return m.startsWith('print') || m.startsWith('speech'); });
                if (isScreenOrAllOrQuery || !isPrintOrSpeech) {
                    iterateCSSRules(rule.cssRules, iterate, onMediaRuleError);
                }
            }
            else if (rule.conditionText) {
                if (CSS.supports(rule.conditionText)) {
                    iterateCSSRules(rule.cssRules, iterate, onMediaRuleError);
                }
            }
            else {
                logWarn("CSSRule type not supported", rule);
            }
        });
    }
    var shorthandVarDependantProperties = [
        'background',
        'border',
        'border-color',
        'border-bottom',
        'border-left',
        'border-right',
        'border-top',
        'outline',
        'outline-color',
    ];
    var shorthandVarDepPropRegexps = isSafari ? shorthandVarDependantProperties.map(function (prop) {
        var regexp = new RegExp("".concat(prop, ":\\\\s*(.*?)\\\\s*;"));
        return [prop, regexp];
    }) : null;
    function iterateCSSDeclarations(style, iterate) {
        forEach(style, function (property) {
            var value = style.getPropertyValue(property).trim();
            if (!value) {
                return;
            }
            iterate(property, value);
        });
        var cssText = style.cssText;
        if (cssText.includes('var(')) {
            if (isSafari) {
                shorthandVarDepPropRegexps.forEach(function (_a) {
                    var _b = __read(_a, 2), prop = _b[0], regexp = _b[1];
                    var match = cssText.match(regexp);
                    if (match && match[1]) {
                        var val = match[1].trim();
                        iterate(prop, val);
                    }
                });
            }
            else {
                shorthandVarDependantProperties.forEach(function (prop) {
                    var val = style.getPropertyValue(prop);
                    if (val && val.includes('var(')) {
                        iterate(prop, val);
                    }
                });
            }
        }
    }
    var cssURLRegex = /url\\((('.*?')|(".*?")|([^\\)]*?))\\)/g;
    var cssImportRegex = /@import\\s*(url\\()?(('.+?')|(".+?")|([^\\)]*?))\\)? ?(screen)?;?/gi;
    function getCSSURLValue(cssURL) {
        return cssURL.trim().replace(/^url\\((.*)\\)$/, '$1').trim().replace(/^"(.*)"$/, '$1').replace(/^'(.*)'$/, '$1').replace(/(?:\\\\(.))/g, '$1');
    }
    function getCSSBaseBath(url) {
        var cssURL = parseURL(url);
        return "".concat(cssURL.origin).concat(cssURL.pathname.replace(/\\?.*$/, '').replace(/(\\/)([^\\/]+)$/i, '$1'));
    }
    function replaceCSSRelativeURLsWithAbsolute($css, cssBasePath) {
        return $css.replace(cssURLRegex, function (match) {
            var pathValue = getCSSURLValue(match);
            try {
                return "url(\\"".concat(getAbsoluteURL(cssBasePath, pathValue), "\\")");
            }
            catch (err) {
                return match;
            }
        });
    }
    var cssCommentsRegex = /\\/\\*[\\s\\S]*?\\*\\//g;
    function removeCSSComments($css) {
        return $css.replace(cssCommentsRegex, '');
    }
    var fontFaceRegex = /@font-face\\s*{[^}]*}/g;
    function replaceCSSFontFace($css) {
        return $css.replace(fontFaceRegex, '');
    }

    function evalMath(expression) {
        var rpnStack = [];
        var workingStack = [];
        var lastToken;
        for (var i = 0, len = expression.length; i < len; i++) {
            var token = expression[i];
            if (!token || token === ' ') {
                continue;
            }
            if (operators.has(token)) {
                var op = operators.get(token);
                while (workingStack.length) {
                    var currentOp = operators.get(workingStack[0]);
                    if (!currentOp) {
                        break;
                    }
                    if (op.lessOrEqualThan(currentOp)) {
                        rpnStack.push(workingStack.shift());
                    }
                    else {
                        break;
                    }
                }
                workingStack.unshift(token);
            }
            else if (!lastToken || operators.has(lastToken)) {
                rpnStack.push(token);
            }
            else {
                rpnStack[rpnStack.length - 1] += token;
            }
            lastToken = token;
        }
        rpnStack.push.apply(rpnStack, __spreadArray([], __read(workingStack), false));
        var stack = [];
        for (var i = 0, len = rpnStack.length; i < len; i++) {
            var op = operators.get(rpnStack[i]);
            if (op) {
                var args = stack.splice(0, 2);
                stack.push(op.exec(args[1], args[0]));
            }
            else {
                stack.unshift(parseFloat(rpnStack[i]));
            }
        }
        return stack[0];
    }
    var Operator = (function () {
        function Operator(precedence, method) {
            this.precendce = precedence;
            this.execMethod = method;
        }
        Operator.prototype.exec = function (left, right) {
            return this.execMethod(left, right);
        };
        Operator.prototype.lessOrEqualThan = function (op) {
            return this.precendce <= op.precendce;
        };
        return Operator;
    }());
    var operators = new Map([
        ['+', new Operator(1, function (left, right) { return left + right; })],
        ['-', new Operator(1, function (left, right) { return left - right; })],
        ['*', new Operator(2, function (left, right) { return left * right; })],
        ['/', new Operator(2, function (left, right) { return left / right; })],
    ]);

    function getMatches(regex, input, group) {
        if (group === void 0) { group = 0; }
        var matches = [];
        var m;
        while ((m = regex.exec(input))) {
            matches.push(m[group]);
        }
        return matches;
    }
    function formatCSS(text) {
        function trimLeft(text) {
            return text.replace(/^\\s+/, '');
        }
        function getIndent(depth) {
            if (depth === 0) {
                return '';
            }
            return ' '.repeat(4 * depth);
        }
        if (text.length < 50000) {
            var emptyRuleRegexp = /[^{}]+{\\s*}/;
            while (emptyRuleRegexp.test(text)) {
                text = text.replace(emptyRuleRegexp, '');
            }
        }
        var css = (text
            .replace(/\\s{2,}/g, ' ')
            .replace(/\\{/g, '{\\n')
            .replace(/\\}/g, '\\n}\\n')
            .replace(/\\;(?![^\\(|\\"]*(\\)|\\"))/g, ';\\n')
            .replace(/\\,(?![^\\(|\\"]*(\\)|\\"))/g, ',\\n')
            .replace(/\\n\\s*\\n/g, '\\n')
            .split('\\n'));
        var depth = 0;
        var formatted = [];
        for (var x = 0, len = css.length; x < len; x++) {
            var line = "".concat(css[x], "\\n");
            if (line.includes('{')) {
                formatted.push(getIndent(depth++) + trimLeft(line));
            }
            else if (line.includes('\\}')) {
                formatted.push(getIndent(--depth) + trimLeft(line));
            }
            else {
                formatted.push(getIndent(depth) + trimLeft(line));
            }
        }
        return formatted.join('').trim();
    }
    function getParenthesesRange(input, searchStartIndex) {
        if (searchStartIndex === void 0) { searchStartIndex = 0; }
        var length = input.length;
        var depth = 0;
        var firstOpenIndex = -1;
        for (var i = searchStartIndex; i < length; i++) {
            if (depth === 0) {
                var openIndex = input.indexOf('(', i);
                if (openIndex < 0) {
                    break;
                }
                firstOpenIndex = openIndex;
                depth++;
                i = openIndex;
            }
            else {
                var closingIndex = input.indexOf(')', i);
                if (closingIndex < 0) {
                    break;
                }
                var openIndex = input.indexOf('(', i);
                if (openIndex < 0 || closingIndex < openIndex) {
                    depth--;
                    if (depth === 0) {
                        return { start: firstOpenIndex, end: closingIndex + 1 };
                    }
                    i = closingIndex;
                }
                else {
                    depth++;
                    i = openIndex;
                }
            }
        }
        return null;
    }

    var hslaParseCache = new Map();
    var rgbaParseCache = new Map();
    function parseColorWithCache($color) {
        $color = $color.trim();
        if (rgbaParseCache.has($color)) {
            return rgbaParseCache.get($color);
        }
        if ($color.includes('calc(')) {
            $color = lowerCalcExpression($color);
        }
        var color = parse($color);
        color && rgbaParseCache.set($color, color);
        return color;
    }
    function parseToHSLWithCache(color) {
        if (hslaParseCache.has(color)) {
            return hslaParseCache.get(color);
        }
        var rgb = parseColorWithCache(color);
        if (!rgb) {
            return null;
        }
        var hsl = rgbToHSL(rgb);
        hslaParseCache.set(color, hsl);
        return hsl;
    }
    function clearColorCache() {
        hslaParseCache.clear();
        rgbaParseCache.clear();
    }
    function hslToRGB(_a) {
        var h = _a.h, s = _a.s, l = _a.l, _b = _a.a, a = _b === void 0 ? 1 : _b;
        if (s === 0) {
            var _c = __read([l, l, l].map(function (x) { return Math.round(x * 255); }), 3), r_1 = _c[0], b_1 = _c[1], g_1 = _c[2];
            return { r: r_1, g: g_1, b: b_1, a: a };
        }
        var c = (1 - Math.abs(2 * l - 1)) * s;
        var x = c * (1 - Math.abs((h / 60) % 2 - 1));
        var m = l - c / 2;
        var _d = __read((h < 60 ? [c, x, 0] :
            h < 120 ? [x, c, 0] :
                h < 180 ? [0, c, x] :
                    h < 240 ? [0, x, c] :
                        h < 300 ? [x, 0, c] :
                            [c, 0, x]).map(function (n) { return Math.round((n + m) * 255); }), 3), r = _d[0], g = _d[1], b = _d[2];
        return { r: r, g: g, b: b, a: a };
    }
    function rgbToHSL(_a) {
        var r255 = _a.r, g255 = _a.g, b255 = _a.b, _b = _a.a, a = _b === void 0 ? 1 : _b;
        var r = r255 / 255;
        var g = g255 / 255;
        var b = b255 / 255;
        var max = Math.max(r, g, b);
        var min = Math.min(r, g, b);
        var c = max - min;
        var l = (max + min) / 2;
        if (c === 0) {
            return { h: 0, s: 0, l: l, a: a };
        }
        var h = (max === r ? (((g - b) / c) % 6) :
            max === g ? ((b - r) / c + 2) :
                ((r - g) / c + 4)) * 60;
        if (h < 0) {
            h += 360;
        }
        var s = c / (1 - Math.abs(2 * l - 1));
        return { h: h, s: s, l: l, a: a };
    }
    function toFixed(n, digits) {
        if (digits === void 0) { digits = 0; }
        var fixed = n.toFixed(digits);
        if (digits === 0) {
            return fixed;
        }
        var dot = fixed.indexOf('.');
        if (dot >= 0) {
            var zerosMatch = fixed.match(/0+$/);
            if (zerosMatch) {
                if (zerosMatch.index === dot + 1) {
                    return fixed.substring(0, dot);
                }
                return fixed.substring(0, zerosMatch.index);
            }
        }
        return fixed;
    }
    function rgbToString(rgb) {
        var r = rgb.r, g = rgb.g, b = rgb.b, a = rgb.a;
        if (a != null && a < 1) {
            return "rgba(".concat(toFixed(r), ", ").concat(toFixed(g), ", ").concat(toFixed(b), ", ").concat(toFixed(a, 2), ")");
        }
        return "rgb(".concat(toFixed(r), ", ").concat(toFixed(g), ", ").concat(toFixed(b), ")");
    }
    function rgbToHexString(_a) {
        var r = _a.r, g = _a.g, b = _a.b, a = _a.a;
        return "#".concat((a != null && a < 1 ? [r, g, b, Math.round(a * 255)] : [r, g, b]).map(function (x) {
            return "".concat(x < 16 ? '0' : '').concat(x.toString(16));
        }).join(''));
    }
    function hslToString(hsl) {
        var h = hsl.h, s = hsl.s, l = hsl.l, a = hsl.a;
        if (a != null && a < 1) {
            return "hsla(".concat(toFixed(h), ", ").concat(toFixed(s * 100), "%, ").concat(toFixed(l * 100), "%, ").concat(toFixed(a, 2), ")");
        }
        return "hsl(".concat(toFixed(h), ", ").concat(toFixed(s * 100), "%, ").concat(toFixed(l * 100), "%)");
    }
    var rgbMatch = /^rgba?\\([^\\(\\)]+\\)$/;
    var hslMatch = /^hsla?\\([^\\(\\)]+\\)$/;
    var hexMatch = /^#[0-9a-f]+$/i;
    function parse($color) {
        var c = $color.trim().toLowerCase();
        if (c.match(rgbMatch)) {
            return parseRGB(c);
        }
        if (c.match(hslMatch)) {
            return parseHSL(c);
        }
        if (c.match(hexMatch)) {
            return parseHex(c);
        }
        if (knownColors.has(c)) {
            return getColorByName(c);
        }
        if (systemColors.has(c)) {
            return getSystemColor(c);
        }
        if ($color === 'transparent') {
            return { r: 0, g: 0, b: 0, a: 0 };
        }
        return null;
    }
    function getNumbers($color) {
        var numbers = [];
        var prevPos = 0;
        var isMining = false;
        var startIndex = $color.indexOf('(');
        $color = $color.substring(startIndex + 1, $color.length - 1);
        for (var i = 0; i < $color.length; i++) {
            var c = $color[i];
            if (c >= '0' && c <= '9' || c === '.' || c === '+' || c === '-') {
                isMining = true;
            }
            else if (isMining && (c === ' ' || c === ',')) {
                numbers.push($color.substring(prevPos, i));
                isMining = false;
                prevPos = i + 1;
            }
            else if (!isMining) {
                prevPos = i + 1;
            }
        }
        if (isMining) {
            numbers.push($color.substring(prevPos, $color.length));
        }
        return numbers;
    }
    function getNumbersFromString(str, range, units) {
        var raw = getNumbers(str);
        var unitsList = Object.entries(units);
        var numbers = raw.map(function (r) { return r.trim(); }).map(function (r, i) {
            var n;
            var unit = unitsList.find(function (_a) {
                var _b = __read(_a, 1), u = _b[0];
                return r.endsWith(u);
            });
            if (unit) {
                n = parseFloat(r.substring(0, r.length - unit[0].length)) / unit[1] * range[i];
            }
            else {
                n = parseFloat(r);
            }
            if (range[i] > 1) {
                return Math.round(n);
            }
            return n;
        });
        return numbers;
    }
    var rgbRange = [255, 255, 255, 1];
    var rgbUnits = { '%': 100 };
    function parseRGB($rgb) {
        var _a = __read(getNumbersFromString($rgb, rgbRange, rgbUnits), 4), r = _a[0], g = _a[1], b = _a[2], _b = _a[3], a = _b === void 0 ? 1 : _b;
        return { r: r, g: g, b: b, a: a };
    }
    var hslRange = [360, 1, 1, 1];
    var hslUnits = { '%': 100, 'deg': 360, 'rad': 2 * Math.PI, 'turn': 1 };
    function parseHSL($hsl) {
        var _a = __read(getNumbersFromString($hsl, hslRange, hslUnits), 4), h = _a[0], s = _a[1], l = _a[2], _b = _a[3], a = _b === void 0 ? 1 : _b;
        return hslToRGB({ h: h, s: s, l: l, a: a });
    }
    function parseHex($hex) {
        var h = $hex.substring(1);
        switch (h.length) {
            case 3:
            case 4: {
                var _a = __read([0, 1, 2].map(function (i) { return parseInt("".concat(h[i]).concat(h[i]), 16); }), 3), r = _a[0], g = _a[1], b = _a[2];
                var a = h.length === 3 ? 1 : (parseInt("".concat(h[3]).concat(h[3]), 16) / 255);
                return { r: r, g: g, b: b, a: a };
            }
            case 6:
            case 8: {
                var _b = __read([0, 2, 4].map(function (i) { return parseInt(h.substring(i, i + 2), 16); }), 3), r = _b[0], g = _b[1], b = _b[2];
                var a = h.length === 6 ? 1 : (parseInt(h.substring(6, 8), 16) / 255);
                return { r: r, g: g, b: b, a: a };
            }
        }
        return null;
    }
    function getColorByName($color) {
        var n = knownColors.get($color);
        return {
            r: (n >> 16) & 255,
            g: (n >> 8) & 255,
            b: (n >> 0) & 255,
            a: 1
        };
    }
    function getSystemColor($color) {
        var n = systemColors.get($color);
        return {
            r: (n >> 16) & 255,
            g: (n >> 8) & 255,
            b: (n >> 0) & 255,
            a: 1
        };
    }
    function lowerCalcExpression(color) {
        var searchIndex = 0;
        var replaceBetweenIndices = function (start, end, replacement) {
            color = color.substring(0, start) + replacement + color.substring(end);
        };
        while ((searchIndex = color.indexOf('calc(')) !== -1) {
            var range = getParenthesesRange(color, searchIndex);
            if (!range) {
                break;
            }
            var slice = color.slice(range.start + 1, range.end - 1);
            var includesPercentage = slice.includes('%');
            slice = slice.split('%').join('');
            var output = Math.round(evalMath(slice));
            replaceBetweenIndices(range.start - 4, range.end, output + (includesPercentage ? '%' : ''));
        }
        return color;
    }
    var knownColors = new Map(Object.entries({
        aliceblue: 0xf0f8ff,
        antiquewhite: 0xfaebd7,
        aqua: 0x00ffff,
        aquamarine: 0x7fffd4,
        azure: 0xf0ffff,
        beige: 0xf5f5dc,
        bisque: 0xffe4c4,
        black: 0x000000,
        blanchedalmond: 0xffebcd,
        blue: 0x0000ff,
        blueviolet: 0x8a2be2,
        brown: 0xa52a2a,
        burlywood: 0xdeb887,
        cadetblue: 0x5f9ea0,
        chartreuse: 0x7fff00,
        chocolate: 0xd2691e,
        coral: 0xff7f50,
        cornflowerblue: 0x6495ed,
        cornsilk: 0xfff8dc,
        crimson: 0xdc143c,
        cyan: 0x00ffff,
        darkblue: 0x00008b,
        darkcyan: 0x008b8b,
        darkgoldenrod: 0xb8860b,
        darkgray: 0xa9a9a9,
        darkgrey: 0xa9a9a9,
        darkgreen: 0x006400,
        darkkhaki: 0xbdb76b,
        darkmagenta: 0x8b008b,
        darkolivegreen: 0x556b2f,
        darkorange: 0xff8c00,
        darkorchid: 0x9932cc,
        darkred: 0x8b0000,
        darksalmon: 0xe9967a,
        darkseagreen: 0x8fbc8f,
        darkslateblue: 0x483d8b,
        darkslategray: 0x2f4f4f,
        darkslategrey: 0x2f4f4f,
        darkturquoise: 0x00ced1,
        darkviolet: 0x9400d3,
        deeppink: 0xff1493,
        deepskyblue: 0x00bfff,
        dimgray: 0x696969,
        dimgrey: 0x696969,
        dodgerblue: 0x1e90ff,
        firebrick: 0xb22222,
        floralwhite: 0xfffaf0,
        forestgreen: 0x228b22,
        fuchsia: 0xff00ff,
        gainsboro: 0xdcdcdc,
        ghostwhite: 0xf8f8ff,
        gold: 0xffd700,
        goldenrod: 0xdaa520,
        gray: 0x808080,
        grey: 0x808080,
        green: 0x008000,
        greenyellow: 0xadff2f,
        honeydew: 0xf0fff0,
        hotpink: 0xff69b4,
        indianred: 0xcd5c5c,
        indigo: 0x4b0082,
        ivory: 0xfffff0,
        khaki: 0xf0e68c,
        lavender: 0xe6e6fa,
        lavenderblush: 0xfff0f5,
        lawngreen: 0x7cfc00,
        lemonchiffon: 0xfffacd,
        lightblue: 0xadd8e6,
        lightcoral: 0xf08080,
        lightcyan: 0xe0ffff,
        lightgoldenrodyellow: 0xfafad2,
        lightgray: 0xd3d3d3,
        lightgrey: 0xd3d3d3,
        lightgreen: 0x90ee90,
        lightpink: 0xffb6c1,
        lightsalmon: 0xffa07a,
        lightseagreen: 0x20b2aa,
        lightskyblue: 0x87cefa,
        lightslategray: 0x778899,
        lightslategrey: 0x778899,
        lightsteelblue: 0xb0c4de,
        lightyellow: 0xffffe0,
        lime: 0x00ff00,
        limegreen: 0x32cd32,
        linen: 0xfaf0e6,
        magenta: 0xff00ff,
        maroon: 0x800000,
        mediumaquamarine: 0x66cdaa,
        mediumblue: 0x0000cd,
        mediumorchid: 0xba55d3,
        mediumpurple: 0x9370db,
        mediumseagreen: 0x3cb371,
        mediumslateblue: 0x7b68ee,
        mediumspringgreen: 0x00fa9a,
        mediumturquoise: 0x48d1cc,
        mediumvioletred: 0xc71585,
        midnightblue: 0x191970,
        mintcream: 0xf5fffa,
        mistyrose: 0xffe4e1,
        moccasin: 0xffe4b5,
        navajowhite: 0xffdead,
        navy: 0x000080,
        oldlace: 0xfdf5e6,
        olive: 0x808000,
        olivedrab: 0x6b8e23,
        orange: 0xffa500,
        orangered: 0xff4500,
        orchid: 0xda70d6,
        palegoldenrod: 0xeee8aa,
        palegreen: 0x98fb98,
        paleturquoise: 0xafeeee,
        palevioletred: 0xdb7093,
        papayawhip: 0xffefd5,
        peachpuff: 0xffdab9,
        peru: 0xcd853f,
        pink: 0xffc0cb,
        plum: 0xdda0dd,
        powderblue: 0xb0e0e6,
        purple: 0x800080,
        rebeccapurple: 0x663399,
        red: 0xff0000,
        rosybrown: 0xbc8f8f,
        royalblue: 0x4169e1,
        saddlebrown: 0x8b4513,
        salmon: 0xfa8072,
        sandybrown: 0xf4a460,
        seagreen: 0x2e8b57,
        seashell: 0xfff5ee,
        sienna: 0xa0522d,
        silver: 0xc0c0c0,
        skyblue: 0x87ceeb,
        slateblue: 0x6a5acd,
        slategray: 0x708090,
        slategrey: 0x708090,
        snow: 0xfffafa,
        springgreen: 0x00ff7f,
        steelblue: 0x4682b4,
        tan: 0xd2b48c,
        teal: 0x008080,
        thistle: 0xd8bfd8,
        tomato: 0xff6347,
        turquoise: 0x40e0d0,
        violet: 0xee82ee,
        wheat: 0xf5deb3,
        white: 0xffffff,
        whitesmoke: 0xf5f5f5,
        yellow: 0xffff00,
        yellowgreen: 0x9acd32,
    }));
    var systemColors = new Map(Object.entries({
        ActiveBorder: 0x3b99fc,
        ActiveCaption: 0x000000,
        AppWorkspace: 0xaaaaaa,
        Background: 0x6363ce,
        ButtonFace: 0xffffff,
        ButtonHighlight: 0xe9e9e9,
        ButtonShadow: 0x9fa09f,
        ButtonText: 0x000000,
        CaptionText: 0x000000,
        GrayText: 0x7f7f7f,
        Highlight: 0xb2d7ff,
        HighlightText: 0x000000,
        InactiveBorder: 0xffffff,
        InactiveCaption: 0xffffff,
        InactiveCaptionText: 0x000000,
        InfoBackground: 0xfbfcc5,
        InfoText: 0x000000,
        Menu: 0xf6f6f6,
        MenuText: 0xffffff,
        Scrollbar: 0xaaaaaa,
        ThreeDDarkShadow: 0x000000,
        ThreeDFace: 0xc0c0c0,
        ThreeDHighlight: 0xffffff,
        ThreeDLightShadow: 0xffffff,
        ThreeDShadow: 0x000000,
        Window: 0xececec,
        WindowFrame: 0xaaaaaa,
        WindowText: 0x000000,
        '-webkit-focus-ring-color': 0xe59700
    }).map(function (_a) {
        var _b = __read(_a, 2), key = _b[0], value = _b[1];
        return [key.toLowerCase(), value];
    }));
    function getSRGBLightness(r, g, b) {
        return (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;
    }

    function scale(x, inLow, inHigh, outLow, outHigh) {
        return (x - inLow) * (outHigh - outLow) / (inHigh - inLow) + outLow;
    }
    function clamp(x, min, max) {
        return Math.min(max, Math.max(min, x));
    }
    function multiplyMatrices(m1, m2) {
        var result = [];
        for (var i = 0, len = m1.length; i < len; i++) {
            result[i] = [];
            for (var j = 0, len2 = m2[0].length; j < len2; j++) {
                var sum = 0;
                for (var k = 0, len3 = m1[0].length; k < len3; k++) {
                    sum += m1[i][k] * m2[k][j];
                }
                result[i][j] = sum;
            }
        }
        return result;
    }

    function createFilterMatrix(config) {
        var m = Matrix.identity();
        if (config.sepia !== 0) {
            m = multiplyMatrices(m, Matrix.sepia(config.sepia / 100));
        }
        if (config.grayscale !== 0) {
            m = multiplyMatrices(m, Matrix.grayscale(config.grayscale / 100));
        }
        if (config.contrast !== 100) {
            m = multiplyMatrices(m, Matrix.contrast(config.contrast / 100));
        }
        if (config.brightness !== 100) {
            m = multiplyMatrices(m, Matrix.brightness(config.brightness / 100));
        }
        if (config.mode === 1) {
            m = multiplyMatrices(m, Matrix.invertNHue());
        }
        return m;
    }
    function applyColorMatrix(_a, matrix) {
        var _b = __read(_a, 3), r = _b[0], g = _b[1], b = _b[2];
        var rgb = [[r / 255], [g / 255], [b / 255], [1], [1]];
        var result = multiplyMatrices(matrix, rgb);
        return [0, 1, 2].map(function (i) { return clamp(Math.round(result[i][0] * 255), 0, 255); });
    }
    var Matrix = {
        identity: function () {
            return [
                [1, 0, 0, 0, 0],
                [0, 1, 0, 0, 0],
                [0, 0, 1, 0, 0],
                [0, 0, 0, 1, 0],
                [0, 0, 0, 0, 1]
            ];
        },
        invertNHue: function () {
            return [
                [0.333, -0.667, -0.667, 0, 1],
                [-0.667, 0.333, -0.667, 0, 1],
                [-0.667, -0.667, 0.333, 0, 1],
                [0, 0, 0, 1, 0],
                [0, 0, 0, 0, 1]
            ];
        },
        brightness: function (v) {
            return [
                [v, 0, 0, 0, 0],
                [0, v, 0, 0, 0],
                [0, 0, v, 0, 0],
                [0, 0, 0, 1, 0],
                [0, 0, 0, 0, 1]
            ];
        },
        contrast: function (v) {
            var t = (1 - v) / 2;
            return [
                [v, 0, 0, 0, t],
                [0, v, 0, 0, t],
                [0, 0, v, 0, t],
                [0, 0, 0, 1, 0],
                [0, 0, 0, 0, 1]
            ];
        },
        sepia: function (v) {
            return [
                [(0.393 + 0.607 * (1 - v)), (0.769 - 0.769 * (1 - v)), (0.189 - 0.189 * (1 - v)), 0, 0],
                [(0.349 - 0.349 * (1 - v)), (0.686 + 0.314 * (1 - v)), (0.168 - 0.168 * (1 - v)), 0, 0],
                [(0.272 - 0.272 * (1 - v)), (0.534 - 0.534 * (1 - v)), (0.131 + 0.869 * (1 - v)), 0, 0],
                [0, 0, 0, 1, 0],
                [0, 0, 0, 0, 1]
            ];
        },
        grayscale: function (v) {
            return [
                [(0.2126 + 0.7874 * (1 - v)), (0.7152 - 0.7152 * (1 - v)), (0.0722 - 0.0722 * (1 - v)), 0, 0],
                [(0.2126 - 0.2126 * (1 - v)), (0.7152 + 0.2848 * (1 - v)), (0.0722 - 0.0722 * (1 - v)), 0, 0],
                [(0.2126 - 0.2126 * (1 - v)), (0.7152 - 0.7152 * (1 - v)), (0.0722 + 0.9278 * (1 - v)), 0, 0],
                [0, 0, 0, 1, 0],
                [0, 0, 0, 0, 1]
            ];
        },
    };

    function getBgPole(theme) {
        var isDarkScheme = theme.mode === 1;
        var prop = isDarkScheme ? 'darkSchemeBackgroundColor' : 'lightSchemeBackgroundColor';
        return theme[prop];
    }
    function getFgPole(theme) {
        var isDarkScheme = theme.mode === 1;
        var prop = isDarkScheme ? 'darkSchemeTextColor' : 'lightSchemeTextColor';
        return theme[prop];
    }
    var colorModificationCache = new Map();
    function clearColorModificationCache() {
        colorModificationCache.clear();
    }
    var rgbCacheKeys = ['r', 'g', 'b', 'a'];
    var themeCacheKeys$1 = ['mode', 'brightness', 'contrast', 'grayscale', 'sepia', 'darkSchemeBackgroundColor', 'darkSchemeTextColor', 'lightSchemeBackgroundColor', 'lightSchemeTextColor'];
    function getCacheId(rgb, theme) {
        var resultId = '';
        rgbCacheKeys.forEach(function (key) {
            resultId += "".concat(rgb[key], ";");
        });
        themeCacheKeys$1.forEach(function (key) {
            resultId += "".concat(theme[key], ";");
        });
        return resultId;
    }
    function modifyColorWithCache(rgb, theme, modifyHSL, poleColor, anotherPoleColor) {
        var fnCache;
        if (colorModificationCache.has(modifyHSL)) {
            fnCache = colorModificationCache.get(modifyHSL);
        }
        else {
            fnCache = new Map();
            colorModificationCache.set(modifyHSL, fnCache);
        }
        var id = getCacheId(rgb, theme);
        if (fnCache.has(id)) {
            return fnCache.get(id);
        }
        var hsl = rgbToHSL(rgb);
        var pole = poleColor == null ? null : parseToHSLWithCache(poleColor);
        var anotherPole = anotherPoleColor == null ? null : parseToHSLWithCache(anotherPoleColor);
        var modified = modifyHSL(hsl, pole, anotherPole);
        var _a = hslToRGB(modified), r = _a.r, g = _a.g, b = _a.b, a = _a.a;
        var matrix = createFilterMatrix(theme);
        var _b = __read(applyColorMatrix([r, g, b], matrix), 3), rf = _b[0], gf = _b[1], bf = _b[2];
        var color = (a === 1 ?
            rgbToHexString({ r: rf, g: gf, b: bf }) :
            rgbToString({ r: rf, g: gf, b: bf, a: a }));
        fnCache.set(id, color);
        return color;
    }
    function noopHSL(hsl) {
        return hsl;
    }
    function modifyColor(rgb, theme) {
        return modifyColorWithCache(rgb, theme, noopHSL);
    }
    function modifyLightSchemeColor(rgb, theme) {
        var poleBg = getBgPole(theme);
        var poleFg = getFgPole(theme);
        return modifyColorWithCache(rgb, theme, modifyLightModeHSL, poleFg, poleBg);
    }
    function modifyLightModeHSL(_a, poleFg, poleBg) {
        var h = _a.h, s = _a.s, l = _a.l, a = _a.a;
        var isDark = l < 0.5;
        var isNeutral;
        if (isDark) {
            isNeutral = l < 0.2 || s < 0.12;
        }
        else {
            var isBlue = h > 200 && h < 280;
            isNeutral = s < 0.24 || (l > 0.8 && isBlue);
        }
        var hx = h;
        var sx = l;
        if (isNeutral) {
            if (isDark) {
                hx = poleFg.h;
                sx = poleFg.s;
            }
            else {
                hx = poleBg.h;
                sx = poleBg.s;
            }
        }
        var lx = scale(l, 0, 1, poleFg.l, poleBg.l);
        return { h: hx, s: sx, l: lx, a: a };
    }
    var MAX_BG_LIGHTNESS = 0.4;
    function modifyBgHSL(_a, pole) {
        var h = _a.h, s = _a.s, l = _a.l, a = _a.a;
        var isDark = l < 0.5;
        var isBlue = h > 200 && h < 280;
        var isNeutral = s < 0.12 || (l > 0.8 && isBlue);
        if (isDark) {
            var lx_1 = scale(l, 0, 0.5, 0, MAX_BG_LIGHTNESS);
            if (isNeutral) {
                var hx_1 = pole.h;
                var sx = pole.s;
                return { h: hx_1, s: sx, l: lx_1, a: a };
            }
            return { h: h, s: s, l: lx_1, a: a };
        }
        var lx = scale(l, 0.5, 1, MAX_BG_LIGHTNESS, pole.l);
        if (isNeutral) {
            var hx_2 = pole.h;
            var sx = pole.s;
            return { h: hx_2, s: sx, l: lx, a: a };
        }
        var hx = h;
        var isYellow = h > 60 && h < 180;
        if (isYellow) {
            var isCloserToGreen = h > 120;
            if (isCloserToGreen) {
                hx = scale(h, 120, 180, 135, 180);
            }
            else {
                hx = scale(h, 60, 120, 60, 105);
            }
        }
        if (hx > 40 && hx < 80) {
            lx *= 0.75;
        }
        return { h: hx, s: s, l: lx, a: a };
    }
    function modifyBackgroundColor(rgb, theme) {
        if (theme.mode === 0) {
            return modifyLightSchemeColor(rgb, theme);
        }
        var pole = getBgPole(theme);
        return modifyColorWithCache(rgb, __assign(__assign({}, theme), { mode: 0 }), modifyBgHSL, pole);
    }
    var MIN_FG_LIGHTNESS = 0.55;
    function modifyBlueFgHue(hue) {
        return scale(hue, 205, 245, 205, 220);
    }
    function modifyFgHSL(_a, pole) {
        var h = _a.h, s = _a.s, l = _a.l, a = _a.a;
        var isLight = l > 0.5;
        var isNeutral = l < 0.2 || s < 0.24;
        var isBlue = !isNeutral && h > 205 && h < 245;
        if (isLight) {
            var lx_2 = scale(l, 0.5, 1, MIN_FG_LIGHTNESS, pole.l);
            if (isNeutral) {
                var hx_3 = pole.h;
                var sx = pole.s;
                return { h: hx_3, s: sx, l: lx_2, a: a };
            }
            var hx_4 = h;
            if (isBlue) {
                hx_4 = modifyBlueFgHue(h);
            }
            return { h: hx_4, s: s, l: lx_2, a: a };
        }
        if (isNeutral) {
            var hx_5 = pole.h;
            var sx = pole.s;
            var lx_3 = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);
            return { h: hx_5, s: sx, l: lx_3, a: a };
        }
        var hx = h;
        var lx;
        if (isBlue) {
            hx = modifyBlueFgHue(h);
            lx = scale(l, 0, 0.5, pole.l, Math.min(1, MIN_FG_LIGHTNESS + 0.05));
        }
        else {
            lx = scale(l, 0, 0.5, pole.l, MIN_FG_LIGHTNESS);
        }
        return { h: hx, s: s, l: lx, a: a };
    }
    function modifyForegroundColor(rgb, theme) {
        if (theme.mode === 0) {
            return modifyLightSchemeColor(rgb, theme);
        }
        var pole = getFgPole(theme);
        return modifyColorWithCache(rgb, __assign(__assign({}, theme), { mode: 0 }), modifyFgHSL, pole);
    }
    function modifyBorderHSL(_a, poleFg, poleBg) {
        var h = _a.h, s = _a.s, l = _a.l, a = _a.a;
        var isDark = l < 0.5;
        var isNeutral = l < 0.2 || s < 0.24;
        var hx = h;
        var sx = s;
        if (isNeutral) {
            if (isDark) {
                hx = poleFg.h;
                sx = poleFg.s;
            }
            else {
                hx = poleBg.h;
                sx = poleBg.s;
            }
        }
        var lx = scale(l, 0, 1, 0.5, 0.2);
        return { h: hx, s: sx, l: lx, a: a };
    }
    function modifyBorderColor(rgb, theme) {
        if (theme.mode === 0) {
            return modifyLightSchemeColor(rgb, theme);
        }
        var poleFg = getFgPole(theme);
        var poleBg = getBgPole(theme);
        return modifyColorWithCache(rgb, __assign(__assign({}, theme), { mode: 0 }), modifyBorderHSL, poleFg, poleBg);
    }
    function modifyShadowColor(rgb, filter) {
        return modifyBackgroundColor(rgb, filter);
    }
    function modifyGradientColor(rgb, filter) {
        return modifyBackgroundColor(rgb, filter);
    }

    function createTextStyle(config) {
        var lines = [];
        lines.push('*:not(pre, pre *, code, .far, .fa, .glyphicon, [class*="vjs-"], .fab, .fa-github, .fas, .material-icons, .icofont, .typcn, mu, [class*="mu-"], .glyphicon, .icon) {');
        if (config.useFont && config.fontFamily) {
            lines.push("  font-family: ".concat(config.fontFamily, " !important;"));
        }
        if (config.textStroke > 0) {
            lines.push("  -webkit-text-stroke: ".concat(config.textStroke, "px !important;"));
            lines.push("  text-stroke: ".concat(config.textStroke, "px !important;"));
        }
        lines.push('}');
        return lines.join('\\n');
    }

    var FilterMode;
    (function (FilterMode) {
        FilterMode[FilterMode["light"] = 0] = "light";
        FilterMode[FilterMode["dark"] = 1] = "dark";
    })(FilterMode || (FilterMode = {}));
    function getCSSFilterValue(config) {
        var filters = [];
        if (config.mode === FilterMode.dark) {
            filters.push('invert(100%) hue-rotate(180deg)');
        }
        if (config.brightness !== 100) {
            filters.push("brightness(".concat(config.brightness, "%)"));
        }
        if (config.contrast !== 100) {
            filters.push("contrast(".concat(config.contrast, "%)"));
        }
        if (config.grayscale !== 0) {
            filters.push("grayscale(".concat(config.grayscale, "%)"));
        }
        if (config.sepia !== 0) {
            filters.push("sepia(".concat(config.sepia, "%)"));
        }
        if (filters.length === 0) {
            return null;
        }
        return filters.join(' ');
    }

    function toSVGMatrix(matrix) {
        return matrix.slice(0, 4).map(function (m) { return m.map(function (m) { return m.toFixed(3); }).join(' '); }).join(' ');
    }
    function getSVGFilterMatrixValue(config) {
        return toSVGMatrix(createFilterMatrix(config));
    }

    var counter = 0;
    var resolvers$1 = new Map();
    var rejectors = new Map();
    function bgFetch(request) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2, new Promise(function (resolve, reject) {
                        var id = ++counter;
                        resolvers$1.set(id, resolve);
                        rejectors.set(id, reject);
                        chrome.runtime.sendMessage({ type: MessageType.CS_FETCH, data: request, id: id });
                    })];
            });
        });
    }
    chrome.runtime.onMessage.addListener(function (_a) {
        var type = _a.type, data = _a.data, error = _a.error, id = _a.id;
        if (type === MessageType.BG_FETCH_RESPONSE) {
            var resolve = resolvers$1.get(id);
            var reject = rejectors.get(id);
            resolvers$1.delete(id);
            rejectors.delete(id);
            if (error) {
                reject && reject(error);
            }
            else {
                resolve && resolve(data);
            }
        }
    });

    var AsyncQueue = (function () {
        function AsyncQueue() {
            this.queue = [];
            this.timerId = null;
            this.frameDuration = 1000 / 60;
        }
        AsyncQueue.prototype.addToQueue = function (entry) {
            this.queue.push(entry);
            this.startQueue();
        };
        AsyncQueue.prototype.stopQueue = function () {
            if (this.timerId !== null) {
                cancelAnimationFrame(this.timerId);
                this.timerId = null;
            }
            this.queue = [];
        };
        AsyncQueue.prototype.startQueue = function () {
            var _this = this;
            if (this.timerId) {
                return;
            }
            this.timerId = requestAnimationFrame(function () {
                _this.timerId = null;
                var start = Date.now();
                var cb;
                while ((cb = _this.queue.shift())) {
                    cb();
                    if (Date.now() - start >= _this.frameDuration) {
                        _this.startQueue();
                        break;
                    }
                }
            });
        };
        return AsyncQueue;
    }());

    var imageManager = new AsyncQueue();
    function getImageDetails(url) {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                return [2, new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {
                        var dataURL, error_1, image_1, error_2;
                        return __generator(this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    if (!url.startsWith('data:')) return [3, 1];
                                    dataURL = url;
                                    return [3, 4];
                                case 1:
                                    _a.trys.push([1, 3, , 4]);
                                    return [4, getImageDataURL(url)];
                                case 2:
                                    dataURL = _a.sent();
                                    return [3, 4];
                                case 3:
                                    error_1 = _a.sent();
                                    reject(error_1);
                                    return [2];
                                case 4:
                                    _a.trys.push([4, 6, , 7]);
                                    return [4, urlToImage(dataURL)];
                                case 5:
                                    image_1 = _a.sent();
                                    imageManager.addToQueue(function () {
                                        resolve(__assign({ src: url, dataURL: dataURL, width: image_1.naturalWidth, height: image_1.naturalHeight }, analyzeImage(image_1)));
                                    });
                                    return [3, 7];
                                case 6:
                                    error_2 = _a.sent();
                                    reject(error_2);
                                    return [3, 7];
                                case 7: return [2];
                            }
                        });
                    }); })];
            });
        });
    }
    function getImageDataURL(url) {
        return __awaiter(this, void 0, void 0, function () {
            var parsedURL;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        parsedURL = new URL(url);
                        if (!(parsedURL.origin === location.origin)) return [3, 2];
                        return [4, loadAsDataURL(url)];
                    case 1: return [2, _a.sent()];
                    case 2: return [4, bgFetch({ url: url, responseType: 'data-url' })];
                    case 3: return [2, _a.sent()];
                }
            });
        });
    }
    function urlToImage(url) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2, new Promise(function (resolve, reject) {
                        var image = new Image();
                        image.onload = function () { return resolve(image); };
                        image.onerror = function () { return reject("Unable to load image ".concat(url)); };
                        image.src = url;
                    })];
            });
        });
    }
    var MAX_ANALIZE_PIXELS_COUNT = 32 * 32;
    var canvas;
    var context;
    function createCanvas() {
        var maxWidth = MAX_ANALIZE_PIXELS_COUNT;
        var maxHeight = MAX_ANALIZE_PIXELS_COUNT;
        canvas = document.createElement('canvas');
        canvas.width = maxWidth;
        canvas.height = maxHeight;
        context = canvas.getContext('2d');
        context.imageSmoothingEnabled = false;
    }
    function removeCanvas() {
        canvas = null;
        context = null;
    }
    var MAX_IMAGE_SIZE = 5 * 1024 * 1024;
    function analyzeImage(image) {
        if (!canvas) {
            createCanvas();
        }
        var naturalWidth = image.naturalWidth, naturalHeight = image.naturalHeight;
        if (naturalHeight === 0 || naturalWidth === 0) {
            logWarn("logWarn(Image is empty ".concat(image.currentSrc, ")"));
            return null;
        }
        var size = naturalWidth * naturalHeight * 4;
        if (size > MAX_IMAGE_SIZE) {
            return {
                isDark: false,
                isLight: false,
                isTransparent: false,
                isLarge: false,
                isTooLarge: true,
            };
        }
        var naturalPixelsCount = naturalWidth * naturalHeight;
        var k = Math.min(1, Math.sqrt(MAX_ANALIZE_PIXELS_COUNT / naturalPixelsCount));
        var width = Math.ceil(naturalWidth * k);
        var height = Math.ceil(naturalHeight * k);
        context.clearRect(0, 0, width, height);
        context.drawImage(image, 0, 0, naturalWidth, naturalHeight, 0, 0, width, height);
        var imageData = context.getImageData(0, 0, width, height);
        var d = imageData.data;
        var TRANSPARENT_ALPHA_THRESHOLD = 0.05;
        var DARK_LIGHTNESS_THRESHOLD = 0.4;
        var LIGHT_LIGHTNESS_THRESHOLD = 0.7;
        var transparentPixelsCount = 0;
        var darkPixelsCount = 0;
        var lightPixelsCount = 0;
        var i, x, y;
        var r, g, b, a;
        var l;
        for (y = 0; y < height; y++) {
            for (x = 0; x < width; x++) {
                i = 4 * (y * width + x);
                r = d[i + 0];
                g = d[i + 1];
                b = d[i + 2];
                a = d[i + 3];
                if (a / 255 < TRANSPARENT_ALPHA_THRESHOLD) {
                    transparentPixelsCount++;
                }
                else {
                    l = getSRGBLightness(r, g, b);
                    if (l < DARK_LIGHTNESS_THRESHOLD) {
                        darkPixelsCount++;
                    }
                    if (l > LIGHT_LIGHTNESS_THRESHOLD) {
                        lightPixelsCount++;
                    }
                }
            }
        }
        var totalPixelsCount = width * height;
        var opaquePixelsCount = totalPixelsCount - transparentPixelsCount;
        var DARK_IMAGE_THRESHOLD = 0.7;
        var LIGHT_IMAGE_THRESHOLD = 0.7;
        var TRANSPARENT_IMAGE_THRESHOLD = 0.1;
        var LARGE_IMAGE_PIXELS_COUNT = 800 * 600;
        return {
            isDark: ((darkPixelsCount / opaquePixelsCount) >= DARK_IMAGE_THRESHOLD),
            isLight: ((lightPixelsCount / opaquePixelsCount) >= LIGHT_IMAGE_THRESHOLD),
            isTransparent: ((transparentPixelsCount / totalPixelsCount) >= TRANSPARENT_IMAGE_THRESHOLD),
            isLarge: (naturalPixelsCount >= LARGE_IMAGE_PIXELS_COUNT),
            isTooLarge: false,
        };
    }
    function getFilteredImageDataURL(_a, theme) {
        var dataURL = _a.dataURL, width = _a.width, height = _a.height;
        var matrix = getSVGFilterMatrixValue(theme);
        var svg = [
            "<svg xmlns=\\"http://www.w3.org/2000/svg\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" width=\\"".concat(width, "\\" height=\\"").concat(height, "\\">"),
            '<defs>',
            '<filter id="darkreader-image-filter">',
            "<feColorMatrix type=\\"matrix\\" values=\\"".concat(matrix, "\\" />"),
            '</filter>',
            '</defs>',
            "<image width=\\"".concat(width, "\\" height=\\"").concat(height, "\\" filter=\\"url(#darkreader-image-filter)\\" xlink:href=\\"").concat(dataURL, "\\" />"),
            '</svg>',
        ].join('');
        return "data:image/svg+xml;base64,".concat(btoa(svg));
    }
    function cleanImageProcessingCache() {
        imageManager && imageManager.stopQueue();
        removeCanvas();
    }

    var gradientLength = 'gradient'.length;
    var conicGradient = 'conic-';
    var conicGradientLength = conicGradient.length;
    var radialGradient = 'radial-';
    var linearGradient = 'linear-';
    function parseGradient(value) {
        var result = [];
        var index = 0;
        var startIndex = conicGradient.length;
        var _loop_1 = function () {
            var typeGradient;
            [linearGradient, radialGradient, conicGradient].find(function (possibleType) {
                if (index - possibleType.length >= 0) {
                    var possibleGradient = value.substring(index - possibleType.length, index);
                    if (possibleGradient === possibleType) {
                        if (value.slice(index - possibleType.length - 10, index - possibleType.length - 1) === 'repeating') {
                            typeGradient = "repeating-".concat(possibleType, "gradient");
                            return true;
                        }
                        if (value.slice(index - possibleType.length - 8, index - possibleType.length - 1) === '-webkit') {
                            typeGradient = "-webkit-".concat(possibleType, "gradient");
                            return true;
                        }
                        typeGradient = "".concat(possibleType, "gradient");
                        return true;
                    }
                }
            });
            if (!typeGradient) {
                return "break";
            }
            var _a = getParenthesesRange(value, index + gradientLength), start = _a.start, end = _a.end;
            var match = value.substring(start + 1, end - 1);
            startIndex = end + 1 + conicGradientLength;
            result.push({
                typeGradient: typeGradient,
                match: match,
                offset: typeGradient.length + 2,
                index: index - typeGradient.length + gradientLength,
                hasComma: true,
            });
        };
        while ((index = value.indexOf('gradient', startIndex)) !== -1) {
            var state_1 = _loop_1();
            if (state_1 === "break")
                break;
        }
        if (result.length) {
            result[result.length - 1].hasComma = false;
        }
        return result;
    }

    function getPriority(ruleStyle, property) {
        return Boolean(ruleStyle && ruleStyle.getPropertyPriority(property));
    }
    function getModifiableCSSDeclaration(property, value, rule, variablesStore, ignoreImageSelectors, isCancelled) {
        if (property.startsWith('--')) {
            var modifier = getVariableModifier(variablesStore, property, value, rule, ignoreImageSelectors, isCancelled);
            if (modifier) {
                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };
            }
        }
        else if (value.includes('var(')) {
            var modifier = getVariableDependantModifier(variablesStore, property, value);
            if (modifier) {
                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };
            }
        }
        else if (property === 'color-scheme') {
            return null;
        }
        else if ((property.includes('color') && property !== '-webkit-print-color-adjust') ||
            property === 'fill' ||
            property === 'stroke' ||
            property === 'stop-color') {
            var modifier = getColorModifier(property, value, rule);
            if (modifier) {
                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };
            }
        }
        else if (property === 'background-image' || property === 'list-style-image') {
            var modifier = getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled);
            if (modifier) {
                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };
            }
        }
        else if (property.includes('shadow')) {
            var modifier = getShadowModifier(value);
            if (modifier) {
                return { property: property, value: modifier, important: getPriority(rule.style, property), sourceValue: value };
            }
        }
        return null;
    }
    function joinSelectors() {
        var selectors = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            selectors[_i] = arguments[_i];
        }
        return selectors.filter(Boolean).join(', ');
    }
    function getModifiedUserAgentStyle(theme, isIFrame, styleSystemControls) {
        var lines = [];
        if (!isIFrame) {
            lines.push('html {');
            lines.push("    background-color: ".concat(modifyBackgroundColor({ r: 255, g: 255, b: 255 }, theme), " !important;"));
            lines.push('}');
        }
        if (isCSSColorSchemePropSupported) {
            lines.push('html {');
            lines.push("    color-scheme: ".concat(theme.mode === 1 ? 'dark' : 'dark light', " !important;"));
            lines.push('}');
        }
        var bgSelectors = joinSelectors(isIFrame ? '' : 'html, body', styleSystemControls ? 'input, textarea, select, button, dialog' : '');
        if (bgSelectors) {
            lines.push("".concat(bgSelectors, " {"));
            lines.push("    background-color: ".concat(modifyBackgroundColor({ r: 255, g: 255, b: 255 }, theme), ";"));
            lines.push('}');
        }
        lines.push("".concat(joinSelectors('html, body', styleSystemControls ? 'input, textarea, select, button' : ''), " {"));
        lines.push("    border-color: ".concat(modifyBorderColor({ r: 76, g: 76, b: 76 }, theme), ";"));
        lines.push("    color: ".concat(modifyForegroundColor({ r: 0, g: 0, b: 0 }, theme), ";"));
        lines.push('}');
        lines.push('a {');
        lines.push("    color: ".concat(modifyForegroundColor({ r: 0, g: 64, b: 255 }, theme), ";"));
        lines.push('}');
        lines.push('table {');
        lines.push("    border-color: ".concat(modifyBorderColor({ r: 128, g: 128, b: 128 }, theme), ";"));
        lines.push('}');
        lines.push('::placeholder {');
        lines.push("    color: ".concat(modifyForegroundColor({ r: 169, g: 169, b: 169 }, theme), ";"));
        lines.push('}');
        lines.push('input:-webkit-autofill,');
        lines.push('textarea:-webkit-autofill,');
        lines.push('select:-webkit-autofill {');
        lines.push("    background-color: ".concat(modifyBackgroundColor({ r: 250, g: 255, b: 189 }, theme), " !important;"));
        lines.push("    color: ".concat(modifyForegroundColor({ r: 0, g: 0, b: 0 }, theme), " !important;"));
        lines.push('}');
        if (theme.scrollbarColor) {
            lines.push(getModifiedScrollbarStyle(theme));
        }
        if (theme.selectionColor) {
            lines.push(getModifiedSelectionStyle(theme));
        }
        return lines.join('\\n');
    }
    function getSelectionColor(theme) {
        var backgroundColorSelection;
        var foregroundColorSelection;
        if (theme.selectionColor === 'auto') {
            backgroundColorSelection = modifyBackgroundColor({ r: 0, g: 96, b: 212 }, __assign(__assign({}, theme), { grayscale: 0 }));
            foregroundColorSelection = modifyForegroundColor({ r: 255, g: 255, b: 255 }, __assign(__assign({}, theme), { grayscale: 0 }));
        }
        else {
            var rgb = parseColorWithCache(theme.selectionColor);
            var hsl = rgbToHSL(rgb);
            backgroundColorSelection = theme.selectionColor;
            if (hsl.l < 0.5) {
                foregroundColorSelection = '#FFF';
            }
            else {
                foregroundColorSelection = '#000';
            }
        }
        return { backgroundColorSelection: backgroundColorSelection, foregroundColorSelection: foregroundColorSelection };
    }
    function getModifiedSelectionStyle(theme) {
        var lines = [];
        var modifiedSelectionColor = getSelectionColor(theme);
        var backgroundColorSelection = modifiedSelectionColor.backgroundColorSelection;
        var foregroundColorSelection = modifiedSelectionColor.foregroundColorSelection;
        ['::selection', '::-moz-selection'].forEach(function (selection) {
            lines.push("".concat(selection, " {"));
            lines.push("    background-color: ".concat(backgroundColorSelection, " !important;"));
            lines.push("    color: ".concat(foregroundColorSelection, " !important;"));
            lines.push('}');
        });
        return lines.join('\\n');
    }
    function getModifiedScrollbarStyle(theme) {
        var lines = [];
        var colorTrack;
        var colorIcons;
        var colorThumb;
        var colorThumbHover;
        var colorThumbActive;
        var colorCorner;
        if (theme.scrollbarColor === 'auto') {
            colorTrack = modifyBackgroundColor({ r: 241, g: 241, b: 241 }, theme);
            colorIcons = modifyForegroundColor({ r: 96, g: 96, b: 96 }, theme);
            colorThumb = modifyBackgroundColor({ r: 176, g: 176, b: 176 }, theme);
            colorThumbHover = modifyBackgroundColor({ r: 144, g: 144, b: 144 }, theme);
            colorThumbActive = modifyBackgroundColor({ r: 96, g: 96, b: 96 }, theme);
            colorCorner = modifyBackgroundColor({ r: 255, g: 255, b: 255 }, theme);
        }
        else {
            var rgb = parseColorWithCache(theme.scrollbarColor);
            var hsl_1 = rgbToHSL(rgb);
            var isLight = hsl_1.l > 0.5;
            var lighten = function (lighter) { return (__assign(__assign({}, hsl_1), { l: clamp(hsl_1.l + lighter, 0, 1) })); };
            var darken = function (darker) { return (__assign(__assign({}, hsl_1), { l: clamp(hsl_1.l - darker, 0, 1) })); };
            colorTrack = hslToString(darken(0.4));
            colorIcons = hslToString(isLight ? darken(0.4) : lighten(0.4));
            colorThumb = hslToString(hsl_1);
            colorThumbHover = hslToString(lighten(0.1));
            colorThumbActive = hslToString(lighten(0.2));
        }
        lines.push('::-webkit-scrollbar {');
        lines.push("    background-color: ".concat(colorTrack, ";"));
        lines.push("    color: ".concat(colorIcons, ";"));
        lines.push('}');
        lines.push('::-webkit-scrollbar-thumb {');
        lines.push("    background-color: ".concat(colorThumb, ";"));
        lines.push('}');
        lines.push('::-webkit-scrollbar-thumb:hover {');
        lines.push("    background-color: ".concat(colorThumbHover, ";"));
        lines.push('}');
        lines.push('::-webkit-scrollbar-thumb:active {');
        lines.push("    background-color: ".concat(colorThumbActive, ";"));
        lines.push('}');
        lines.push('::-webkit-scrollbar-corner {');
        lines.push("    background-color: ".concat(colorCorner, ";"));
        lines.push('}');
        if (isFirefox) {
            lines.push('* {');
            lines.push("    scrollbar-color: ".concat(colorThumb, " ").concat(colorTrack, ";"));
            lines.push('}');
        }
        return lines.join('\\n');
    }
    function getModifiedFallbackStyle(filter, _a) {
        var strict = _a.strict;
        var lines = [];
        var isMicrosoft = ['microsoft.com', 'docs.microsoft.com'].includes(location.hostname);
        lines.push("html, body, ".concat(strict ? "body :not(iframe)".concat(isMicrosoft ? ':not(div[style^="position:absolute;top:0;left:-"]' : '') : 'body > :not(iframe)', " {"));
        lines.push("    background-color: ".concat(modifyBackgroundColor({ r: 255, g: 255, b: 255 }, filter), " !important;"));
        lines.push("    border-color: ".concat(modifyBorderColor({ r: 64, g: 64, b: 64 }, filter), " !important;"));
        lines.push("    color: ".concat(modifyForegroundColor({ r: 0, g: 0, b: 0 }, filter), " !important;"));
        lines.push('}');
        return lines.join('\\n');
    }
    var unparsableColors = new Set([
        'inherit',
        'transparent',
        'initial',
        'currentcolor',
        'none',
        'unset',
    ]);
    function getColorModifier(prop, value, rule) {
        if (unparsableColors.has(value.toLowerCase())) {
            return value;
        }
        var rgb = parseColorWithCache(value);
        if (!rgb) {
            return null;
        }
        if (prop.includes('background')) {
            if ((rule.style.webkitMaskImage && rule.style.webkitMaskImage !== 'none') ||
                (rule.style.webkitMask && !rule.style.webkitMask.startsWith('none')) ||
                (rule.style.mask && rule.style.mask !== 'none') ||
                (rule.style.getPropertyValue('mask-image') && rule.style.getPropertyValue('mask-image') !== 'none')) {
                return function (filter) { return modifyForegroundColor(rgb, filter); };
            }
            return function (filter) { return modifyBackgroundColor(rgb, filter); };
        }
        if (prop.includes('border') || prop.includes('outline')) {
            return function (filter) { return modifyBorderColor(rgb, filter); };
        }
        return function (filter) { return modifyForegroundColor(rgb, filter); };
    }
    var imageDetailsCache = new Map();
    var awaitingForImageLoading = new Map();
    function shouldIgnoreImage(selectorText, selectors) {
        if (!selectorText || selectors.length === 0) {
            return false;
        }
        if (selectors.some(function (s) { return s === '*'; })) {
            return true;
        }
        var ruleSelectors = selectorText.split(/,\\s*/g);
        var _loop_1 = function (i) {
            var ignoredSelector = selectors[i];
            if (ruleSelectors.some(function (s) { return s === ignoredSelector; })) {
                return { value: true };
            }
        };
        for (var i = 0; i < selectors.length; i++) {
            var state_1 = _loop_1(i);
            if (typeof state_1 === "object")
                return state_1.value;
        }
        return false;
    }
    function getBgImageModifier(value, rule, ignoreImageSelectors, isCancelled) {
        var _this = this;
        try {
            var gradients = parseGradient(value);
            var urls = getMatches(cssURLRegex, value);
            if (urls.length === 0 && gradients.length === 0) {
                return value;
            }
            var getIndices = function (matches) {
                var index = 0;
                return matches.map(function (match) {
                    var valueIndex = value.indexOf(match, index);
                    index = valueIndex + match.length;
                    return { match: match, index: valueIndex };
                });
            };
            var matches_1 = gradients.map(function (i) { return (__assign({ type: 'gradient' }, i)); })
                .concat(getIndices(urls).map(function (i) { return (__assign({ type: 'url', offset: 0 }, i)); }))
                .sort(function (a, b) { return a.index > b.index ? 1 : -1; });
            var getGradientModifier_1 = function (gradient) {
                var typeGradient = gradient.typeGradient, match = gradient.match, hasComma = gradient.hasComma;
                var partsRegex = /([^\\(\\),]+(\\([^\\(\\)]*(\\([^\\(\\)]*\\)*[^\\(\\)]*)?\\))?([^\\(\\), ]|( (?!calc)))*),?/g;
                var colorStopRegex = /^(from|color-stop|to)\\(([^\\(\\)]*?,\\s*)?(.*?)\\)$/;
                var parts = getMatches(partsRegex, match, 1).map(function (part) {
                    part = part.trim();
                    var rgb = parseColorWithCache(part);
                    if (rgb) {
                        return function (filter) { return modifyGradientColor(rgb, filter); };
                    }
                    var space = part.lastIndexOf(' ');
                    rgb = parseColorWithCache(part.substring(0, space));
                    if (rgb) {
                        return function (filter) { return "".concat(modifyGradientColor(rgb, filter), " ").concat(part.substring(space + 1)); };
                    }
                    var colorStopMatch = part.match(colorStopRegex);
                    if (colorStopMatch) {
                        rgb = parseColorWithCache(colorStopMatch[3]);
                        if (rgb) {
                            return function (filter) { return "".concat(colorStopMatch[1], "(").concat(colorStopMatch[2] ? "".concat(colorStopMatch[2], ", ") : '').concat(modifyGradientColor(rgb, filter), ")"); };
                        }
                    }
                    return function () { return part; };
                });
                return function (filter) {
                    return "".concat(typeGradient, "(").concat(parts.map(function (modify) { return modify(filter); }).join(', '), ")").concat(hasComma ? ', ' : '');
                };
            };
            var getURLModifier_1 = function (urlValue) {
                var _a;
                if (shouldIgnoreImage(rule.selectorText, ignoreImageSelectors)) {
                    return null;
                }
                var url = getCSSURLValue(urlValue);
                var isURLEmpty = url.length === 0;
                var parentStyleSheet = rule.parentStyleSheet;
                var baseURL = (parentStyleSheet && parentStyleSheet.href) ?
                    getCSSBaseBath(parentStyleSheet.href) :
                    ((_a = parentStyleSheet.ownerNode) === null || _a === void 0 ? void 0 : _a.baseURI) || location.origin;
                url = getAbsoluteURL(baseURL, url);
                var absoluteValue = "url(\\"".concat(url, "\\")");
                return function (filter) { return __awaiter(_this, void 0, void 0, function () {
                    var imageDetails, awaiters_1, err_1, bgImageValue;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                if (isURLEmpty) {
                                    return [2, "url('')"];
                                }
                                if (!imageDetailsCache.has(url)) return [3, 1];
                                imageDetails = imageDetailsCache.get(url);
                                return [3, 7];
                            case 1:
                                _a.trys.push([1, 6, , 7]);
                                if (!awaitingForImageLoading.has(url)) return [3, 3];
                                awaiters_1 = awaitingForImageLoading.get(url);
                                return [4, new Promise(function (resolve) { return awaiters_1.push(resolve); })];
                            case 2:
                                imageDetails = _a.sent();
                                if (!imageDetails) {
                                    return [2, null];
                                }
                                return [3, 5];
                            case 3:
                                awaitingForImageLoading.set(url, []);
                                return [4, getImageDetails(url)];
                            case 4:
                                imageDetails = _a.sent();
                                imageDetailsCache.set(url, imageDetails);
                                awaitingForImageLoading.get(url).forEach(function (resolve) { return resolve(imageDetails); });
                                awaitingForImageLoading.delete(url);
                                _a.label = 5;
                            case 5:
                                if (isCancelled()) {
                                    return [2, null];
                                }
                                return [3, 7];
                            case 6:
                                err_1 = _a.sent();
                                logWarn(err_1);
                                if (awaitingForImageLoading.has(url)) {
                                    awaitingForImageLoading.get(url).forEach(function (resolve) { return resolve(null); });
                                    awaitingForImageLoading.delete(url);
                                }
                                return [2, absoluteValue];
                            case 7:
                                bgImageValue = getBgImageValue_1(imageDetails, filter) || absoluteValue;
                                return [2, bgImageValue];
                        }
                    });
                }); };
            };
            var getBgImageValue_1 = function (imageDetails, filter) {
                var isDark = imageDetails.isDark, isLight = imageDetails.isLight, isTransparent = imageDetails.isTransparent, isLarge = imageDetails.isLarge, isTooLarge = imageDetails.isTooLarge, width = imageDetails.width;
                var result;
                if (isTooLarge) {
                    result = "url(\\"".concat(imageDetails.src, "\\")");
                }
                else if (isDark && isTransparent && filter.mode === 1 && !isLarge && width > 2) {
                    logInfo("Inverting dark image ".concat(imageDetails.src));
                    var inverted = getFilteredImageDataURL(imageDetails, __assign(__assign({}, filter), { sepia: clamp(filter.sepia + 10, 0, 100) }));
                    result = "url(\\"".concat(inverted, "\\")");
                }
                else if (isLight && !isTransparent && filter.mode === 1) {
                    if (isLarge) {
                        result = 'none';
                    }
                    else {
                        logInfo("Dimming light image ".concat(imageDetails.src));
                        var dimmed = getFilteredImageDataURL(imageDetails, filter);
                        result = "url(\\"".concat(dimmed, "\\")");
                    }
                }
                else if (filter.mode === 0 && isLight && !isLarge) {
                    logInfo("Applying filter to image ".concat(imageDetails.src));
                    var filtered = getFilteredImageDataURL(imageDetails, __assign(__assign({}, filter), { brightness: clamp(filter.brightness - 10, 5, 200), sepia: clamp(filter.sepia + 10, 0, 100) }));
                    result = "url(\\"".concat(filtered, "\\")");
                }
                else {
                    result = null;
                }
                return result;
            };
            var modifiers_1 = [];
            var matchIndex_1 = 0;
            var prevHasComma_1 = false;
            matches_1.forEach(function (_a, i) {
                var type = _a.type, match = _a.match, index = _a.index, typeGradient = _a.typeGradient, hasComma = _a.hasComma, offset = _a.offset;
                var matchStart = index;
                var prefixStart = matchIndex_1;
                var matchEnd = matchStart + match.length + offset;
                matchIndex_1 = matchEnd;
                if (prefixStart !== matchStart) {
                    if (prevHasComma_1) {
                        modifiers_1.push(function () {
                            var betweenValue = value.substring(prefixStart, matchStart);
                            if (betweenValue[0] === ',') {
                                betweenValue = betweenValue.substring(1);
                            }
                            return betweenValue;
                        });
                    }
                    else {
                        modifiers_1.push(function () { return value.substring(prefixStart, matchStart); });
                    }
                }
                prevHasComma_1 = hasComma || false;
                if (type === 'url') {
                    modifiers_1.push(getURLModifier_1(match));
                }
                else if (type === 'gradient') {
                    modifiers_1.push(getGradientModifier_1({ match: match, index: index, typeGradient: typeGradient, hasComma: hasComma, offset: offset }));
                }
                if (i === matches_1.length - 1) {
                    modifiers_1.push(function () { return value.substring(matchEnd); });
                }
            });
            return function (filter) {
                var results = modifiers_1.filter(Boolean).map(function (modify) { return modify(filter); });
                if (results.some(function (r) { return r instanceof Promise; })) {
                    return Promise.all(results).then(function (asyncResults) {
                        return asyncResults.filter(Boolean).join('');
                    });
                }
                var combinedResult = results.join('');
                if (combinedResult.endsWith(', initial')) {
                    return combinedResult.slice(0, -9);
                }
                return combinedResult;
            };
        }
        catch (err) {
            return null;
        }
    }
    function getShadowModifierWithInfo(value) {
        try {
            var index_1 = 0;
            var colorMatches_1 = getMatches(/(^|\\s)(?!calc)([a-z]+\\(.+?\\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/ig, value, 2);
            var notParsed_1 = 0;
            var modifiers_2 = colorMatches_1.map(function (match, i) {
                var prefixIndex = index_1;
                var matchIndex = value.indexOf(match, index_1);
                var matchEnd = matchIndex + match.length;
                index_1 = matchEnd;
                var rgb = parseColorWithCache(match);
                if (!rgb) {
                    notParsed_1++;
                    return function () { return value.substring(prefixIndex, matchEnd); };
                }
                return function (filter) { return "".concat(value.substring(prefixIndex, matchIndex)).concat(modifyShadowColor(rgb, filter)).concat(i === colorMatches_1.length - 1 ? value.substring(matchEnd) : ''); };
            });
            return function (filter) {
                var modified = modifiers_2.map(function (modify) { return modify(filter); }).join('');
                return {
                    matchesLength: colorMatches_1.length,
                    unparseableMatchesLength: notParsed_1,
                    result: modified,
                };
            };
        }
        catch (err) {
            return null;
        }
    }
    function getShadowModifier(value) {
        var shadowModifier = getShadowModifierWithInfo(value);
        if (!shadowModifier) {
            return null;
        }
        return function (theme) { return shadowModifier(theme).result; };
    }
    function getVariableModifier(variablesStore, prop, value, rule, ignoredImgSelectors, isCancelled) {
        return variablesStore.getModifierForVariable({
            varName: prop,
            sourceValue: value,
            rule: rule,
            ignoredImgSelectors: ignoredImgSelectors,
            isCancelled: isCancelled,
        });
    }
    function getVariableDependantModifier(variablesStore, prop, value) {
        return variablesStore.getModifierForVarDependant(prop, value);
    }
    function cleanModificationCache() {
        clearColorModificationCache();
        imageDetailsCache.clear();
        cleanImageProcessingCache();
        awaitingForImageLoading.clear();
    }

    var VAR_TYPE_BGCOLOR = 1 << 0;
    var VAR_TYPE_TEXTCOLOR = 1 << 1;
    var VAR_TYPE_BORDERCOLOR = 1 << 2;
    var VAR_TYPE_BGIMG = 1 << 3;
    var VariablesStore = (function () {
        function VariablesStore() {
            this.varTypes = new Map();
            this.rulesQueue = [];
            this.definedVars = new Set();
            this.varRefs = new Map();
            this.unknownColorVars = new Set();
            this.unknownBgVars = new Set();
            this.undefinedVars = new Set();
            this.initialVarTypes = new Map();
            this.changedTypeVars = new Set();
            this.typeChangeSubscriptions = new Map();
            this.unstableVarValues = new Map();
        }
        VariablesStore.prototype.clear = function () {
            this.varTypes.clear();
            this.rulesQueue.splice(0);
            this.definedVars.clear();
            this.varRefs.clear();
            this.unknownColorVars.clear();
            this.unknownBgVars.clear();
            this.undefinedVars.clear();
            this.initialVarTypes.clear();
            this.changedTypeVars.clear();
            this.typeChangeSubscriptions.clear();
            this.unstableVarValues.clear();
        };
        VariablesStore.prototype.isVarType = function (varName, typeNum) {
            return (this.varTypes.has(varName) &&
                (this.varTypes.get(varName) & typeNum) > 0);
        };
        VariablesStore.prototype.addRulesForMatching = function (rules) {
            this.rulesQueue.push(rules);
        };
        VariablesStore.prototype.matchVariablesAndDependants = function () {
            var _this = this;
            this.changedTypeVars.clear();
            this.initialVarTypes = new Map(this.varTypes);
            this.collectRootVariables();
            this.collectVariablesAndVarDep(this.rulesQueue);
            this.rulesQueue.splice(0);
            this.collectRootVarDependants();
            this.varRefs.forEach(function (refs, v) {
                refs.forEach(function (r) {
                    if (_this.varTypes.has(v)) {
                        _this.resolveVariableType(r, _this.varTypes.get(v));
                    }
                });
            });
            this.unknownColorVars.forEach(function (v) {
                if (_this.unknownBgVars.has(v)) {
                    _this.unknownColorVars.delete(v);
                    _this.unknownBgVars.delete(v);
                    _this.resolveVariableType(v, VAR_TYPE_BGCOLOR);
                }
                else if (_this.isVarType(v, VAR_TYPE_BGCOLOR | VAR_TYPE_TEXTCOLOR | VAR_TYPE_BORDERCOLOR)) {
                    _this.unknownColorVars.delete(v);
                }
                else {
                    _this.undefinedVars.add(v);
                }
            });
            this.unknownBgVars.forEach(function (v) {
                var hasColor = _this.findVarRef(v, function (ref) {
                    return (_this.unknownColorVars.has(ref) ||
                        _this.isVarType(ref, VAR_TYPE_TEXTCOLOR | VAR_TYPE_BORDERCOLOR));
                }) != null;
                if (hasColor) {
                    _this.itarateVarRefs(v, function (ref) {
                        _this.resolveVariableType(ref, VAR_TYPE_BGCOLOR);
                    });
                }
                else if (_this.isVarType(v, VAR_TYPE_BGCOLOR | VAR_TYPE_BGIMG)) {
                    _this.unknownBgVars.delete(v);
                }
                else {
                    _this.undefinedVars.add(v);
                }
            });
            this.changedTypeVars.forEach(function (varName) {
                if (_this.typeChangeSubscriptions.has(varName)) {
                    _this.typeChangeSubscriptions
                        .get(varName)
                        .forEach(function (callback) {
                        callback();
                    });
                }
            });
            this.changedTypeVars.clear();
        };
        VariablesStore.prototype.getModifierForVariable = function (options) {
            var _this = this;
            return function (theme) {
                var varName = options.varName, sourceValue = options.sourceValue, rule = options.rule, ignoredImgSelectors = options.ignoredImgSelectors, isCancelled = options.isCancelled;
                var getDeclarations = function () {
                    var declarations = [];
                    var addModifiedValue = function (typeNum, varNameWrapper, colorModifier) {
                        if (!_this.isVarType(varName, typeNum)) {
                            return;
                        }
                        var property = varNameWrapper(varName);
                        var modifiedValue;
                        if (isVarDependant(sourceValue)) {
                            if (isConstructedColorVar(sourceValue)) {
                                var value = insertVarValues(sourceValue, _this.unstableVarValues);
                                if (!value) {
                                    value = typeNum === VAR_TYPE_BGCOLOR ? '#ffffff' : '#000000';
                                }
                                modifiedValue = colorModifier(value, theme);
                            }
                            else {
                                modifiedValue = replaceCSSVariablesNames(sourceValue, function (v) { return varNameWrapper(v); }, function (fallback) { return colorModifier(fallback, theme); });
                            }
                        }
                        else {
                            modifiedValue = colorModifier(sourceValue, theme);
                        }
                        declarations.push({
                            property: property,
                            value: modifiedValue,
                        });
                    };
                    addModifiedValue(VAR_TYPE_BGCOLOR, wrapBgColorVariableName, tryModifyBgColor);
                    addModifiedValue(VAR_TYPE_TEXTCOLOR, wrapTextColorVariableName, tryModifyTextColor);
                    addModifiedValue(VAR_TYPE_BORDERCOLOR, wrapBorderColorVariableName, tryModifyBorderColor);
                    if (_this.isVarType(varName, VAR_TYPE_BGIMG)) {
                        var property = wrapBgImgVariableName(varName);
                        var modifiedValue = sourceValue;
                        if (isVarDependant(sourceValue)) {
                            modifiedValue = replaceCSSVariablesNames(sourceValue, function (v) { return wrapBgColorVariableName(v); }, function (fallback) { return tryModifyBgColor(fallback, theme); });
                        }
                        var bgModifier = getBgImageModifier(modifiedValue, rule, ignoredImgSelectors, isCancelled);
                        modifiedValue = typeof bgModifier === 'function' ? bgModifier(theme) : bgModifier;
                        declarations.push({
                            property: property,
                            value: modifiedValue,
                        });
                    }
                    return declarations;
                };
                var callbacks = new Set();
                var addListener = function (onTypeChange) {
                    var callback = function () {
                        var decs = getDeclarations();
                        onTypeChange(decs);
                    };
                    callbacks.add(callback);
                    _this.subscribeForVarTypeChange(varName, callback);
                };
                var removeListeners = function () {
                    callbacks.forEach(function (callback) {
                        _this.unsubscribeFromVariableTypeChanges(varName, callback);
                    });
                };
                return {
                    declarations: getDeclarations(),
                    onTypeChange: { addListener: addListener, removeListeners: removeListeners },
                };
            };
        };
        VariablesStore.prototype.getModifierForVarDependant = function (property, sourceValue) {
            var _this = this;
            if (sourceValue.match(/^\\s*(rgb|hsl)a?\\(/)) {
                var isBg_1 = property.startsWith('background');
                var isText_1 = (property === 'color' || property === 'caret-color');
                return function (theme) {
                    var value = insertVarValues(sourceValue, _this.unstableVarValues);
                    if (!value) {
                        value = isBg_1 ? '#ffffff' : '#000000';
                    }
                    var modifier = isBg_1 ? tryModifyBgColor : isText_1 ? tryModifyTextColor : tryModifyBorderColor;
                    return modifier(value, theme);
                };
            }
            if (property === 'background-color') {
                return function (theme) {
                    return replaceCSSVariablesNames(sourceValue, function (v) { return wrapBgColorVariableName(v); }, function (fallback) { return tryModifyBgColor(fallback, theme); });
                };
            }
            if (property === 'color' || property === 'caret-color') {
                return function (theme) {
                    return replaceCSSVariablesNames(sourceValue, function (v) { return wrapTextColorVariableName(v); }, function (fallback) { return tryModifyTextColor(fallback, theme); });
                };
            }
            if (property === 'background' || property === 'background-image' || property === 'box-shadow') {
                return function (theme) {
                    var unknownVars = new Set();
                    var modify = function () {
                        var variableReplaced = replaceCSSVariablesNames(sourceValue, function (v) {
                            if (_this.isVarType(v, VAR_TYPE_BGCOLOR)) {
                                return wrapBgColorVariableName(v);
                            }
                            if (_this.isVarType(v, VAR_TYPE_BGIMG)) {
                                return wrapBgImgVariableName(v);
                            }
                            unknownVars.add(v);
                            return v;
                        }, function (fallback) { return tryModifyBgColor(fallback, theme); });
                        if (property === 'box-shadow') {
                            var shadowModifier = getShadowModifierWithInfo(variableReplaced);
                            var modifiedShadow = shadowModifier(theme);
                            if (modifiedShadow.unparseableMatchesLength !== modifiedShadow.matchesLength) {
                                return modifiedShadow.result;
                            }
                        }
                        return variableReplaced;
                    };
                    var modified = modify();
                    if (unknownVars.size > 0) {
                        return new Promise(function (resolve) {
                            var firstUnknownVar = unknownVars.values().next().value;
                            var callback = function () {
                                _this.unsubscribeFromVariableTypeChanges(firstUnknownVar, callback);
                                var newValue = modify();
                                resolve(newValue);
                            };
                            _this.subscribeForVarTypeChange(firstUnknownVar, callback);
                        });
                    }
                    return modified;
                };
            }
            if (property.startsWith('border') || property.startsWith('outline')) {
                return function (theme) {
                    return replaceCSSVariablesNames(sourceValue, function (v) { return wrapBorderColorVariableName(v); }, function (fallback) { return tryModifyBorderColor(fallback, theme); });
                };
            }
            return null;
        };
        VariablesStore.prototype.subscribeForVarTypeChange = function (varName, callback) {
            if (!this.typeChangeSubscriptions.has(varName)) {
                this.typeChangeSubscriptions.set(varName, new Set());
            }
            var rootStore = this.typeChangeSubscriptions.get(varName);
            if (!rootStore.has(callback)) {
                rootStore.add(callback);
            }
        };
        VariablesStore.prototype.unsubscribeFromVariableTypeChanges = function (varName, callback) {
            if (this.typeChangeSubscriptions.has(varName)) {
                this.typeChangeSubscriptions.get(varName).delete(callback);
            }
        };
        VariablesStore.prototype.collectVariablesAndVarDep = function (ruleList) {
            var _this = this;
            ruleList.forEach(function (rules) {
                iterateCSSRules(rules, function (rule) {
                    rule.style && iterateCSSDeclarations(rule.style, function (property, value) {
                        if (isVariable(property)) {
                            _this.inspectVariable(property, value);
                        }
                        if (isVarDependant(value)) {
                            _this.inspectVarDependant(property, value);
                        }
                    });
                });
            });
        };
        VariablesStore.prototype.collectRootVariables = function () {
            var _this = this;
            iterateCSSDeclarations(document.documentElement.style, function (property, value) {
                if (isVariable(property)) {
                    _this.inspectVariable(property, value);
                }
            });
        };
        VariablesStore.prototype.inspectVariable = function (varName, value) {
            this.unstableVarValues.set(varName, value);
            if (isVarDependant(value) && isConstructedColorVar(value)) {
                this.unknownColorVars.add(varName);
                this.definedVars.add(varName);
            }
            if (this.definedVars.has(varName)) {
                return;
            }
            this.definedVars.add(varName);
            var color = parseColorWithCache(value);
            if (color) {
                this.unknownColorVars.add(varName);
            }
            else if (value.includes('url(') ||
                value.includes('linear-gradient(') ||
                value.includes('radial-gradient(')) {
                this.resolveVariableType(varName, VAR_TYPE_BGIMG);
            }
        };
        VariablesStore.prototype.resolveVariableType = function (varName, typeNum) {
            var initialType = this.initialVarTypes.get(varName) || 0;
            var currentType = this.varTypes.get(varName) || 0;
            var newType = currentType | typeNum;
            this.varTypes.set(varName, newType);
            if (newType !== initialType || this.undefinedVars.has(varName)) {
                this.changedTypeVars.add(varName);
                this.undefinedVars.delete(varName);
            }
            this.unknownColorVars.delete(varName);
            this.unknownBgVars.delete(varName);
        };
        VariablesStore.prototype.collectRootVarDependants = function () {
            var _this = this;
            iterateCSSDeclarations(document.documentElement.style, function (property, value) {
                if (isVarDependant(value)) {
                    _this.inspectVarDependant(property, value);
                }
            });
        };
        VariablesStore.prototype.inspectVarDependant = function (property, value) {
            var _this = this;
            if (isVariable(property)) {
                this.iterateVarDeps(value, function (ref) {
                    if (!_this.varRefs.has(property)) {
                        _this.varRefs.set(property, new Set());
                    }
                    _this.varRefs.get(property).add(ref);
                });
            }
            else if (property === 'background-color' || property === 'box-shadow') {
                this.iterateVarDeps(value, function (v) { return _this.resolveVariableType(v, VAR_TYPE_BGCOLOR); });
            }
            else if (property === 'color' || property === 'caret-color') {
                this.iterateVarDeps(value, function (v) { return _this.resolveVariableType(v, VAR_TYPE_TEXTCOLOR); });
            }
            else if (property.startsWith('border') || property.startsWith('outline')) {
                this.iterateVarDeps(value, function (v) { return _this.resolveVariableType(v, VAR_TYPE_BORDERCOLOR); });
            }
            else if (property === 'background' || property === 'background-image') {
                this.iterateVarDeps(value, function (v) {
                    if (_this.isVarType(v, VAR_TYPE_BGCOLOR | VAR_TYPE_BGIMG)) {
                        return;
                    }
                    var isBgColor = _this.findVarRef(v, function (ref) {
                        return (_this.unknownColorVars.has(ref) ||
                            _this.isVarType(ref, VAR_TYPE_TEXTCOLOR | VAR_TYPE_BORDERCOLOR));
                    }) != null;
                    _this.itarateVarRefs(v, function (ref) {
                        if (isBgColor) {
                            _this.resolveVariableType(ref, VAR_TYPE_BGCOLOR);
                        }
                        else {
                            _this.unknownBgVars.add(ref);
                        }
                    });
                });
            }
        };
        VariablesStore.prototype.iterateVarDeps = function (value, iterator) {
            var varDeps = new Set();
            iterateVarDependencies(value, function (v) { return varDeps.add(v); });
            varDeps.forEach(function (v) { return iterator(v); });
        };
        VariablesStore.prototype.findVarRef = function (varName, iterator, stack) {
            var e_1, _a;
            if (stack === void 0) { stack = new Set(); }
            if (stack.has(varName)) {
                return null;
            }
            stack.add(varName);
            var result = iterator(varName);
            if (result) {
                return varName;
            }
            var refs = this.varRefs.get(varName);
            if (!refs || refs.size === 0) {
                return null;
            }
            try {
                for (var refs_1 = __values(refs), refs_1_1 = refs_1.next(); !refs_1_1.done; refs_1_1 = refs_1.next()) {
                    var ref = refs_1_1.value;
                    var found = this.findVarRef(ref, iterator, stack);
                    if (found) {
                        return found;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (refs_1_1 && !refs_1_1.done && (_a = refs_1.return)) _a.call(refs_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        };
        VariablesStore.prototype.itarateVarRefs = function (varName, iterator) {
            this.findVarRef(varName, function (ref) {
                iterator(ref);
                return false;
            });
        };
        VariablesStore.prototype.setOnRootVariableChange = function (callback) {
            this.onRootVariableDefined = callback;
        };
        VariablesStore.prototype.putRootVars = function (styleElement, theme) {
            var e_2, _a;
            var _this = this;
            var sheet = styleElement.sheet;
            if (sheet.cssRules.length > 0) {
                sheet.deleteRule(0);
            }
            var declarations = new Map();
            iterateCSSDeclarations(document.documentElement.style, function (property, value) {
                if (isVariable(property)) {
                    if (_this.isVarType(property, VAR_TYPE_BGCOLOR)) {
                        declarations.set(wrapBgColorVariableName(property), tryModifyBgColor(value, theme));
                    }
                    if (_this.isVarType(property, VAR_TYPE_TEXTCOLOR)) {
                        declarations.set(wrapTextColorVariableName(property), tryModifyTextColor(value, theme));
                    }
                    if (_this.isVarType(property, VAR_TYPE_BORDERCOLOR)) {
                        declarations.set(wrapBorderColorVariableName(property), tryModifyBorderColor(value, theme));
                    }
                    _this.subscribeForVarTypeChange(property, _this.onRootVariableDefined);
                }
            });
            var cssLines = [];
            cssLines.push(':root {');
            try {
                for (var declarations_1 = __values(declarations), declarations_1_1 = declarations_1.next(); !declarations_1_1.done; declarations_1_1 = declarations_1.next()) {
                    var _b = __read(declarations_1_1.value, 2), property = _b[0], value = _b[1];
                    cssLines.push("    ".concat(property, ": ").concat(value, ";"));
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (declarations_1_1 && !declarations_1_1.done && (_a = declarations_1.return)) _a.call(declarations_1);
                }
                finally { if (e_2) throw e_2.error; }
            }
            cssLines.push('}');
            var cssText = cssLines.join('\\n');
            sheet.insertRule(cssText);
        };
        return VariablesStore;
    }());
    var variablesStore = new VariablesStore();
    function getVariableRange(input, searchStart) {
        if (searchStart === void 0) { searchStart = 0; }
        var start = input.indexOf('var(', searchStart);
        if (start >= 0) {
            var range = getParenthesesRange(input, start + 3);
            if (range) {
                return { start: start, end: range.end };
            }
            return null;
        }
    }
    function getVariablesMatches(input) {
        var ranges = [];
        var i = 0;
        var range;
        while ((range = getVariableRange(input, i))) {
            var start = range.start, end = range.end;
            ranges.push({ start: start, end: end, value: input.substring(start, end) });
            i = range.end + 1;
        }
        return ranges;
    }
    function replaceVariablesMatches(input, replacer) {
        var matches = getVariablesMatches(input);
        var matchesCount = matches.length;
        if (matchesCount === 0) {
            return input;
        }
        var inputLength = input.length;
        var replacements = matches.map(function (m) { return replacer(m.value); });
        var parts = [];
        parts.push(input.substring(0, matches[0].start));
        for (var i = 0; i < matchesCount; i++) {
            parts.push(replacements[i]);
            var start = matches[i].end;
            var end = i < matchesCount - 1 ? matches[i + 1].start : inputLength;
            parts.push(input.substring(start, end));
        }
        return parts.join('');
    }
    function getVariableNameAndFallback(match) {
        var commaIndex = match.indexOf(',');
        var name;
        var fallback;
        if (commaIndex >= 0) {
            name = match.substring(4, commaIndex).trim();
            fallback = match.substring(commaIndex + 1, match.length - 1).trim();
        }
        else {
            name = match.substring(4, match.length - 1).trim();
            fallback = '';
        }
        return { name: name, fallback: fallback };
    }
    function replaceCSSVariablesNames(value, nameReplacer, fallbackReplacer) {
        var matchReplacer = function (match) {
            var _a = getVariableNameAndFallback(match), name = _a.name, fallback = _a.fallback;
            var newName = nameReplacer(name);
            if (!fallback) {
                return "var(".concat(newName, ")");
            }
            var newFallback;
            if (isVarDependant(fallback)) {
                newFallback = replaceCSSVariablesNames(fallback, nameReplacer, fallbackReplacer);
            }
            else if (fallbackReplacer) {
                newFallback = fallbackReplacer(fallback);
            }
            else {
                newFallback = fallback;
            }
            return "var(".concat(newName, ", ").concat(newFallback, ")");
        };
        return replaceVariablesMatches(value, matchReplacer);
    }
    function iterateVarDependencies(value, iterator) {
        replaceCSSVariablesNames(value, function (varName) {
            iterator(varName);
            return varName;
        });
    }
    function wrapBgColorVariableName(name) {
        return "--darkreader-bg".concat(name);
    }
    function wrapTextColorVariableName(name) {
        return "--darkreader-text".concat(name);
    }
    function wrapBorderColorVariableName(name) {
        return "--darkreader-border".concat(name);
    }
    function wrapBgImgVariableName(name) {
        return "--darkreader-bgimg".concat(name);
    }
    function isVariable(property) {
        return property.startsWith('--');
    }
    function isVarDependant(value) {
        return value.includes('var(');
    }
    function isConstructedColorVar(value) {
        return value.match(/^\\s*(rgb|hsl)a?\\(/);
    }
    var rawValueRegex = /^\\d{1,3}, ?\\d{1,3}, ?\\d{1,3}$/;
    function parseRawValue(color) {
        if (rawValueRegex.test(color)) {
            var splitted = color.split(',');
            var resultInRGB_1 = 'rgb(';
            splitted.forEach(function (number) {
                resultInRGB_1 += "".concat(number.trim(), ", ");
            });
            resultInRGB_1 = resultInRGB_1.substring(0, resultInRGB_1.length - 2);
            resultInRGB_1 += ')';
            return { isRaw: true, color: resultInRGB_1 };
        }
        return { isRaw: false, color: color };
    }
    function handleRawValue(color, theme, modifyFunction) {
        var _a = parseRawValue(color), isRaw = _a.isRaw, newColor = _a.color;
        var rgb = parseColorWithCache(newColor);
        if (rgb) {
            var outputColor = modifyFunction(rgb, theme);
            if (isRaw) {
                var outputInRGB = parseColorWithCache(outputColor);
                return outputInRGB ? "".concat(outputInRGB.r, ", ").concat(outputInRGB.g, ", ").concat(outputInRGB.b) : outputColor;
            }
            return outputColor;
        }
        return newColor;
    }
    function tryModifyBgColor(color, theme) {
        return handleRawValue(color, theme, modifyBackgroundColor);
    }
    function tryModifyTextColor(color, theme) {
        return handleRawValue(color, theme, modifyForegroundColor);
    }
    function tryModifyBorderColor(color, theme) {
        return handleRawValue(color, theme, modifyBorderColor);
    }
    function insertVarValues(source, varValues, stack) {
        if (stack === void 0) { stack = new Set(); }
        var containsUnresolvedVar = false;
        var matchReplacer = function (match) {
            var _a = getVariableNameAndFallback(match), name = _a.name, fallback = _a.fallback;
            if (stack.has(name)) {
                containsUnresolvedVar = true;
                return null;
            }
            stack.add(name);
            var varValue = varValues.get(name) || fallback;
            var inserted = null;
            if (varValue) {
                if (isVarDependant(varValue)) {
                    inserted = insertVarValues(varValue, varValues, stack);
                }
                else {
                    inserted = varValue;
                }
            }
            if (!inserted) {
                containsUnresolvedVar = true;
                return null;
            }
            return inserted;
        };
        var replaced = replaceVariablesMatches(source, matchReplacer);
        if (containsUnresolvedVar) {
            return null;
        }
        return replaced;
    }

    var overrides = {
        'background-color': {
            customProp: '--darkreader-inline-bgcolor',
            cssProp: 'background-color',
            dataAttr: 'data-darkreader-inline-bgcolor',
        },
        'background-image': {
            customProp: '--darkreader-inline-bgimage',
            cssProp: 'background-image',
            dataAttr: 'data-darkreader-inline-bgimage',
        },
        'border-color': {
            customProp: '--darkreader-inline-border',
            cssProp: 'border-color',
            dataAttr: 'data-darkreader-inline-border',
        },
        'border-bottom-color': {
            customProp: '--darkreader-inline-border-bottom',
            cssProp: 'border-bottom-color',
            dataAttr: 'data-darkreader-inline-border-bottom',
        },
        'border-left-color': {
            customProp: '--darkreader-inline-border-left',
            cssProp: 'border-left-color',
            dataAttr: 'data-darkreader-inline-border-left',
        },
        'border-right-color': {
            customProp: '--darkreader-inline-border-right',
            cssProp: 'border-right-color',
            dataAttr: 'data-darkreader-inline-border-right',
        },
        'border-top-color': {
            customProp: '--darkreader-inline-border-top',
            cssProp: 'border-top-color',
            dataAttr: 'data-darkreader-inline-border-top',
        },
        'box-shadow': {
            customProp: '--darkreader-inline-boxshadow',
            cssProp: 'box-shadow',
            dataAttr: 'data-darkreader-inline-boxshadow',
        },
        'color': {
            customProp: '--darkreader-inline-color',
            cssProp: 'color',
            dataAttr: 'data-darkreader-inline-color',
        },
        'fill': {
            customProp: '--darkreader-inline-fill',
            cssProp: 'fill',
            dataAttr: 'data-darkreader-inline-fill',
        },
        'stroke': {
            customProp: '--darkreader-inline-stroke',
            cssProp: 'stroke',
            dataAttr: 'data-darkreader-inline-stroke',
        },
        'outline-color': {
            customProp: '--darkreader-inline-outline',
            cssProp: 'outline-color',
            dataAttr: 'data-darkreader-inline-outline',
        },
        'stop-color': {
            customProp: '--darkreader-inline-stopcolor',
            cssProp: 'stop-color',
            dataAttr: 'data-darkreader-inline-stopcolor',
        },
    };
    var overridesList = Object.values(overrides);
    var normalizedPropList = {};
    overridesList.forEach(function (_a) {
        var cssProp = _a.cssProp, customProp = _a.customProp;
        return normalizedPropList[customProp] = cssProp;
    });
    var INLINE_STYLE_ATTRS = ['style', 'fill', 'stop-color', 'stroke', 'bgcolor', 'color'];
    var INLINE_STYLE_SELECTOR = INLINE_STYLE_ATTRS.map(function (attr) { return "[".concat(attr, "]"); }).join(', ');
    function getInlineOverrideStyle() {
        return overridesList.map(function (_a) {
            var dataAttr = _a.dataAttr, customProp = _a.customProp, cssProp = _a.cssProp;
            return [
                "[".concat(dataAttr, "] {"),
                "  ".concat(cssProp, ": var(").concat(customProp, ") !important;"),
                '}',
            ].join('\\n');
        }).join('\\n');
    }
    function getInlineStyleElements(root) {
        var results = [];
        if (root instanceof Element && root.matches(INLINE_STYLE_SELECTOR)) {
            results.push(root);
        }
        if (root instanceof Element || (isShadowDomSupported && root instanceof ShadowRoot) || root instanceof Document) {
            push(results, root.querySelectorAll(INLINE_STYLE_SELECTOR));
        }
        return results;
    }
    var treeObservers = new Map();
    var attrObservers = new Map();
    function watchForInlineStyles(elementStyleDidChange, shadowRootDiscovered) {
        deepWatchForInlineStyles(document, elementStyleDidChange, shadowRootDiscovered);
        iterateShadowHosts(document.documentElement, function (host) {
            deepWatchForInlineStyles(host.shadowRoot, elementStyleDidChange, shadowRootDiscovered);
        });
    }
    function deepWatchForInlineStyles(root, elementStyleDidChange, shadowRootDiscovered) {
        if (treeObservers.has(root)) {
            treeObservers.get(root).disconnect();
            attrObservers.get(root).disconnect();
        }
        var discoveredNodes = new WeakSet();
        function discoverNodes(node) {
            getInlineStyleElements(node).forEach(function (el) {
                if (discoveredNodes.has(el)) {
                    return;
                }
                discoveredNodes.add(el);
                elementStyleDidChange(el);
            });
            iterateShadowHosts(node, function (n) {
                if (discoveredNodes.has(node)) {
                    return;
                }
                discoveredNodes.add(node);
                shadowRootDiscovered(n.shadowRoot);
                deepWatchForInlineStyles(n.shadowRoot, elementStyleDidChange, shadowRootDiscovered);
            });
        }
        var treeObserver = createOptimizedTreeObserver(root, {
            onMinorMutations: function (_a) {
                var additions = _a.additions;
                additions.forEach(function (added) { return discoverNodes(added); });
            },
            onHugeMutations: function () {
                discoverNodes(root);
            },
        });
        treeObservers.set(root, treeObserver);
        var attemptCount = 0;
        var start = null;
        var ATTEMPTS_INTERVAL = getDuration({ seconds: 10 });
        var RETRY_TIMEOUT = getDuration({ seconds: 2 });
        var MAX_ATTEMPTS_COUNT = 50;
        var cache = [];
        var timeoutId = null;
        var handleAttributeMutations = throttle(function (mutations) {
            mutations.forEach(function (m) {
                if (INLINE_STYLE_ATTRS.includes(m.attributeName)) {
                    elementStyleDidChange(m.target);
                }
            });
        });
        var attrObserver = new MutationObserver(function (mutations) {
            if (timeoutId) {
                cache.push.apply(cache, __spreadArray([], __read(mutations), false));
                return;
            }
            attemptCount++;
            var now = Date.now();
            if (start == null) {
                start = now;
            }
            else if (attemptCount >= MAX_ATTEMPTS_COUNT) {
                if (now - start < ATTEMPTS_INTERVAL) {
                    timeoutId = setTimeout(function () {
                        start = null;
                        attemptCount = 0;
                        timeoutId = null;
                        var attributeCache = cache;
                        cache = [];
                        handleAttributeMutations(attributeCache);
                    }, RETRY_TIMEOUT);
                    cache.push.apply(cache, __spreadArray([], __read(mutations), false));
                    return;
                }
                start = now;
                attemptCount = 1;
            }
            handleAttributeMutations(mutations);
        });
        attrObserver.observe(root, {
            attributes: true,
            attributeFilter: INLINE_STYLE_ATTRS.concat(overridesList.map(function (_a) {
                var dataAttr = _a.dataAttr;
                return dataAttr;
            })),
            subtree: true,
        });
        attrObservers.set(root, attrObserver);
    }
    function stopWatchingForInlineStyles() {
        treeObservers.forEach(function (o) { return o.disconnect(); });
        attrObservers.forEach(function (o) { return o.disconnect(); });
        treeObservers.clear();
        attrObservers.clear();
    }
    var inlineStyleCache = new WeakMap();
    var filterProps = ['brightness', 'contrast', 'grayscale', 'sepia', 'mode'];
    function getInlineStyleCacheKey(el, theme) {
        return INLINE_STYLE_ATTRS
            .map(function (attr) { return "".concat(attr, "=\\"").concat(el.getAttribute(attr), "\\""); })
            .concat(filterProps.map(function (prop) { return "".concat(prop, "=\\"").concat(theme[prop], "\\""); }))
            .join(' ');
    }
    function shouldIgnoreInlineStyle(element, selectors) {
        for (var i = 0, len = selectors.length; i < len; i++) {
            var ingnoredSelector = selectors[i];
            if (element.matches(ingnoredSelector)) {
                return true;
            }
        }
        return false;
    }
    function overrideInlineStyle(element, theme, ignoreInlineSelectors, ignoreImageSelectors) {
        var cacheKey = getInlineStyleCacheKey(element, theme);
        if (cacheKey === inlineStyleCache.get(element)) {
            return;
        }
        var unsetProps = new Set(Object.keys(overrides));
        function setCustomProp(targetCSSProp, modifierCSSProp, cssVal) {
            var isPropertyVariable = targetCSSProp.startsWith('--');
            var _a = isPropertyVariable ? {} : overrides[targetCSSProp], customProp = _a.customProp, dataAttr = _a.dataAttr;
            var mod = getModifiableCSSDeclaration(modifierCSSProp, cssVal, { style: element.style }, variablesStore, ignoreImageSelectors, null);
            if (!mod) {
                return;
            }
            var value = mod.value;
            if (typeof value === 'function') {
                value = value(theme);
            }
            if (isPropertyVariable && typeof value === 'object') {
                var typedValue = value;
                typedValue.declarations.forEach(function (_a) {
                    var property = _a.property, value = _a.value;
                    !(value instanceof Promise) && element.style.setProperty(property, value);
                });
            }
            else {
                element.style.setProperty(customProp, value);
                if (!element.hasAttribute(dataAttr)) {
                    element.setAttribute(dataAttr, '');
                }
                unsetProps.delete(targetCSSProp);
            }
        }
        if (ignoreInlineSelectors.length > 0) {
            if (shouldIgnoreInlineStyle(element, ignoreInlineSelectors)) {
                unsetProps.forEach(function (cssProp) {
                    element.removeAttribute(overrides[cssProp].dataAttr);
                });
                return;
            }
        }
        if (element.hasAttribute('bgcolor')) {
            var value = element.getAttribute('bgcolor');
            if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {
                value = "#".concat(value);
            }
            setCustomProp('background-color', 'background-color', value);
        }
        if (element.hasAttribute('color') && element.rel !== 'mask-icon') {
            var value = element.getAttribute('color');
            if (value.match(/^[0-9a-f]{3}$/i) || value.match(/^[0-9a-f]{6}$/i)) {
                value = "#".concat(value);
            }
            setCustomProp('color', 'color', value);
        }
        if (element instanceof SVGElement) {
            if (element.hasAttribute('fill')) {
                var SMALL_SVG_LIMIT_1 = 32;
                var value_1 = element.getAttribute('fill');
                if (value_1 !== 'none') {
                    if (!(element instanceof SVGTextElement)) {
                        var handleSVGElement = function () {
                            var _a = element.getBoundingClientRect(), width = _a.width, height = _a.height;
                            var isBg = (width > SMALL_SVG_LIMIT_1 || height > SMALL_SVG_LIMIT_1);
                            setCustomProp('fill', isBg ? 'background-color' : 'color', value_1);
                        };
                        if (isReadyStateComplete()) {
                            handleSVGElement();
                        }
                        else {
                            addReadyStateCompleteListener(handleSVGElement);
                        }
                    }
                    else {
                        setCustomProp('fill', 'color', value_1);
                    }
                }
            }
            if (element.hasAttribute('stop-color')) {
                setCustomProp('stop-color', 'background-color', element.getAttribute('stop-color'));
            }
        }
        if (element.hasAttribute('stroke')) {
            var value = element.getAttribute('stroke');
            setCustomProp('stroke', element instanceof SVGLineElement || element instanceof SVGTextElement ? 'border-color' : 'color', value);
        }
        element.style && iterateCSSDeclarations(element.style, function (property, value) {
            if (property === 'background-image' && value.includes('url')) {
                return;
            }
            if (overrides.hasOwnProperty(property) || (property.startsWith('--') && !normalizedPropList[property])) {
                setCustomProp(property, property, value);
            }
            else {
                var overridenProp = normalizedPropList[property];
                if (overridenProp &&
                    (!element.style.getPropertyValue(overridenProp) && !element.hasAttribute(overridenProp))) {
                    if (overridenProp === 'background-color' && element.hasAttribute('bgcolor')) {
                        return;
                    }
                    element.style.setProperty(property, '');
                }
            }
        });
        if (element.style && element instanceof SVGTextElement && element.style.fill) {
            setCustomProp('fill', 'color', element.style.getPropertyValue('fill'));
        }
        forEach(unsetProps, function (cssProp) {
            element.removeAttribute(overrides[cssProp].dataAttr);
        });
        inlineStyleCache.set(element, getInlineStyleCacheKey(element, theme));
    }

    var metaThemeColorName = 'theme-color';
    var metaThemeColorSelector = "meta[name=\\"".concat(metaThemeColorName, "\\"]");
    var srcMetaThemeColor = null;
    var observer = null;
    function changeMetaThemeColor(meta, theme) {
        srcMetaThemeColor = srcMetaThemeColor || meta.content;
        var color = parseColorWithCache(srcMetaThemeColor);
        if (!color) {
            return;
        }
        meta.content = modifyBackgroundColor(color, theme);
    }
    function changeMetaThemeColorWhenAvailable(theme) {
        var meta = document.querySelector(metaThemeColorSelector);
        if (meta) {
            changeMetaThemeColor(meta, theme);
        }
        else {
            if (observer) {
                observer.disconnect();
            }
            observer = new MutationObserver(function (mutations) {
                loop: for (var i = 0; i < mutations.length; i++) {
                    var addedNodes = mutations[i].addedNodes;
                    for (var j = 0; j < addedNodes.length; j++) {
                        var node = addedNodes[j];
                        if (node instanceof HTMLMetaElement && node.name === metaThemeColorName) {
                            observer.disconnect();
                            observer = null;
                            changeMetaThemeColor(node, theme);
                            break loop;
                        }
                    }
                }
            });
            observer.observe(document.head, { childList: true });
        }
    }
    function restoreMetaThemeColor() {
        if (observer) {
            observer.disconnect();
            observer = null;
        }
        var meta = document.querySelector(metaThemeColorSelector);
        if (meta && srcMetaThemeColor) {
            meta.content = srcMetaThemeColor;
        }
    }

    var themeCacheKeys = [
        'mode',
        'brightness',
        'contrast',
        'grayscale',
        'sepia',
        'darkSchemeBackgroundColor',
        'darkSchemeTextColor',
        'lightSchemeBackgroundColor',
        'lightSchemeTextColor',
    ];
    function getThemeKey(theme) {
        var resultKey = '';
        themeCacheKeys.forEach(function (key) {
            resultKey += "".concat(key, ":").concat(theme[key], ";");
        });
        return resultKey;
    }
    var asyncQueue = createAsyncTasksQueue();
    function createStyleSheetModifier() {
        var renderId = 0;
        var rulesTextCache = new Set();
        var rulesModCache = new Map();
        var varTypeChangeCleaners = new Set();
        var prevFilterKey = null;
        var hasNonLoadedLink = false;
        var wasRebuilt = false;
        function shouldRebuildStyle() {
            return hasNonLoadedLink && !wasRebuilt;
        }
        function modifySheet(options) {
            var rules = options.sourceCSSRules;
            var theme = options.theme, ignoreImageAnalysis = options.ignoreImageAnalysis, force = options.force, prepareSheet = options.prepareSheet, isAsyncCancelled = options.isAsyncCancelled;
            var rulesChanged = (rulesModCache.size === 0);
            var notFoundCacheKeys = new Set(rulesModCache.keys());
            var themeKey = getThemeKey(theme);
            var themeChanged = (themeKey !== prevFilterKey);
            if (hasNonLoadedLink) {
                wasRebuilt = true;
            }
            var modRules = [];
            iterateCSSRules(rules, function (rule) {
                var cssText = rule.cssText;
                var textDiffersFromPrev = false;
                notFoundCacheKeys.delete(cssText);
                if (rule.parentRule instanceof CSSMediaRule) {
                    cssText += ";".concat(rule.parentRule.media.mediaText);
                }
                if (!rulesTextCache.has(cssText)) {
                    rulesTextCache.add(cssText);
                    textDiffersFromPrev = true;
                }
                if (textDiffersFromPrev) {
                    rulesChanged = true;
                }
                else {
                    modRules.push(rulesModCache.get(cssText));
                    return;
                }
                var modDecs = [];
                rule.style && iterateCSSDeclarations(rule.style, function (property, value) {
                    var mod = getModifiableCSSDeclaration(property, value, rule, variablesStore, ignoreImageAnalysis, isAsyncCancelled);
                    if (mod) {
                        modDecs.push(mod);
                    }
                });
                var modRule = null;
                if (modDecs.length > 0) {
                    var parentRule = rule.parentRule;
                    modRule = { selector: rule.selectorText, declarations: modDecs, parentRule: parentRule };
                    modRules.push(modRule);
                }
                rulesModCache.set(cssText, modRule);
            }, function () {
                hasNonLoadedLink = true;
            });
            notFoundCacheKeys.forEach(function (key) {
                rulesTextCache.delete(key);
                rulesModCache.delete(key);
            });
            prevFilterKey = themeKey;
            if (!force && !rulesChanged && !themeChanged) {
                return;
            }
            renderId++;
            function setRule(target, index, rule) {
                var selector = rule.selector, declarations = rule.declarations;
                var getDeclarationText = function (dec) {
                    var property = dec.property, value = dec.value, important = dec.important, sourceValue = dec.sourceValue;
                    return "".concat(property, ": ").concat(value == null ? sourceValue : value).concat(important ? ' !important' : '', ";");
                };
                var cssRulesText = '';
                declarations.forEach(function (declarations) {
                    cssRulesText += "".concat(getDeclarationText(declarations), " ");
                });
                var ruleText = "".concat(selector, " { ").concat(cssRulesText, " }");
                target.insertRule(ruleText, index);
            }
            var asyncDeclarations = new Map();
            var varDeclarations = new Map();
            var asyncDeclarationCounter = 0;
            var varDeclarationCounter = 0;
            var rootReadyGroup = { rule: null, rules: [], isGroup: true };
            var groupRefs = new WeakMap();
            function getGroup(rule) {
                if (rule == null) {
                    return rootReadyGroup;
                }
                if (groupRefs.has(rule)) {
                    return groupRefs.get(rule);
                }
                var group = { rule: rule, rules: [], isGroup: true };
                groupRefs.set(rule, group);
                var parentGroup = getGroup(rule.parentRule);
                parentGroup.rules.push(group);
                return group;
            }
            varTypeChangeCleaners.forEach(function (clear) { return clear(); });
            varTypeChangeCleaners.clear();
            modRules.filter(function (r) { return r; }).forEach(function (_a) {
                var selector = _a.selector, declarations = _a.declarations, parentRule = _a.parentRule;
                var group = getGroup(parentRule);
                var readyStyleRule = { selector: selector, declarations: [], isGroup: false };
                var readyDeclarations = readyStyleRule.declarations;
                group.rules.push(readyStyleRule);
                function handleAsyncDeclaration(property, modified, important, sourceValue) {
                    var asyncKey = ++asyncDeclarationCounter;
                    var asyncDeclaration = { property: property, value: null, important: important, asyncKey: asyncKey, sourceValue: sourceValue };
                    readyDeclarations.push(asyncDeclaration);
                    var currentRenderId = renderId;
                    modified.then(function (asyncValue) {
                        if (!asyncValue || isAsyncCancelled() || currentRenderId !== renderId) {
                            return;
                        }
                        asyncDeclaration.value = asyncValue;
                        asyncQueue.add(function () {
                            if (isAsyncCancelled() || currentRenderId !== renderId) {
                                return;
                            }
                            rebuildAsyncRule(asyncKey);
                        });
                    });
                }
                function handleVarDeclarations(property, modified, important, sourceValue) {
                    var _a = modified, varDecs = _a.declarations, onTypeChange = _a.onTypeChange;
                    var varKey = ++varDeclarationCounter;
                    var currentRenderId = renderId;
                    var initialIndex = readyDeclarations.length;
                    var oldDecs = [];
                    if (varDecs.length === 0) {
                        var tempDec = { property: property, value: sourceValue, important: important, sourceValue: sourceValue, varKey: varKey };
                        readyDeclarations.push(tempDec);
                        oldDecs = [tempDec];
                    }
                    varDecs.forEach(function (mod) {
                        if (mod.value instanceof Promise) {
                            handleAsyncDeclaration(mod.property, mod.value, important, sourceValue);
                        }
                        else {
                            var readyDec = { property: mod.property, value: mod.value, important: important, sourceValue: sourceValue, varKey: varKey };
                            readyDeclarations.push(readyDec);
                            oldDecs.push(readyDec);
                        }
                    });
                    onTypeChange.addListener(function (newDecs) {
                        if (isAsyncCancelled() || currentRenderId !== renderId) {
                            return;
                        }
                        var readyVarDecs = newDecs.map(function (mod) {
                            return { property: mod.property, value: mod.value, important: important, sourceValue: sourceValue, varKey: varKey };
                        });
                        var index = readyDeclarations.indexOf(oldDecs[0], initialIndex);
                        readyDeclarations.splice.apply(readyDeclarations, __spreadArray([index, oldDecs.length], __read(readyVarDecs), false));
                        oldDecs = readyVarDecs;
                        rebuildVarRule(varKey);
                    });
                    varTypeChangeCleaners.add(function () { return onTypeChange.removeListeners(); });
                }
                declarations.forEach(function (_a) {
                    var property = _a.property, value = _a.value, important = _a.important, sourceValue = _a.sourceValue;
                    if (typeof value === 'function') {
                        var modified = value(theme);
                        if (modified instanceof Promise) {
                            handleAsyncDeclaration(property, modified, important, sourceValue);
                        }
                        else if (property.startsWith('--')) {
                            handleVarDeclarations(property, modified, important, sourceValue);
                        }
                        else {
                            readyDeclarations.push({ property: property, value: modified, important: important, sourceValue: sourceValue });
                        }
                    }
                    else {
                        readyDeclarations.push({ property: property, value: value, important: important, sourceValue: sourceValue });
                    }
                });
            });
            var sheet = prepareSheet();
            function buildStyleSheet() {
                function createTarget(group, parent) {
                    var rule = group.rule;
                    if (rule instanceof CSSMediaRule) {
                        var media = rule.media;
                        var index = parent.cssRules.length;
                        parent.insertRule("@media ".concat(media.mediaText, " {}"), index);
                        return parent.cssRules[index];
                    }
                    return parent;
                }
                function iterateReadyRules(group, target, styleIterator) {
                    group.rules.forEach(function (r) {
                        if (r.isGroup) {
                            var t = createTarget(r, target);
                            iterateReadyRules(r, t, styleIterator);
                        }
                        else {
                            styleIterator(r, target);
                        }
                    });
                }
                iterateReadyRules(rootReadyGroup, sheet, function (rule, target) {
                    var index = target.cssRules.length;
                    rule.declarations.forEach(function (_a) {
                        var asyncKey = _a.asyncKey, varKey = _a.varKey;
                        if (asyncKey != null) {
                            asyncDeclarations.set(asyncKey, { rule: rule, target: target, index: index });
                        }
                        if (varKey != null) {
                            varDeclarations.set(varKey, { rule: rule, target: target, index: index });
                        }
                    });
                    setRule(target, index, rule);
                });
            }
            function rebuildAsyncRule(key) {
                var _a = asyncDeclarations.get(key), rule = _a.rule, target = _a.target, index = _a.index;
                target.deleteRule(index);
                setRule(target, index, rule);
                asyncDeclarations.delete(key);
            }
            function rebuildVarRule(key) {
                var _a = varDeclarations.get(key), rule = _a.rule, target = _a.target, index = _a.index;
                target.deleteRule(index);
                setRule(target, index, rule);
            }
            buildStyleSheet();
        }
        return { modifySheet: modifySheet, shouldRebuildStyle: shouldRebuildStyle };
    }

    var STYLE_SELECTOR = 'style, link[rel*="stylesheet" i]:not([disabled])';
    function isFontsGoogleApiStyle(element) {
        if (!element.href) {
            return false;
        }
        try {
            var elementURL = new URL(element.href);
            return elementURL.hostname === 'fonts.googleapis.com';
        }
        catch (err) {
            logInfo("Couldn't construct ".concat(element.href, " as URL"));
            return false;
        }
    }
    function shouldManageStyle(element) {
        return (((element instanceof HTMLStyleElement) ||
            (element instanceof SVGStyleElement) ||
            (element instanceof HTMLLinkElement &&
                element.rel &&
                element.rel.toLowerCase().includes('stylesheet') &&
                element.href &&
                !element.disabled &&
                (isFirefox ? !element.href.startsWith('moz-extension://') : true) &&
                !isFontsGoogleApiStyle(element))) &&
            !element.classList.contains('darkreader') &&
            element.media.toLowerCase() !== 'print' &&
            !element.classList.contains('stylus'));
    }
    function getManageableStyles(node, results, deep) {
        if (results === void 0) { results = []; }
        if (deep === void 0) { deep = true; }
        if (shouldManageStyle(node)) {
            results.push(node);
        }
        else if (node instanceof Element || (isShadowDomSupported && node instanceof ShadowRoot) || node === document) {
            forEach(node.querySelectorAll(STYLE_SELECTOR), function (style) { return getManageableStyles(style, results, false); });
            if (deep) {
                iterateShadowHosts(node, function (host) { return getManageableStyles(host.shadowRoot, results, false); });
            }
        }
        return results;
    }
    var syncStyleSet = new WeakSet();
    var corsStyleSet = new WeakSet();
    var canOptimizeUsingProxy$1 = false;
    document.addEventListener('__darkreader__inlineScriptsAllowed', function () {
        canOptimizeUsingProxy$1 = true;
    });
    var loadingLinkCounter = 0;
    var rejectorsForLoadingLinks = new Map();
    function cleanLoadingLinks() {
        rejectorsForLoadingLinks.clear();
    }
    function manageStyle(element, _a) {
        var update = _a.update, loadingStart = _a.loadingStart, loadingEnd = _a.loadingEnd;
        var prevStyles = [];
        var next = element;
        while ((next = next.nextElementSibling) && next.matches('.darkreader')) {
            prevStyles.push(next);
        }
        var corsCopy = prevStyles.find(function (el) { return el.matches('.darkreader--cors') && !corsStyleSet.has(el); }) || null;
        var syncStyle = prevStyles.find(function (el) { return el.matches('.darkreader--sync') && !syncStyleSet.has(el); }) || null;
        var corsCopyPositionWatcher = null;
        var syncStylePositionWatcher = null;
        var cancelAsyncOperations = false;
        var isOverrideEmpty = true;
        var sheetModifier = createStyleSheetModifier();
        var observer = new MutationObserver(function () {
            update();
        });
        var observerOptions = { attributes: true, childList: true, subtree: true, characterData: true };
        function containsCSSImport() {
            return element instanceof HTMLStyleElement && element.textContent.trim().match(cssImportRegex);
        }
        function hasImports(cssRules, checkCrossOrigin) {
            var result = false;
            if (cssRules) {
                var rule = void 0;
                cssRulesLoop: for (var i = 0, len = cssRules.length; i < len; i++) {
                    rule = cssRules[i];
                    if (rule.href) {
                        if (checkCrossOrigin) {
                            if (rule.href.startsWith('http') && !rule.href.startsWith(location.origin)) {
                                result = true;
                                break cssRulesLoop;
                            }
                        }
                        else {
                            result = true;
                            break cssRulesLoop;
                        }
                    }
                }
            }
            return result;
        }
        function getRulesSync() {
            if (corsCopy) {
                return corsCopy.sheet.cssRules;
            }
            if (containsCSSImport()) {
                return null;
            }
            var cssRules = safeGetSheetRules();
            if (element instanceof HTMLLinkElement &&
                !isRelativeHrefOnAbsolutePath(element.href) &&
                hasImports(cssRules, false)) {
                return null;
            }
            if (hasImports(cssRules, true)) {
                return null;
            }
            return cssRules;
        }
        function insertStyle() {
            if (corsCopy) {
                if (element.nextSibling !== corsCopy) {
                    element.parentNode.insertBefore(corsCopy, element.nextSibling);
                }
                if (corsCopy.nextSibling !== syncStyle) {
                    element.parentNode.insertBefore(syncStyle, corsCopy.nextSibling);
                }
            }
            else if (element.nextSibling !== syncStyle) {
                element.parentNode.insertBefore(syncStyle, element.nextSibling);
            }
        }
        function createSyncStyle() {
            syncStyle = element instanceof SVGStyleElement ?
                document.createElementNS('http://www.w3.org/2000/svg', 'style') :
                document.createElement('style');
            syncStyle.classList.add('darkreader');
            syncStyle.classList.add('darkreader--sync');
            syncStyle.media = 'screen';
            if (element.title) {
                syncStyle.title = element.title;
            }
            syncStyleSet.add(syncStyle);
        }
        var isLoadingRules = false;
        var wasLoadingError = false;
        var loadingLinkId = ++loadingLinkCounter;
        function getRulesAsync() {
            return __awaiter(this, void 0, void 0, function () {
                var cssText, cssBasePath, _a, cssRules, accessError, fullCSSText;
                var _b;
                return __generator(this, function (_c) {
                    switch (_c.label) {
                        case 0:
                            if (!(element instanceof HTMLLinkElement)) return [3, 7];
                            _a = __read(getRulesOrError(), 2), cssRules = _a[0], accessError = _a[1];
                            if (!((!cssRules && !accessError && !isSafari) ||
                                (isSafari && !element.sheet) ||
                                isStillLoadingError(accessError))) return [3, 5];
                            _c.label = 1;
                        case 1:
                            _c.trys.push([1, 3, , 4]);
                            return [4, linkLoading(element, loadingLinkId)];
                        case 2:
                            _c.sent();
                            return [3, 4];
                        case 3:
                            _c.sent();
                            wasLoadingError = true;
                            return [3, 4];
                        case 4:
                            if (cancelAsyncOperations) {
                                return [2, null];
                            }
                            _b = __read(getRulesOrError(), 2), cssRules = _b[0], accessError = _b[1];
                            _c.label = 5;
                        case 5:
                            if (cssRules) {
                                if (!hasImports(cssRules, false)) {
                                    return [2, cssRules];
                                }
                            }
                            return [4, loadText(element.href)];
                        case 6:
                            cssText = _c.sent();
                            cssBasePath = getCSSBaseBath(element.href);
                            if (cancelAsyncOperations) {
                                return [2, null];
                            }
                            return [3, 8];
                        case 7:
                            if (containsCSSImport()) {
                                cssText = element.textContent.trim();
                                cssBasePath = getCSSBaseBath(location.href);
                            }
                            else {
                                return [2, null];
                            }
                            _c.label = 8;
                        case 8:
                            if (!cssText) return [3, 13];
                            _c.label = 9;
                        case 9:
                            _c.trys.push([9, 11, , 12]);
                            return [4, replaceCSSImports(cssText, cssBasePath)];
                        case 10:
                            fullCSSText = _c.sent();
                            corsCopy = createCORSCopy(element, fullCSSText);
                            return [3, 12];
                        case 11:
                            _c.sent();
                            return [3, 12];
                        case 12:
                            if (corsCopy) {
                                corsCopyPositionWatcher = watchForNodePosition(corsCopy, 'prev-sibling');
                                return [2, corsCopy.sheet.cssRules];
                            }
                            _c.label = 13;
                        case 13: return [2, null];
                    }
                });
            });
        }
        function details(options) {
            var rules = getRulesSync();
            if (!rules) {
                if (options.secondRound) {
                    return null;
                }
                if (isLoadingRules || wasLoadingError) {
                    return null;
                }
                isLoadingRules = true;
                loadingStart();
                getRulesAsync().then(function (results) {
                    isLoadingRules = false;
                    loadingEnd();
                    if (results) {
                        update();
                    }
                }).catch(function (err) {
                    isLoadingRules = false;
                    loadingEnd();
                });
                return null;
            }
            return { rules: rules };
        }
        var forceRenderStyle = false;
        function render(theme, ignoreImageAnalysis) {
            var rules = getRulesSync();
            if (!rules) {
                return;
            }
            cancelAsyncOperations = false;
            function removeCSSRulesFromSheet(sheet) {
                for (var i = sheet.cssRules.length - 1; i >= 0; i--) {
                    sheet.deleteRule(i);
                }
            }
            function prepareOverridesSheet() {
                if (!syncStyle) {
                    createSyncStyle();
                }
                syncStylePositionWatcher && syncStylePositionWatcher.stop();
                insertStyle();
                if (syncStyle.sheet == null) {
                    syncStyle.textContent = '';
                }
                var sheet = syncStyle.sheet;
                removeCSSRulesFromSheet(sheet);
                if (syncStylePositionWatcher) {
                    syncStylePositionWatcher.run();
                }
                else {
                    syncStylePositionWatcher = watchForNodePosition(syncStyle, 'prev-sibling', function () {
                        forceRenderStyle = true;
                        buildOverrides();
                    });
                }
                return syncStyle.sheet;
            }
            function buildOverrides() {
                var force = forceRenderStyle;
                forceRenderStyle = false;
                sheetModifier.modifySheet({
                    prepareSheet: prepareOverridesSheet,
                    sourceCSSRules: rules,
                    theme: theme,
                    ignoreImageAnalysis: ignoreImageAnalysis,
                    force: force,
                    isAsyncCancelled: function () { return cancelAsyncOperations; },
                });
                isOverrideEmpty = syncStyle.sheet.cssRules.length === 0;
                if (sheetModifier.shouldRebuildStyle()) {
                    addReadyStateCompleteListener(function () { return update(); });
                }
            }
            buildOverrides();
        }
        function getRulesOrError() {
            try {
                if (element.sheet == null) {
                    return [null, null];
                }
                return [element.sheet.cssRules, null];
            }
            catch (err) {
                return [null, err];
            }
        }
        function isStillLoadingError(error) {
            return error && error.message && error.message.includes('loading');
        }
        function safeGetSheetRules() {
            var _a = __read(getRulesOrError(), 2), cssRules = _a[0], err = _a[1];
            if (err) {
                return null;
            }
            return cssRules;
        }
        function watchForSheetChanges() {
            watchForSheetChangesUsingProxy();
            if (!isThunderbird && !(canOptimizeUsingProxy$1 && element.sheet)) {
                watchForSheetChangesUsingRAF();
            }
        }
        var rulesChangeKey = null;
        var rulesCheckFrameId = null;
        function getRulesChangeKey() {
            var rules = safeGetSheetRules();
            return rules ? rules.length : null;
        }
        function didRulesKeyChange() {
            return getRulesChangeKey() !== rulesChangeKey;
        }
        function watchForSheetChangesUsingRAF() {
            rulesChangeKey = getRulesChangeKey();
            stopWatchingForSheetChangesUsingRAF();
            var checkForUpdate = function () {
                if (didRulesKeyChange()) {
                    rulesChangeKey = getRulesChangeKey();
                    update();
                }
                if (canOptimizeUsingProxy$1 && element.sheet) {
                    stopWatchingForSheetChangesUsingRAF();
                    return;
                }
                rulesCheckFrameId = requestAnimationFrame(checkForUpdate);
            };
            checkForUpdate();
        }
        function stopWatchingForSheetChangesUsingRAF() {
            cancelAnimationFrame(rulesCheckFrameId);
        }
        var areSheetChangesPending = false;
        function onSheetChange() {
            canOptimizeUsingProxy$1 = true;
            stopWatchingForSheetChangesUsingRAF();
            if (areSheetChangesPending) {
                return;
            }
            function handleSheetChanges() {
                areSheetChangesPending = false;
                if (cancelAsyncOperations) {
                    return;
                }
                update();
            }
            areSheetChangesPending = true;
            if (typeof queueMicrotask === 'function') {
                queueMicrotask(handleSheetChanges);
            }
            else {
                requestAnimationFrame(handleSheetChanges);
            }
        }
        function watchForSheetChangesUsingProxy() {
            element.addEventListener('__darkreader__updateSheet', onSheetChange);
        }
        function stopWatchingForSheetChangesUsingProxy() {
            element.removeEventListener('__darkreader__updateSheet', onSheetChange);
        }
        function stopWatchingForSheetChanges() {
            stopWatchingForSheetChangesUsingProxy();
            stopWatchingForSheetChangesUsingRAF();
        }
        function pause() {
            observer.disconnect();
            cancelAsyncOperations = true;
            corsCopyPositionWatcher && corsCopyPositionWatcher.stop();
            syncStylePositionWatcher && syncStylePositionWatcher.stop();
            stopWatchingForSheetChanges();
        }
        function destroy() {
            pause();
            removeNode(corsCopy);
            removeNode(syncStyle);
            loadingEnd();
            if (rejectorsForLoadingLinks.has(loadingLinkId)) {
                var reject = rejectorsForLoadingLinks.get(loadingLinkId);
                rejectorsForLoadingLinks.delete(loadingLinkId);
                reject && reject();
            }
        }
        function watch() {
            observer.observe(element, observerOptions);
            if (element instanceof HTMLStyleElement) {
                watchForSheetChanges();
            }
        }
        var maxMoveCount = 10;
        var moveCount = 0;
        function restore() {
            if (!syncStyle) {
                return;
            }
            moveCount++;
            if (moveCount > maxMoveCount) {
                return;
            }
            insertStyle();
            corsCopyPositionWatcher && corsCopyPositionWatcher.skip();
            syncStylePositionWatcher && syncStylePositionWatcher.skip();
            if (!isOverrideEmpty) {
                forceRenderStyle = true;
                update();
            }
        }
        return {
            details: details,
            render: render,
            pause: pause,
            destroy: destroy,
            watch: watch,
            restore: restore,
        };
    }
    function linkLoading(link, loadingId) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2, new Promise(function (resolve, reject) {
                        var cleanUp = function () {
                            link.removeEventListener('load', onLoad);
                            link.removeEventListener('error', onError);
                            rejectorsForLoadingLinks.delete(loadingId);
                        };
                        var onLoad = function () {
                            cleanUp();
                            resolve();
                        };
                        var onError = function () {
                            cleanUp();
                            reject("Linkelement ".concat(loadingId, " couldn't be loaded. ").concat(link.href));
                        };
                        rejectorsForLoadingLinks.set(loadingId, function () {
                            cleanUp();
                            reject();
                        });
                        link.addEventListener('load', onLoad);
                        link.addEventListener('error', onError);
                        if (!link.href) {
                            onError();
                        }
                    })];
            });
        });
    }
    function getCSSImportURL(importDeclaration) {
        return getCSSURLValue(importDeclaration.substring(7).trim().replace(/;$/, '').replace(/screen$/, ''));
    }
    function loadText(url) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!url.startsWith('data:')) return [3, 3];
                        return [4, fetch(url)];
                    case 1: return [4, (_a.sent()).text()];
                    case 2: return [2, _a.sent()];
                    case 3: return [4, bgFetch({ url: url, responseType: 'text', mimeType: 'text/css', origin: window.location.origin })];
                    case 4: return [2, _a.sent()];
                }
            });
        });
    }
    function replaceCSSImports(cssText, basePath, cache) {
        if (cache === void 0) { cache = new Map(); }
        return __awaiter(this, void 0, void 0, function () {
            var importMatches, importMatches_1, importMatches_1_1, match, importURL, absoluteURL, importedCSS, e_1_1;
            var e_1, _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        cssText = removeCSSComments(cssText);
                        cssText = replaceCSSFontFace(cssText);
                        cssText = replaceCSSRelativeURLsWithAbsolute(cssText, basePath);
                        importMatches = getMatches(cssImportRegex, cssText);
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 10, 11, 12]);
                        importMatches_1 = __values(importMatches), importMatches_1_1 = importMatches_1.next();
                        _b.label = 2;
                    case 2:
                        if (!!importMatches_1_1.done) return [3, 9];
                        match = importMatches_1_1.value;
                        importURL = getCSSImportURL(match);
                        absoluteURL = getAbsoluteURL(basePath, importURL);
                        importedCSS = void 0;
                        if (!cache.has(absoluteURL)) return [3, 3];
                        importedCSS = cache.get(absoluteURL);
                        return [3, 7];
                    case 3:
                        _b.trys.push([3, 6, , 7]);
                        return [4, loadText(absoluteURL)];
                    case 4:
                        importedCSS = _b.sent();
                        cache.set(absoluteURL, importedCSS);
                        return [4, replaceCSSImports(importedCSS, getCSSBaseBath(absoluteURL), cache)];
                    case 5:
                        importedCSS = _b.sent();
                        return [3, 7];
                    case 6:
                        _b.sent();
                        importedCSS = '';
                        return [3, 7];
                    case 7:
                        cssText = cssText.split(match).join(importedCSS);
                        _b.label = 8;
                    case 8:
                        importMatches_1_1 = importMatches_1.next();
                        return [3, 2];
                    case 9: return [3, 12];
                    case 10:
                        e_1_1 = _b.sent();
                        e_1 = { error: e_1_1 };
                        return [3, 12];
                    case 11:
                        try {
                            if (importMatches_1_1 && !importMatches_1_1.done && (_a = importMatches_1.return)) _a.call(importMatches_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7];
                    case 12:
                        cssText = cssText.trim();
                        return [2, cssText];
                }
            });
        });
    }
    function createCORSCopy(srcElement, cssText) {
        if (!cssText) {
            return null;
        }
        var cors = document.createElement('style');
        cors.classList.add('darkreader');
        cors.classList.add('darkreader--cors');
        cors.media = 'screen';
        cors.textContent = cssText;
        srcElement.parentNode.insertBefore(cors, srcElement.nextSibling);
        cors.sheet.disabled = true;
        corsStyleSet.add(cors);
        return cors;
    }

    var observers = [];
    var observedRoots;
    var undefinedGroups = new Map();
    var elementsDefinitionCallback;
    function collectUndefinedElements(root) {
        if (!isDefinedSelectorSupported) {
            return;
        }
        forEach(root.querySelectorAll(':not(:defined)'), function (el) {
            var tag = el.tagName.toLowerCase();
            if (!tag.includes('-')) {
                var extendedTag = el.getAttribute('is');
                if (extendedTag) {
                    tag = extendedTag;
                }
                else {
                    return;
                }
            }
            if (!undefinedGroups.has(tag)) {
                undefinedGroups.set(tag, new Set());
                customElementsWhenDefined(tag).then(function () {
                    if (elementsDefinitionCallback) {
                        var elements = undefinedGroups.get(tag);
                        undefinedGroups.delete(tag);
                        elementsDefinitionCallback(Array.from(elements));
                    }
                });
            }
            undefinedGroups.get(tag).add(el);
        });
    }
    var canOptimizeUsingProxy = false;
    document.addEventListener('__darkreader__inlineScriptsAllowed', function () {
        canOptimizeUsingProxy = true;
    });
    var resolvers = new Map();
    function handleIsDefined(e) {
        canOptimizeUsingProxy = true;
        if (resolvers.has(e.detail.tag)) {
            var resolve = resolvers.get(e.detail.tag);
            resolve();
        }
    }
    function customElementsWhenDefined(tag) {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2, new Promise(function (resolve) {
                        if (window.customElements && typeof customElements.whenDefined === 'function') {
                            customElements.whenDefined(tag).then(function () { return resolve(); });
                        }
                        else if (canOptimizeUsingProxy) {
                            resolvers.set(tag, resolve);
                            document.dispatchEvent(new CustomEvent('__darkreader__addUndefinedResolver', { detail: { tag: tag } }));
                        }
                        else {
                            var checkIfDefined_1 = function () {
                                var elements = undefinedGroups.get(tag);
                                if (elements && elements.size > 0) {
                                    if (elements.values().next().value.matches(':defined')) {
                                        resolve();
                                    }
                                    else {
                                        requestAnimationFrame(checkIfDefined_1);
                                    }
                                }
                            };
                            requestAnimationFrame(checkIfDefined_1);
                        }
                    })];
            });
        });
    }
    function watchWhenCustomElementsDefined(callback) {
        elementsDefinitionCallback = callback;
    }
    function unsubscribeFromDefineCustomElements() {
        elementsDefinitionCallback = null;
        undefinedGroups.clear();
        document.removeEventListener('__darkreader__isDefined', handleIsDefined);
    }
    function watchForStyleChanges(currentStyles, update, shadowRootDiscovered) {
        stopWatchingForStyleChanges();
        var prevStyles = new Set(currentStyles);
        var prevStyleSiblings = new WeakMap();
        var nextStyleSiblings = new WeakMap();
        function saveStylePosition(style) {
            prevStyleSiblings.set(style, style.previousElementSibling);
            nextStyleSiblings.set(style, style.nextElementSibling);
        }
        function forgetStylePosition(style) {
            prevStyleSiblings.delete(style);
            nextStyleSiblings.delete(style);
        }
        function didStylePositionChange(style) {
            return (style.previousElementSibling !== prevStyleSiblings.get(style) ||
                style.nextElementSibling !== nextStyleSiblings.get(style));
        }
        currentStyles.forEach(saveStylePosition);
        function handleStyleOperations(operations) {
            var createdStyles = operations.createdStyles, removedStyles = operations.removedStyles, movedStyles = operations.movedStyles;
            createdStyles.forEach(function (s) { return saveStylePosition(s); });
            movedStyles.forEach(function (s) { return saveStylePosition(s); });
            removedStyles.forEach(function (s) { return forgetStylePosition(s); });
            createdStyles.forEach(function (s) { return prevStyles.add(s); });
            removedStyles.forEach(function (s) { return prevStyles.delete(s); });
            if (createdStyles.size + removedStyles.size + movedStyles.size > 0) {
                update({
                    created: Array.from(createdStyles),
                    removed: Array.from(removedStyles),
                    moved: Array.from(movedStyles),
                    updated: [],
                });
            }
        }
        function handleMinorTreeMutations(_a) {
            var additions = _a.additions, moves = _a.moves, deletions = _a.deletions;
            var createdStyles = new Set();
            var removedStyles = new Set();
            var movedStyles = new Set();
            additions.forEach(function (node) { return getManageableStyles(node).forEach(function (style) { return createdStyles.add(style); }); });
            deletions.forEach(function (node) { return getManageableStyles(node).forEach(function (style) { return removedStyles.add(style); }); });
            moves.forEach(function (node) { return getManageableStyles(node).forEach(function (style) { return movedStyles.add(style); }); });
            handleStyleOperations({ createdStyles: createdStyles, removedStyles: removedStyles, movedStyles: movedStyles });
            additions.forEach(function (n) {
                iterateShadowHosts(n, subscribeForShadowRootChanges);
                collectUndefinedElements(n);
            });
        }
        function handleHugeTreeMutations(root) {
            var styles = new Set(getManageableStyles(root));
            var createdStyles = new Set();
            var removedStyles = new Set();
            var movedStyles = new Set();
            styles.forEach(function (s) {
                if (!prevStyles.has(s)) {
                    createdStyles.add(s);
                }
            });
            prevStyles.forEach(function (s) {
                if (!styles.has(s)) {
                    removedStyles.add(s);
                }
            });
            styles.forEach(function (s) {
                if (!createdStyles.has(s) && !removedStyles.has(s) && didStylePositionChange(s)) {
                    movedStyles.add(s);
                }
            });
            handleStyleOperations({ createdStyles: createdStyles, removedStyles: removedStyles, movedStyles: movedStyles });
            iterateShadowHosts(root, subscribeForShadowRootChanges);
            collectUndefinedElements(root);
        }
        function handleAttributeMutations(mutations) {
            var updatedStyles = new Set();
            var removedStyles = new Set();
            mutations.forEach(function (m) {
                var target = m.target;
                if (target.isConnected) {
                    if (shouldManageStyle(target)) {
                        updatedStyles.add(target);
                    }
                    else if (target instanceof HTMLLinkElement && target.disabled) {
                        removedStyles.add(target);
                    }
                }
            });
            if (updatedStyles.size + removedStyles.size > 0) {
                update({
                    updated: Array.from(updatedStyles),
                    created: [],
                    removed: Array.from(removedStyles),
                    moved: [],
                });
            }
        }
        function observe(root) {
            var treeObserver = createOptimizedTreeObserver(root, {
                onMinorMutations: handleMinorTreeMutations,
                onHugeMutations: handleHugeTreeMutations,
            });
            var attrObserver = new MutationObserver(handleAttributeMutations);
            attrObserver.observe(root, { attributes: true, attributeFilter: ['rel', 'disabled', 'media', 'href'], subtree: true });
            observers.push(treeObserver, attrObserver);
            observedRoots.add(root);
        }
        function subscribeForShadowRootChanges(node) {
            var shadowRoot = node.shadowRoot;
            if (shadowRoot == null || observedRoots.has(shadowRoot)) {
                return;
            }
            observe(shadowRoot);
            shadowRootDiscovered(shadowRoot);
        }
        observe(document);
        iterateShadowHosts(document.documentElement, subscribeForShadowRootChanges);
        watchWhenCustomElementsDefined(function (hosts) {
            var newStyles = [];
            hosts.forEach(function (host) { return push(newStyles, getManageableStyles(host.shadowRoot)); });
            update({ created: newStyles, updated: [], removed: [], moved: [] });
            hosts.forEach(function (host) {
                var shadowRoot = host.shadowRoot;
                if (shadowRoot == null) {
                    return;
                }
                subscribeForShadowRootChanges(host);
                iterateShadowHosts(shadowRoot, subscribeForShadowRootChanges);
                collectUndefinedElements(shadowRoot);
            });
        });
        document.addEventListener('__darkreader__isDefined', handleIsDefined);
        collectUndefinedElements(document);
    }
    function resetObservers() {
        observers.forEach(function (o) { return o.disconnect(); });
        observers.splice(0, observers.length);
        observedRoots = new WeakSet();
    }
    function stopWatchingForStyleChanges() {
        resetObservers();
        unsubscribeFromDefineCustomElements();
    }

    function hexify(number) {
        return ((number < 16 ? '0' : '') + number.toString(16));
    }
    function generateUID() {
        if ('randomUUID' in crypto) {
            var uuid = crypto.randomUUID();
            return uuid.substring(0, 8) + uuid.substring(9, 13) + uuid.substring(14, 18) + uuid.substring(19, 23) + uuid.substring(24);
        }
        return Array.from(crypto.getRandomValues(new Uint8Array(16))).map(function (x) { return hexify(x); }).join('');
    }

    var adoptedStyleOverrides = new WeakMap();
    var overrideList = new WeakSet();
    function createAdoptedStyleSheetOverride(node) {
        var cancelAsyncOperations = false;
        function injectSheet(sheet, override) {
            var newSheets = __spreadArray([], __read(node.adoptedStyleSheets), false);
            var sheetIndex = newSheets.indexOf(sheet);
            var existingIndex = newSheets.indexOf(override);
            if (sheetIndex === existingIndex - 1) {
                return;
            }
            if (existingIndex >= 0) {
                newSheets.splice(existingIndex, 1);
            }
            newSheets.splice(sheetIndex + 1, 0, override);
            node.adoptedStyleSheets = newSheets;
        }
        function destroy() {
            cancelAsyncOperations = true;
            var newSheets = __spreadArray([], __read(node.adoptedStyleSheets), false);
            node.adoptedStyleSheets.forEach(function (adoptedStyleSheet) {
                if (overrideList.has(adoptedStyleSheet)) {
                    var existingIndex = newSheets.indexOf(adoptedStyleSheet);
                    if (existingIndex >= 0) {
                        newSheets.splice(existingIndex, 1);
                    }
                    adoptedStyleOverrides.delete(adoptedStyleSheet);
                    overrideList.delete(adoptedStyleSheet);
                }
            });
            node.adoptedStyleSheets = newSheets;
        }
        function render(theme, ignoreImageAnalysis) {
            node.adoptedStyleSheets.forEach(function (sheet) {
                if (overrideList.has(sheet)) {
                    return;
                }
                var rules = sheet.rules;
                var override = new CSSStyleSheet();
                function prepareOverridesSheet() {
                    for (var i = override.cssRules.length - 1; i >= 0; i--) {
                        override.deleteRule(i);
                    }
                    injectSheet(sheet, override);
                    adoptedStyleOverrides.set(sheet, override);
                    overrideList.add(override);
                    return override;
                }
                var sheetModifier = createStyleSheetModifier();
                sheetModifier.modifySheet({
                    prepareSheet: prepareOverridesSheet,
                    sourceCSSRules: rules,
                    theme: theme,
                    ignoreImageAnalysis: ignoreImageAnalysis,
                    force: false,
                    isAsyncCancelled: function () { return cancelAsyncOperations; },
                });
            });
        }
        return {
            render: render,
            destroy: destroy
        };
    }

    function injectProxy(enableStyleSheetsProxy) {
        document.dispatchEvent(new CustomEvent('__darkreader__inlineScriptsAllowed'));
        var addRuleDescriptor = Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype, 'addRule');
        var insertRuleDescriptor = Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype, 'insertRule');
        var deleteRuleDescriptor = Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype, 'deleteRule');
        var removeRuleDescriptor = Object.getOwnPropertyDescriptor(CSSStyleSheet.prototype, 'removeRule');
        var documentStyleSheetsDescriptor = enableStyleSheetsProxy ?
            Object.getOwnPropertyDescriptor(Document.prototype, 'styleSheets') : null;
        var shouldWrapHTMLElement = [
            'baidu.com',
            'baike.baidu.com',
            'ditu.baidu.com',
            'map.baidu.com',
            'maps.baidu.com',
            'haokan.baidu.com',
            'pan.baidu.com',
            'passport.baidu.com',
            'tieba.baidu.com',
            'www.baidu.com'
        ].includes(location.hostname);
        var getElementsByTagNameDescriptor = shouldWrapHTMLElement ?
            Object.getOwnPropertyDescriptor(Element.prototype, 'getElementsByTagName') : null;
        var cleanUp = function () {
            Object.defineProperty(CSSStyleSheet.prototype, 'addRule', addRuleDescriptor);
            Object.defineProperty(CSSStyleSheet.prototype, 'insertRule', insertRuleDescriptor);
            Object.defineProperty(CSSStyleSheet.prototype, 'deleteRule', deleteRuleDescriptor);
            Object.defineProperty(CSSStyleSheet.prototype, 'removeRule', removeRuleDescriptor);
            document.removeEventListener('__darkreader__cleanUp', cleanUp);
            document.removeEventListener('__darkreader__addUndefinedResolver', addUndefinedResolver);
            if (enableStyleSheetsProxy) {
                Object.defineProperty(Document.prototype, 'styleSheets', documentStyleSheetsDescriptor);
            }
            if (shouldWrapHTMLElement) {
                Object.defineProperty(Element.prototype, 'getElementsByTagName', getElementsByTagNameDescriptor);
            }
        };
        var addUndefinedResolver = function (e) {
            customElements.whenDefined(e.detail.tag).then(function () {
                document.dispatchEvent(new CustomEvent('__darkreader__isDefined', { detail: { tag: e.detail.tag } }));
            });
        };
        document.addEventListener('__darkreader__cleanUp', cleanUp);
        document.addEventListener('__darkreader__addUndefinedResolver', addUndefinedResolver);
        var updateSheetEvent = new Event('__darkreader__updateSheet');
        function proxyAddRule(selector, style, index) {
            addRuleDescriptor.value.call(this, selector, style, index);
            if (this.ownerNode && !this.ownerNode.classList.contains('darkreader')) {
                this.ownerNode.dispatchEvent(updateSheetEvent);
            }
            return -1;
        }
        function proxyInsertRule(rule, index) {
            var returnValue = insertRuleDescriptor.value.call(this, rule, index);
            if (this.ownerNode && !this.ownerNode.classList.contains('darkreader')) {
                this.ownerNode.dispatchEvent(updateSheetEvent);
            }
            return returnValue;
        }
        function proxyDeleteRule(index) {
            deleteRuleDescriptor.value.call(this, index);
            if (this.ownerNode && !this.ownerNode.classList.contains('darkreader')) {
                this.ownerNode.dispatchEvent(updateSheetEvent);
            }
        }
        function proxyRemoveRule(index) {
            removeRuleDescriptor.value.call(this, index);
            if (this.ownerNode && !this.ownerNode.classList.contains('darkreader')) {
                this.ownerNode.dispatchEvent(updateSheetEvent);
            }
        }
        function proxyDocumentStyleSheets() {
            var _this = this;
            var getCurrentValue = function () {
                var docSheets = documentStyleSheetsDescriptor.get.call(_this);
                var filteredSheets = __spreadArray([], __read(docSheets), false).filter(function (styleSheet) {
                    return !styleSheet.ownerNode.classList.contains('darkreader');
                });
                filteredSheets.item = function (item) {
                    return filteredSheets[item];
                };
                return Object.setPrototypeOf(filteredSheets, StyleSheetList.prototype);
            };
            var elements = getCurrentValue();
            var styleSheetListBehavior = {
                get: function (_, property) {
                    return getCurrentValue()[property];
                }
            };
            elements = new Proxy(elements, styleSheetListBehavior);
            return elements;
        }
        function proxyGetElementsByTagName(tagName) {
            var _this = this;
            if (tagName !== 'style') {
                return getElementsByTagNameDescriptor.value.call(this, tagName);
            }
            var getCurrentElementValue = function () {
                var elements = getElementsByTagNameDescriptor.value.call(_this, tagName);
                return Object.setPrototypeOf(__spreadArray([], __read(elements), false).filter(function (element) {
                    return !element.classList.contains('darkreader');
                }), NodeList.prototype);
            };
            var elements = getCurrentElementValue();
            var nodeListBehavior = {
                get: function (_, property) {
                    return getCurrentElementValue()[Number(property) || property];
                }
            };
            elements = new Proxy(elements, nodeListBehavior);
            return elements;
        }
        Object.defineProperty(CSSStyleSheet.prototype, 'addRule', Object.assign({}, addRuleDescriptor, { value: proxyAddRule }));
        Object.defineProperty(CSSStyleSheet.prototype, 'insertRule', Object.assign({}, insertRuleDescriptor, { value: proxyInsertRule }));
        Object.defineProperty(CSSStyleSheet.prototype, 'deleteRule', Object.assign({}, deleteRuleDescriptor, { value: proxyDeleteRule }));
        Object.defineProperty(CSSStyleSheet.prototype, 'removeRule', Object.assign({}, removeRuleDescriptor, { value: proxyRemoveRule }));
        if (enableStyleSheetsProxy) {
            Object.defineProperty(Document.prototype, 'styleSheets', Object.assign({}, documentStyleSheetsDescriptor, { get: proxyDocumentStyleSheets }));
        }
        if (shouldWrapHTMLElement) {
            Object.defineProperty(Element.prototype, 'getElementsByTagName', Object.assign({}, getElementsByTagNameDescriptor, { value: proxyGetElementsByTagName }));
        }
    }

    var INSTANCE_ID = generateUID();
    var styleManagers = new Map();
    var adoptedStyleManagers = [];
    var filter = null;
    var fixes = null;
    var isIFrame$1 = null;
    var ignoredImageAnalysisSelectors = null;
    var ignoredInlineSelectors = null;
    function createOrUpdateStyle(className, root) {
        if (root === void 0) { root = document.head || document; }
        var element = root.querySelector(".".concat(className));
        if (!element) {
            element = document.createElement('style');
            element.classList.add('darkreader');
            element.classList.add(className);
            element.media = 'screen';
            element.textContent = '';
        }
        return element;
    }
    function createOrUpdateScript(className, root) {
        if (root === void 0) { root = document.head || document; }
        var element = root.querySelector(".".concat(className));
        if (!element) {
            element = document.createElement('script');
            element.classList.add('darkreader');
            element.classList.add(className);
        }
        return element;
    }
    var nodePositionWatchers = new Map();
    function setupNodePositionWatcher(node, alias) {
        nodePositionWatchers.has(alias) && nodePositionWatchers.get(alias).stop();
        nodePositionWatchers.set(alias, watchForNodePosition(node, 'parent'));
    }
    function stopStylePositionWatchers() {
        forEach(nodePositionWatchers.values(), function (watcher) { return watcher.stop(); });
        nodePositionWatchers.clear();
    }
    function createStaticStyleOverrides() {
        var fallbackStyle = createOrUpdateStyle('darkreader--fallback', document);
        fallbackStyle.textContent = getModifiedFallbackStyle(filter, { strict: true });
        document.head.insertBefore(fallbackStyle, document.head.firstChild);
        setupNodePositionWatcher(fallbackStyle, 'fallback');
        var userAgentStyle = createOrUpdateStyle('darkreader--user-agent');
        userAgentStyle.textContent = getModifiedUserAgentStyle(filter, isIFrame$1, filter.styleSystemControls);
        document.head.insertBefore(userAgentStyle, fallbackStyle.nextSibling);
        setupNodePositionWatcher(userAgentStyle, 'user-agent');
        var textStyle = createOrUpdateStyle('darkreader--text');
        if (filter.useFont || filter.textStroke > 0) {
            textStyle.textContent = createTextStyle(filter);
        }
        else {
            textStyle.textContent = '';
        }
        document.head.insertBefore(textStyle, fallbackStyle.nextSibling);
        setupNodePositionWatcher(textStyle, 'text');
        var invertStyle = createOrUpdateStyle('darkreader--invert');
        if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {
            invertStyle.textContent = [
                "".concat(fixes.invert.join(', '), " {"),
                "    filter: ".concat(getCSSFilterValue(__assign(__assign({}, filter), { contrast: filter.mode === 0 ? filter.contrast : clamp(filter.contrast - 10, 0, 100) })), " !important;"),
                '}',
            ].join('\\n');
        }
        else {
            invertStyle.textContent = '';
        }
        document.head.insertBefore(invertStyle, textStyle.nextSibling);
        setupNodePositionWatcher(invertStyle, 'invert');
        var inlineStyle = createOrUpdateStyle('darkreader--inline');
        inlineStyle.textContent = getInlineOverrideStyle();
        document.head.insertBefore(inlineStyle, invertStyle.nextSibling);
        setupNodePositionWatcher(inlineStyle, 'inline');
        var overrideStyle = createOrUpdateStyle('darkreader--override');
        overrideStyle.textContent = fixes && fixes.css ? replaceCSSTemplates(fixes.css) : '';
        document.head.appendChild(overrideStyle);
        setupNodePositionWatcher(overrideStyle, 'override');
        var variableStyle = createOrUpdateStyle('darkreader--variables');
        var selectionColors = getSelectionColor(filter);
        var darkSchemeBackgroundColor = filter.darkSchemeBackgroundColor, darkSchemeTextColor = filter.darkSchemeTextColor, lightSchemeBackgroundColor = filter.lightSchemeBackgroundColor, lightSchemeTextColor = filter.lightSchemeTextColor, mode = filter.mode;
        var schemeBackgroundColor = mode === 0 ? lightSchemeBackgroundColor : darkSchemeBackgroundColor;
        var schemeTextColor = mode === 0 ? lightSchemeTextColor : darkSchemeTextColor;
        schemeBackgroundColor = modifyBackgroundColor(parseColorWithCache(schemeBackgroundColor), filter);
        schemeTextColor = modifyForegroundColor(parseColorWithCache(schemeTextColor), filter);
        variableStyle.textContent = [
            ":root {",
            "   --darkreader-neutral-background: ".concat(schemeBackgroundColor, ";"),
            "   --darkreader-neutral-text: ".concat(schemeTextColor, ";"),
            "   --darkreader-selection-background: ".concat(selectionColors.backgroundColorSelection, ";"),
            "   --darkreader-selection-text: ".concat(selectionColors.foregroundColorSelection, ";"),
            "}"
        ].join('\\n');
        document.head.insertBefore(variableStyle, inlineStyle.nextSibling);
        setupNodePositionWatcher(variableStyle, 'variables');
        var rootVarsStyle = createOrUpdateStyle('darkreader--root-vars');
        document.head.insertBefore(rootVarsStyle, variableStyle.nextSibling);
        var injectProxyArg = !(fixes && fixes.disableStyleSheetsProxy);
        {
            var proxyScript = createOrUpdateScript('darkreader--proxy');
            proxyScript.append("(".concat(injectProxy, ")(").concat(injectProxyArg, ")"));
            document.head.insertBefore(proxyScript, rootVarsStyle.nextSibling);
            proxyScript.remove();
        }
    }
    var shadowRootsWithOverrides = new Set();
    function createShadowStaticStyleOverrides(root) {
        var inlineStyle = createOrUpdateStyle('darkreader--inline', root);
        inlineStyle.textContent = getInlineOverrideStyle();
        root.insertBefore(inlineStyle, root.firstChild);
        var overrideStyle = createOrUpdateStyle('darkreader--override', root);
        overrideStyle.textContent = fixes && fixes.css ? replaceCSSTemplates(fixes.css) : '';
        root.insertBefore(overrideStyle, inlineStyle.nextSibling);
        var invertStyle = createOrUpdateStyle('darkreader--invert', root);
        if (fixes && Array.isArray(fixes.invert) && fixes.invert.length > 0) {
            invertStyle.textContent = [
                "".concat(fixes.invert.join(', '), " {"),
                "    filter: ".concat(getCSSFilterValue(__assign(__assign({}, filter), { contrast: filter.mode === 0 ? filter.contrast : clamp(filter.contrast - 10, 0, 100) })), " !important;"),
                '}',
            ].join('\\n');
        }
        else {
            invertStyle.textContent = '';
        }
        root.insertBefore(invertStyle, overrideStyle.nextSibling);
        shadowRootsWithOverrides.add(root);
    }
    function replaceCSSTemplates($cssText) {
        return $cssText.replace(/\\\${(.+?)}/g, function (_, $color) {
            var color = parseColorWithCache($color);
            if (color) {
                return modifyColor(color, filter);
            }
            return $color;
        });
    }
    function cleanFallbackStyle() {
        var fallback = document.querySelector('.darkreader--fallback');
        if (fallback) {
            fallback.textContent = '';
        }
    }
    function createDynamicStyleOverrides() {
        cancelRendering();
        var allStyles = getManageableStyles(document);
        var newManagers = allStyles
            .filter(function (style) { return !styleManagers.has(style); })
            .map(function (style) { return createManager(style); });
        newManagers
            .map(function (manager) { return manager.details({ secondRound: false }); })
            .filter(function (detail) { return detail && detail.rules.length > 0; })
            .forEach(function (detail) {
            variablesStore.addRulesForMatching(detail.rules);
        });
        variablesStore.matchVariablesAndDependants();
        variablesStore.setOnRootVariableChange(function () {
            variablesStore.putRootVars(document.head.querySelector('.darkreader--root-vars'), filter);
        });
        variablesStore.putRootVars(document.head.querySelector('.darkreader--root-vars'), filter);
        styleManagers.forEach(function (manager) { return manager.render(filter, ignoredImageAnalysisSelectors); });
        if (loadingStyles.size === 0) {
            cleanFallbackStyle();
        }
        newManagers.forEach(function (manager) { return manager.watch(); });
        var inlineStyleElements = toArray(document.querySelectorAll(INLINE_STYLE_SELECTOR));
        iterateShadowHosts(document.documentElement, function (host) {
            createShadowStaticStyleOverrides(host.shadowRoot);
            var elements = host.shadowRoot.querySelectorAll(INLINE_STYLE_SELECTOR);
            if (elements.length > 0) {
                push(inlineStyleElements, elements);
            }
        });
        inlineStyleElements.forEach(function (el) { return overrideInlineStyle(el, filter, ignoredInlineSelectors, ignoredImageAnalysisSelectors); });
        handleAdoptedStyleSheets(document);
    }
    var loadingStylesCounter = 0;
    var loadingStyles = new Set();
    function createManager(element) {
        var loadingStyleId = ++loadingStylesCounter;
        function loadingStart() {
            if (!isDOMReady() || !didDocumentShowUp) {
                loadingStyles.add(loadingStyleId);
                logInfo("Current amount of styles loading: ".concat(loadingStyles.size));
                var fallbackStyle = document.querySelector('.darkreader--fallback');
                if (!fallbackStyle.textContent) {
                    fallbackStyle.textContent = getModifiedFallbackStyle(filter, { strict: false });
                }
            }
        }
        function loadingEnd() {
            loadingStyles.delete(loadingStyleId);
            logInfo("Removed loadingStyle ".concat(loadingStyleId, ", now awaiting: ").concat(loadingStyles.size));
            if (loadingStyles.size === 0 && isDOMReady()) {
                cleanFallbackStyle();
            }
        }
        function update() {
            var details = manager.details({ secondRound: true });
            if (!details) {
                return;
            }
            variablesStore.addRulesForMatching(details.rules);
            variablesStore.matchVariablesAndDependants();
            manager.render(filter, ignoredImageAnalysisSelectors);
        }
        var manager = manageStyle(element, { update: update, loadingStart: loadingStart, loadingEnd: loadingEnd });
        styleManagers.set(element, manager);
        return manager;
    }
    function removeManager(element) {
        var manager = styleManagers.get(element);
        if (manager) {
            manager.destroy();
            styleManagers.delete(element);
        }
    }
    var throttledRenderAllStyles = throttle(function (callback) {
        styleManagers.forEach(function (manager) { return manager.render(filter, ignoredImageAnalysisSelectors); });
        adoptedStyleManagers.forEach(function (manager) { return manager.render(filter, ignoredImageAnalysisSelectors); });
        callback && callback();
    });
    var cancelRendering = function () {
        throttledRenderAllStyles.cancel();
    };
    function onDOMReady() {
        if (loadingStyles.size === 0) {
            cleanFallbackStyle();
            return;
        }
    }
    var documentVisibilityListener = null;
    var didDocumentShowUp = !document.hidden;
    function watchForDocumentVisibility(callback) {
        var alreadyWatching = Boolean(documentVisibilityListener);
        documentVisibilityListener = function () {
            if (!document.hidden) {
                stopWatchingForDocumentVisibility();
                callback();
                didDocumentShowUp = true;
            }
        };
        if (!alreadyWatching) {
            document.addEventListener('visibilitychange', documentVisibilityListener);
        }
    }
    function stopWatchingForDocumentVisibility() {
        document.removeEventListener('visibilitychange', documentVisibilityListener);
        documentVisibilityListener = null;
    }
    function createThemeAndWatchForUpdates() {
        createStaticStyleOverrides();
        function runDynamicStyle() {
            createDynamicStyleOverrides();
            watchForUpdates();
        }
        if (document.hidden && !filter.immediateModify) {
            watchForDocumentVisibility(runDynamicStyle);
        }
        else {
            runDynamicStyle();
        }
        changeMetaThemeColorWhenAvailable(filter);
    }
    function handleAdoptedStyleSheets(node) {
        try {
            if (Array.isArray(node.adoptedStyleSheets)) {
                if (node.adoptedStyleSheets.length > 0) {
                    var newManger = createAdoptedStyleSheetOverride(node);
                    adoptedStyleManagers.push(newManger);
                    newManger.render(filter, ignoredImageAnalysisSelectors);
                }
            }
        }
        catch (err) {
        }
    }
    function watchForUpdates() {
        var managedStyles = Array.from(styleManagers.keys());
        watchForStyleChanges(managedStyles, function (_a) {
            var created = _a.created, updated = _a.updated, removed = _a.removed, moved = _a.moved;
            var stylesToRemove = removed;
            var stylesToManage = created.concat(updated).concat(moved)
                .filter(function (style) { return !styleManagers.has(style); });
            var stylesToRestore = moved
                .filter(function (style) { return styleManagers.has(style); });
            stylesToRemove.forEach(function (style) { return removeManager(style); });
            var newManagers = stylesToManage
                .map(function (style) { return createManager(style); });
            newManagers
                .map(function (manager) { return manager.details({ secondRound: false }); })
                .filter(function (detail) { return detail && detail.rules.length > 0; })
                .forEach(function (detail) {
                variablesStore.addRulesForMatching(detail.rules);
            });
            variablesStore.matchVariablesAndDependants();
            newManagers.forEach(function (manager) { return manager.render(filter, ignoredImageAnalysisSelectors); });
            newManagers.forEach(function (manager) { return manager.watch(); });
            stylesToRestore.forEach(function (style) { return styleManagers.get(style).restore(); });
        }, function (shadowRoot) {
            createShadowStaticStyleOverrides(shadowRoot);
            handleAdoptedStyleSheets(shadowRoot);
        });
        watchForInlineStyles(function (element) {
            overrideInlineStyle(element, filter, ignoredInlineSelectors, ignoredImageAnalysisSelectors);
            if (element === document.documentElement) {
                var styleAttr = element.getAttribute('style') || '';
                if (styleAttr.includes('--')) {
                    variablesStore.matchVariablesAndDependants();
                    variablesStore.putRootVars(document.head.querySelector('.darkreader--root-vars'), filter);
                }
            }
        }, function (root) {
            createShadowStaticStyleOverrides(root);
            var inlineStyleElements = root.querySelectorAll(INLINE_STYLE_SELECTOR);
            if (inlineStyleElements.length > 0) {
                forEach(inlineStyleElements, function (el) { return overrideInlineStyle(el, filter, ignoredInlineSelectors, ignoredImageAnalysisSelectors); });
            }
        });
        addDOMReadyListener(onDOMReady);
    }
    function stopWatchingForUpdates() {
        styleManagers.forEach(function (manager) { return manager.pause(); });
        stopStylePositionWatchers();
        stopWatchingForStyleChanges();
        stopWatchingForInlineStyles();
        removeDOMReadyListener(onDOMReady);
        cleanReadyStateCompleteListeners();
    }
    var metaObserver;
    function addMetaListener() {
        metaObserver = new MutationObserver(function () {
            if (document.querySelector('meta[name="darkreader-lock"]')) {
                metaObserver.disconnect();
                removeDynamicTheme();
            }
        });
        metaObserver.observe(document.head, { childList: true, subtree: true });
    }
    function createDarkReaderInstanceMarker() {
        var metaElement = document.createElement('meta');
        metaElement.name = 'darkreader';
        metaElement.content = INSTANCE_ID;
        document.head.appendChild(metaElement);
    }
    function isAnotherDarkReaderInstanceActive() {
        if (document.querySelector('meta[name="darkreader-lock"]')) {
            return true;
        }
        var meta = document.querySelector('meta[name="darkreader"]');
        if (meta) {
            if (meta.content !== INSTANCE_ID) {
                return true;
            }
            return false;
        }
        createDarkReaderInstanceMarker();
        addMetaListener();
        return false;
    }
    function createOrUpdateDynamicTheme(filterConfig, dynamicThemeFixes, iframe) {
        filter = filterConfig;
        fixes = dynamicThemeFixes;
        if (fixes) {
            ignoredImageAnalysisSelectors = Array.isArray(fixes.ignoreImageAnalysis) ? fixes.ignoreImageAnalysis : [];
            ignoredInlineSelectors = Array.isArray(fixes.ignoreInlineStyle) ? fixes.ignoreInlineStyle : [];
        }
        else {
            ignoredImageAnalysisSelectors = [];
            ignoredInlineSelectors = [];
        }
        if (filter.immediateModify) {
            setIsDOMReady(function () {
                return true;
            });
        }
        isIFrame$1 = iframe;
        if (document.head) {
            if (isAnotherDarkReaderInstanceActive()) {
                return;
            }
            document.documentElement.setAttribute('data-darkreader-mode', 'dynamic');
            document.documentElement.setAttribute('data-darkreader-scheme', filter.mode ? 'dark' : 'dimmed');
            createThemeAndWatchForUpdates();
        }
        else {
            if (!isFirefox) {
                var fallbackStyle = createOrUpdateStyle('darkreader--fallback');
                document.documentElement.appendChild(fallbackStyle);
                fallbackStyle.textContent = getModifiedFallbackStyle(filter, { strict: true });
            }
            var headObserver_1 = new MutationObserver(function () {
                if (document.head) {
                    headObserver_1.disconnect();
                    if (isAnotherDarkReaderInstanceActive()) {
                        removeDynamicTheme();
                        return;
                    }
                    createThemeAndWatchForUpdates();
                }
            });
            headObserver_1.observe(document, { childList: true, subtree: true });
        }
    }
    function removeProxy() {
        document.dispatchEvent(new CustomEvent('__darkreader__cleanUp'));
        removeNode(document.head.querySelector('.darkreader--proxy'));
    }
    function removeDynamicTheme() {
        document.documentElement.removeAttribute("data-darkreader-mode");
        document.documentElement.removeAttribute("data-darkreader-scheme");
        cleanDynamicThemeCache();
        removeNode(document.querySelector('.darkreader--fallback'));
        if (document.head) {
            restoreMetaThemeColor();
            removeNode(document.head.querySelector('.darkreader--user-agent'));
            removeNode(document.head.querySelector('.darkreader--text'));
            removeNode(document.head.querySelector('.darkreader--invert'));
            removeNode(document.head.querySelector('.darkreader--inline'));
            removeNode(document.head.querySelector('.darkreader--override'));
            removeNode(document.head.querySelector('.darkreader--variables'));
            removeNode(document.head.querySelector('.darkreader--root-vars'));
            removeNode(document.head.querySelector('meta[name="darkreader"]'));
            removeProxy();
        }
        shadowRootsWithOverrides.forEach(function (root) {
            removeNode(root.querySelector('.darkreader--inline'));
            removeNode(root.querySelector('.darkreader--override'));
        });
        shadowRootsWithOverrides.clear();
        forEach(styleManagers.keys(), function (el) { return removeManager(el); });
        loadingStyles.clear();
        cleanLoadingLinks();
        forEach(document.querySelectorAll('.darkreader'), removeNode);
        adoptedStyleManagers.forEach(function (manager) {
            manager.destroy();
        });
        adoptedStyleManagers.splice(0);
        metaObserver && metaObserver.disconnect();
    }
    function cleanDynamicThemeCache() {
        variablesStore.clear();
        parsedURLCache.clear();
        stopWatchingForDocumentVisibility();
        cancelRendering();
        stopWatchingForUpdates();
        cleanModificationCache();
        clearColorCache();
    }

    var blobRegex = /url\\(\\"(blob\\:.*?)\\"\\)/g;
    function replaceBlobs(text) {
        return __awaiter(this, void 0, void 0, function () {
            var promises, data;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        promises = [];
                        getMatches(blobRegex, text, 1).forEach(function (url) {
                            var promise = loadAsDataURL(url);
                            promises.push(promise);
                        });
                        return [4, Promise.all(promises)];
                    case 1:
                        data = _a.sent();
                        return [2, text.replace(blobRegex, function () { return "url(\\"".concat(data.shift(), "\\")"); })];
                }
            });
        });
    }
    var banner = "/*\\n                        _______\\n                       /       \\\\\\n                      .==.    .==.\\n                     ((  ))==((  ))\\n                    / \\"==\\"    \\"==\\"\\\\\\n                   /____|| || ||___\\\\\\n       ________     ____    ________  ___    ___\\n       |  ___  \\\\   /    \\\\   |  ___  \\\\ |  |  /  /\\n       |  |  \\\\  \\\\ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |_/  /\\n       |  |   )  /  /__\\\\  \\\\ |  |__/  /|  ___  \\\\\\n       |  |__/  /  ______  \\\\|  ____  \\\\|  |  \\\\  \\\\\\n_______|_______/__/ ____ \\\\__\\\\__|___\\\\__\\\\__|___\\\\__\\\\____\\n|  ___  \\\\ |  ____/ /    \\\\   |  ___  \\\\ |  ____|  ___  \\\\\\n|  |  \\\\  \\\\|  |___ /  /\\\\  \\\\  |  |  \\\\  \\\\|  |___|  |  \\\\  \\\\\\n|  |__/  /|  ____/  /__\\\\  \\\\ |  |   )  |  ____|  |__/  /\\n|  ____  \\\\|  |__/  ______  \\\\|  |__/  /|  |___|  ____  \\\\\\n|__|   \\\\__\\\\____/__/      \\\\__\\\\_______/ |______|__|   \\\\__\\\\\\n                https://darkreader.org\\n*/\\n\\n/*! Dark reader generated CSS | Licensed under MIT https://github.com/darkreader/darkreader/blob/main/LICENSE */\\n";
    function collectCSS() {
        return __awaiter(this, void 0, void 0, function () {
            function addStaticCSS(selector, comment) {
                var staticStyle = document.querySelector(selector);
                if (staticStyle && staticStyle.textContent) {
                    css.push("/* ".concat(comment, " */"));
                    css.push(staticStyle.textContent);
                    css.push('');
                }
            }
            var css, modifiedCSS, formattedCSS, _a, _b;
            return __generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        css = [banner];
                        addStaticCSS('.darkreader--fallback', 'Fallback Style');
                        addStaticCSS('.darkreader--user-agent', 'User-Agent Style');
                        addStaticCSS('.darkreader--text', 'Text Style');
                        addStaticCSS('.darkreader--invert', 'Invert Style');
                        addStaticCSS('.darkreader--variables', 'Variables Style');
                        modifiedCSS = [];
                        document.querySelectorAll('.darkreader--sync').forEach(function (element) {
                            forEach(element.sheet.cssRules, function (rule) {
                                rule && rule.cssText && modifiedCSS.push(rule.cssText);
                            });
                        });
                        if (!modifiedCSS.length) return [3, 2];
                        formattedCSS = formatCSS(modifiedCSS.join('\\n'));
                        css.push('/* Modified CSS */');
                        _b = (_a = css).push;
                        return [4, replaceBlobs(formattedCSS)];
                    case 1:
                        _b.apply(_a, [_c.sent()]);
                        css.push('');
                        _c.label = 2;
                    case 2:
                        addStaticCSS('.darkreader--override', 'Override Style');
                        return [2, css.join('\\n')];
                }
            });
        });
    }

    var isDarkReaderEnabled = false;
    var isIFrame = (function () {
        try {
            return window.self !== window.top;
        }
        catch (err) {
            console.warn(err);
            return true;
        }
    })();
    function enable(themeOptions, fixes) {
        if (themeOptions === void 0) { themeOptions = {}; }
        if (fixes === void 0) { fixes = null; }
        var theme = __assign(__assign({}, DEFAULT_THEME), themeOptions);
        if (theme.engine !== ThemeEngines.dynamicTheme) {
            throw new Error('Theme engine is not supported.');
        }
        createOrUpdateDynamicTheme(theme, fixes, isIFrame);
        isDarkReaderEnabled = true;
    }
    function isEnabled() {
        return isDarkReaderEnabled;
    }
    function disable() {
        removeDynamicTheme();
        isDarkReaderEnabled = false;
    }
    var darkScheme = matchMedia('(prefers-color-scheme: dark)');
    var store = {
        themeOptions: null,
        fixes: null,
    };
    function handleColorScheme() {
        if (darkScheme.matches) {
            enable(store.themeOptions, store.fixes);
        }
        else {
            disable();
        }
    }
    function auto(themeOptions, fixes) {
        if (themeOptions === void 0) { themeOptions = {}; }
        if (fixes === void 0) { fixes = null; }
        if (themeOptions) {
            store = { themeOptions: themeOptions, fixes: fixes };
            handleColorScheme();
            if (isMatchMediaChangeEventListenerSupported) {
                darkScheme.addEventListener('change', handleColorScheme);
            }
            else {
                darkScheme.addListener(handleColorScheme);
            }
        }
        else {
            if (isMatchMediaChangeEventListenerSupported) {
                darkScheme.removeEventListener('change', handleColorScheme);
            }
            else {
                darkScheme.removeListener(handleColorScheme);
            }
            disable();
        }
    }
    function exportGeneratedCSS() {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4, collectCSS()];
                    case 1: return [2, _a.sent()];
                }
            });
        });
    }
    var setFetchMethod = setFetchMethod$1;

    exports.auto = auto;
    exports.disable = disable;
    exports.enable = enable;
    exports.exportGeneratedCSS = exportGeneratedCSS;
    exports.isEnabled = isEnabled;
    exports.setFetchMethod = setFetchMethod;

    Object.defineProperty(exports, '__esModule', { value: true });

}));
`;function Fh(e){return e.data.type===eO.text?URL.createObjectURL(new Blob([e.data.value],{type:e.mime})):`data:${e.mime};base64, ${e.data.value}`}function Vh(e,t){return t?new URL(e,t).toString():e}function pq(e,t){const r=new DOMParser().parseFromString(e.main.data.value,"text/html");if(r.querySelectorAll("script").forEach(a=>{a.remove()}),r.querySelectorAll("link").forEach(a=>{const l=a.getAttribute("rel");if(l)switch(l){case"canonical":case"icon":case"search":case"mask-icon":case"dns-prefetch":case"shortcut icon":case"preload":case"archives":case"manifest":case"shotcut icon":case"File-List":case"apple-touch-icon-precomposed":case"apple-touch-icon":{a.remove();return}}const c=a.getAttribute("type");if(c)switch(c){case"application/rss+xml":{a.remove();return}}let d=a.getAttribute("href")??null;if(!d)return;const h=e.main.url;if(!h)return;let p=e.resource.find(g=>g.url===Vh(d,h));if(p){if(p.mime==="text/css"){let b=function(k){let y=e.resource.find(_=>_.url===Vh(k,p.url));return y?Fh(y):k};p.data.value=Tk(b)(p.data.value)}const g=Fh(p);a.setAttribute("href",g)}else a.remove()}),r.querySelectorAll("[style]").forEach(a=>{const l=a.getAttribute("style");function c(d){let h=e.resource.find(p=>p.url===Vh(d,e.main.url));return h?Fh(h):d}a.setAttribute("style",Tk(c)(l))}),t==="dark"&&r.querySelectorAll("style").length<500){const a=r.createElement("script");a.innerHTML="DarkReader.enable({});",a.setAttribute("nonce","darkreader-run");const l=r.createElement("script");l.innerHTML=hq,l.setAttribute("nonce","darkreader"),r.head.prepend(a),r.head.prepend(l)}r.querySelectorAll("img").forEach(a=>{let l=a.getAttribute("src");if(!l||l!=null&&l.startsWith("data:"))return;const c=e.resource.find(d=>d.url===Vh(l,e.main.url));c?a.setAttribute("src",Fh(c)):a.remove()});const i=document.createElement("meta");i.setAttribute("http-equiv","Content-Security-Policy"),i.setAttribute("Content",`
    default-src 'none';
    style-src 'self' blob: 'unsafe-inline';
    img-src 'self' blob: data: 'unsafe-inline';
    font-src 'self' blob: data: 'unsafe-inline';
    script-src 'nonce-darkreader' 'nonce-darkreader-run' 'sha256-HiLNc7lONoPY5A5Y+POJ4S5UhrHuvGzjZTjw/t3azEU=';
    `),r.head.prepend(i),r.querySelectorAll("meta").forEach(a=>{a.getAttribute("http-equiv")==="Content-Type"&&a.remove()});const o=r.createElement("style");return o.textContent=`
  * {
    user-select: text !important;
  }
  `,r.body.appendChild(o),URL.createObjectURL(new Blob([r.documentElement.outerHTML],{type:e.main.mime}))}const gq=({website:e})=>{const t=Ft(gf),n=v.useMemo(()=>pq(e.content,t.theme),[e.content.main.data.value,t.theme]);ut(t.onThemeChanged);const r=v.useRef(null),i=Ft(Or);return v.useEffect(()=>{r.current&&i.createInstance(new Jt(zb,[r.current,e]))},[r,n]),ce("div",{style:{width:"100%",height:"100%"},children:[n&&E("iframe",{src:n,ref:r,style:{border:"none",height:"100%",width:"100%"}},n),!n&&E("div",{})]})},mq="_loading-container_u5ba3_1",vq="_loading_u5ba3_1",_q={"loading-container":"_loading-container_u5ba3_1",loadingContainer:mq,loading:vq},FO=e=>{const t=Ft(gr);ut(t.onLoadingStateChange);const n=e.webpageModel,r=!!n&&n.content;return ce("div",{style:{height:"100%",userSelect:"none",overflow:"hidden"},children:[t.isLoading(e.pageId)&&E("div",{className:_q.loadingContainer}),r&&E(gq,{website:n},n.currentWebsiteId),!r&&E("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"},children:E(Oc,{children:z("no_open_webpage","no webpage open")})})]})},yq=e=>{var i,o,s;const t=e.searchResultPageController;ut(t.list.onSelectItemChange),ut(t.onLayoutControllerChange),Ft(It).registerView(t.id,t),Po(Pg),Po(zc),ut((i=t.currentWebpage)==null?void 0:i.onModelChanged),ut(t.toolbar.onStatusChange);const r=(o=t.currentWebpage)==null?void 0:o.textModel.getProperty().liked;return E(GA,{layout:"column",toolbar:E(VA,{noWebpageSelect:!t.currentWebpage,toolbarController:t.toolbar,showMenu:t.showMenu,setShowMenu:a=>t.setShowMenu(a),menus:t.menus,liked:r,read:(s=t.currentWebpage)==null?void 0:s.textModel.getProperty().read}),webpage:E(FO,{pageId:t.pageId,webpageModel:t.currentWebpage}),list:ce("div",{style:{borderRight:"1px solid #e6e6e6",display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[!t.list&&E("div",{style:{overflowY:"scroll",flex:1,padding:16},children:"Loading..."}),E(gm,{itemHeight:70,empty:E(Oc,{children:z("search.not_found","Not found")}),customScoll:!0,renderListItem:(a,{focused:l,virtualList:c,listHeight:d})=>E(u7,{focused:l,currentItem:a,list:t.list,virtualList:c,listHeight:d},a.id),list:t.list})]}),showInfo:t.toolbar.rightPanel!==null,info:E(DA,{controller:t.toolbar,model:t.currentWebpage})})},bq="_icon-group_gcl8s_1",Sq="_item_gcl8s_8",wq="_active_gcl8s_17",k_={"icon-group":"_icon-group_gcl8s_1",iconGroup:bq,item:Sq,active:wq},Eq=e=>E("div",{className:k_.iconGroup,children:e.options.map(t=>E(No,{title:t.title,keyCode:t.keyCode,children:E("p",{onMouseDown:n=>n.preventDefault(),onClick:n=>{n.stopPropagation(),n.preventDefault(),e.onSelectKey(t.key)},className:Te(k_.item,{[k_.active]:t.key===e.activeKey}),children:t.renderIcon(16)})},t.key))});var Cq=v.createContext({});const VO=Cq;function Ki(e,t){xq(e)&&(e="100%");var n=kq(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function xq(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function kq(e){return typeof e=="string"&&e.indexOf("%")!==-1}function Iq(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Uh(e){return e<=1?"".concat(Number(e)*100,"%"):e}function I_(e){return e.length===1?"0"+e:String(e)}function Rq(e,t,n){return{r:Ki(e,255)*255,g:Ki(t,255)*255,b:Ki(n,255)*255}}function R_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Mq(e,t,n){var r,i,o;if(e=Ki(e,360),t=Ki(t,100),n=Ki(n,100),t===0)i=n,o=n,r=n;else{var s=n<.5?n*(1+t):n+t-n*t,a=2*n-s;r=R_(a,s,e+1/3),i=R_(a,s,e),o=R_(a,s,e-1/3)}return{r:r*255,g:i*255,b:o*255}}function Tq(e,t,n){e=Ki(e,255),t=Ki(t,255),n=Ki(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o=0,s=r,a=r-i,l=r===0?0:a/r;if(r===i)o=0;else{switch(r){case e:o=(t-n)/a+(t<n?6:0);break;case t:o=(n-e)/a+2;break;case n:o=(e-t)/a+4;break}o/=6}return{h:o,s:l,v:s}}function Lq(e,t,n){e=Ki(e,360)*6,t=Ki(t,100),n=Ki(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=r%6,c=[n,s,o,o,a,n][l],d=[a,n,n,s,o,o][l],h=[o,o,a,n,n,s][l];return{r:c*255,g:d*255,b:h*255}}function Aq(e,t,n,r){var i=[I_(Math.round(e).toString(16)),I_(Math.round(t).toString(16)),I_(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Lk(e){return Ei(e)/255}function Ei(e){return parseInt(e,16)}var Ak={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Bu(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,s=!1,a=!1;return typeof e=="string"&&(e=Nq(e)),typeof e=="object"&&(Bo(e.r)&&Bo(e.g)&&Bo(e.b)?(t=Rq(e.r,e.g,e.b),s=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Bo(e.h)&&Bo(e.s)&&Bo(e.v)?(r=Uh(e.s),i=Uh(e.v),t=Lq(e.h,r,i),s=!0,a="hsv"):Bo(e.h)&&Bo(e.s)&&Bo(e.l)&&(r=Uh(e.s),o=Uh(e.l),t=Mq(e.h,r,o),s=!0,a="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=Iq(n),{ok:s,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var Oq="[-\\+]?\\d+%?",Pq="[-\\+]?\\d*\\.\\d+%?",zs="(?:".concat(Pq,")|(?:").concat(Oq,")"),M_="[\\s|\\(]+(".concat(zs,")[,|\\s]+(").concat(zs,")[,|\\s]+(").concat(zs,")\\s*\\)?"),T_="[\\s|\\(]+(".concat(zs,")[,|\\s]+(").concat(zs,")[,|\\s]+(").concat(zs,")[,|\\s]+(").concat(zs,")\\s*\\)?"),io={CSS_UNIT:new RegExp(zs),rgb:new RegExp("rgb"+M_),rgba:new RegExp("rgba"+T_),hsl:new RegExp("hsl"+M_),hsla:new RegExp("hsla"+T_),hsv:new RegExp("hsv"+M_),hsva:new RegExp("hsva"+T_),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Nq(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(Ak[e])e=Ak[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=io.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=io.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=io.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=io.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=io.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=io.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=io.hex8.exec(e),n?{r:Ei(n[1]),g:Ei(n[2]),b:Ei(n[3]),a:Lk(n[4]),format:t?"name":"hex8"}:(n=io.hex6.exec(e),n?{r:Ei(n[1]),g:Ei(n[2]),b:Ei(n[3]),format:t?"name":"hex"}:(n=io.hex4.exec(e),n?{r:Ei(n[1]+n[1]),g:Ei(n[2]+n[2]),b:Ei(n[3]+n[3]),a:Lk(n[4]+n[4]),format:t?"name":"hex8"}:(n=io.hex3.exec(e),n?{r:Ei(n[1]+n[1]),g:Ei(n[2]+n[2]),b:Ei(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function Bo(e){return!!io.CSS_UNIT.exec(String(e))}var $h=2,Ok=.16,Dq=.05,Fq=.05,Vq=.15,UO=5,$O=4,Uq=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Pk(e){var t=e.r,n=e.g,r=e.b,i=Tq(t,n,r);return{h:i.h*360,s:i.s,v:i.v}}function Wh(e){var t=e.r,n=e.g,r=e.b;return"#".concat(Aq(t,n,r,!1))}function $q(e,t,n){var r=n/100,i={r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b};return i}function Nk(e,t,n){var r;return Math.round(e.h)>=60&&Math.round(e.h)<=240?r=n?Math.round(e.h)-$h*t:Math.round(e.h)+$h*t:r=n?Math.round(e.h)+$h*t:Math.round(e.h)-$h*t,r<0?r+=360:r>=360&&(r-=360),r}function Dk(e,t,n){if(e.h===0&&e.s===0)return e.s;var r;return n?r=e.s-Ok*t:t===$O?r=e.s+Ok:r=e.s+Dq*t,r>1&&(r=1),n&&t===UO&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function Fk(e,t,n){var r;return n?r=e.v+Fq*t:r=e.v-Vq*t,r>1&&(r=1),Number(r.toFixed(2))}function i0(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=Bu(e),i=UO;i>0;i-=1){var o=Pk(r),s=Wh(Bu({h:Nk(o,i,!0),s:Dk(o,i,!0),v:Fk(o,i,!0)}));n.push(s)}n.push(Wh(r));for(var a=1;a<=$O;a+=1){var l=Pk(r),c=Wh(Bu({h:Nk(l,a),s:Dk(l,a),v:Fk(l,a)}));n.push(c)}return t.theme==="dark"?Uq.map(function(d){var h=d.index,p=d.opacity,g=Wh($q(Bu(t.backgroundColor||"#141414"),Bu(n[h]),p*100));return g}):n}var L_={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},A_={},O_={};Object.keys(L_).forEach(function(e){A_[e]=i0(L_[e]),A_[e].primary=A_[e][5],O_[e]=i0(L_[e],{theme:"dark",backgroundColor:"#141414"}),O_[e].primary=O_[e][5]});function Wq(e,t){Zc(e,"[@ant-design/icons] ".concat(t))}function Vk(e){return Tn(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(Tn(e.icon)==="object"||typeof e.icon=="function")}function Uk(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,n){var r=e[n];switch(n){case"class":t.className=r,delete t.class;break;default:t[n]=r}return t},{})}function o0(e,t,n){return n?Q.createElement(e.tag,he(he({key:t},Uk(e.attrs)),n),(e.children||[]).map(function(r,i){return o0(r,"".concat(t,"-").concat(e.tag,"-").concat(i))})):Q.createElement(e.tag,he({key:t},Uk(e.attrs)),(e.children||[]).map(function(r,i){return o0(r,"".concat(t,"-").concat(e.tag,"-").concat(i))}))}function WO(e){return i0(e)[0]}function zO(e){return e?Array.isArray(e)?e:[e]:[]}var zq=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Bq=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zq,n=v.useContext(VO),r=n.csp;v.useEffect(function(){kL(t,"@ant-design-icons",{prepend:!0,csp:r})},[])},Hq=["icon","className","onClick","style","primaryColor","secondaryColor"],kd={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function jq(e){var t=e.primaryColor,n=e.secondaryColor;kd.primaryColor=t,kd.secondaryColor=n||WO(t),kd.calculated=!!n}function Kq(){return he({},kd)}var Em=function(t){var n=t.icon,r=t.className,i=t.onClick,o=t.style,s=t.primaryColor,a=t.secondaryColor,l=Un(t,Hq),c=kd;if(s&&(c={primaryColor:s,secondaryColor:a||WO(s)}),Bq(),Wq(Vk(n),"icon should be icon definiton, but got ".concat(n)),!Vk(n))return null;var d=n;return d&&typeof d.icon=="function"&&(d=he(he({},d),{},{icon:d.icon(c.primaryColor,c.secondaryColor)})),o0(d.icon,"svg-".concat(d.name),he({className:r,onClick:i,style:o,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l))};Em.displayName="IconReact";Em.getTwoToneColors=Kq;Em.setTwoToneColors=jq;const Iw=Em;function BO(e){var t=zO(e),n=_e(t,2),r=n[0],i=n[1];return Iw.setTwoToneColors({primaryColor:r,secondaryColor:i})}function Gq(){var e=Iw.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Yq=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];BO("#1890ff");var Cm=v.forwardRef(function(e,t){var n,r=e.className,i=e.icon,o=e.spin,s=e.rotate,a=e.tabIndex,l=e.onClick,c=e.twoToneColor,d=Un(e,Yq),h=v.useContext(VO),p=h.prefixCls,g=p===void 0?"anticon":p,b=h.rootClassName,k=Te(b,g,(n={},Ee(n,"".concat(g,"-").concat(i.name),!!i.name),Ee(n,"".concat(g,"-spin"),!!o||i.name==="loading"),n),r),y=a;y===void 0&&l&&(y=-1);var _=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,w=zO(c),x=_e(w,2),C=x[0],F=x[1];return v.createElement("span",he(he({role:"img","aria-label":i.name},d),{},{ref:t,tabIndex:y,onClick:l,className:k}),v.createElement(Iw,{icon:i,primaryColor:C,secondaryColor:F,style:_}))});Cm.displayName="AntdIcon";Cm.getTwoToneColor=Gq;Cm.setTwoToneColor=BO;const HO=Cm;var qq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"};const Qq=qq;var jO=function(t,n){return v.createElement(HO,he(he({},t),{},{ref:n,icon:Qq}))};jO.displayName="CloseOutlined";const Rw=v.forwardRef(jO);var Xq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};const Zq=Xq;var KO=function(t,n){return v.createElement(HO,he(he({},t),{},{ref:n,icon:Zq}))};KO.displayName="PlusOutlined";const Jq=v.forwardRef(KO),eQ="_filter-rule_115z2_1",tQ="_left_115z2_10",nQ="_mid_115z2_11",rQ="_right_115z2_12",iQ="_close_115z2_13",oQ="_editable-right_115z2_27",Tr={"filter-rule":"_filter-rule_115z2_1",filterRule:eQ,left:tQ,mid:nQ,right:rQ,close:iQ,"editable-right":"_editable-right_115z2_27",editableRight:oQ},sQ=e=>{const t=()=>{e.controller.delete(e.offset)},n=()=>{e.controller.switchOperator(e.offset)};return ce("div",{className:Tr.filterRule,children:[E("div",{className:Tr.left,children:e.desc.leftOperandLabel}),E("div",{className:Tr.mid,onClick:n,children:e.filterValue.operator?e.desc.equalOperatorLabel:e.desc.inequalityOperatorLabel}),E("div",{className:Tr.right,children:e.desc.rightOperandLabel}),E("div",{className:Tr.close,onClick:t,children:E(Rw,{})})]})},aQ=({desc:e,filterValue:t,offset:n,controller:r})=>{const i=()=>{r.switchOperator(n)},o=()=>{r.delete(n)};return ce("div",{className:Tr.filterRule,children:[E("div",{className:Tr.left,children:e.leftOperandLabel}),E("div",{className:Tr.mid,onClick:i,children:e.getOperatorLabel(t)}),E("div",{className:Te(Tr.right,Tr.editableRight),onClick:s=>{const a=s.currentTarget.getBoundingClientRect(),l={x:a.left,y:a.top+34};r.edit(n,l)},children:e.getRightOperandLabel(t)}),E("div",{className:Tr.close,onClick:o,children:E(Rw,{})})]})},lQ=e=>{const{desc:t,filterValue:n}=e,r=e.desc.getRightOperandProps(n),i=()=>{e.controller.delete(e.offset)},o=()=>{e.controller.switchOperator(e.offset)},s=a=>{const l=a.currentTarget.getBoundingClientRect(),c={x:l.left,y:l.top+34};e.controller.edit(e.offset,c)};return ce("div",{className:Tr.filterRule,children:[E("div",{className:Tr.left,children:t.leftOperandLabel}),E("div",{className:Tr.mid,onClick:o,children:E("span",{children:t.getOperatorLabel(n)})}),E("div",{className:Te(Tr.right,Tr.editableRight),onClick:s,children:E("span",{title:r.title,children:r.label})}),E("div",{className:Tr.close,onClick:i,children:E(Rw,{})})]})},cQ=e=>{const{filterModel:t,filtersDesc:n}=e;return E(Q.Fragment,{children:t.filters.map((r,i)=>{let o=n.find(s=>s.key===r.key);if(!o)return null;switch(r.type){case xt.constant:return E(sQ,{controller:e.view,desc:o,offset:i,filterValue:r},i);case xt.select:return E(aQ,{controller:e.view,desc:o,offset:i,filterValue:r},i);case xt.multiple_selection:return E(lQ,{controller:e.view,desc:o,offset:i,filterValue:r},i)}})})},uQ="_filter-panel_1nf1b_1",dQ="_filter-panel-item_1nf1b_21",fQ="_filter-text_1nf1b_28",hQ="_filter-panel-item-active_1nf1b_36",pQ="_content_1nf1b_41",bc={"filter-panel":"_filter-panel_1nf1b_1",filterPanel:uQ,"filter-panel-item":"_filter-panel-item_1nf1b_21",filterPanelItem:dQ,"filter-text":"_filter-text_1nf1b_28",filterText:fQ,"filter-panel-item-active":"_filter-panel-item-active_1nf1b_36",filterPanelItemActive:hQ,content:pQ},Mw=e=>{let t={};return e.panelView.pos&&(t.top=e.panelView.pos.y,t.left=e.panelView.pos.x),E("div",{className:bc.filterPanel,style:t,children:e.children})},gQ=e=>{const{panelView:t}=e,{inputRef:n,containerRef:r}=JS({onClose:()=>{t.hide()}});return Po(df),e.panelView.pos&&(e.panelView.pos.y,e.panelView.pos.x),ce(Mw,{panelView:t,children:[E("input",{ref:n,placeholder:z("filter_widget.placeholder","filter..."),value:t.searchQuery,onChange:i=>{t.updateFilterQuery(i.target.value)}}),E("div",{ref:r,children:t.filterDesc.map((i,o)=>E("div",{onClick:()=>{e.panelView.select(i)},onMouseEnter:()=>{t.FocusDesc(o)},className:Te(bc["filter-panel-item"],{[bc.filterPanelItemActive]:o===e.panelView.activeDescIndex}),children:i.label},o))})]})},mQ=e=>{const t=e.panelView,n=t.widget;ut(n.onStateChange),Po(uf);const{inputRef:r,containerRef:i}=JS({onClose:()=>{t.complete()}});return ce(Mw,{panelView:t,children:[E("input",{ref:r,value:n.searchQuery,onChange:o=>{n.updateFilterQuery(o.target.value)}}),E("div",{className:bc.content,ref:i,children:n.rightOperands.map((o,s)=>E("div",{className:Te(bc.filterPanelItem,{[bc.filterPanelItemActive]:s===n.focusItem}),onMouseEnter:()=>{n.setFocusItem(s)},onMouseDown:a=>a.preventDefault(),onClick:()=>{n.select(o.count),t.complete()},children:o.labels}))})]})},vQ="_filter-container_1jdst_1",_Q="_add-filter-icon_1jdst_8",yQ="_filter-matcher_1jdst_20",bQ="_filter-save-menu_1jdst_37",SQ="_left-part_1jdst_44",wQ="_right-part_1jdst_49",Hu={"filter-container":"_filter-container_1jdst_1",filterContainer:vQ,"add-filter-icon":"_add-filter-icon_1jdst_8",addFilterIcon:_Q,"filter-matcher":"_filter-matcher_1jdst_20",filterMatcher:yQ,"filter-save-menu":"_filter-save-menu_1jdst_37",filterSaveMenu:bQ,"left-part":"_left-part_1jdst_44",leftPart:SQ,"right-part":"_right-part_1jdst_49",rightPart:wQ},P_=e=>ce("div",{style:{fontSize:13,fontWeight:400,color:"#666666",height:16,lineHeight:"16px",...e.style},children:[E("span",{children:e.left}),E("span",{style:{display:"inline-block",padding:"0 4px",margin:"0 4px",background:"#F7F8FA",borderRadius:2,color:"#333333",fontSize:13,cursor:"pointer"},onClick:e.onClick,children:e.middle}),e.right&&E("span",{children:e.right})]}),EQ=e=>{var l,c;const t=e.model,[n,r]=v.useState(),i=Ft(It),o=Ft(us);v.useEffect(()=>{const d=new vi(e.model,e.filters);i.registerView(vi.id,d),r(d)},[e.model]),fa(qI).set(e.change),Po(k0),ut(n==null?void 0:n.onDidViewStateChange),ut(t.onDidChange),ns((n==null?void 0:n.onSave)??null,()=>{e.onSave()}),n==null||n.updateDesc(e.filters);const a=()=>{t.toggleMatch()};return n?ce("div",{className:Hu.filterContainer,children:[n.showPanel&&E(gQ,{panelView:n}),((l=n.widget)==null?void 0:l.desc.type)===xt.select&&E(mQ,{panelView:n}),((c=n.widget)==null?void 0:c.desc.type)===xt.multiple_selection&&E(Mw,{panelView:n,children:E(SA,{controller:n.widget.controller})}),ce("div",{className:Hu.filterSaveMenu,children:[ce("div",{className:Hu.leftPart,children:[E(P_,{style:{marginRight:16},onClick:()=>{t.updateSort(UF(t.sortBy))},left:z("view_sort_by","Sort By"),middle:FI(t.sortBy),right:""}),n.showMatch&&E(P_,{style:{marginRight:16},onClick:a,left:z("filter_match.match","Match"),right:z("filter_match.filter","filter"),middle:n.MatchAll?z("filter_match.all","all"):z("filter_match.any","any")}),t.limit.enabled&&E(P_,{onClick:()=>{o.executeCommand(M0)},left:z("filter_limit.limit","Limit"),middle:String(t.limit.count),right:z("filter_limit.webpages","Webpages")})]}),ce("div",{className:Hu.rightPart,children:[E(pr,{style:{marginRight:8},onClick:()=>{e.onReset()},disabled:!e.change,type:"text",size:"small",children:z("filter_cancel","Cancel")}),E(pr,{type:"primary",size:"small",disabled:!e.change,onClick:()=>{e.onSave()},children:e.saveButtonText})]})]}),ce("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[E(cQ,{filterModel:t,filtersDesc:e.filters,view:n}),E("div",{id:"add-filter-icon",className:Hu.addFilterIcon,onClick:d=>{const h=d.currentTarget.getBoundingClientRect(),p={x:h.left,y:h.top+34};n.show(p)},children:E(No,{title:z("filter.filter","Filter"),keyCode:U.KEY_F,children:ce("span",{children:[E(Jq,{})," ",t.filters.length===0?z("filter.filter","Filter"):""]})})})]})]}):E("div",{children:"Loading"})},Ea=Lt.and(cR,I0.negate());De.registerCommandAndKeybindingRule({id:JV,weight:Fe.WorkbenchContrib+5,when:Lt.and(Ea,ff.isEqualTo("list")),primary:U.Space,handler:e=>{const n=e.get(Yn).pageInstance;n instanceof Fn&&n.showWebb()}});De.registerCommandAndKeybindingRule({id:e4,weight:Fe.WorkbenchContrib+5,when:Lt.and(Ea,Ug,ff.isEqualTo("list")),primary:U.Escape,handler:e=>{const n=e.get(Yn).pageInstance;n instanceof Fn&&n.hideList()}});De.registerCommandAndKeybindingRule({id:t4,weight:Fe.WorkbenchContrib+5,when:Lt.and(Ea,Ug,ff.isEqualTo("list")),primary:U.KEY_J,handler:e=>{const n=e.get(Yn).pageInstance;n instanceof Fn&&n.list.selectNext(!0)}});De.registerCommandAndKeybindingRule({id:n4,weight:Fe.WorkbenchContrib+5,when:Lt.and(Ea,Ug,ff.isEqualTo("list")),primary:U.KEY_K,handler:e=>{const n=e.get(Yn).pageInstance;n instanceof Fn&&n.list.selectPrevious(!0)}});De.registerCommandAndKeybindingRule({id:dR,weight:Fe.WorkbenchContrib+5,when:Lt.and(Ea),primary:U.KEY_L,handler:e=>{const t=e.get(Yn),n=e.get(gr),r=t.pageInstance,i=n.getWebpageModel(r.pageId);i&&(i.textModel.liked=!i.textModel.liked)}});De.registerCommandAndKeybindingRule({id:fR,weight:Fe.WorkbenchContrib+5,when:Lt.and(Ea),primary:U.KEY_R,handler:e=>{const t=e.get(Yn),n=e.get(gr),r=t.pageInstance,i=n.getWebpageModel(r.pageId);i&&(i.textModel.read=!i.textModel.read)}});De.registerCommandAndKeybindingRule({id:ZV,weight:Fe.WorkbenchContrib+5,when:Lt.and(Ea,uR),primary:U.KEY_T,handler:e=>{const t=e.get(Yn),n=e.get(gr),r=t.pageInstance,i=n.getWebpageModel(r.pageId);i&&i.startEditTag()}});De.registerCommandAndKeybindingRule({id:hR,weight:Fe.WorkbenchContrib+5,when:Lt.and(Ea),handler:e=>{const t=e.get(Yn),n=e.get(gr),r=t.pageInstance,i=n.getWebpageModel(r.pageId);i!=null&&i.currentWebsiteId&&(r instanceof Fn||r instanceof os)&&r.list.delete(i==null?void 0:i.currentWebsiteId)}});const CQ=()=>E(Q.Fragment,{children:ce("svg",{width:240,viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[E("path",{d:"m115.5 85.7 1.3-4.7 3.4 3.5-4.7 1.2ZM283.7 146.6l-4.4 2.5V144l4.4 2.6ZM147.1 66.2a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",fill:"#fff",stroke:"#0C296E",strokeWidth:".5",strokeMiterlimit:"10"}),E("path",{d:"M181.7 101.3a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM236.4 77.7a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",fill:"#fff",stroke:"#0C296E",strokeWidth:".479",strokeMiterlimit:"10"}),E("path",{d:"m279.5 171-1.6-2.2-2.7-.1 2.2-1.6.1-2.8 1.6 2.3 2.7.1-2.2 1.6-.1 2.7Z",fill:"#ffdd83"}),E("path",{d:"M269.4 94.5v100c0 6.2-5 11.2-11.2 11.2l-121.1-.2v-111c0-5.7 4.6-10.4 10.4-10.4h111.7c5.6.1 10.2 4.7 10.2 10.4Z",fill:"#31bccc"}),E("path",{d:"M244.1 70H156v127.1h94.3V77.3l-6.2-7.3Z",fill:"#E6ECFF"}),E("path",{d:"m243.2 77.1.9-7.1 6.2 7.3-7.1-.2Z",fill:"#C2D4FF"}),E("path",{d:"M233.7 88.8h-61.5V94h61.5v-5.2ZM230.9 99.2h-58.7v5.2h58.7v-5.2ZM220.2 109.8h-48v5.2h48v-5.2Z",fill:"#D4D4D4"}),E("path",{d:"M269.4 192.6v2c0 6.2-5 11.2-11.2 11.2l-121.1-1.6v-11.6h132.3Z",fill:"#0C296E"}),E("path",{d:"M127.9 205.4c-6.3-3.7-10.6-10-11.8-17.1L103.8 117c-1-3.7 1.8-7.4 5.7-7.4h46.8l2.9 6c2.5 5.2 7.9 8.5 13.7 8.4l57.7-.4c2.6 0 5 1.7 5.7 4.2l11.6 61c1.3 6.7 5.1 12.6 10.7 16.5H127.9v.1Z",fill:"#fff",stroke:"#0C296E",strokeWidth:".5",strokeMiterlimit:"10"}),E("path",{d:"m187.9 166.3-10.4-17.6-10 17.7h5.8l.1 14.7 8.8-.1-.1-14.7h5.8Z",fill:"#ffdd83"}),E("path",{d:"M106.3 134.4h131.1",stroke:"#0C296E",strokeWidth:".5",strokeMiterlimit:"10"}),E("path",{d:"M296 70.8c.3-1.1.4-2.2.4-3.4-.3-4.1-3.3-7.7-7.3-8.6-1.4-.3-2.7-.3-4-.1-.7-4.3-4.5-7.5-9-7.5-4.8 0-8.7 3.5-9.1 8-.9-.1-1.8-.2-2.8 0-4.4.6-7.9 4.3-8.2 8.8-.1.8 0 1.5.1 2.2.4 2.2 2.3 3.8 4.5 3.8h31.2c1.9.1 3.7-1.3 4.2-3.2Z",fill:"#31bccc"}),E("path",{d:"M266.4 68a2.3 2.3 0 1 0 0-4.6 2.3 2.3 0 0 0 0 4.6ZM276.1 68a2.3 2.3 0 1 0 0-4.6 2.3 2.3 0 0 0 0 4.6ZM285.9 68a2.3 2.3 0 1 0 0-4.6 2.3 2.3 0 0 0 0 4.6Z",fill:"#fff"}),E("path",{d:"M258.7 208.3c9.554 0 17.3-7.745 17.3-17.3 0-9.554-7.746-17.3-17.3-17.3-9.555 0-17.3 7.746-17.3 17.3 0 9.555 7.745 17.3 17.3 17.3Z",fill:"#ffdd83"}),E("path",{d:"m250.832 189.684-.02 2.6 15.9.121.02-2.6-15.9-.121Z",fill:"#fff"}),E("path",{d:"m257.483 183.035-.121 15.9 2.6.019.121-15.9-2.6-.019Z",fill:"#fff"}),E("path",{d:"M290.1 89.6c-2.7 15.901-16.5 19.001-16.1 12.101.3-4.7 13.7-5.1 7.7 19.5",stroke:"#0C296E",strokeWidth:".5",strokeMiterlimit:"10",strokeDasharray:"2.51 2.51"})]})}),xQ="_container_5t6vj_3",kQ="_title_5t6vj_10",IQ="_subtitle_5t6vj_25",RQ="_container-selected_5t6vj_41",MQ="_container-selected-focused_5t6vj_48",TQ="_container-next-selected_5t6vj_55",Fl={container:xQ,title:kQ,subtitle:IQ,"container-selected":"_container-selected_5t6vj_41",containerSelected:RQ,"container-selected-focused":"_container-selected-focused_5t6vj_48",containerSelectedFocused:MQ,"container-next-selected":"_container-next-selected_5t6vj_55",containerNextSelected:TQ};function $k(e){if(!e)return null;try{return new URL(e).host}catch{return null}}const LQ=Q.forwardRef((e,t)=>{const n=()=>e.onSelect();return ce("div",{"data-virtual-list-item-id-id":e.id,ref:t,id:e.id,onClick:n,onDoubleClick:()=>e.onDoubleClick(),className:Te({[Fl.container]:!0,[Fl.containerSelected]:e.selected&&!e.focused,[Fl.containerSelectedFocused]:e.selected&&e.focused,[Fl.containerNextSelected]:e.nextSelected}),children:[E("div",{className:Fl.title,children:e.title}),ce("div",{className:Fl.subtitle,children:[E("span",{children:E("img",{src:QL})}),E("span",{children:$k(e.link)&&$k(e.link)}),E("span",{children:" · "}),E("span",{children:Oo(e.firstAddTime).format("YYYY-MM-DD")})]})]},e.id)}),AQ="_webpage-list_jj2qg_1",OQ={"webpage-list":"_webpage-list_jj2qg_1",webpageList:AQ},PQ=e=>{var s,a,l;const t=e.webpageController;ut(t.list.onSelectItemChange),ut(t.filter.onDidChange),ut(t.onLayoutControllerChange);const n=Ft(It),r=Ft(Yn);n.registerView(t.id,t),Po(Pg),Po(zc),ut((s=t.currentWebpage)==null?void 0:s.onModelChanged),ut(t.toolbar.onStatusChange);const i=Ft(us),o=ce("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[E(CQ,{}),ce(Oc,{children:[z("webpages.no_data","No webpage")," ",E("span",{style:{color:"var(--green)",cursor:"pointer"},onClick:()=>{r.go("upload")},children:z("webpages.go_upload","Upload")})]})]});return E(GA,{layout:t.layout,preview:t.preview,toolbar:E(VA,{noWebpageSelect:!t.currentWebpage,showMenu:t.showMenu,toolbarController:t.toolbar,setShowMenu:c=>t.setShowMenu(c),menus:t.menus,liked:((a=t.currentWebpage)==null?void 0:a.textModel.getProperty().liked)??!1,read:(l=t.currentWebpage)==null?void 0:l.textModel.getProperty().read,leftElement:ce(Q.Fragment,{children:[E(Eq,{activeKey:e.webpageController.layout,options:[{key:"column",keyCode:U.KEY_1|ft.Alt,title:z("webpages_layout.column","Column"),renderIcon:c=>E(V5,{size:c})},{key:"list",keyCode:U.KEY_2|ft.Alt,title:z("webpages_layout.list","List"),renderIcon:c=>E(j5,{size:c})}],onSelectKey:c=>{e.webpageController.setLayout(c)}},"webpage-layout"),E(ki,{active:t.showFilter,title:z("webpage_preview_action.filter","Filter"),keyCode:ft.Alt|U.KEY_F,onClick:()=>{i.executeCommand(rR)},renderIcon:c=>E(W5,{size:c})},"filter")]})}),webpage:E(FO,{pageId:t.pageId,webpageModel:t.currentWebpage}),closeIcon:ce(Q.Fragment,{children:[E(ki,{title:z("webpage_preview_action.close","Close Webpage"),keyCode:U.Escape,onClick:()=>{e.webpageController.hideList()},renderIcon:c=>E(Ef,{size:c})},"close"),E("div",{style:{width:4}}),E(ki,{title:z("webpage_preview_action.previous","Previous Webpage"),keyCode:U.KEY_K,onClick:()=>{e.webpageController.list.selectPrevious()},renderIcon:c=>E(tW,{theme:"filled",size:c})},"previous"),E("div",{style:{width:4}}),E(ki,{title:z("webpage_preview_action.next","Next Webpage"),keyCode:U.KEY_J,onClick:()=>{e.webpageController.list.selectNext()},renderIcon:c=>E($5,{theme:"filled",size:c})},"next"),ce("span",{style:{marginLeft:8},children:[e.webpageController.list.currentIndex+1," /"," ",e.webpageController.list.getList().length]})]}),filter:t.showFilter?E(EQ,{change:t.filterChanged,model:t.filter,filters:t.filters,onReset:()=>{t.resetFilter()},onSave:async()=>{t.saveView()},saveButtonText:z("view_action.save","Save")}):void 0,list:ce("div",{style:{borderRight:"1px solid #e6e6e6",display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},children:[!t.list&&E("div",{style:{overflowY:"scroll",flex:1,padding:16},children:"Loading..."}),E(gm,{className:OQ.webpageList,empty:o,itemHeight:30,list:t.list,renderListItem:(c,{focused:d,nextItem:h})=>E(LQ,{nextSelected:(h==null?void 0:h.id)===t.list.selectId,focused:d,onDoubleClick:()=>{e.webpageController.showWebb()},selected:e.webpageController.list.selectId===c.id,title:c.title,id:c.id,firstAddTime:c.firstAddTime,link:c.link,onSelect:()=>{e.webpageController.list.select(c.id)}},c.id)})]}),showInfo:t.toolbar.rightPanel!==null,info:E(DA,{controller:t.toolbar,model:t.currentWebpage})})};De.registerCommandAndKeybindingRule({id:O3,weight:Fe.WorkbenchContrib+5,primary:U.US_COMMA|ft.CtrlCmd|ft.Shift,handler:e=>{e.get(Yn).go("settings")}});De.registerCommandAndKeybindingRule({id:P3,weight:Fe.WorkbenchContrib+5,primary:U.DownArrow|ft.CtrlCmd|ft.Shift,when:V0,handler:e=>{e.get(Hc).selectNextMenu()}});De.registerCommandAndKeybindingRule({id:N3,weight:Fe.WorkbenchContrib+5,primary:U.UpArrow|ft.CtrlCmd|ft.Shift,when:V0,handler:e=>{const t=e.get(Hc),n=e.get(sl);t.getMenuIndex(t.activeMenuKey)===0?n.focusSearchInput():t.selectPreviousMenu()}});[D3,F3,V3,U3,$3,W3,z3,B3,H3].forEach((e,t)=>{De.registerCommandAndKeybindingRule({id:e,weight:Fe.WorkbenchContrib+5,primary:ft.CtrlCmd|ft.Shift|U.KEY_1+t,handler:n=>{const i=n.get(Hc).getMenuByIndex(t);i&&i.action()}})});const zh=e=>{const{icon:t,...n}=e;switch(e.icon){case"AddWeb":return E(O5,{...n});case"BoxingOne":return E(P5,{...n});case"MessageSent":return E(K5,{...n});case"SettingConfig":return E(eW,{...n});case"Delete":return E(JT,{...n});case"CloseSmall":return E(F5,{...n});case"AddOne":return E(A5,{...n});case"Inbox":return E(B5,{...e});default:return E("div",{style:{color:"red",display:"inline-block",background:"red"},children:e.icon})}},NQ="search.action.focusSearchFromResults",DQ="search.action.selectFirstMenu",FQ="search.action.focusList",GO=new At("searchInputBoxFocus",!1);new At("firstMatchFocus",!1);const VQ="_search-container_1dta6_1",Wk={"search-container":"_search-container_1dta6_1",searchContainer:VQ};De.registerCommandAndKeybindingRule({id:NQ,weight:Fe.WorkbenchContrib+5,primary:ft.CtrlCmd|ft.Shift|U.KEY_F,handler:e=>{e.get(sl).focusSearchInput()}});De.registerCommandAndKeybindingRule({id:DQ,weight:Fe.WorkbenchContrib+5,primary:ft.CtrlCmd|ft.Shift|U.DownArrow,handler:e=>{const n=e.get(Hc).getMenuByIndex(0);n&&n.action()}});De.registerCommandAndKeybindingRule({id:FQ,weight:Fe.WorkbenchContrib+5,when:GO,primary:U.Tab,handler:e=>{e.get(sl).focusSearchList()}});const UQ=()=>{var s;const e=Ft(Yn),t=Ft(sl),[n,r]=v.useState(!1),i=Q.useRef(null);ns(t.onFocusSearchInput,()=>{var a;i.current&&((a=i.current)==null||a.focus(),i.current.select(),r(!0))}),ns(t.onBlurSearchInput,()=>{i.current&&(i.current.blur(),r(!1))});const o=fa(GO);return ut(t.searchModel.onSearchQueryChange),E(No,{placement:"right",title:z("search_input.placeholder","Search"),keyCode:ft.CtrlCmd|ft.Shift|U.KEY_F,visible:n?!1:void 0,children:E("div",{className:Wk.searchContainer,children:E(ta,{value:((s=t.searchModel.searchQuery)==null?void 0:s.query)||"",className:Wk.searchInput,ref:i,onChange:a=>{t.searchModel.search({query:a})},onFocus:()=>{e.go("search"),o.set(!0),r(!0)},onBlur:()=>{o.set(!1),r(!1)},prefix:E(J5,{size:16}),placeholder:z("search_input.placeholder","Search"),allowClear:!0})})})},$Q="_sidebar-menu_15ogg_15",WQ="_sidebar-menu-left_15ogg_24",zQ="_sidebar-icon_15ogg_29",BQ="_sidebar-title_15ogg_43",HQ="_sidebar-extra_15ogg_51",jQ="_sidebar-extra-keep_15ogg_61",KQ="_sidebar-menu-active_15ogg_75",La={"sidebar-menu":"_sidebar-menu_15ogg_15",sidebarMenu:$Q,"sidebar-menu-left":"_sidebar-menu-left_15ogg_24",sidebarMenuLeft:WQ,"sidebar-icon":"_sidebar-icon_15ogg_29",sidebarIcon:zQ,"sidebar-title":"_sidebar-title_15ogg_43",sidebarTitle:BQ,"sidebar-extra":"_sidebar-extra_15ogg_51",sidebarExtra:HQ,"sidebar-extra-keep":"_sidebar-extra-keep_15ogg_61",sidebarExtraKeep:jQ,"sidebar-menu-active":"_sidebar-menu-active_15ogg_75",sidebarMenuActive:KQ},GQ=e=>E(No,{title:e.label,keyCode:e.keyCode,placement:"right",children:ce("div",{"data-test-id":`menu-${e.menuId}`,title:e.title,className:Te({[La.sidebarMenu]:!0,[La.sidebarMenuActive]:e.active}),onClick:e.onClick,children:[ce("div",{className:La.sidebarMenuLeft,children:[!!e.icon&&E("div",{className:La.sidebarIcon,children:e.icon}),E("div",{className:La.sidebarTitle,children:e.label})]}),!!e.extra&&E("div",{onClick:e.onClickExtra,className:Te({[La.sidebarExtra]:!0,[La.sidebarExtraKeep]:e.keepExtra}),children:e.extra})]})}),YQ="_title_1rk57_1",qQ="_sidebar-menu_1rk57_7",QQ="_title-container_1rk57_10",N_={title:YQ,"sidebar-menu":"_sidebar-menu_1rk57_7",sidebarMenu:qQ,"title-container":"_title-container_1rk57_10",titleContainer:QQ},XQ=e=>ce("div",{className:N_.sidebarMenu,children:[ce("div",{className:N_.titleContainer,children:[ce("div",{className:N_.title,children:[e.title," "]}),e.extra&&E("div",{children:e.extra})]}),E("div",{children:e.children})]}),ZQ="_left-sidebar_1oclv_1",JQ="_top-area_1oclv_12",eX="_top-icon_1oclv_19",tX="_top-icon-active_1oclv_39",Bh={"left-sidebar":"_left-sidebar_1oclv_1",leftSidebar:ZQ,"top-area":"_top-area_1oclv_12",topArea:JQ,"top-icon":"_top-icon_1oclv_19",topIcon:eX,"top-icon-active":"_top-icon-active_1oclv_39",topIconActive:tX},nX=()=>{const e=Ft(us),t=Ft(Hc);return ut(t.onStateChange),ce("div",{className:Bh.leftSidebar,children:[E("div",{className:Bh.topArea,children:E(No,{title:t.settings.title,keyCode:t.settings.keyCode,placement:"right",children:E("div",{"data-test-id":"menu-settings",className:Te({[Bh.topIcon]:!0,[Bh.topIconActive]:t.settings.key===t.activeMenuKey}),onClick:()=>t.settings.action(),children:E(zh,{icon:t.settings.icon,size:16})})})}),ce("div",{style:{flex:1},children:[E(UQ,{}),t.menuGroups.map(n=>{const r=n.extra?E("div",{style:{color:"#999999",width:16,height:16},children:E(zh,{title:n.extra.title,onClick:()=>{e.executeCommand(n.extra.commandId)},size:16,icon:n.extra.icon,style:{cursor:"pointer"}})}):null;return E(XQ,{title:n.title,extra:r,children:n.menus.map(i=>{var c;const o=!!i.extra&&i.keepExtra;let s=null;if(i.extra)switch((c=i.extra)==null?void 0:c.type){case"text":{s=E("div",{style:{color:"#333333"},children:i.extra.text});break}case"icon":{s=E(zh,{icon:i.extra.icon,size:16});break}}let a;const l=t.getMenuIndex(i.key);return l!==null&&l<=8&&(a=ft.CtrlCmd|ft.Shift|U.KEY_1+l),E(GQ,{menuId:i.key,active:t.activeMenuKey===i.key,keepExtra:o,keyCode:a,onClick:()=>{i.action()},onClickExtra:()=>{var d,h;(d=i==null?void 0:i.extra)!=null&&d.action&&((h=i.extra)==null||h.action())},icon:i.icon?E(zh,{size:16,icon:i.icon}):void 0,label:i.title,extra:s??void 0},i.key)})},n.key)})]})]})},rX="_app-container_11d7q_1",iX="_app-left_11d7q_7",oX="_app-page_11d7q_11",sX={"app-container":"_app-container_11d7q_1",appContainer:rX,"app-left":"_app-left_11d7q_7",appLeft:iX,"app-page":"_app-page_11d7q_11",appPage:oX};function aX(){const e=Ft(Fo);v.useEffect(()=>{function r(){const i=I0.bindTo(e);function o(){return!!document.activeElement&&(document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA")}const s=o();if(i.set(s),s){const a=rV(document.activeElement);ia.once(a.onDidBlur)(()=>{i.set(o()),a.dispose()})}}return window.addEventListener("focusin",r,!0),()=>{document.removeEventListener("focusin",r)}},[]);const t=Ft(Yn),n=v.useMemo(()=>t.pageInstance.pageId==="settings"?E(TH,{controller:t.pageInstance}):t.pageInstance.pageId==="upload"?E(C5,{}):t.pageInstance.pageId==="search"?E(yq,{searchResultPageController:t.pageInstance}):E(PQ,{webpageController:t.pageInstance}),[t.pageInstance]);return ut(t.onPageInstanceChange),ce("div",{className:sX.appContainer,children:[E(UH,{}),E(Yz,{}),E(iW,{}),ce(ui,{children:[E(ui.Pane,{minSize:120,maxSize:250,preferredSize:160,children:E(nX,{})}),E(ui.Pane,{children:n})]})]})}const lX="_main_v5s5p_1",cX="_container_v5s5p_10",uX="_header_v5s5p_18",dX="_input_v5s5p_24",fX="_input-error_v5s5p_28",hX="_error_v5s5p_32",Vl={main:lX,container:cX,header:uX,input:dX,"input-error":"_input-error_v5s5p_28",inputError:fX,error:hX},pX=()=>{const[e,t]=v.useState(),[n,r]=v.useState(!1),i=async()=>{const o=await fetch("/private/api/login",{method:"post",body:e});o.status===200?window.location.reload():o.status===401&&r(!0)};return E("div",{className:Vl.main,children:ce("div",{className:Vl.container,children:[E("div",{className:Vl.header,children:"Hamsterbase"}),ce("div",{className:Te({[Vl.input]:!0,[Vl.inputError]:n}),children:[E(ta,{type:"password",placeholder:"Input your password",size:"large",onChange:o=>{t(o),r(!1)}}),n&&E("div",{className:Vl.error,children:z("login.password_incorrect","Password incorrect")})]}),E(pr,{type:"primary",onClick:i,size:"large",disabled:!e,children:"Login"})]})})};var gX=Object.defineProperty,mX=Object.getOwnPropertyDescriptor,vX=(e,t,n,r)=>{for(var i=r>1?void 0:r?mX(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&gX(t,n,i),i},_X=(e,t)=>(n,r)=>t(n,r,e);let s0=class{constructor(e){this._instantiationService=e,this._onWillExecuteCommand=new Oe,this._onDidExecuteCommand=new Oe,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event}executeCommand(e,...t){const n=il.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(r)}catch(r){return Promise.reject(r)}}};s0=vX([_X(0,Or)],s0);class xi{constructor(t={},n=[],r=[]){this._contents=t,this._keys=n,this._overrides=r,this.isFrozen=!1}get contents(){return this.checkAndFreeze(this._contents)}get overrides(){return this.checkAndFreeze(this._overrides)}get keys(){return this.checkAndFreeze(this._keys)}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(t){return t?Ip(this.contents,t):this.contents}getOverrideValue(t,n){const r=this.getContentsForOverrideIdentifer(n);return r?t?Ip(r,t):r:void 0}getKeysForOverrideIdentifier(t){for(const n of this.overrides)if(n.identifiers.indexOf(t)!==-1)return n.keys;return[]}override(t){const n=this.getContentsForOverrideIdentifer(t);if(!n||typeof n!="object"||!Object.keys(n).length)return this;let r={};for(const i of Gk([...Object.keys(this.contents),...Object.keys(n)])){let o=this.contents[i],s=n[i];s&&(typeof o=="object"&&typeof s=="object"?(o=Ul(o),this.mergeContents(o,s)):o=s),r[i]=o}return new xi(r,this.keys,this.overrides)}merge(...t){const n=Ul(this.contents),r=Ul(this.overrides),i=[...this.keys];for(const o of t){this.mergeContents(n,o.contents);for(const s of o.overrides){const[a]=r.filter(l=>WN(l.identifiers,s.identifiers));a?this.mergeContents(a.contents,s.contents):r.push(Ul(s))}for(const s of o.keys)i.indexOf(s)===-1&&i.push(s)}return new xi(n,i,r)}freeze(){return this.isFrozen=!0,this}mergeContents(t,n){for(const r of Object.keys(n)){if(r in t&&W_(t[r])&&W_(n[r])){this.mergeContents(t[r],n[r]);continue}t[r]=Ul(n[r])}}checkAndFreeze(t){return this.isFrozen&&!Object.isFrozen(t)?aF(t):t}getContentsForOverrideIdentifer(t){for(const n of this.overrides)if(n.identifiers.indexOf(t)!==-1)return n.contents;return null}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(t,n){this.addKey(t),m0(this.contents,t,n,r=>{throw new Error(r)})}removeValue(t){this.removeKey(t)&&cF(this.contents,t)}addKey(t){let n=this.keys.length;for(let r=0;r<n;r++)t.indexOf(this.keys[r])===0&&(n=r);this.keys.splice(n,1,t)}removeKey(t){let n=this.keys.indexOf(t);return n!==-1?(this.keys.splice(n,1),!0):!1}}class yX extends xi{constructor(){const t=dF(),n=uF(),r=[];for(const i of Object.keys(t))oc.test(i)&&r.push({identifiers:[p0(i).trim()],keys:Object.keys(t[i]),contents:kI(t[i],o=>console.error(`Conflict in default settings file: ${o}`))});super(t,n,r)}}class xm{constructor(t,n,r=new xi,i=new xi,o=new Wl,s=new xi,a=new Wl,l=!0){this._defaultConfiguration=t,this._localUserConfiguration=n,this._remoteUserConfiguration=r,this._workspaceConfiguration=i,this._folderConfigurations=o,this._memoryConfiguration=s,this._memoryConfigurationByResource=a,this._freeze=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Wl,this._userConfiguration=null}getValue(t,n){return this.getConsolidateConfigurationModel(n,void 0).getValue(t)}updateValue(t,n,r={}){let i;r.resource?(i=this._memoryConfigurationByResource.get(r.resource),i||(i=new xi,this._memoryConfigurationByResource.set(r.resource,i))):i=this._memoryConfiguration,n===void 0?i.removeValue(t):i.setValue(t,n),r.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(t,n){const r=this.getConsolidateConfigurationModel(n,void 0),i=this.getFolderConfigurationModelForResource(n.resource,void 0),o=n.resource?this._memoryConfigurationByResource.get(n.resource)||this._memoryConfiguration:this._memoryConfiguration,s=n.overrideIdentifier?this._defaultConfiguration.freeze().override(n.overrideIdentifier).getValue(t):this._defaultConfiguration.freeze().getValue(t),a=n.overrideIdentifier?this.userConfiguration.freeze().override(n.overrideIdentifier).getValue(t):this.userConfiguration.freeze().getValue(t),l=n.overrideIdentifier?this.localUserConfiguration.freeze().override(n.overrideIdentifier).getValue(t):this.localUserConfiguration.freeze().getValue(t),c=n.overrideIdentifier?this.remoteUserConfiguration.freeze().override(n.overrideIdentifier).getValue(t):this.remoteUserConfiguration.freeze().getValue(t),d=void 0,h=i?n.overrideIdentifier?i.freeze().override(n.overrideIdentifier).getValue(t):i.freeze().getValue(t):void 0,p=n.overrideIdentifier?o.override(n.overrideIdentifier).getValue(t):o.getValue(t),g=r.getValue(t),b=Gk(BN(r.overrides.map(k=>k.identifiers))).filter(k=>r.getOverrideValue(t,k)!==void 0);return{defaultValue:s,userValue:a,userLocalValue:l,userRemoteValue:c,workspaceValue:d,workspaceFolderValue:h,memoryValue:p,value:g,default:s!==void 0?{value:this._defaultConfiguration.freeze().getValue(t),override:n.overrideIdentifier?this._defaultConfiguration.freeze().getOverrideValue(t,n.overrideIdentifier):void 0}:void 0,user:a!==void 0?{value:this.userConfiguration.freeze().getValue(t),override:n.overrideIdentifier?this.userConfiguration.freeze().getOverrideValue(t,n.overrideIdentifier):void 0}:void 0,userLocal:l!==void 0?{value:this.localUserConfiguration.freeze().getValue(t),override:n.overrideIdentifier?this.localUserConfiguration.freeze().getOverrideValue(t,n.overrideIdentifier):void 0}:void 0,userRemote:c!==void 0?{value:this.remoteUserConfiguration.freeze().getValue(t),override:n.overrideIdentifier?this.remoteUserConfiguration.freeze().getOverrideValue(t,n.overrideIdentifier):void 0}:void 0,workspace:d!==void 0?{value:this._workspaceConfiguration.freeze().getValue(t),override:n.overrideIdentifier?this._workspaceConfiguration.freeze().getOverrideValue(t,n.overrideIdentifier):void 0}:void 0,workspaceFolder:h!==void 0?{value:i==null?void 0:i.freeze().getValue(t),override:n.overrideIdentifier?i==null?void 0:i.freeze().getOverrideValue(t,n.overrideIdentifier):void 0}:void 0,memory:p!==void 0?{value:o.getValue(t),override:n.overrideIdentifier?o.getOverrideValue(t,n.overrideIdentifier):void 0}:void 0,overrideIdentifiers:b.length?b:void 0}}keys(t){const n=this.getFolderConfigurationModelForResource(void 0,t);return{default:this._defaultConfiguration.freeze().keys,user:this.userConfiguration.freeze().keys,workspace:this._workspaceConfiguration.freeze().keys,workspaceFolder:n?n.freeze().keys:[]}}updateDefaultConfiguration(t){this._defaultConfiguration=t,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(t){this._localUserConfiguration=t,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(t){this._remoteUserConfiguration=t,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(t){this._workspaceConfiguration=t,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(t,n){this._folderConfigurations.set(t,n),this._foldersConsolidatedConfigurations.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this._foldersConsolidatedConfigurations.delete(t)}compareAndUpdateDefaultConfiguration(t,n){const r=n.filter(i=>oc.test(i)).map(i=>{const o=p0(i),s=this._defaultConfiguration.getKeysForOverrideIdentifier(o),a=t.getKeysForOverrideIdentifier(o),l=[...a.filter(c=>s.indexOf(c)===-1),...s.filter(c=>a.indexOf(c)===-1),...s.filter(c=>!Ha(this._defaultConfiguration.override(o).getValue(c),t.override(o).getValue(c)))];return[o,l]});return this.updateDefaultConfiguration(t),{keys:n,overrides:r}}compareAndUpdateLocalUserConfiguration(t){const{added:n,updated:r,removed:i,overrides:o}=$l(this.localUserConfiguration,t),s=[...n,...r,...i];return s.length&&this.updateLocalUserConfiguration(t),{keys:s,overrides:o}}compareAndUpdateRemoteUserConfiguration(t){const{added:n,updated:r,removed:i,overrides:o}=$l(this.remoteUserConfiguration,t);let s=[...n,...r,...i];return s.length&&this.updateRemoteUserConfiguration(t),{keys:s,overrides:o}}compareAndUpdateWorkspaceConfiguration(t){const{added:n,updated:r,removed:i,overrides:o}=$l(this.workspaceConfiguration,t);let s=[...n,...r,...i];return s.length&&this.updateWorkspaceConfiguration(t),{keys:s,overrides:o}}compareAndUpdateFolderConfiguration(t,n){const r=this.folderConfigurations.get(t),{added:i,updated:o,removed:s,overrides:a}=$l(r,n);let l=[...i,...o,...s];return(l.length||!r)&&this.updateFolderConfiguration(t,n),{keys:l,overrides:a}}compareAndDeleteFolderConfiguration(t){const n=this.folderConfigurations.get(t);if(!n)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:r,updated:i,removed:o,overrides:s}=$l(n,void 0);return{keys:[...r,...i,...o],overrides:s}}get defaults(){return this._defaultConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration),this._freeze&&this._userConfiguration.freeze()),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidateConfigurationModel(t,n){let r=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier?r.override(t.overrideIdentifier):r}getConsolidatedConfigurationModelForResource({resource:t},n){return this.getWorkspaceConsolidatedConfiguration()}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration),this._freeze&&(this._workspaceConfiguration=this._workspaceConfiguration.freeze())),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(t){let n=this._foldersConsolidatedConfigurations.get(t);if(!n){const r=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(t);i?(n=r.merge(i),this._freeze&&(n=n.freeze()),this._foldersConsolidatedConfigurations.set(t,n)):n=r}return n}getFolderConfigurationModelForResource(t,n){}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((t,n)=>{const{contents:r,overrides:i,keys:o}=this._folderConfigurations.get(n);return t.push([n,{contents:r,overrides:i,keys:o}]),t},[])}}allKeys(){const t=new Set;return this._defaultConfiguration.freeze().keys.forEach(n=>t.add(n)),this.userConfiguration.freeze().keys.forEach(n=>t.add(n)),this._workspaceConfiguration.freeze().keys.forEach(n=>t.add(n)),this._folderConfigurations.forEach(n=>n.freeze().keys.forEach(r=>t.add(r))),[...t.values()]}getAllKeysForOverrideIdentifier(t){const n=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>n.add(r)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>n.add(r)),this._workspaceConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>n.add(r)),this._folderConfigurations.forEach(r=>r.getKeysForOverrideIdentifier(t).forEach(i=>n.add(i))),[...n.values()]}static parse(t){const n=this.parseConfigurationModel(t.defaults),r=this.parseConfigurationModel(t.user),i=this.parseConfigurationModel(t.workspace),o=t.folders.reduce((s,a)=>(s.set(Lr.revive(a[0]),this.parseConfigurationModel(a[1])),s),new Wl);return new xm(n,r,new xi,i,o,new xi,new Wl,!1)}static parseConfigurationModel(t){return new xi(t.contents,t.keys,t.overrides).freeze()}}class bX{constructor(t,n,r,i){this.change=t,this.previous=n,this.currentConfiguraiton=r,this.currentWorkspace=i,this._previousConfiguration=void 0;const o=new Set;t.keys.forEach(a=>o.add(a)),t.overrides.forEach(([,a])=>a.forEach(l=>o.add(l))),this.affectedKeys=[...o.values()];const s=new xi;this.affectedKeys.forEach(a=>s.setValue(a,{})),this.affectedKeysTree=s.contents}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=xm.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(t,n){if(this.doesAffectedKeysTreeContains(this.affectedKeysTree,t)){if(n){const r=this.previousConfiguration?this.previousConfiguration.getValue(t,n):void 0,i=this.currentConfiguraiton.getValue(t,n);return!Ha(r,i)}return!0}return!1}doesAffectedKeysTreeContains(t,n){let r=kI({[n]:!0},()=>{}),i;for(;typeof r=="object"&&(i=Object.keys(r)[0]);){if(t=t[i],!t)return!1;r=r[i]}return!0}}class SX{constructor(){this._onDidChangeConfiguration=new Oe,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configuration=new xm(new yX,new xi)}getValue(t,n){const r=typeof t=="string"?t:void 0,i=O1(t)?t:O1(n)?n:{};return this._configuration.getValue(r,i,void 0)}updateValues(t){const n={data:this._configuration.toData()};let r=[];for(const i of t){const[o,s]=i;this.getValue(o)!==s&&(this._configuration.updateValue(o,s),r.push(o))}if(r.length>0){const i=new bX({keys:r,overrides:[]},n,this._configuration);i.source=g0.MEMORY,i.sourceConfig=null,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}updateValue(t,n,r,i){return this.updateValues([[t,n]])}inspect(t,n={}){return this._configuration.inspect(t,n,void 0)}keys(){return this._configuration.keys(void 0)}reloadConfiguration(){return Promise.resolve(void 0)}getConfigurationData(){const t={contents:{},keys:[],overrides:[]};return{defaults:t,user:t,workspace:t,folders:[]}}}class wX extends cs{constructor(t,n){super(),this._contextKeyService=t,this._commandService=n,this._onDidUpdateKeybindings=this._register(new Oe),this._currentChord=null,this._currentChordChecker=new RD,this._currentChordStatusMessage=null,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new ID,this._logging=!1}get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:ia.None}get inChordMode(){return!!this._currentChord}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}toggleLogging(){return this._logging=!this._logging,this._logging}_log(t){this._logging&&console.info(`[KeybindingService]: ${t}`)}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(t){return zN(this._getResolver().lookupKeybindings(t).map(n=>n.resolvedKeybinding))}lookupKeybinding(t){const n=this._getResolver().lookupPrimaryKeybinding(t);if(n)return n.resolvedKeybinding}dispatchEvent(t,n){return this._dispatch(t,n)}softDispatch(t,n){const r=this.resolveKeyboardEvent(t);if(r.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),null;const[i]=r.getDispatchParts();if(i===null)return null;const o=this._contextKeyService.getContext(n),s=this._currentChord?this._currentChord.keypress:null;return this._getResolver().resolve(o,s,i)}_enterChordMode(t,n){this._currentChord={keypress:t,label:n};const r=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-r>5e3&&this._leaveChordMode()},500)}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChord=null}dispatchByUserSettingsLabel(t,n){const r=this.resolveUserBinding(t);r.length>=1&&this._doDispatch(r[0],n,!1)}_dispatch(t,n){return this._doDispatch(this.resolveKeyboardEvent(t),n,!1)}_singleModifierDispatch(t,n){const r=this.resolveKeyboardEvent(t),[i]=r.getSingleModifierDispatchParts();return i!==null&&this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i!==null&&i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(r,n,!0)):(this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1)}_doDispatch(t,n,r=!1){let i=!1;if(t.isChord())return console.warn("Unexpected keyboard event mapped to a chord"),!1;let o=null,s=null;if(r){const[d]=t.getSingleModifierDispatchParts();o=d,s=d}else[o]=t.getDispatchParts(),s=this._currentChord?this._currentChord.keypress:null;if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),i;const a=this._contextKeyService.getContext(n),l=t.getLabel(),c=this._getResolver().resolve(a,s,o);return c&&c.enterChord?(i=!0,this._enterChordMode(o,l),i):(this._currentChord&&(!c||!c.commandId)&&(i=!0),this._leaveChordMode(),c&&c.commandId&&(c.bubble||(i=!0),typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,d=>console.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>console.warn(d))),i)}mightProducePrintableCharacter(t){return t.ctrlKey||t.metaKey?!1:t.keyCode>=U.KEY_A&&t.keyCode<=U.KEY_Z||t.keyCode>=U.KEY_0&&t.keyCode<=U.KEY_9}}class zk{constructor(t,n,r,i,o,s,a){this.resolvedKeybinding=t,this.keypressParts=t?Bk(t.getDispatchParts()):[],t&&this.keypressParts.length===0&&(this.keypressParts=Bk(t.getSingleModifierDispatchParts())),this.bubble=n?n.charCodeAt(0)===Ke.Caret:!1,this.command=n,this.commandArgs=r,this.when=i,this.isDefault=o,this.extensionId=s,this.isBuiltinExtension=a}}function Bk(e){let t=[];for(let n=0,r=e.length;n<r;n++){const i=e[n];if(!i)return t;t.push(i)}return t}class km{constructor(t,n,r=n){this.modifierLabels=[null],this.modifierLabels[zi.Macintosh]=t,this.modifierLabels[zi.Windows]=n,this.modifierLabels[zi.Linux]=r}toLabel(t,n,r){if(n.length===0)return null;const i=[];for(let o=0,s=n.length;o<s;o++){const a=n[o],l=r(a);if(l===null)return null;i[o]=IX(a,l,this.modifierLabels[t])}return i.join(" ")}}const EX=new km({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Win",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),CX=new km({ctrlKey:"This is the long form for the Control key on the keyboard",shiftKey:"This is the long form for the Shift key on the keyboard",altKey:"This is the long form for the Alt key on the keyboard",metaKey:"This is the long form for the Command key on the keyboard",separator:"+"},{ctrlKey:"This is the long form for the Control key on the keyboard",shiftKey:"This is the long form for the Shift key on the keyboard",altKey:"This is the long form for the Alt key on the keyboard",metaKey:"This is the long form for the Windows key on the keyboard",separator:"+"},{ctrlKey:"This is the long form for the Control key on the keyboard",shiftKey:"This is the long form for the Shift key on the keyboard",altKey:"This is the long form for the Alt key on the keyboard",metaKey:"This is the long form for the Super key on the keyboard",separator:"+"}),xX=new km({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),kX=new km({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function IX(e,t,n){if(t===null)return"";const r=[];return e.ctrlKey&&r.push(n.ctrlKey),e.shiftKey&&r.push(n.shiftKey),e.altKey&&r.push(n.altKey),e.metaKey&&r.push(n.metaKey),t!==""&&r.push(t),r.join(n.separator)}class RX extends YF{constructor(t,n){if(super(),n.length===0)throw Kk("parts");this._os=t,this._parts=n}getLabel(){return EX.toLabel(this._os,this._parts,t=>this._getLabel(t))}getAriaLabel(){return CX.toLabel(this._os,this._parts,t=>this._getAriaLabel(t))}getElectronAccelerator(){return this._parts.length>1?null:xX.toLabel(this._os,this._parts,t=>this._getElectronAccelerator(t))}getUserSettingsLabel(){return kX.toLabel(this._os,this._parts,t=>this._getUserSettingsLabel(t))}isWYSIWYG(){return this._parts.every(t=>this._isWYSIWYG(t))}isChord(){return this._parts.length>1}getParts(){return this._parts.map(t=>this._getPart(t))}_getPart(t){return new GF(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,this._getLabel(t),this._getAriaLabel(t))}getDispatchParts(){return this._parts.map(t=>this._getDispatchPart(t))}getSingleModifierDispatchParts(){return this._parts.map(t=>this._getSingleModifierDispatchPart(t))}}class Rg extends RX{constructor(t,n){super(n,t.parts)}_keyCodeToUILabel(t){if(this._os===zi.Macintosh)switch(t){case U.LeftArrow:return"←";case U.UpArrow:return"↑";case U.RightArrow:return"→";case U.DownArrow:return"↓"}return Ps.toString(t)}_getLabel(t){return t.isDuplicateModifierCase()?"":this._keyCodeToUILabel(t.keyCode)}_getAriaLabel(t){return t.isDuplicateModifierCase()?"":Ps.toString(t.keyCode)}_keyCodeToElectronAccelerator(t){if(t>=U.NUMPAD_0&&t<=U.NUMPAD_DIVIDE)return null;switch(t){case U.UpArrow:return"Up";case U.DownArrow:return"Down";case U.LeftArrow:return"Left";case U.RightArrow:return"Right"}return Ps.toString(t)}_getElectronAccelerator(t){return t.isDuplicateModifierCase()?null:this._keyCodeToElectronAccelerator(t.keyCode)}_getUserSettingsLabel(t){if(t.isDuplicateModifierCase())return"";const n=Ps.toUserSettingsUS(t.keyCode);return n&&n.toLowerCase()}_isWYSIWYG(){return!0}_getDispatchPart(t){return Rg.getDispatchStr(t)}static getDispatchStr(t){if(t.isModifierKey())return null;let n="";return t.ctrlKey&&(n+="ctrl+"),t.shiftKey&&(n+="shift+"),t.altKey&&(n+="alt+"),t.metaKey&&(n+="meta+"),n+=Ps.toString(t.keyCode),n}_getSingleModifierDispatchPart(t){return t.keyCode===U.Ctrl&&!t.shiftKey&&!t.altKey&&!t.metaKey?"ctrl":t.keyCode===U.Shift&&!t.ctrlKey&&!t.altKey&&!t.metaKey?"shift":t.keyCode===U.Alt&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey?"alt":t.keyCode===U.Meta&&!t.ctrlKey&&!t.shiftKey&&!t.altKey?"meta":null}}class MX extends wX{constructor(t,n,r){super(t,n),this._cachedResolver=null,this._dynamicKeybindings=[],this._register(ad(r,Op.KEY_DOWN,i=>{const o=new oy(i);this._dispatch(o,o.target)&&(o.preventDefault(),o.stopPropagation())})),this._register(ad(r,Op.KEY_UP,i=>{const o=new oy(i);this._singleModifierDispatch(o,o.target)&&o.preventDefault()}))}addDynamicKeybinding(t,n,r,i){const o=iy(n,lo),s=new of;return o&&(this._dynamicKeybindings.push({keybinding:o,command:t,when:i,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}),s.add(rf(()=>{for(let a=0;a<this._dynamicKeybindings.length;a++)if(this._dynamicKeybindings[a].command===t){this._dynamicKeybindings.splice(a,1),this.updateResolver({source:ey.Default});return}}))),s.add(il.registerCommand(t,r)),this.updateResolver({source:ey.Default}),s}updateResolver(t){this._cachedResolver=null,this._onDidUpdateKeybindings.fire(t)}_getResolver(){if(!this._cachedResolver){const t=this._toNormalizedKeybindingItems(De.getDefaultKeybindings(),!0),n=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new ja(t,n,r=>this._log(r))}return this._cachedResolver}_documentHasFocus(){return document.hasFocus()}_toNormalizedKeybindingItems(t,n){let r=[],i=0;for(const o of t){const s=o.when||void 0,a=o.keybinding;if(!a)r[i++]=new zk(void 0,o.command,o.commandArgs,s,n,null,!1);else{const l=this.resolveKeybinding(a);for(const c of l)r[i++]=new zk(c,o.command,o.commandArgs,s,n,null,!1)}}return r}resolveKeybinding(t){return[new Rg(t,lo)]}resolveKeyboardEvent(t){let n=new x0(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,t.keyCode).toChord();return new Rg(n,lo)}resolveUserBinding(t){return[]}_dumpDebugInfo(){return""}_dumpDebugInfoJSON(){return""}registerSchemaContribution(t){}}const gn=new UI,TX=WF();for(const[e,t]of TX)gn.set(e,t);const $i=new w0(gn,!0);gn.set(gr,new Jt(_3));gn.set(sl,new Jt(uy));gn.set(CI,new Jt(SX));gn.set(It,new Jt(R3));gn.set(Fo,new Jt(q_));gn.set(us,new Jt(s0));gn.set(Wc,new Jt(WV));gn.set(ma,new Jt(ky));gn.set(gf,new Jt(w3));gn.set(ga,new Jt(GU));const LX=async()=>{let e;if(window.location.port)e=parseInt(window.location.port,10);else switch(window.location.protocol){case"http:":{e=80;break}case"https:":{e=443;break}}const n=await new aV(void 0).connect(window.location.hostname,e,"/private/ws/ipc","","ws"),r=new jD(new QD(n),"ipc",null);gn.set(sy,Gl.toService(r.getChannel("RemotesManager")));const i=new lV(r.getChannel("PersonToken"));gn.set(KI,i),gn.set($I,Gl.toService(r.getChannel("LegalService"))),gn.set(GI,Gl.toService(r.getChannel("Workspace"))),gn.set(PI,new $F(r.getChannel("WebpagesView"))),gn.set(cf,new uV(r.getChannel("webpages"))),gn.set(SI,Gl.toService(r.getChannel("apiServer"))),gn.set(wc,new Jt(ly)),gn.set(Wp,new Jt(by)),gn.set($p,new Jt(yy)),gn.set(qa,new Jt(ZD)),gn.set(Ng,new Jt(Up)),gn.set(tM,new Jt(xy,[AU])),gn.set(Yn,new Jt(ay));const[o,s,a,l,c,d]=$i.invokeFunction(p=>[p.get(Fo),p.get(us),p.get(wc),p.get(Wp),p.get(sy),p.get(Yn)]);gn.set(E0,new MX(o,s,document.body)),await $i.invokeFunction(p=>p.get($p)).init();const h=$i.invokeFunction(p=>p.get(gf));h.theme==="dark"?qf.enable({}):qf.disable(),h.onThemeChanged(()=>{h.theme==="dark"?qf.enable({}):qf.disable()}),await d.init([{name:"webpages_unread",page:$i.createInstance(Ks)},{name:Za.pageName,page:$i.createInstance(Za)},{name:Qr.pageName,page:$i.createInstance(Qr)},{name:"settings",page:$i.createInstance(gy)},{name:"upload",page:$i.createInstance(my)},{name:"search",page:$i.createInstance(py)}]),l.fetchTokens(),a.init(),$i.invokeFunction(p=>p.get(ma)).init(),$i.invokeFunction(p=>p.get(F0)).init(),as.render(E(DS.Provider,{value:{instantiationService:$i},children:E(aX,{})}),document.getElementById("root"))};fetch("/private/api/login_status").then(e=>{e.status===200?LX():as.render(E(pX,{}),document.getElementById("root"))});
//# sourceMappingURL=index-051dc93a.js.map
